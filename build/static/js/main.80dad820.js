/*! For license information please see main.80dad820.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),v=u(n),g=0;g<a.length;++g){var m=a[g];if(!o[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var y=f(n,m);try{c(t,m,y)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case s:case a:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,F=Object.assign;function M(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){J(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function oe(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var je=!1,Fe=null,Me=!1,Ue=null,Ve={onError:function(e){je=!0,Fe=e}};function Be(e,t,n,r,i,o,a,s,u){je=!1,Fe=null,Le.apply(Ve,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ke(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return ze(i),e;if(a===r)return ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,It=!1,Tt=[],Ct=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Mt(Ct)&&(Ct=null),null!==At&&Mt(At)&&(At=null),null!==Nt&&Mt(Nt)&&(Nt=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Kt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,zt=!0;function Wt(e,t,n,r){var i=kt,o=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=o}}function Ht(e,t,n,r){var i=kt,o=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=o}}function Gt(e,t,n,r){if(zt){var i=Yt(e,t,n,r);if(null===i)zr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=jt(Ct,e,t,n,r,i),!0;case"dragenter":return At=jt(At,e,t,n,r,i),!0;case"mouseover":return Nt=jt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,jt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,jt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=ki(i);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&zr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),hn=F({},cn,{view:0,detail:0}),fn=on(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(dn),vn=on(F({},dn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),mn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=on(yn),bn=on(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var In=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(In),Cn=on(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var jn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Mn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Mr(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var a=lr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Be.apply(this,arguments),je){if(!je)throw Error(o(198));var l=Fe;je=!1,Fe=null,Me||(Me=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=u}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=o,i=we(n),a=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Ir:case Tr:case Cr:u=mn;break;case Ar:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Pe(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ke(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(a,s,u,l,!1),null!==c&&null!==h&&Qr(a,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Xn;else if(zn(s))if(Jn)g=ar;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(y=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Kn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),a.push({event:k,listeners:m}),y?k.data=y:null!==(y=Bn(n))&&(k.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Mr(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Pe(n,o))&&a.unshift(Wr(n,u,s)):i||null!=(u=Pe(n,o))&&a.push(Wr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,gi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ai=Si(!1),Ni=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(o(168));Ii(Ci,t),Ii(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ii(Ci,e),Ii(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ii(Ci,e)):Ei(Ai),Ii(Ai,n)}var Mi=null,Ui=!1,Vi=!1;function Bi(e){null===Mi?Mi=[e]:Mi.push(e)}function Ki(){if(!Vi&&null!==Mi){Vi=!0;var e=0,t=kt;try{var n=Mi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Ui=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ge(Ze,Ki),i}finally{kt=t,Vi=!1}}return null}var qi=[],zi=0,Wi=null,Hi=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){qi[zi++]=Hi,qi[zi++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Xi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===Wi;)Wi=qi[--zi],qi[zi]=null,Hi=qi[--zi],qi[zi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function mo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Si(null),ko=null,bo=null,wo=null;function _o(){wo=bo=ko=null}function xo(e){var t=yo.current;Ei(yo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){ko=e,wo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===ko)throw Error(o(308));bo=e,ko.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var To=null;function Co(e){null===To?To=[e]:To.push(e)}function Ao(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Co(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,Co(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function jo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mo(e,t,n,r){var i=e.updateQueue;Ro=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==o){var h=i.baseState;for(a=0,l=c=u=null,s=o;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Ro=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);ju|=a,e.lanes=a,e.memoizedState=h}}function Uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Vo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Oo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(nc(t,e,i,r),jo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Oo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(nc(t,e,i,r),jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(nc(t,e,r,n),jo(t,e,r))}};function qo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function zo(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Pi(t)?Ni:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Ho(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vo,Po(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Pi(t)?Ni:Ci.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ko.enqueueReplaceState(i,i.state,null),Mo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Vo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Go(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Go(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Go(e,null,t),n.return=e,n;case _:return(t=Mc(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,g=null;null!==h&&v<s.length;v++){h.index>v?(g=h,h=null):g=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,h=g}if(v===s.length)return n(i,h),io&&$i(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return io&&$i(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(g=p(h,i,v,s[v],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?v:g.key),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),io&&$i(i,v),c}function g(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,g),null===h?l=k:h.sibling=k,h=k,v=m}if(y.done)return n(i,v),io&&$i(i,g),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,c))&&(s=a(y,s,g),null===h?l=y:h.sibling=y,h=y);return io&&$i(i,g),l}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),io&&$i(i,g),l}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,l=o;null!==l;){if(l.key===c){if((c=a.type)===x){if(7===l.tag){n(r,l.sibling),(o=i(l,a.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Yo(c)===l.type){n(r,l.sibling),(o=i(l,a.props)).ref=Go(r,l,a),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===x?((o=Lc(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Oc(a.type,a.key,a.props,null,r.mode,u)).ref=Go(r,o,a),u.return=r,r=u)}return s(r);case _:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Mc(a,r.mode,u)).return=r,r=o}return s(r);case P:return e(r,o,(l=a._init)(a._payload),u)}if(te(a))return v(r,o,a,u);if(L(a))return g(r,o,a,u);Qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fc(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Jo=Xo(!0),$o=Xo(!1),Zo={},ea=Si(Zo),ta=Si(Zo),na=Si(Zo);function ra(e){if(e===Zo)throw Error(o(174));return e}function ia(e,t){switch(Ii(na,t),Ii(ta,e),Ii(ea,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),Ii(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ii(ta,e),Ii(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var ua=Si(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function ha(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var fa=b.ReactCurrentDispatcher,da=b.ReactCurrentBatchConfig,pa=0,va=null,ga=null,ma=null,ya=!1,ka=!1,ba=0,wa=0;function _a(){throw Error(o(321))}function xa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,i,a){if(pa=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ka){a=0;do{if(ka=!1,ba=0,25<=a)throw Error(o(301));a+=1,ma=ga=null,t.updateQueue=null,fa.current=cs,e=n(r,i)}while(ka)}if(fa.current=as,t=null!==ga&&null!==ga.next,pa=0,ma=ga=va=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==ba;return ba=0,e}function Ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ma?va.memoizedState=ma=e:ma=ma.next=e,ma}function Ta(){if(null===ga){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ma?va.memoizedState:ma.next;if(null!==t)ma=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ma?va.memoizedState=ma=e:ma=ma.next=e}return ma}function Ca(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,c=null,l=a;do{var h=l.lane;if((pa&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,va.lanes|=h,ju|=h}l=l.next}while(null!==l&&l!==a);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,ju|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Na(e){var t=Ta(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ra(){}function Pa(e,t){var n=va,r=Ta(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,za(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ma&&1&ma.memoizedState.tag){if(n.flags|=2048,Ua(9,Oa.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(o(349));0!==(30&pa)||Da(n,t,i)}return i}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oa(e,t,n,r){t.value=n,t.getSnapshot=r,ja(t)&&Fa(e)}function La(e,t,n){return n((function(){ja(t)&&Fa(e)}))}function ja(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fa(e){var t=No(e,1);null!==t&&nc(t,e,1,-1)}function Ma(e){var t=Ia();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Va(){return Ta().memoizedState}function Ba(e,t,n,r){var i=Ia();va.flags|=e,i.memoizedState=Ua(1|t,n,void 0,void 0===r?null:r)}function Ka(e,t,n,r){var i=Ta();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&xa(r,a.deps))return void(i.memoizedState=Ua(t,n,o,r))}va.flags|=e,i.memoizedState=Ua(1|t,n,o,r)}function qa(e,t){return Ba(8390656,8,e,t)}function za(e,t){return Ka(2048,8,e,t)}function Wa(e,t){return Ka(4,2,e,t)}function Ha(e,t){return Ka(4,4,e,t)}function Ga(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ka(4,4,Ga.bind(null,t,e),n)}function Ya(){}function Xa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,ju|=n,e.baseState=!0),t)}function Za(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{kt=n,da.transition=r}}function es(){return Ta().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ao(e,t,n,r))){nc(n,e,r,ec()),os(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,Co(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ao(e,t,i,r))&&(nc(n,e,r,i=ec()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){ka=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Io,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},ss={readContext:Io,useCallback:function(e,t){return Ia().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:qa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=Ia();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ia();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ia().memoizedState=e},useState:Ma,useDebugValue:Ya,useDeferredValue:function(e){return Ia().memoizedState=e},useTransition:function(){var e=Ma(!1),t=e[0];return e=Za.bind(null,e[1]),Ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ia();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Au)throw Error(o(349));0!==(30&pa)||Da(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,qa(La.bind(null,r,a,e),[e]),r.flags|=2048,Ua(9,Oa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ia(),t=Au.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Io,useCallback:Xa,useContext:Io,useEffect:za,useImperativeHandle:Qa,useInsertionEffect:Wa,useLayoutEffect:Ha,useMemo:Ja,useReducer:Aa,useRef:Va,useState:function(){return Aa(Ca)},useDebugValue:Ya,useDeferredValue:function(e){return $a(Ta(),ga.memoizedState,e)},useTransition:function(){return[Aa(Ca)[0],Ta().memoizedState]},useMutableSource:Ra,useSyncExternalStore:Pa,useId:es,unstable_isNewReconciler:!1},cs={readContext:Io,useCallback:Xa,useContext:Io,useEffect:za,useImperativeHandle:Qa,useInsertionEffect:Wa,useLayoutEffect:Ha,useMemo:Ja,useReducer:Na,useRef:Va,useState:function(){return Na(Ca)},useDebugValue:Ya,useDeferredValue:function(e){var t=Ta();return null===ga?t.memoizedState=e:$a(t,ga.memoizedState,e)},useTransition:function(){return[Na(Ca)[0],Ta().memoizedState]},useMutableSource:Ra,useSyncExternalStore:Pa,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zu||(zu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Oo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oo(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?$o(t,null,n,r):Jo(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Sa(e,t,n,r,o,i),n=Ea(),null===e||bs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Pc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Du,Pu),Pu|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Du,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ii(Du,Pu),Pu|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ii(Du,Pu),Pu|=r;return ws(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var o=Pi(n)?Ni:Ci.current;return o=Ri(t,o),Eo(t,i),n=Sa(e,t,n,r,o,i),r=Ea(),null===e||bs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Cs(e,t,n,r,i){if(Pi(n)){var o=!0;ji(t)}else o=!1;if(Eo(t,i),null===t.stateNode)qs(e,t),zo(t,n,r),Ho(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Io(c):c=Ri(t,c=Pi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Wo(t,a,r,c),Ro=!1;var f=t.memoizedState;a.state=f,Mo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||Ai.current||Ro?("function"===typeof l&&(Bo(t,n,l,r),u=t.memoizedState),(s=Ro||qo(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Do(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:mo(t.type,s),a.props=c,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Io(u):u=Ri(t,u=Pi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&Wo(t,a,r,u),Ro=!1,f=t.memoizedState,a.state=f,Mo(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||Ai.current||Ro?("function"===typeof d&&(Bo(t,n,d,r),p=t.memoizedState),(c=Ro||qo(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){Is(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),zs(e,t,o);r=t.stateNode,ks.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ia(e,t.containerInfo)}function Rs(e,t,n,r,i){return po(),vo(i),t.flags|=256,ws(e,t,n,r),t.child}var Ps,Ds,Os,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ii(ua,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Ms(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,No(e,i),nc(r,e,i,-1))}return vc(),Us(e,t,s,r=hs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),(t=Ms(t,r.children)).flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ms(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&vo(r),Jo(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Bs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ks(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,o);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Pi(t.type)&&Di(),Hs(t),null;case 3:return r=t.stateNode,oa(),Ei(Ai),Ei(Ci),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Hs(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Hs(t),null}if(e=ra(ea.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[di]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ps(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?ge(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Ur("scroll",e):null!=l&&k(e,a,l,u))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ei(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Ou&&(Ou=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return oa(),null===e&&Kr(t.stateNode.containerInfo),Hs(t),null;case 10:return xo(t.type._context),Hs(t),null;case 19:if(Ei(ua),null===(a=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Ws(a,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ca(e))){for(t.flags|=128,Ws(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Ku&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Hs(t),null}else 2*Je()-a.renderingStartTime>Ku&&1073741824!==n&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ua.current,Ii(ua,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qs(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(Ai),Ei(Ci),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ua),null;case 4:return oa(),null;case 10:return xo(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),a||u===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&eu(t,n,o)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Kt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&eu(n,t,a),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(o(160));du(a,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(g){Sc(e,e.return,g)}try{nu(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===a.type&&null!=a.name&&J(i,a),ke(u,s);var l=ke(u,a);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ge(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):d!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Je())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,vu(t,e),Xs=l):vu(t,e),mu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for($s=e,h=e.child;null!==h;){for(f=$s=h;null!==$s;){switch(p=(d=$s).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,$s=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;uu(e,su(e),a);break;default:throw Error(o(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var i=$s,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=a,(Xs=u)&&!c)for($s=i;null!==$s;)u=(a=$s).child,22===a.tag&&null!==a.memoizedState?_u(i):null!==u?(u.return=a,$s=u):_u(i);for(;null!==o;)$s=o,ku(o,t,n),o=o.sibling;$s=i,Ys=s,Xs=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$s=o):bu(e)}}function bu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Uo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Uo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Kt(f)}}}break;default:throw Error(o(163))}Xs||512&t.flags&&iu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function _u(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}break;case 5:var a=t.return;try{iu(t)}catch(u){Sc(t,a,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var xu,Su=Math.ceil,Eu=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Cu=0,Au=null,Nu=null,Ru=0,Pu=0,Du=Si(0),Ou=0,Lu=null,ju=0,Fu=0,Mu=0,Uu=null,Vu=null,Bu=0,Ku=1/0,qu=null,zu=!1,Wu=null,Hu=null,Gu=!1,Qu=null,Yu=0,Xu=0,Ju=null,$u=-1,Zu=0;function ec(){return 0!==(6&Cu)?Je():-1!==$u?$u:$u=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Ru?Ru&-Ru:null!==go.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(o(185));mt(e,n,r),0!==(2&Cu)&&e===Au||(e===Au&&(0===(2&Cu)&&(Fu|=n),4===Ou&&sc(e,Ru)),rc(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(Ku=Je()+500,Ui&&Ki()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=dt(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Au?Ru:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),ai((function(){0===(6&Cu)&&Ki()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($u=-1,Zu=0,0!==(6&Cu))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===Au?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cu;Cu|=2;var a=pc();for(Au===e&&Ru===t||(qu=null,Ku=Je()+500,fc(e,t));;)try{yc();break}catch(u){dc(e,u)}_o(),Eu.current=a,Cu=i,null!==Nu?t=0:(Au=null,Ru=0,t=Ou)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Vu,qu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bu+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,qu),t);break}wc(e,Vu,qu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,qu),r);break}wc(e,Vu,qu);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vu,Vu=n,null!==t&&ac(t)),e}function ac(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~Mu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Cu))throw Error(o(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,qu),rc(e,Je()),null}function cc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Ku=Je()+500,Ui&&Ki())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Cu)&&_c();var t=Cu;Cu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Cu=t))&&Ki()}}function hc(){Pu=Du.current,Ei(Du)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:oa(),Ei(Ai),Ei(Ci),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(ua);break;case 10:xo(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Nu=e=Dc(e.current,null),Ru=Pu=t,Ou=0,Lu=null,Mu=Fu=ju=0,Vu=Uu=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}To=null}return e}function dc(e,t){for(;;){var n=Nu;try{if(_o(),fa.current=as,ya){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,ma=ga=va=null,ka=!1,ba=0,Iu.current=null,null===n||null===n.return){Ou=1,Lu=t,Nu=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(a,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}if(0===(1&t)){gs(a,l,t),vc();break e}c=Error(o(426))}else if(io&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),vo(ls(c,u));break e}}a=c=ls(c,u),4!==Ou&&(Ou=2),null===Uu?Uu=[a]:Uu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,ps(0,c,t));break e;case 1:u=c;var y=a.type,k=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pc(){var e=Eu.current;return Eu.current=as,null===e?as:e}function vc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Au||0===(268435455&ju)&&0===(268435455&Fu)||sc(Au,Ru)}function gc(e,t){var n=Cu;Cu|=2;var r=pc();for(Au===e&&Ru===t||(qu=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(_o(),Cu=n,Eu.current=r,null!==Nu)throw Error(o(261));return Au=null,Ru=0,Ou}function mc(){for(;null!==Nu;)kc(Nu)}function yc(){for(;null!==Nu&&!Ye();)kc(Nu)}function kc(e){var t=xu(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?bc(e):Nu=t,Iu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Pu)))return void(Nu=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Ou=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Ou&&(Ou=5)}function wc(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qu);if(0!==(6&Cu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Au&&(Nu=Au=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Ac(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Cu;Cu|=4,Iu.current=null,function(e,t){if(ei=zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==a||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===a&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:mo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=tu,tu=!1}(e,n),gu(n,e),pr(ti),zt=!!ei,ti=ei=null,e.current=n,yu(n,e,i),Xe(),Cu=u,kt=s,Tu.transition=a}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Yu=i),0===(a=e.pendingLanes)&&(Hu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(zu)throw zu=!1,e=Wu,Wu=null,e;0!==(1&Yu)&&0!==e.tag&&_c(),0!==(1&(a=e.pendingLanes))?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Ki()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function _c(){if(null!==Qu){var e=bt(Yu),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Cu))throw Error(o(331));var i=Cu;for(Cu|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var u=a.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:nu(8,h,a)}var f=h.child;if(null!==f)f.return=h,$s=f;else for(;null!==$s;){var d=(h=$s).sibling,p=h.return;if(ou(h),h===l){$s=null;break}if(null!==d){d.return=p,$s=d;break}$s=p}}}var v=a.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$s=y;break e}$s=a.return}}var k=e.current;for($s=k;null!==$s;){var b=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,$s=b;else e:for(s=k;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){Sc(u,u.return,_)}if(u===s){$s=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,$s=w;break e}$s=u.return}}if(Cu=i,Ki(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function xc(e,t,n){e=Lo(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Lo(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Ru&n)===n&&(4===Ou||3===Ou&&(130023424&Ru)===Ru&&500>Je()-Bu?fc(e,0):Mu|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=No(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ic(e,n)}function Ac(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,a,t);case S:s=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=a,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=a,e;case D:return jc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case T:s=9;break e;case C:s=11;break e;case R:s=14;break e;case P:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,o,a,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Kc(e){if(!e)return Ti;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,o,a,s,u){return(e=Vc(n,r,!0,e,0,o,0,s,u)).context=Kc(null),n=e.current,(o=Oo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(nc(e,i,a,o),jo(e,i,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),po();break;case 5:aa(t);break;case 1:Pi(t.type)&&ji(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ii(ua,1&ua.current),null!==(e=zs(e,t,n))?e.sibling:null);Ii(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ks(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Eo(t,n),i=Sa(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Po(t),i.updater=Ko,t.stateNode=i,i._reactInternals=t,Ho(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=mo(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,mo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Do(e,t),Mo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=zs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Is(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ii(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ai.current){t=zs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Oo(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),So(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),So(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Io(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=mo(r=t.type,t.pendingProps),xs(e,t,r,i=mo(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mo(r,i),qs(e,t),t.tag=1,Pi(r)?(e=!0,ji(t)):e=!1,Eo(t,n),zo(t,r,i),Ho(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Ks(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Wc(a);s.call(e)}}zc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[pi]=a.current,Kr(8===e.nodeType?e.parentNode:e),lc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Kr(8===e.nodeType?e.parentNode:e),lc((function(){zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));zc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){zc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&Cu)&&(Ku=Je()+500,Ki()))}break;case 13:lc((function(){var t=No(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=No(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,cc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Kr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Kr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(o(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=k.prototype=new y;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+C(u,0):o,w(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(a,t,i,"",(function(e){return e}))):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var l=o+C(s=e[c],c);u+=A(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,l=o+C(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=a,t.PureComponent=k,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>o(u,n))c<i&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(g=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,g&&(g=!1,y(I),I=-1),p=!0;var o=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var a=f.callback;if("function"===typeof a){f.callback=null,d=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{f=null,d=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,I=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,x=function(){P.postMessage(null)}}else x=function(){m(N,0)};function D(e){E=e,S||(S=!0,x())}function O(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(g?(y(I),I=-1):g=!0,O(w,o-a))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".c3d17fa1.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="recipe-algo:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,o,a=r[0],s=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkrecipe_algo=self.webpackChunkrecipe_algo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return it},SDK_VERSION:function(){return Nn},_DEFAULT_ENTRY_NAME:function(){return mn},_addComponent:function(){return wn},_addOrOverwriteComponent:function(){return _n},_apps:function(){return kn},_clearComponents:function(){return In},_components:function(){return bn},_getProvider:function(){return Sn},_registerComponent:function(){return xn},_removeServiceInstance:function(){return En},deleteApp:function(){return On},getApp:function(){return Pn},getApps:function(){return Dn},initializeApp:function(){return Rn},onLog:function(){return Fn},registerVersion:function(){return jn},setLogLevel:function(){return Mn}});var t,r=n(791),i=n.t(r,2),o=n(250);function a(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||u(e,t)||c()}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function x(e){var t=k();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function S(e,t,n){return S=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},S.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var T,C="popstate";function A(e){return{usr:e.state,key:e.key}}function N(e,t,n,r){return void 0===n&&(n=null),I({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?P(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function R(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function P(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D(e,n,r,i){void 0===i&&(i={});var o=i,a=o.window,s=void 0===a?document.defaultView:a,u=o.v5Compat,c=void 0!==u&&u,l=s.history,h=t.Pop,f=null;function d(){h=t.Pop,f&&f({action:h,location:p.location})}var p={get action(){return h},get location(){return e(s,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(C,d),f=e,function(){s.removeEventListener(C,d),f=null}},createHref:function(e){return n(s,e)},push:function(e,n){h=t.Push;var i=N(p.location,e,n);r&&r(i,e);var o=A(i),a=p.createHref(i);try{l.pushState(o,"",a)}catch(FL){s.location.assign(a)}c&&f&&f({action:h,location:i})},replace:function(e,n){h=t.Replace;var i=N(p.location,e,n);r&&r(i,e);var o=A(i),a=p.createHref(i);l.replaceState(o,"",a),c&&f&&f({action:h,location:i})},go:function(e){return l.go(e)}};return p}function O(e,t,n){void 0===n&&(n="/");var r=B(("string"===typeof t?P(t):t).pathname||"/",n);if(null==r)return null;var i=L(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=U(i[a],r);return o}function L(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(K(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var a=W([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(K(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),L(e.children,t,s,a)),(null!=e.path||e.index)&&t.push({path:a,score:M(a,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));var j=/^:\w+$/,F=function(e){return"*"===e};function M(e,t){var n=e.split("/"),r=n.length;return n.some(F)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!F(e)})).reduce((function(e,t){return e+(j.test(t)?3:""===t?1:10)}),r)}function U(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=V({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;o.push({params:r,pathname:W([i,l.pathname]),pathnameBase:H(W([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=W([i,l.pathnameBase]))}return o}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],u=s.replace(/(.)\/+$/,"$1"),c=a.slice(1),h=o.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(FL){return q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+FL+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function K(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function z(e,t,n,r){void 0===r&&(r=!1);var i,o="string"===typeof e?P(e):I({},e),a=""===e||""===o.pathname,s=a?"/":o.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;o.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?P(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:G(o),hash:Q(s)}}(o,i),h=s&&"/"!==s&&s.endsWith("/"),f=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var W=function(e){return e.join("/").replace(/\/\/+/g,"/")},H=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},G=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Q=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Y=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(E(Error));var X=v((function e(t,n,r){d(this,e),this.status=t,this.statusText=n||"",this.data=r}));function J(e){return e instanceof X}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}var Z="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ee=r.useState,te=r.useEffect,ne=r.useLayoutEffect,re=r.useDebugValue;function ie(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Z(n,r)}catch(FL){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var oe=r.createContext(null);var ae=r.createContext(null);var se=r.createContext(null);var ue=r.createContext(null);var ce=r.createContext(null);var le=r.createContext(null);var he=r.createContext({outlet:null,matches:[]});var fe=r.createContext(null);function de(){return null!=r.useContext(le)}function pe(){return de()||K(!1),r.useContext(le).location}function ve(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function ge(){de()||K(!1);var e=r.useContext(ce),t=e.basename,n=e.navigator,i=r.useContext(he).matches,o=pe().pathname,a=JSON.stringify(ve(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var u=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=z(e,JSON.parse(a),o,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:W([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,a,o]);return u}function me(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(he).matches,o=pe().pathname,a=JSON.stringify(ve(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return z(e,JSON.parse(a),o,"path"===n)}),[e,a,o,n])}function ye(){var e=function(){var e,t=r.useContext(fe),n=xe(ke.UseRouteError),i=r.useContext(he),o=i.matches[i.matches.length-1];if(t)return t;return i||K(!1),!o.route.id&&K(!1),null==(e=n.errors)?void 0:e[o.route.id]}(),t=J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:a},"errorElement")," props on\xa0",r.createElement("code",{style:a},"<Route>")))}var ke,be=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return v(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(fe.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function we(e){var t=e.routeContext,n=e.match,i=e.children,o=r.useContext(oe);return o&&n.route.errorElement&&(o._deepestRenderedBoundaryId=n.route.id),r.createElement(he.Provider,{value:t},i)}function _e(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,o=null==n?void 0:n.errors;if(null!=o){var a=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));a>=0||K(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((function(e,a,s){var u=a.route.id?null==o?void 0:o[a.route.id]:null,c=n?a.route.errorElement||r.createElement(ye,null):null,l=function(){return r.createElement(we,{match:a,routeContext:{outlet:e,matches:t.concat(i.slice(0,s+1))}},u?c:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===s)?r.createElement(be,{location:n.location,component:c,error:u,children:l()}):l()}),null)}function xe(e){var t=r.useContext(se);return t||K(!1),t}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ke||(ke={}));var Se;function Ee(e){K(!1)}function Ie(e){var n=e.basename,i=void 0===n?"/":n,o=e.children,a=void 0===o?null:o,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;de()&&K(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=P(s));var v=s,g=v.pathname,m=void 0===g?"/":g,y=v.search,k=void 0===y?"":y,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,S=v.key,E=void 0===S?"default":S,I=r.useMemo((function(){var e=B(m,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:E}}),[d,m,k,w,x,E]);return null==I?null:r.createElement(ce.Provider,{value:p},r.createElement(le.Provider,{children:a,value:{location:I,navigationType:c}}))}function Te(e){var n=e.children,i=e.location,o=r.useContext(ae);return function(e,n){de()||K(!1);var i,o=r.useContext(se),a=r.useContext(he).matches,s=a[a.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,pe());if(n){var h,f="string"===typeof n?P(n):n;"/"===c||(null==(h=f.pathname)?void 0:h.startsWith(c))||K(!1),i=f}else i=l;var d=i.pathname||"/",p=O(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=_e(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:W([c,e.pathname]),pathnameBase:"/"===e.pathnameBase?c:W([c,e.pathnameBase])})})),a,o||void 0);return n?r.createElement(le.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},v):v}(o&&!n?o.router.routes:Ae(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Se||(Se={}));var Ce=new Promise((function(){}));r.Component;function Ae(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Ee&&K(!1);var o=[].concat(f(t),[i]),a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=Ae(e.props.children,o)),n.push(a)}else n.push.apply(n,Ae(e.props.children,t))})),n}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function Re(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Pe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function De(e){var t=e.basename,n=e.children,i=e.window,o=r.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),D((function(e,t){var n=e.location;return N("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:R(t)}),null,e)}({window:i,v5Compat:!0}));var a=o.current,s=l(r.useState({action:a.action,location:a.location}),2),u=s[0],c=s[1];return r.useLayoutEffect((function(){return a.listen(c)}),[a]),r.createElement(Ie,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:a})}var Oe=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,o=e.reloadDocument,a=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,h=Re(e,Pe),f=function(e,t){var n=(void 0===t?{}:t).relative;de()||K(!1);var i=r.useContext(ce),o=i.basename,a=i.navigator,s=me(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==o&&(h="/"===c?o:W([o,c])),a.createHref({pathname:h,search:l,hash:u})}(c,{relative:i}),d=function(e,t){var n=void 0===t?{}:t,i=n.target,o=n.replace,a=n.state,s=n.preventScrollReset,u=n.relative,c=ge(),l=pe(),h=me(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==o?o:R(l)===R(h);c(e,{replace:n,state:a,preventScrollReset:s,relative:u})}}),[l,c,h,o,a,i,e,s,u])}(c,{replace:a,state:s,target:u,preventScrollReset:l,relative:i});return r.createElement("a",Ne({},h,{href:f,onClick:o?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:u}))}));function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var Fe=!1,Me=!1,Ue="${JSCORE_VERSION}",Ve=function(e,t){if(!e)throw Be(t)},Be=function(e){return new Error("Firebase Database ("+Ue+") INTERNAL ASSERT FAILED: "+e)},Ke=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ke(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ze=function(e){var t=Ke(e);return qe.encodeByteArray(t,!0)},We=function(e){return ze(e).replace(/\./g,"")},He=function(e){try{return qe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ge(e[n],t[n]));return e}var Qe=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ye(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(o)),""].join(".")}function Xe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function $e(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ze(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function et(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function tt(){var e=Xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nt(){return!0===Fe||!0===Me}function rt(){return"object"===typeof indexedDB}var it=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(w(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(o),ot.prototype.create),o}return v(n)}(E(Error)),ot=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?at(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),a=new it(n,o,t);return a}}]),e}();function at(e,t){return e.replace(st,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var st=/\{\$([^}]+)}/g;function ut(e){return JSON.parse(e)}function ct(e){return JSON.stringify(e)}var lt=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=ut(He(o[0])||""),n=ut(He(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function dt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function vt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],u=t[a];if(gt(s)&&gt(u)){if(!vt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function gt(e){return null!==e&&"object"===typeof e}function mt(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function yt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function kt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var bt=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return v(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=n[o-3]^n[o-8]^n[o-14]^n[o-16];n[o]=4294967295&(a<<1|a>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}]),e}();function wt(e,t){var n=new _t(e,t);return n.subscribe.bind(n)}var _t=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=je(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=xt),void 0===r.error&&(r.error=xt),void 0===r.complete&&(r.complete=xt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function xt(){}var St=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Et(e,t){return"".concat(e," failed: ").concat(t," argument ")}function It(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Et(e,t)+"must be a valid function.")}function Tt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Et(e,t)+"must be a valid context object.")}var Ct=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function At(e){return e&&e._delegate?e._delegate:e}function Nt(){Nt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==t&&n.call(g,i)&&(p=g);var m=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==b(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(k.prototype),s(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(m),s(m,a,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Rt(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(FL){return void n(FL)}s.done?t(u):Promise.resolve(u).then(r,i)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Rt(o,r,i,a,s,"next",e)}function s(e){Rt(o,r,i,a,s,"throw",e)}a(void 0)}))}}var Dt=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ot="[DEFAULT]",Lt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Qe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ot})}catch(u){}var t,n=je(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],o=r[1],a=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:a});o.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=je(this.instancesDeferred.entries());try{for(a.s();!(i=a.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(o)}}catch(f){a.e(f)}finally{a.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=je(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(a){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jt(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.component?this.component.multipleInstances?e:Ot:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function jt(e){return e===Ot?void 0:e}var Ft,Mt,Ut=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Lt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Vt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Mt||(Mt={}));var Bt={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},Kt=Mt.INFO,qt=(Le(Ft={},Mt.DEBUG,"log"),Le(Ft,Mt.VERBOSE,"log"),Le(Ft,Mt.INFO,"info"),Le(Ft,Mt.WARN,"warn"),Le(Ft,Mt.ERROR,"error"),Ft),zt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=qt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(a))}},Wt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Kt,this._logHandler=zt,this._userLogHandler=null,Vt.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Mt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Bt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Mt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Mt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.INFO].concat(t)),this._logHandler.apply(this,[this,Mt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.WARN].concat(t)),this._logHandler.apply(this,[this,Mt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.ERROR].concat(t)),this._logHandler.apply(this,[this,Mt.ERROR].concat(t))}}]),e}();function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt,Yt;var Xt=new WeakMap,Jt=new WeakMap,$t=new WeakMap,Zt=new WeakMap,en=new WeakMap;var tn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Jt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function nn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Yt||(Yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(an(this),n),on(Xt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return on(e.apply(an(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[an(this),t].concat(r));return $t.set(o,t.sort?t.sort():[t]),on(o)}}function rn(e){return"function"===typeof e?nn(e):(e instanceof IDBTransaction&&function(e){if(!Jt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Jt.set(e,t)}}(e),t=e,(Qt||(Qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,tn):e);var t}function on(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(on(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&Xt.set(t,e)})).catch((function(){})),en.set(t,e),t}(e);if(Zt.has(e))return Zt.get(e);var t=rn(e);return t!==e&&(Zt.set(e,t),en.set(t,e)),t}var an=function(e){return en.get(e)};var sn,un,cn=["get","getKey","getAll","getAllKeys","count"],ln=["put","add","delete","clear"],hn=new Map;function fn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(hn.get(t))return hn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ln.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||cn.includes(n))){var o=function(){var e=Pt(Nt().mark((function e(t){var o,a,s,u,c,l,h=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,c),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return hn.set(t,o),o}}}tn=function(e){return Gt(Gt({},e),{},{get:function(t,n,r){return fn(t,n)||e.get(t,n,r)},has:function(t,n){return!!fn(t,n)||e.has(t,n)}})}(tn);var dn=function(){function e(t){d(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var pn="@firebase/app",vn="0.7.32",gn=new Wt("@firebase/app"),mn="[DEFAULT]",yn=(Le(sn={},pn,"fire-core"),Le(sn,"@firebase/app-compat","fire-core-compat"),Le(sn,"@firebase/analytics","fire-analytics"),Le(sn,"@firebase/analytics-compat","fire-analytics-compat"),Le(sn,"@firebase/app-check","fire-app-check"),Le(sn,"@firebase/app-check-compat","fire-app-check-compat"),Le(sn,"@firebase/auth","fire-auth"),Le(sn,"@firebase/auth-compat","fire-auth-compat"),Le(sn,"@firebase/database","fire-rtdb"),Le(sn,"@firebase/database-compat","fire-rtdb-compat"),Le(sn,"@firebase/functions","fire-fn"),Le(sn,"@firebase/functions-compat","fire-fn-compat"),Le(sn,"@firebase/installations","fire-iid"),Le(sn,"@firebase/installations-compat","fire-iid-compat"),Le(sn,"@firebase/messaging","fire-fcm"),Le(sn,"@firebase/messaging-compat","fire-fcm-compat"),Le(sn,"@firebase/performance","fire-perf"),Le(sn,"@firebase/performance-compat","fire-perf-compat"),Le(sn,"@firebase/remote-config","fire-rc"),Le(sn,"@firebase/remote-config-compat","fire-rc-compat"),Le(sn,"@firebase/storage","fire-gcs"),Le(sn,"@firebase/storage-compat","fire-gcs-compat"),Le(sn,"@firebase/firestore","fire-fst"),Le(sn,"@firebase/firestore-compat","fire-fst-compat"),Le(sn,"fire-js","fire-js"),Le(sn,"firebase","fire-js-all"),sn),kn=new Map,bn=new Map;function wn(e,t){try{e.container.addComponent(t)}catch(n){gn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _n(e,t){e.container.addOrOverwriteComponent(t)}function xn(e){var t=e.name;if(bn.has(t))return gn.debug("There were multiple attempts to register component ".concat(t,".")),!1;bn.set(t,e);var n,r=je(kn.values());try{for(r.s();!(n=r.n()).done;){wn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Sn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function En(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn;Sn(e,t).clearInstance(n)}function In(){bn.clear()}var Tn=(Le(un={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(un,"bad-app-name","Illegal App name: '{$appName}"),Le(un,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Le(un,"app-deleted","Firebase App named '{$appName}' already deleted"),Le(un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Le(un,"invalid-log-argument","First argument to `onLog` must be null or a function."),Le(un,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),un),Cn=new ot("app","Firebase",Tn),An=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dt("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}]),e}(),Nn="9.9.4";function Rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:mn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Cn.create("bad-app-name",{appName:String(i)});var o=kn.get(i);if(o){if(vt(e,o.options)&&vt(r,o.config))return o;throw Cn.create("duplicate-app",{appName:i})}var a,s=new Ut(i),u=je(bn.values());try{for(u.s();!(a=u.n()).done;){var c=a.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new An(e,r,s);return kn.set(i,l),l}function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=kn.get(e);if(!t)throw Cn.create("no-app",{appName:e});return t}function Dn(){return Array.from(kn.values())}function On(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!kn.has(n)){e.next=6;break}return kn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jn(e,t,n){var r,i=null!==(r=yn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void gn.warn(s.join(" "))}xn(new Dt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Fn(e,t){if(null!==e&&"function"!==typeof e)throw Cn.create("invalid-log-argument");!function(e,t){var n,r=je(Vt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Bt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Mt[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}(e,t)}function Mn(e){var t;t=e,Vt.forEach((function(e){e.setLogLevel(t)}))}var Un="firebase-heartbeat-store",Vn=null;function Bn(){return Vn||(Vn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),u=on(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(on(s.result),e.oldVersion,e.newVersion,on(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Un)}}).catch((function(e){throw Cn.create("idb-open",{originalErrorMessage:e.message})}))),Vn}function Kn(e){return qn.apply(this,arguments)}function qn(){return qn=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn();case 3:return r=e.sent,e.abrupt("return",r.transaction(Un).objectStore(Un).get(Hn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof it?gn.warn(e.t0.message):(i=Cn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),gn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),qn.apply(this,arguments)}function zn(e,t){return Wn.apply(this,arguments)}function Wn(){return Wn=Pt(Nt().mark((function e(t,n){var r,i,o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn();case 3:return i=e.sent,o=i.transaction(Un,"readwrite"),a=o.objectStore(Un),e.next=8,a.put(n,Hn(t));case 8:return e.abrupt("return",o.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof it?gn.warn(e.t0.message):(s=Cn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),gn.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Wn.apply(this,arguments)}function Hn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Gn=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new $n(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Qn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Qn(),n=Yn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=We(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qn(){return(new Date).toISOString().substring(0,10)}function Yn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),o=je(e);try{var a=function(){var e=t.value,o=r.find((function(t){return t.agent===e.agent}));if(o){if(o.dates.push(e.date),Zn(r)>n)return o.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Zn(r)>n)return r.pop(),"break";i=i.slice(1)};for(o.s();!(t=o.n()).done;){var s=a();if("break"===s)break}}catch(u){o.e(u)}finally{o.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xn,Jn,$n=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(FL){t(FL)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Kn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Zn(e){return We(JSON.stringify({version:2,heartbeats:e})).length}Xn="",xn(new Dt("platform-logger",(function(e){return new dn(e)}),"PRIVATE")),xn(new Dt("heartbeat",(function(e){return new Gn(e)}),"PRIVATE")),jn(pn,vn,Xn),jn(pn,vn,"esm2017"),jn("fire-js","");var er=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,wn(t,new Dt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),On(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){wn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){_n(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),tr=(Le(Jn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(Jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Jn),nr=new ot("app-compat","Firebase",tr);var rr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Rn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ht(n,i.name))return n[i.name];var o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:jn,setLogLevel:Mn,onLog:Fn,apps:null,SDK_VERSION:Nn,INTERNAL:{registerComponent:function(e){var n=e.name,o=n.replace("-compat","");if(xn(e)&&"PUBLIC"===e.type){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw nr.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&Ge(a,e.serviceProps),r[o]=a,t.prototype[o]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ht(n,e=e||mn))throw nr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(er);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ge(n,e)},createSubscribe:wt,ErrorFactory:ot,deepExtend:Ge}),n}(),ir=new Wt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ir.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var or=self.firebase.SDK_VERSION;or&&or.indexOf("LITE")>=0&&ir.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ar=rr;!function(e){jn("@firebase/app-compat","0.1.33",e)}();function sr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function ur(){return ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=sr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ur.apply(this,arguments)}ar.registerVersion("firebase","9.9.4","app-compat");var cr,lr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},hr={},fr=fr||{},dr=lr||self;function pr(){}function vr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var mr="closure_uid_"+(1e9*Math.random()>>>0),yr=0;function kr(e,t,n){return e.call.apply(e.bind,arguments)}function br(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wr(e,t,n){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kr:br).apply(null,arguments)}function _r(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function xr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Sr(){this.s=this.s,this.o=this.o}var Er={};Sr.prototype.s=!1,Sr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,mr)&&e[mr]||(e[mr]=++yr)}(this);delete Er[e]}},Sr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ir=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Tr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function Cr(e){return Array.prototype.concat.apply([],arguments)}function Ar(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nr(e){return/^[\s\xa0]*$/.test(e)}var Rr,Pr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Dr(e,t){return-1!=e.indexOf(t)}function Or(e,t){return e<t?-1:e>t?1:0}e:{var Lr=dr.navigator;if(Lr){var jr=Lr.userAgent;if(jr){Rr=jr;break e}}Rr=""}function Fr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Mr(e){var t={};for(var n in e)t[n]=e[n];return t}var Ur="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Ur.length;o++)n=Ur[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Br(e){return Br[" "](e),e}Br[" "]=pr;var Kr,qr=Dr(Rr,"Opera"),zr=Dr(Rr,"Trident")||Dr(Rr,"MSIE"),Wr=Dr(Rr,"Edge"),Hr=Wr||zr,Gr=Dr(Rr,"Gecko")&&!(Dr(Rr.toLowerCase(),"webkit")&&!Dr(Rr,"Edge"))&&!(Dr(Rr,"Trident")||Dr(Rr,"MSIE"))&&!Dr(Rr,"Edge"),Qr=Dr(Rr.toLowerCase(),"webkit")&&!Dr(Rr,"Edge");function Yr(){var e=dr.document;return e?e.documentMode:void 0}e:{var Xr="",Jr=function(){var e=Rr;return Gr?/rv:([^\);]+)(\)|;)/.exec(e):Wr?/Edge\/([\d\.]+)/.exec(e):zr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Qr?/WebKit\/(\S+)/.exec(e):qr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Jr&&(Xr=Jr?Jr[1]:""),zr){var $r=Yr();if(null!=$r&&$r>parseFloat(Xr)){Kr=String($r);break e}}Kr=Xr}var Zr,ei={};function ti(){return function(e){var t=ei;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Pr(String(Kr)).split("."),n=Pr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=Or(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Or(0==o[2].length,0==a[2].length)||Or(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(dr.document&&zr){var ni=Yr();Zr=ni||(parseInt(Kr,10)||void 0)}else Zr=void 0;var ri=Zr,ii=function(){if(!dr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{dr.addEventListener("test",pr,t),dr.removeEventListener("test",pr,t)}catch(n){}return e}();function oi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ai(e,t){if(oi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Gr){e:{try{Br(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:si[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ai.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},xr(ai,oi);var si={2:"touch",3:"pen",4:"mouse"};ai.prototype.h=function(){ai.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ui="closure_listenable_"+(1e6*Math.random()|0),ci=0;function li(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ci,this.ca=this.fa=!1}function hi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fi(e){this.src=e,this.g={},this.h=0}function di(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Ir(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(hi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pi(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}fi.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=pi(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new li(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var vi="closure_lm_"+(1e6*Math.random()|0),gi={};function mi(e,t,n,r,i){if(r&&r.once)return ki(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)mi(e,t[o],n,r,i);return null}return n=Ii(n),e&&e[ui]?e.N(t,n,gr(r)?!!r.capture:!!r,i):yi(e,t,n,!1,r,i)}function yi(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=gr(i)?!!i.capture:!!i,s=Si(e);if(s||(e[vi]=s=new fi(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ii||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_i(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ki(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ki(e,t[o],n,r,i);return null}return n=Ii(n),e&&e[ui]?e.O(t,n,gr(r)?!!r.capture:!!r,i):yi(e,t,n,!0,r,i)}function bi(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)bi(e,t[o],n,r,i);else r=gr(r)?!!r.capture:!!r,n=Ii(n),e&&e[ui]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=pi(o=e.g[t],n,r,i))&&(hi(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Si(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pi(t,n,r,i)),(n=-1<e?t[e]:null)&&wi(n))}function wi(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ui])di(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_i(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Si(t))?(di(n,e),0==n.h&&(n.src=null,t[vi]=null)):hi(e)}}}function _i(e){return e in gi?gi[e]:gi[e]="on"+e}function xi(e,t){if(e.ca)e=!0;else{t=new ai(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&wi(e),e=n.call(r,t)}return e}function Si(e){return(e=e[vi])instanceof fi?e:null}var Ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ii(e){return"function"===typeof e?e:(e[Ei]||(e[Ei]=function(t){return e.handleEvent(t)}),e[Ei])}function Ti(){Sr.call(this),this.i=new fi(this),this.P=this,this.I=null}function Ci(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new oi(t,e);else if(t instanceof oi)t.target=t.target||e;else{var i=t;Vr(t=new oi(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Ai(a,r,!0,t)&&i}if(i=Ai(a=t.g=e,r,!0,t)&&i,i=Ai(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Ai(a=t.g=n[o],r,!1,t)&&i}function Ai(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&di(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}xr(Ti,Sr),Ti.prototype[ui]=!0,Ti.prototype.removeEventListener=function(e,t,n,r){bi(this,e,t,n,r)},Ti.prototype.M=function(){if(Ti.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hi(n[r]);delete t.g[e],t.h--}}this.I=null},Ti.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ti.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ni=dr.JSON.stringify;function Ri(){var e=Ui,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pi,Di=function(){function e(){d(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=Oi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Oi=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Li}),(function(e){return e.reset()})),Li=function(){function e(){d(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ji(e){dr.setTimeout((function(){throw e}),0)}function Fi(e,t){Pi||function(){var e=dr.Promise.resolve(void 0);Pi=function(){e.then(Vi)}}(),Mi||(Pi(),Mi=!0),Ui.add(e,t)}var Mi=!1,Ui=new Di;function Vi(){for(var e;e=Ri();){try{e.h.call(e.g)}catch(n){ji(n)}var t=Oi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Mi=!1}function Bi(e,t){Ti.call(this),this.h=e||1,this.g=t||dr,this.j=wr(this.kb,this),this.l=Date.now()}function Ki(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function qi(e,t,n){if("function"===typeof e)n&&(e=wr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wr(e.handleEvent,e)}return 2147483647<Number(t)?-1:dr.setTimeout(e,t||0)}function zi(e){e.g=qi((function(){e.g=null,e.i&&(e.i=!1,zi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}xr(Bi,Ti),(cr=Bi.prototype).da=!1,cr.S=null,cr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ci(this,"tick"),this.da&&(Ki(this),this.start()))}},cr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},cr.M=function(){Bi.Z.M.call(this),Ki(this),delete this.g};var Wi=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:zi(this)}},{key:"M",value:function(){ur(y(n.prototype),"M",this).call(this),this.g&&(dr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Sr);function Hi(e){Sr.call(this),this.h=e,this.g={}}xr(Hi,Sr);var Gi=[];function Qi(e,t,n,r){Array.isArray(n)||(n&&(Gi[0]=n.toString()),n=Gi);for(var i=0;i<n.length;i++){var o=mi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Yi(e){Fr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&wi(e)}),e),e.g={}}function Xi(){this.g=!0}function Ji(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ni(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Hi.prototype.M=function(){Hi.Z.M.call(this),Yi(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xi.prototype.Aa=function(){this.g=!1},Xi.prototype.info=function(){};var $i={},Zi=null;function eo(){return Zi=Zi||new Ti}function to(e){oi.call(this,$i.Ma,e)}function no(e){var t=eo();Ci(t,new to(t,e))}function ro(e,t){oi.call(this,$i.STAT_EVENT,e),this.stat=t}function io(e){var t=eo();Ci(t,new ro(t,e))}function oo(e,t){oi.call(this,$i.Na,e),this.size=t}function ao(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return dr.setTimeout((function(){e()}),t)}$i.Ma="serverreachability",xr(to,oi),$i.STAT_EVENT="statevent",xr(ro,oi),$i.Na="timingevent",xr(oo,oi);var so={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},uo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function co(){}function lo(e){return e.h||(e.h=e.i())}function ho(){}co.prototype.h=null;var fo,po={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vo(){oi.call(this,"d")}function go(){oi.call(this,"c")}function mo(){}function yo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Hi(this),this.P=bo,e=Hr?125:void 0,this.W=new Bi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ko}function ko(){this.i=null,this.g="",this.h=!1}xr(vo,oi),xr(go,oi),xr(mo,co),mo.prototype.g=function(){return new XMLHttpRequest},mo.prototype.i=function(){return{}},fo=new mo;var bo=45e3,wo={},_o={};function xo(e,t,n){e.K=1,e.v=Ho(Vo(t)),e.s=n,e.U=!0,So(e,null)}function So(e,t){e.F=Date.now(),Co(e),e.A=Vo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),oa(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ko,e.g=ss(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Wi(wr(e.Ia,e,e.g),e.O)),Qi(e.V,e.g,"readystatechange",e.gb),t=e.H?Mr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),no(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Eo(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Io(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=To(e,n))==_o){4==t&&(e.o=4,io(14),i=!1),Ji(e.j,e.m,null,"[Incomplete Response]");break}if(r==wo){e.o=4,io(15),Ji(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ji(e.j,e.m,r,null),Do(e,r)}Eo(e)&&r!=_o&&r!=wo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,io(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Za(t),t.L=!0,io(11))):(Ji(e.j,e.m,n,"[Invalid Chunked Response]"),Po(e),Ro(e))}function To(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?_o:(n=Number(t.substring(n,r)),isNaN(n)?wo:(r+=1)+n>t.length?_o:(t=t.substr(r,n),e.C=r+n,t))}function Co(e){e.Y=Date.now()+e.P,Ao(e,e.P)}function Ao(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ao(wr(e.eb,e),t)}function No(e){e.B&&(dr.clearTimeout(e.B),e.B=null)}function Ro(e){0==e.l.G||e.I||ns(e.l,e)}function Po(e){No(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ki(e.W),Yi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Do(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||da(n.i,e)))if(n.I=e.N,!e.J&&da(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ts(n),za(n)}$a(n),io(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ao(wr(n.ab,n),6e3));if(1>=fa(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else is(n,11)}else if((e.J||n.g==e)&&ts(n),!Nr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Dr(l,"spdy")||Dr(l,"quic")||Dr(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(pa(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Wo(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=as(r,r.H?r.la:null,r.W),d.J){va(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(No(p),Co(p)),r.g=d}else Ja(r);0<n.l.length&&Ga(n)}else"stop"!=o[0]&&"close"!=o[0]||is(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?is(n,7):qa(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}no(4)}catch(o){}}function Oo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(vr(e)||"string"===typeof e)Tr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(vr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(vr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Lo(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Lo)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function jo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Fo(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Fo(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Fo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(cr=yo.prototype).setTimeout=function(e){this.P=e},cr.gb=function(e){e=e.target;var t=this.L;t&&3==Ma(e)?t.l():this.Ia(e)},cr.Ia=function(e){try{if(e==this.g)e:{var t=Ma(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Hr||this.g&&(this.h.h||this.g.ga()||Ua(this.g)))){this.I||4!=t||7==n||no(8==n||0>=r?3:2),No(this);var i=this.g.ba();this.N=i;t:if(Eo(this)){var o=Ua(this.g);e="";var a=o.length,s=4==Ma(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Po(this),Ro(this);var u="";break t}this.h.i=new dr.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nr(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,io(12),Po(this),Ro(this);break e}Ji(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Do(this,i)}this.U?(Io(this,t,u),Hr&&this.i&&3==t&&(Qi(this.V,this.W,"tick",this.fb),this.W.start())):(Ji(this.j,this.m,u,null),Do(this,u)),4==t&&Po(this),this.i&&!this.I&&(4==t?ns(this.l,this):(this.i=!1,Co(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,io(12)):(this.o=0,io(13)),Po(this),Ro(this)}}}catch(t){}},cr.fb=function(){if(this.g){var e=Ma(this.g),t=this.g.ga();this.C<t.length&&(No(this),Io(this,e,t),this.i&&4!=e&&Co(this))}},cr.cancel=function(){this.I=!0,Po(this)},cr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(no(3),io(17)),Po(this),this.o=2,Ro(this)):Ao(this,this.Y-e)},(cr=Lo.prototype).R=function(){jo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},cr.T=function(){return jo(this),this.g.concat()},cr.get=function(e,t){return Fo(this.h,e)?this.h[e]:t},cr.set=function(e,t){Fo(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},cr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Mo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Uo(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Uo){this.g=void 0!==t?t:e.g,Bo(this,e.j),this.s=e.s,Ko(this,e.i),qo(this,e.m),this.l=e.l,t=e.h;var n=new ta;n.i=t.i,t.g&&(n.g=new Lo(t.g),n.h=t.h),zo(this,n),this.o=e.o}else e&&(n=String(e).match(Mo))?(this.g=!!t,Bo(this,n[1]||"",!0),this.s=Go(n[2]||""),Ko(this,n[3]||"",!0),qo(this,n[4]),this.l=Go(n[5]||"",!0),zo(this,n[6]||"",!0),this.o=Go(n[7]||"")):(this.g=!!t,this.h=new ta(null,this.g))}function Vo(e){return new Uo(e)}function Bo(e,t,n){e.j=n?Go(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ko(e,t,n){e.i=n?Go(t,!0):t}function qo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zo(e,t,n){t instanceof ta?(e.h=t,function(e,t){t&&!e.j&&(na(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ra(this,t),oa(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Qo(t,Zo)),e.h=new ta(t,e.g))}function Wo(e,t,n){e.h.set(t,n)}function Ho(e){return Wo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Go(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Qo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Yo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Uo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Qo(t,Xo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Qo(t,Xo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Qo(n,"/"==n.charAt(0)?$o:Jo,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Qo(n,ea)),e.join("")};var Xo=/[#\/\?@]/g,Jo=/[#\?:]/g,$o=/[#\?]/g,Zo=/[#\?@]/g,ea=/#/g;function ta(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function na(e){e.g||(e.g=new Lo,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ra(e,t){na(e),t=aa(e,t),Fo(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Fo((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&jo(e)))}function ia(e,t){return na(e),t=aa(e,t),Fo(e.g.h,t)}function oa(e,t,n){ra(e,t),0<n.length&&(e.i=null,e.g.set(aa(e,t),Ar(n)),e.h+=n.length)}function aa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(cr=ta.prototype).add=function(e,t){na(this),this.i=null,e=aa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},cr.forEach=function(e,t){na(this),this.g.forEach((function(n,r){Tr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},cr.T=function(){na(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},cr.R=function(e){na(this);var t=[];if("string"===typeof e)ia(this,e)&&(t=Cr(t,this.g.get(aa(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Cr(t,e[n])}return t},cr.set=function(e,t){return na(this),this.i=null,ia(this,e=aa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},cr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},cr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var sa=v((function e(t,n){d(this,e),this.h=t,this.g=n}));function ua(e){this.l=e||la,dr.PerformanceNavigationTiming?e=0<(e=dr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(dr.g&&dr.g.Ea&&dr.g.Ea()&&dr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ca,la=10;function ha(e){return!!e.h||!!e.g&&e.g.size>=e.j}function fa(e){return e.h?1:e.g?e.g.size:0}function da(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pa(e,t){e.g?e.g.add(t):e.h=t}function va(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ga(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=je(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(o){r.e(o)}finally{r.f()}return n}return Ar(e.i)}function ma(){}function ya(){this.g=new ma}function ka(e,t,n){var r=n||"";try{Oo(e,(function(e,n){var i=e;gr(e)&&(i=Ni(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ba(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function wa(e){this.l=e.$b||null,this.j=e.ib||!1}function _a(e,t){Ti.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=xa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ua.prototype.cancel=function(){if(this.i=ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=je(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ma.prototype.stringify=function(e){return dr.JSON.stringify(e,void 0)},ma.prototype.parse=function(e){return dr.JSON.parse(e,void 0)},xr(wa,co),wa.prototype.g=function(){return new _a(this.l,this.j)},wa.prototype.i=(ca={},function(){return ca}),xr(_a,Ti);var xa=0;function Sa(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ea(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ia(e)}function Ia(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(cr=_a.prototype).open=function(e,t){if(this.readyState!=xa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ia(this)},cr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||dr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},cr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ea(this)),this.readyState=xa},cr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof dr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sa(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},cr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ea(this):Ia(this),3==this.readyState&&Sa(this)}},cr.Ua=function(e){this.g&&(this.response=this.responseText=e,Ea(this))},cr.Ta=function(e){this.g&&(this.response=e,Ea(this))},cr.ha=function(){this.g&&Ea(this)},cr.setRequestHeader=function(e,t){this.v.append(e,t)},cr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},cr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ta=dr.JSON.parse;function Ca(e){Ti.call(this),this.headers=new Lo,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Aa,this.K=this.L=!1}xr(Ca,Ti);var Aa="",Na=/^https?$/i,Ra=["POST","PUT"];function Pa(e){return"content-type"==e.toLowerCase()}function Da(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Oa(e),ja(e)}function Oa(e){e.D||(e.D=!0,Ci(e,"complete"),Ci(e,"error"))}function La(e){if(e.h&&"undefined"!=typeof fr&&(!e.C[1]||4!=Ma(e)||2!=e.ba()))if(e.v&&4==Ma(e))qi(e.Fa,0,e);else if(Ci(e,"readystatechange"),4==Ma(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(Mo)[1]||null;if(!o&&dr.self&&dr.self.location){var a=dr.self.location.protocol;o=a.substr(0,a.length-1)}i=!Na.test(o?o.toLowerCase():"")}t=i}if(t)Ci(e,"complete"),Ci(e,"success");else{e.m=6;try{var s=2<Ma(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Oa(e)}}finally{ja(e)}}}function ja(e,t){if(e.g){Fa(e);var n=e.g,r=e.C[0]?pr:null;e.g=null,e.C=null,t||Ci(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Fa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(dr.clearTimeout(e.A),e.A=null)}function Ma(e){return e.g?e.g.readyState:0}function Ua(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Aa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Va(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Fr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Wo(e,t,n))}function Ba(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ka(e){this.za=0,this.l=[],this.h=new Xi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ba("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ba("baseRetryDelayMs",5e3,e),this.$a=Ba("retryDelaySeedMs",1e4,e),this.Ya=Ba("forwardChannelMaxRetries",2,e),this.ra=Ba("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ua(e&&e.concurrentRequestLimit),this.Ca=new ya,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function qa(e){if(Wa(e),3==e.G){var t=e.V++,n=Vo(e.F);Wo(n,"SID",e.J),Wo(n,"RID",t),Wo(n,"TYPE","terminate"),Ya(e,n),(t=new yo(e,e.h,t,void 0)).K=2,t.v=Ho(Vo(n)),n=!1,dr.navigator&&dr.navigator.sendBeacon&&(n=dr.navigator.sendBeacon(t.v.toString(),"")),!n&&dr.Image&&((new Image).src=t.v,n=!0),n||(t.g=ss(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Co(t)}os(e)}function za(e){e.g&&(Za(e),e.g.cancel(),e.g=null)}function Wa(e){za(e),e.u&&(dr.clearTimeout(e.u),e.u=null),ts(e),e.i.cancel(),e.m&&("number"===typeof e.m&&dr.clearTimeout(e.m),e.m=null)}function Ha(e,t){e.l.push(new sa(e.Za++,t)),3==e.G&&Ga(e)}function Ga(e){ha(e.i)||e.m||(e.m=!0,Fi(e.Ha,e),e.C=0)}function Qa(e,t){var n;n=t?t.m:e.V++;var r=Vo(e.F);Wo(r,"SID",e.J),Wo(r,"RID",n),Wo(r,"AID",e.U),Ya(e,r),e.o&&e.s&&Va(r,e.o,e.s),n=new yo(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Xa(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),pa(e.i,n),xo(n,r,t)}function Ya(e,t){e.j&&Oo({},(function(e,n){Wo(t,n,e)}))}function Xa(e,t,n){n=Math.min(e.l.length,n);var r=e.j?wr(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{ka(l,a,"req"+c+"_")}catch(Ls){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ja(e){e.g||e.u||(e.Y=1,Fi(e.Ga,e),e.A=0)}function $a(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ao(wr(e.Ga,e),rs(e,e.A)),e.A++,!0)}function Za(e){null!=e.B&&(dr.clearTimeout(e.B),e.B=null)}function es(e){e.g=new yo(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Vo(e.oa);Wo(t,"RID","rpc"),Wo(t,"SID",e.J),Wo(t,"CI",e.N?"0":"1"),Wo(t,"AID",e.U),Ya(e,t),Wo(t,"TYPE","xmlhttp"),e.o&&e.s&&Va(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ho(Vo(t)),n.s=null,n.U=!0,So(n,e)}function ts(e){null!=e.v&&(dr.clearTimeout(e.v),e.v=null)}function ns(e,t){var n=null;if(e.g==t){ts(e),Za(e),e.g=null;var r=2}else{if(!da(e.i,t))return;n=t.D,va(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ci(r=eo(),new oo(r,n,t,i)),Ga(e)}else Ja(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(fa(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ao(wr(e.Ha,e,t),rs(e,e.C)),e.C++,!0))}(e,t)||2==r&&$a(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:is(e,5);break;case 4:is(e,10);break;case 3:is(e,6);break;default:is(e,2)}}function rs(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function is(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=wr(e.jb,e);n||(n=new Uo("//www.google.com/images/cleardot.gif"),dr.location&&"http"==dr.location.protocol||Bo(n,"https"),Ho(n)),function(e,t){var n=new Xi;if(dr.Image){var r=new Image;r.onload=_r(ba,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_r(ba,n,r,"TestLoadImage: error",!1,t),r.onabort=_r(ba,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_r(ba,n,r,"TestLoadImage: timeout",!1,t),dr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else io(2);e.G=0,e.j&&e.j.va(t),os(e),Wa(e)}function os(e){e.G=0,e.I=-1,e.j&&(0==ga(e.i).length&&0==e.l.length||(e.i.i.length=0,Ar(e.l),e.l.length=0),e.j.ua())}function as(e,t,n){var r=function(e){return e instanceof Uo?Vo(e):new Uo(e,void 0)}(n);if(""!=r.i)t&&Ko(r,t+"."+r.i),qo(r,r.m);else{var i=dr.location;r=function(e,t,n,r){var i=new Uo(null,void 0);return e&&Bo(i,e),t&&Ko(i,t),n&&qo(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Fr(e.aa,(function(e,t){Wo(r,t,e)})),t=e.D,n=e.sa,t&&n&&Wo(r,t,n),Wo(r,"VER",e.ma),Ya(e,r),r}function ss(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Ca(new wa({ib:!0})):new Ca(e.qa)).L=e.H,t}function us(){}function cs(){if(zr&&!(10<=Number(ri)))throw Error("Environmental error: no available transport.")}function ls(e,t){Ti.call(this),this.g=new Ka(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Nr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Nr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ds(this)}function hs(e){vo.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fs(){go.call(this),this.status=1}function ds(e){this.g=e}(cr=Ca.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fo.g(),this.C=this.u?lo(this.u):lo(fo),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Da(this,o)}e=n||"";var i=new Lo(this.headers);r&&Oo(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Pa,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=dr.FormData&&e instanceof dr.FormData,!(0<=Ir(Ra,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fa(this),0<this.B&&((this.K=function(e){return zr&&ti()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=qi(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Da(this,o)}},cr.pa=function(){"undefined"!=typeof fr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ci(this,"timeout"),this.abort(8))},cr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ci(this,"complete"),Ci(this,"abort"),ja(this))},cr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ja(this,!0)),Ca.Z.M.call(this)},cr.Fa=function(){this.s||(this.F||this.v||this.l?La(this):this.cb())},cr.cb=function(){La(this)},cr.ba=function(){try{return 2<Ma(this)?this.g.status:-1}catch(ca){return-1}},cr.ga=function(){try{return this.g?this.g.responseText:""}catch(ca){return""}},cr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ta(t)}},cr.Da=function(){return this.m},cr.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(cr=Ka.prototype).ma=8,cr.G=1,cr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},cr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new yo(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Vr(n=Mr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Xa(this,t,r),Wo(i=Vo(this.F),"RID",e),Wo(i,"CVER",22),this.D&&Wo(i,"X-HTTP-Session-Id",this.D),Ya(this,i),this.o&&n&&Va(i,this.o,n),pa(this.i,t),this.Ra&&Wo(i,"TYPE","init"),this.ja?(Wo(i,"$req",r),Wo(i,"SID","null"),t.$=!0,xo(t,i,null)):xo(t,i,r),this.G=2}}else 3==this.G&&(e?Qa(this,e):0==this.l.length||ha(this.i)||Qa(this))},cr.Ga=function(){if(this.u=null,es(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ao(wr(this.bb,this),e)}},cr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,io(10),za(this),es(this))},cr.ab=function(){null!=this.v&&(this.v=null,za(this),$a(this),io(19))},cr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),io(2)):(this.h.info("Failed to ping google.com"),io(1))},(cr=us.prototype).xa=function(){},cr.wa=function(){},cr.va=function(){},cr.ua=function(){},cr.Oa=function(){},cs.prototype.g=function(e,t){return new ls(e,t)},xr(ls,Ti),ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Fi(wr(e.hb,e,t))),io(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=as(e,null,e.W),Ga(e)},ls.prototype.close=function(){qa(this.g)},ls.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ha(this.g,t)}else this.v?((t={}).__data__=Ni(e),Ha(this.g,t)):Ha(this.g,e)},ls.prototype.M=function(){this.g.j=null,delete this.j,qa(this.g),delete this.g,ls.Z.M.call(this)},xr(hs,vo),xr(fs,go),xr(ds,us),ds.prototype.xa=function(){Ci(this.g,"a")},ds.prototype.wa=function(e){Ci(this.g,new hs(e))},ds.prototype.va=function(e){Ci(this.g,new fs(e))},ds.prototype.ua=function(){Ci(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,uo.COMPLETE="complete",ho.EventType=po,po.OPEN="a",po.CLOSE="b",po.ERROR="c",po.MESSAGE="d",Ti.prototype.listen=Ti.prototype.N,Ca.prototype.listenOnce=Ca.prototype.O,Ca.prototype.getLastError=Ca.prototype.La,Ca.prototype.getLastErrorCode=Ca.prototype.Da,Ca.prototype.getStatus=Ca.prototype.ba,Ca.prototype.getResponseJson=Ca.prototype.Qa,Ca.prototype.getResponseText=Ca.prototype.ga,Ca.prototype.send=Ca.prototype.ea;var ps=hr.createWebChannelTransport=function(){return new cs},vs=hr.getStatEventTarget=function(){return eo()},gs=hr.ErrorCode=so,ms=hr.EventType=uo,ys=hr.Event=$i,ks=hr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},bs=hr.FetchXmlHttpFactory=wa,ws=hr.WebChannel=ho,_s=hr.XhrIo=Ca,xs="@firebase/firestore",Ss=function(){function e(t){d(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");var Es="9.9.4",Is=new Wt("@firebase/firestore");function Ts(){return Is.logLevel}function Cs(e){if(Is.logLevel<=Mt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rs);Is.debug.apply(Is,["Firestore (".concat(Es,"): ").concat(e)].concat(f(i)))}}function As(e){if(Is.logLevel<=Mt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rs);Is.error.apply(Is,["Firestore (".concat(Es,"): ").concat(e)].concat(f(i)))}}function Ns(e){if(Is.logLevel<=Mt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rs);Is.warn.apply(Is,["Firestore (".concat(Es,"): ").concat(e)].concat(f(i)))}}function Rs(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Es,") INTERNAL ASSERTION FAILED: ")+e;throw As(t),new Error(t)}function Ds(e,t){e||Ps()}function Os(e,t){return e}var Ls={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},js=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(it),Fs=v((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ms=v((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Us=function(){function e(){d(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ss.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Vs=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bs=function(){function e(t){d(this,e),this.t=t,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new Fs;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Fs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var a=function(){var t=o;e.enqueueRetryable(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Cs("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),a()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Cs("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fs)}}),0),a()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Cs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ds("string"==typeof n.accessToken),new Ms(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ds(null===e||"string"==typeof e),new Ss(e)}}]),e}(),Ks=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.p=new Map}return v(e,[{key:"I",value:function(){return this.g?this.g():(Ds(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),qs=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new Ks(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ss.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),zs=v((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ws=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Cs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Cs("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Cs("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Cs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ds("string"==typeof t.token),e.A=t.token,new zs(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Hs(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Gs=function(){function e(){d(this,e)}return v(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Hs(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Qs(e,t){return e<t?-1:e>t?1:0}function Ys(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Xs(e){return e+"\0"}var Js=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new js(Ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new js(Ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new js(Ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new js(Ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Qs(this.nanoseconds,e.nanoseconds):Qs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$s=function(){function e(t){d(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Js(0,0))}},{key:"max",value:function(){return new e(new Js(253402300799,999999999))}}]),e}(),Zs=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Ps(),void 0===r?r=t.length-n:r>t.length-n&&Ps(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),eu=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];if(s.indexOf("//")>=0)throw new js(Ls.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,f(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zs),tu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nu=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,o=function(){if(0===r.length)throw new js(Ls.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new js(Ls.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new js(Ls.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new js(Ls.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zs),ru=function(){function e(t){d(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===eu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(eu.fromString(t))}},{key:"fromName",value:function(t){return new e(eu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(eu.emptyPath())}},{key:"comparator",value:function(e,t){return eu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new eu(t.slice()))}}]),e}(),iu=v((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ou(e){return e.fields.find((function(e){return 2===e.kind}))}function au(e){return e.fields.filter((function(e){return 2!==e.kind}))}iu.UNKNOWN_ID=-1;var su=v((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var uu=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,hu.min())}}]),e}();function cu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$s.fromTimestamp(1e9===r?new Js(n+1,0):new Js(n,r));return new hu(i,ru.empty(),t)}function lu(e){return new hu(e.readTime,e.key,-1)}var hu=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e($s.min(),ru.empty(),-1)}},{key:"max",value:function(){return new e($s.max(),ru.empty(),-1)}}]),e}();function fu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ru.comparator(e.documentKey,t.documentKey))?n:Qs(e.largestBatchId,t.largestBatchId)}var du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pu=function(){function e(){d(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function vu(e){return gu.apply(this,arguments)}function gu(){return gu=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ls.FAILED_PRECONDITION&&t.message===du){e.next=2;break}throw t;case 2:Cs("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}var mu=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ps(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=je(t);try{var o=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,o=new Array(i),a=0,s=function(s){var u=s;n(t[u]).next((function(t){o[u]=t,++a===i&&e(o)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),yu=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Fs,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new wu(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Iu(e.target.error);r.P.reject(new wu(t,n))}}return v(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Cs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new xu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new wu(n,t)}}}]),e}(),ku=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Xe())&&As("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"F",value:function(){var e=Pt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Cs("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new wu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new js(Ls.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new js(Ls.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new wu(t,n))},i.onupgradeneeded=function(e){Cs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Cs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){var o,a,s,u,c,l=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,a=0;case 2:return++a,e.prev=3,e.delegateYield(Nt().mark((function e(){var n,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=yu.open(l.db,t,o?"readonly":"readwrite",r),a=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),mu.reject(e)})).toPromise(),a.catch((function(){})),e.next=7,n.v;case 7:return e.t0=a,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&a<3,Cs("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Cs("SimpleDb","Removing database:",e),Su(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!rt())return!1;if(e.N())return!0;var t=Xe(),n=e.D(t),r=0<n&&n<10,i=e.k(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),bu=function(){function e(t){d(this,e),this.U=t,this.q=!1,this.K=null}return v(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Su(this.U.delete())}}]),e}(),wu=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Ls.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(js);function _u(e){return"IndexedDbTransactionError"===e.name}var xu=function(){function e(t){d(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Cs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Cs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Su(n)}},{key:"add",value:function(e){return Cs("SimpleDb","ADD",this.store.name,e,e),Su(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Su(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Cs("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Cs("SimpleDb","DELETE",this.store.name,e),Su(this.store.delete(e))}},{key:"count",value:function(){return Cs("SimpleDb","COUNT",this.store.name),Su(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var o=this.store.getAll(n.range);return new mu((function(e,t){o.onerror=function(e){t(e.target.error)},o.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new mu((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Cs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new mu((function(n,r){t.onerror=function(e){var t=Iu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new mu((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new bu(i),a=t(i.primaryKey,i.value,o);if(a instanceof mu){var s=a.catch((function(e){return o.done(),mu.reject(e)}));n.push(s)}o.isDone?r():null===o.G?i.continue():i.continue(o.G)}else r()}})).next((function(){return mu.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Su(e){return new mu((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Iu(e.target.error);n(t)}}))}var Eu=!1;function Iu(e){var t=ku.D(Xe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new js("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Eu||(Eu=!0,setTimeout((function(){throw r}),0)),r}}return e}var Tu=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return v(e,[{key:"start",value:function(){this.nt(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Cs("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Cs,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!_u(e.t4)){e.next=17;break}Cs("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,vu(e.t4);case 19:return e.next=21,t.nt(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Cu=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return v(e,[{key:"st",value:function(){var e=Pt(Nt().mark((function e(){var t,n=this,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,o=!0;return mu.doWhile((function(){return!0===o&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Cs("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));o=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var o=n.changes;return r.localStore.indexManager.updateIndexEntries(e,o).next((function(){return r.ot(i,n)})).next((function(n){return Cs("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return o.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=lu(t);fu(r,n)>0&&(n=r)})),new hu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Au=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function Nu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ru(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Au.at=-1;var Du=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Lu.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Lu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Lu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ou(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ou(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ou(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ou(this.root,e,this.comparator,!0)}}]),e}(),Ou=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Lu=function(){function e(t,n,r,i,o){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ps();if(this.right.isRed())throw Ps();var e=this.left.check();if(e!==this.right.check())throw Ps();return e+(this.isRed()?0:1)}}]),e}();Lu.EMPTY=null,Lu.RED=!0,Lu.BLACK=!1,Lu.EMPTY=new(function(){function e(){d(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw Ps()}},{key:"value",get:function(){throw Ps()}},{key:"color",get:function(){throw Ps()}},{key:"left",get:function(){throw Ps()}},{key:"right",get:function(){throw Ps()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Lu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ju=function(){function e(t){d(this,e),this.comparator=t,this.data=new Du(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fu=function(){function e(t){d(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Mu(e){return e.hasNext()?e.getNext():void 0}var Uu=function(){function e(t){d(this,e),this.fields=t,t.sort(nu.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new ju(nu.comparator),i=je(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r.add(o)}}catch(c){i.e(c)}finally{i.f()}var a,s=je(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=je(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ys(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Vu=function(e){function t(e){d(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Vu.EMPTY_BYTE_STRING=new Vu("");var Bu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(e){if(Ds(!!e),"string"==typeof e){var t=0,n=Bu.exec(e);if(Ds(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qu(e.seconds),nanos:qu(e.nanos)}}function qu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zu(e){return"string"==typeof e?Vu.fromBase64String(e):Vu.fromUint8Array(e)}function Wu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hu(e){var t=e.mapValue.fields.__previous_value__;return Wu(t)?Hu(t):t}function Gu(e){var t=Ku(e.mapValue.fields.__local_write_time__.timestampValue);return new Js(t.seconds,t.nanos)}var Qu=v((function e(t,n,r,i,o,a,s,u){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Yu=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Xu(e){return null==e}function Ju(e){return 0===e&&1/e==-1/0}function $u(e){return"number"==typeof e&&Number.isInteger(e)&&!Ju(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Zu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ec={nullValue:"NULL_VALUE"};function tc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wu(e)?4:vc(e)?9007199254740991:10:Ps()}function nc(e,t){if(e===t)return!0;var n=tc(e);if(n!==tc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gu(e).isEqual(Gu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ku(e.timestampValue),r=Ku(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zu(e.bytesValue).isEqual(zu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qu(e.geoPointValue.latitude)===qu(t.geoPointValue.latitude)&&qu(e.geoPointValue.longitude)===qu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qu(e.integerValue)===qu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qu(e.doubleValue),r=qu(t.doubleValue);return n===r?Ju(n)===Ju(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ys(e.arrayValue.values||[],t.arrayValue.values||[],nc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Nu(n)!==Nu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nc(n[i],r[i])))return!1;return!0}(e,t);default:return Ps()}}function rc(e,t){return void 0!==(e.values||[]).find((function(e){return nc(e,t)}))}function ic(e,t){if(e===t)return 0;var n=tc(e),r=tc(t);if(n!==r)return Qs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qu(e.integerValue||e.doubleValue),r=qu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return oc(e.timestampValue,t.timestampValue);case 4:return oc(Gu(e),Gu(t));case 5:return Qs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zu(e),r=zu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Qs(n[i],r[i]);if(0!==o)return o}return Qs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Qs(qu(e.latitude),qu(t.latitude));return 0!==n?n:Qs(qu(e.longitude),qu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=ic(n[i],r[i]);if(o)return o}return Qs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Zu.mapValue&&t===Zu.mapValue)return 0;if(e===Zu.mapValue)return 1;if(t===Zu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Qs(r[a],o[a]);if(0!==s)return s;var u=ic(n[r[a]],i[o[a]]);if(0!==u)return u}return Qs(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ps()}}function oc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qs(e,t);var n=Ku(e),r=Ku(t),i=Qs(n.seconds,r.seconds);return 0!==i?i:Qs(n.nanos,r.nanos)}function ac(e){return sc(e)}function sc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ku(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ru.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=je(e.values||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+=sc(o)}}catch(a){i.e(a)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=je(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+="".concat(o,":").concat(sc(e.fields[o]))}}catch(a){i.e(a)}finally{i.f()}return n+"}"}(e.mapValue):Ps();var t,n}function uc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cc(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function hc(e){return!!e&&"nullValue"in e}function fc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dc(e){return!!e&&"mapValue"in e}function pc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ru(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function vc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function gc(e){return"nullValue"in e?ec:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?uc(Yu.empty(),ru.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ps()}function mc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?uc(Yu.empty(),ru.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Zu:Ps()}function yc(e,t){var n=ic(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kc(e,t){var n=ic(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var bc=function(){function e(t){d(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}},{key:"setAll",value:function(e){var t=this,n=nu.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=pc(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return nc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ru(t,(function(t,n){return e[t]=n}));var r,i=je(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete e[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new e(pc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function wc(e){var t=[];return Ru(e.fields,(function(e,n){var r=new nu([e]);if(dc(n)){var i=wc(n.mapValue).fields;if(0===i.length)t.push(r);else{var o,a=je(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;t.push(r.child(s))}}catch(u){a.e(u)}finally{a.f()}}}else t.push(r)})),new Uu(t)}var _c=function(){function e(t,n,r,i,o,a){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=o,this.documentState=a}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$s.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$s.min(),$s.min(),bc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,$s.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$s.min(),bc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$s.min(),bc.empty(),2)}}]),e}(),xc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ht=null}));function Sc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new xc(e,t,n,r,i,o,a)}function Ec(e){var t=Os(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ac(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Xu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ac(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ac(e)})).join(",")),t.ht=n}return t.ht}function Ic(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Kc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!nc(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zc(e.startAt,t.startAt)&&zc(e.endAt,t.endAt)}function Tc(e){return ru.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Cc(e,t){return e.filters.filter((function(e){return e instanceof Rc&&e.field.isEqual(t)}))}function Ac(e,t,n){var r,i=ec,o=!0,a=je(Cc(e,t));try{for(a.s();!(r=a.n()).done;){var s=r.value,u=ec,c=!0;switch(s.op){case"<":case"<=":u=gc(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=ec}yc({value:i,inclusive:o},{value:u,inclusive:c})<0&&(i=u,o=c)}}catch(f){a.e(f)}finally{a.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];yc({value:i,inclusive:o},{value:h,inclusive:n.inclusive})<0&&(i=h,o=n.inclusive);break}return{value:i,inclusive:o}}function Nc(e,t,n){var r,i=Zu,o=!0,a=je(Cc(e,t));try{for(a.s();!(r=a.n()).done;){var s=r.value,u=Zu,c=!0;switch(s.op){case">=":case">":u=mc(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=Zu}kc({value:i,inclusive:o},{value:u,inclusive:c})>0&&(i=u,o=c)}}catch(f){a.e(f)}finally{a.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];kc({value:i,inclusive:o},{value:h,inclusive:n.inclusive})>0&&(i=h,o=n.inclusive);break}return{value:i,inclusive:o}}var Rc=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ic(t,this.value)):null!==t&&tc(this.value)===tc(t)&&this.ft(ic(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ps()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Pc(e,t,r):"array-contains"===t?new jc(e,r):"in"===t?new Fc(e,r):"not-in"===t?new Mc(e,r):"array-contains-any"===t?new Uc(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Dc(e,n):new Oc(e,n)}}]),n}(function(){return v((function e(){d(this,e)}))}()),Pc=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r,i)).key=ru.fromName(i.referenceValue),o}return v(n,[{key:"matches",value:function(e){var t=ru.comparator(e.key,this.key);return this.ft(t)}}]),n}(Rc),Dc=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Lc("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Rc),Oc=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Lc("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Rc);function Lc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ru.fromName(e.referenceValue)}))}var jc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return lc(t)&&rc(t.arrayValue,this.value)}}]),n}(Rc),Fc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&rc(this.value.arrayValue,t)}}]),n}(Rc),Mc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!rc(this.value.arrayValue,t)}}]),n}(Rc),Uc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return rc(t.value.arrayValue,e)}))}}]),n}(Rc),Vc=v((function e(t,n){d(this,e),this.position=t,this.inclusive=n})),Bc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Kc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function qc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ru.comparator(ru.fromName(a.referenceValue),n.key):ic(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function zc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!nc(e.position[n],t.position[n]))return!1;return!0}var Wc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this._t=null,this.wt=null,this.startAt,this.endAt}));function Hc(e,t,n,r,i,o,a,s){return new Wc(e,t,n,r,i,o,a,s)}function Gc(e){return new Wc(e)}function Qc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Xc(e){var t,n=je(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Jc(e){return null!==e.collectionGroup}function $c(e){var t=Os(e);if(null===t._t){t._t=[];var n=Xc(t),r=Yc(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Bc(n)),t._t.push(new Bc(nu.keyField(),"asc"));else{var i,o=!1,a=je(t.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var s=i.value;t._t.push(s),s.field.isKeyField()&&(o=!0)}}catch(c){a.e(c)}finally{a.f()}if(!o){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Bc(nu.keyField(),u))}}}return t._t}function Zc(e){var t=Os(e);if(!t.wt)if("F"===t.limitType)t.wt=Sc(t.path,t.collectionGroup,$c(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=je($c(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,a="desc"===o.dir?"asc":"desc";r.push(new Bc(o.field,a))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Vc(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Vc(t.startAt.position,t.startAt.inclusive):null;t.wt=Sc(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.wt}function el(e,t,n){return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function tl(e,t){return Ic(Zc(e),Zc(t))&&e.limitType===t.limitType}function nl(e){return"".concat(Ec(Zc(e)),"|lt:").concat(e.limitType)}function rl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ac(t.value));var t})).join(", "),"]")),Xu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ac(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ac(e)})).join(",")),"Target(".concat(t,")")}(Zc(e)),"; limitType=").concat(e.limitType,")")}function il(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ru.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=je(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=je(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=qc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$c(e),t))&&!(e.endAt&&!function(e,t,n){var r=qc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$c(e),t))}(e,t)}function ol(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function al(e){return function(t,n){var r,i=!1,o=je($c(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=sl(a,t,n);if(0!==s)return s;i=i||a.field.isKeyField()}}catch(u){o.e(u)}finally{o.f()}return 0}}function sl(e,t,n){var r=e.field.isKeyField()?ru.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ic(r,i):Ps()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ps()}}function ul(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(t)?"-0":t}}function cl(e){return{integerValue:""+e}}function ll(e,t){return $u(t)?cl(t):ul(e,t)}var hl=v((function e(){d(this,e),this._=void 0}));function fl(e,t,n){return e instanceof vl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gl?ml(e,t):e instanceof yl?kl(e,t):function(e,t){var n=pl(e,t),r=wl(n)+wl(e.yt);return cc(n)&&cc(e.yt)?cl(r):ul(e.It,r)}(e,t)}function dl(e,t,n){return e instanceof gl?ml(e,t):e instanceof yl?kl(e,t):n}function pl(e,t){return e instanceof bl?cc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var vl=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(hl),gl=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(hl);function ml(e,t){var n,r=_l(t),i=je(e.elements);try{var o=function(){var e=n.value;r.some((function(t){return nc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var yl=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(hl);function kl(e,t){var n,r=_l(t),i=je(e.elements);try{var o=function(){var e=n.value;r=r.filter((function(t){return!nc(t,e)}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var bl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).It=e,i.yt=r,i}return v(n)}(hl);function wl(e){return qu(e.integerValue||e.doubleValue)}function _l(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var xl=v((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Sl=v((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),El=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Il(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Tl=v((function e(){d(this,e)}));function Cl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vl(e.key,El.none()):new Dl(e.key,e.data,El.none());var n,r=e.data,i=bc.empty(),o=new ju(nu.comparator),a=je(t.fields);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(!o.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),o=o.add(s)}}}catch(c){a.e(c)}finally{a.f()}return new Ol(e.key,i,new Uu(o.toArray()),El.none())}function Al(e,t,n){e instanceof Dl?function(e,t,n){var r=e.value.clone(),i=jl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ol?function(e,t,n){if(Il(e.precondition,t)){var r=jl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ll(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nl(e,t,n,r){return e instanceof Dl?function(e,t,n,r){if(!Il(e.precondition,t))return n;var i=e.value.clone(),o=Fl(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ol?function(e,t,n,r){if(!Il(e.precondition,t))return n;var i=Fl(e.fieldTransforms,r,t),o=t.data;return o.setAll(Ll(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Il(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Rl(e,t){var n,r=null,i=je(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.field),s=pl(o.transform,a||null);null!=s&&(null===r&&(r=bc.empty()),r.set(o.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Pl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ys(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gl&&t instanceof gl||e instanceof yl&&t instanceof yl?Ys(e.elements,t.elements,nc):e instanceof bl&&t instanceof bl?nc(e.yt,t.yt):e instanceof vl&&t instanceof vl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Dl=function(e){m(n,e);var t=x(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=a,o.type=0,o}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Tl),Ol=function(e){m(n,e);var t=x(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(a=t.call(this)).key=e,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=s,a.type=1,a}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Tl);function Ll(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function jl(e,t,n){var r=new Map;Ds(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,dl(a,s,n[i]))}return r}function Fl(e,t,n){var r,i=new Map,o=je(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.transform,u=n.data.field(a.field);i.set(a.field,fl(s,u,t))}}catch(c){o.e(c)}finally{o.f()}return i}var Ml,Ul,Vl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Tl),Bl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Tl),Kl=v((function e(t){d(this,e),this.count=t}));function ql(e){switch(e){default:return Ps();case Ls.CANCELLED:case Ls.UNKNOWN:case Ls.DEADLINE_EXCEEDED:case Ls.RESOURCE_EXHAUSTED:case Ls.INTERNAL:case Ls.UNAVAILABLE:case Ls.UNAUTHENTICATED:return!1;case Ls.INVALID_ARGUMENT:case Ls.NOT_FOUND:case Ls.ALREADY_EXISTS:case Ls.PERMISSION_DENIED:case Ls.FAILED_PRECONDITION:case Ls.ABORTED:case Ls.OUT_OF_RANGE:case Ls.UNIMPLEMENTED:case Ls.DATA_LOSS:return!0}}function zl(e){if(void 0===e)return As("GRPC error has no .code"),Ls.UNKNOWN;switch(e){case Ml.OK:return Ls.OK;case Ml.CANCELLED:return Ls.CANCELLED;case Ml.UNKNOWN:return Ls.UNKNOWN;case Ml.DEADLINE_EXCEEDED:return Ls.DEADLINE_EXCEEDED;case Ml.RESOURCE_EXHAUSTED:return Ls.RESOURCE_EXHAUSTED;case Ml.INTERNAL:return Ls.INTERNAL;case Ml.UNAVAILABLE:return Ls.UNAVAILABLE;case Ml.UNAUTHENTICATED:return Ls.UNAUTHENTICATED;case Ml.INVALID_ARGUMENT:return Ls.INVALID_ARGUMENT;case Ml.NOT_FOUND:return Ls.NOT_FOUND;case Ml.ALREADY_EXISTS:return Ls.ALREADY_EXISTS;case Ml.PERMISSION_DENIED:return Ls.PERMISSION_DENIED;case Ml.FAILED_PRECONDITION:return Ls.FAILED_PRECONDITION;case Ml.ABORTED:return Ls.ABORTED;case Ml.OUT_OF_RANGE:return Ls.OUT_OF_RANGE;case Ml.UNIMPLEMENTED:return Ls.UNIMPLEMENTED;case Ml.DATA_LOSS:return Ls.DATA_LOSS;default:return Ps()}}(Ul=Ml||(Ml={}))[Ul.OK=0]="OK",Ul[Ul.CANCELLED=1]="CANCELLED",Ul[Ul.UNKNOWN=2]="UNKNOWN",Ul[Ul.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ul[Ul.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ul[Ul.NOT_FOUND=5]="NOT_FOUND",Ul[Ul.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ul[Ul.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ul[Ul.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ul[Ul.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ul[Ul.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ul[Ul.ABORTED=10]="ABORTED",Ul[Ul.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ul[Ul.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ul[Ul.INTERNAL=13]="INTERNAL",Ul[Ul.UNAVAILABLE=14]="UNAVAILABLE",Ul[Ul.DATA_LOSS=15]="DATA_LOSS";var Wl=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=je(n);try{for(i.s();!(r=i.n()).done;){var o=l(r.value,2),a=o[0],s=o[1];if(this.equalsFn(a,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ru(this.inner,(function(t,n){var r,i=je(n);try{for(i.s();!(r=i.n()).done;){var o=l(r.value,2),a=o[0],s=o[1];e(a,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Pu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Hl=new Du(ru.comparator);function Gl(){return Hl}var Ql=new Du(ru.comparator);function Yl(){for(var e=Ql,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.insert(a.key,a)}return e}function Xl(e){var t=Ql;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Jl(){return Zl()}function $l(){return Zl()}function Zl(){return new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var eh=new Du(ru.comparator),th=new ju(ru.comparator);function nh(){for(var e=th,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.add(a)}return e}var rh=new ju(Qs);function ih(){return rh}var oh=function(){function e(t,n,r,i,o){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ah.createSynthesizedTargetChangeForCurrentChange(t,n)),new e($s.min(),r,ih(),Gl(),nh())}}]),e}(),ah=function(){function e(t,n,r,i,o){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Vu.EMPTY_BYTE_STRING,n,nh(),nh(),nh())}}]),e}(),sh=v((function e(t,n,r,i){d(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),uh=v((function e(t,n){d(this,e),this.targetId=t,this.At=n})),ch=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),lh=function(){function e(){d(this,e),this.Rt=0,this.bt=dh(),this.Pt=Vu.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return v(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=nh(),t=nh(),n=nh();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ps()}})),new ah(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=dh()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Mt",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Ot",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),hh=function(){function e(t){d(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Gl(),this.qt=fh(),this.Kt=new ju(Qs)}return v(e,[{key:"Gt",value:function(e){var t,n=je(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(s){n.e(s)}finally{n.f()}var i,o=je(e.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.jt(a,e.key,e.Et)}}catch(s){o.e(s)}finally{o.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Ps()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Tc(i))if(0===n){var o=new ru(i.path);this.jt(t,o,_c.newNoDocument(o,$s.min()))}else Ds(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var o=t.Xt(i);if(o){if(r.current&&Tc(o.target)){var a=new ru(o.target.path);null!==t.Ut.get(a)||t.ee(i,a)||t.jt(i,a,_c.newNoDocument(a,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=nh();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new oh(e,n,this.Kt,this.Ut,r);return this.Ut=Gl(),this.qt=fh(),this.Kt=new ju(Qs),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.zt(e).Ot()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new lh,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new ju(Qs),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||Cs("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new lh),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function fh(){return new Du(ru.comparator)}function dh(){return new Du(ru.comparator)}var ph={asc:"ASCENDING",desc:"DESCENDING"},vh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gh=v((function e(t,n){d(this,e),this.databaseId=t,this.gt=n}));function mh(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yh(e,t){return e.gt?t.toBase64():t.toUint8Array()}function kh(e,t){return mh(e,t.toTimestamp())}function bh(e){return Ds(!!e),$s.fromTimestamp(function(e){var t=Ku(e);return new Js(t.seconds,t.nanos)}(e))}function wh(e,t){return function(e){return new eu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _h(e){var t=eu.fromString(e);return Ds(Wh(t)),t}function xh(e,t){return wh(e.databaseId,t.path)}function Sh(e,t){var n=_h(t);if(n.get(1)!==e.databaseId.projectId)throw new js(Ls.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new js(Ls.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ru(Ch(n))}function Eh(e,t){return wh(e.databaseId,t)}function Ih(e){var t=_h(e);return 4===t.length?eu.emptyPath():Ch(t)}function Th(e){return new eu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ch(e){return Ds(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ah(e,t,n){return{name:xh(e,t),fields:n.value.mapValue.fields}}function Nh(e,t,n){var r=Sh(e,t.name),i=bh(t.updateTime),o=new bc({mapValue:{fields:t.fields}}),a=_c.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Rh(e,t){return"found"in t?function(e,t){Ds(!!t.found),t.found.name,t.found.updateTime;var n=Sh(e,t.found.name),r=bh(t.found.updateTime),i=new bc({mapValue:{fields:t.found.fields}});return _c.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ds(!!t.missing),Ds(!!t.readTime);var n=Sh(e,t.missing),r=bh(t.readTime);return _c.newNoDocument(n,r)}(e,t):Ps()}function Ph(e,t){var n;if(t instanceof Dl)n={update:Ah(e,t.key,t.value)};else if(t instanceof Vl)n={delete:xh(e,t.key)};else if(t instanceof Ol)n={update:Ah(e,t.key,t.data),updateMask:zh(t.fieldMask)};else{if(!(t instanceof Bl))return Ps();n={verify:xh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof vl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bl)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Ps()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ps()}(e,t.precondition)),n}function Dh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?El.updateTime(bh(e.updateTime)):void 0!==e.exists?El.exists(e.exists):El.none()}(t.currentDocument):El.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ds("REQUEST_TIME"===t.setToServerValue),n=new vl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new gl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new yl(i)}else"increment"in t?n=new bl(e,t.increment):Ps();var o=nu.fromServerFormat(t.fieldPath);return new xl(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=Sh(e,t.update.name),o=new bc({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new Uu(t.map((function(e){return nu.fromServerFormat(e)})))}(t.updateMask);return new Ol(i,o,a,n,r)}return new Dl(i,o,n,r)}if(t.delete){var s=Sh(e,t.delete);return new Vl(s,n)}if(t.verify){var u=Sh(e,t.verify);return new Bl(u,n)}return Ps()}function Oh(e,t){return{documents:[Eh(e,t.path)]}}function Lh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Eh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Eh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(fc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NAN"}};if(hc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NOT_NAN"}};if(hc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vh(e.field),op:Uh(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Vh(e.field),direction:Mh(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s=function(e,t){return e.gt||Xu(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function jh(e){var t=Ih(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ds(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Fh(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Bc(Bh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Xu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Vc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Vc(n,t)}(n.endAt)),Hc(t,i,s,a,u,"F",c,l)}function Fh(e){return e?void 0!==e.unaryFilter?[qh(e)]:void 0!==e.fieldFilter?[Kh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Fh(e)})).reduce((function(e,t){return e.concat(t)})):Ps():[]}function Mh(e){return ph[e]}function Uh(e){return vh[e]}function Vh(e){return{fieldPath:e.canonicalString()}}function Bh(e){return nu.fromServerFormat(e.fieldPath)}function Kh(e){return Rc.create(Bh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ps()}}(e.fieldFilter.op),e.fieldFilter.value)}function qh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Bh(e.unaryFilter.field);return Rc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Bh(e.unaryFilter.field);return Rc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bh(e.unaryFilter.field);return Rc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bh(e.unaryFilter.field);return Rc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ps()}}function zh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Wh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Hh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Qh(t)),t=Gh(e.get(n),t);return Qh(t)}function Gh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Qh(e){return e+"\x01\x01"}function Yh(e){var t=e.length;if(Ds(t>=2),2===t)return Ds("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),eu.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&Ps(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:Ps()}o=a+2}return new eu(r)}var Xh=["userId","batchId"];function Jh(e,t){return[e,Hh(t)]}function $h(e,t,n){return[e,Hh(t),n]}var Zh={},ef=["prefixPath","collectionGroup","readTime","documentId"],tf=["prefixPath","collectionGroup","documentId"],nf=["collectionGroup","readTime","prefixPath","documentId"],rf=["canonicalId","targetId"],of=["targetId","path"],af=["path","targetId"],sf=["collectionId","parent"],uf=["indexId","uid"],cf=["uid","sequenceNumber"],lf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hf=["indexId","uid","orderedDocumentKey"],ff=["userId","collectionPath","documentId"],df=["userId","collectionPath","largestBatchId"],pf=["userId","collectionGroup","largestBatchId"],vf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),gf=[].concat(f(vf),["documentOverlays"]),mf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yf=mf,kf=[].concat(yf,["indexConfiguration","indexState","indexEntries"]),bf=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return v(n)}(pu);function wf(e,t){var n=Os(e);return ku.O(n.ie,t)}var _f=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Al(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=je(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Nl(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var o,a=je(this.mutations);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.key.isEqual(e.key)&&(t=Nl(s,e,t,this.localWriteTime))}}catch(u){a.e(u)}finally{a.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=$l();return this.mutations.forEach((function(i){var o=e.get(i.key),a=o.overlayedDocument,s=n.applyToLocalView(a,o.mutatedFields),u=Cl(a,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument($s.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),nh())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(function(e,t){return Pl(e,t)}))&&Ys(this.baseMutations,e.baseMutations,(function(e,t){return Pl(e,t)}))}}]),e}(),xf=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){Ds(t.mutations.length===r.length);for(var i=eh,o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)}}]),e}(),Sf=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ef=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$s.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$s.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vu.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),If=v((function e(t){d(this,e),this.re=t}));function Tf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:xh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:mh(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Af(t.version)};else{if(!t.isUnknownDocument())return Ps();r.unknownDocument={path:n.path.toArray(),version:Af(t.version)}}return r}function Cf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Af(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Nf(e){var t=new Js(e.seconds,e.nanoseconds);return $s.fromTimestamp(t)}function Rf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Dh(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Dh(e.re,t)})),s=Js.fromMillis(t.localWriteTimeMs);return new _f(t.batchId,s,n,a)}function Pf(e){var t,n,r=Nf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Nf(e.lastLimboFreeSnapshotVersion):$s.min();return void 0!==e.query.documents?(Ds(1===(n=e.query).documents.length),t=Zc(Gc(Ih(n.documents[0])))):t=function(e){return Zc(jh(e))}(e.query),new Ef(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Vu.fromBase64String(e.resumeToken))}function Df(e,t){var n,r=Af(t.snapshotVersion),i=Af(t.lastLimboFreeSnapshotVersion);n=Tc(t.target)?Oh(e.re,t.target):Lh(e.re,t.target);var o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ec(t.target),readTime:r,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Of(e){var t=jh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?el(t,t.limit,"L"):t}function Lf(e,t){return new Sf(t.largestBatchId,Dh(e.re,t.overlayMutation))}function jf(e,t){var n=t.path.lastSegment();return[e,Hh(t.path.popLast()),n]}function Ff(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Af(r.readTime),documentKey:Hh(r.documentKey.path),largestBatchId:r.largestBatchId}}var Mf=function(){function e(){d(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return Uf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Nf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Uf(e).put({bundleId:(n=t).id,createTime:Af(bh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Vf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Of(t.bundledQuery),readTime:Nf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Vf(e).put(function(e){return{name:e.name,readTime:Af(bh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Uf(e){return wf(e,"bundles")}function Vf(e){return wf(e,"namedQueries")}var Bf=function(){function e(t,n){d(this,e),this.It=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kf(e).get(jf(this.userId,t)).next((function(e){return e?Lf(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jl();return mu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,o){var a=new Sf(t,o);i.push(r.ue(e,a))})),mu.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Hh(e.getCollectionPath()))}));var o=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);o.push(Kf(e).Y("collectionPathOverlayIndex",i))})),mu.waitFor(o)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Jl(),o=Hh(t),a=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Kf(e).W("collectionPathOverlayIndex",a).next((function(e){var t,n=je(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,a=Lf(r.It,o);i.set(a.getKey(),a)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,o=this,a=Jl(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kf(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Lf(o.It,t);a.size()<r||s.largestBatchId===i?(a.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return a}))}},{key:"ue",value:function(e,t){return Kf(e).put(function(e,t,n){var r=l(jf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ph(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kf(e){return wf(e,"documentOverlays")}var qf=function(){function e(){d(this,e)}return v(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(qu(e.integerValue));else if("doubleValue"in e){var n=qu(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Ju(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(zu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?vc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Ps()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];this._e(o,t),this.ae(n[o],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=je(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.ae(o,t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),ru.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function zf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Wf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=zf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}qf.Te=new qf;var Hf=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=je(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var o=r.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}}catch(a){n.e(a)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=je(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var o=r.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}}catch(a){n.e(a)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=Wf(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=Wf(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Me(0),this.Me(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Gf=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Qf=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Oe()}}]),e}(),Yf=function(){function e(){d(this,e),this.Be=new Hf,this.Le=new Gf(this.Be),this.Ue=new Qf(this.Be)}return v(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),Xf=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Jf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=$f(e.arrayValue,t.arrayValue))?n:0!==(n=$f(e.directionalValue,t.directionalValue))?n:ru.comparator(e.documentKey,t.documentKey)}function $f(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Zf=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=je(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(o){r.e(o)}finally{r.f()}}return v(e,[{key:"We",value:function(e){var t=ou(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=au(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var o=n[r];if(!this.He(this.je,o)||!this.Je(this.Ge[i++],o))return!1;++r}for(;r<n.length;++r){var a=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],a))return!1}return!0}},{key:"ze",value:function(e){var t,n=je(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),ed=function(){function e(){d(this,e),this.Ye=new td}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),mu.resolve()}},{key:"getCollectionParents",value:function(e,t){return mu.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return mu.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return mu.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return mu.resolve(null)}},{key:"getIndexType",value:function(e,t){return mu.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return mu.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return mu.resolve(null)}},{key:"getMinOffset",value:function(e,t){return mu.resolve(hu.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return mu.resolve(hu.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return mu.resolve()}},{key:"updateIndexEntries",value:function(e,t){return mu.resolve()}}]),e}(),td=function(){function e(){d(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ju(eu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ju(eu.comparator)).toArray()}}]),e}(),nd=new Uint8Array(0),rd=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Xe=new td,this.Ze=new Wl((function(e){return Ec(e)}),(function(e,t){return Ic(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var o={collectionId:r,parent:Hh(i)};return id(e).put(o)}return mu.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Xs(t),""],!1,!0);return id(e).W(r).next((function(e){var r,i=je(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.collectionId!==t)break;n.push(Yh(o.parent))}}catch(a){i.e(a)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ad(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var o=r.add(i);if(t.indexState){var a=sd(e);return o.next((function(e){a.put(Ff(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ad(e),r=sd(e),i=od(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=od(e),i=!0,o=new Map;return mu.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),o.set(t,e)}))})).next((function(){if(i){var e=nh(),a=[];return mu.forEach(o,(function(i,o){var s;Cs("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ec(t)));var u=function(e,t){var n=ou(t);if(void 0===n)return null;var r,i=je(Cc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var o=r.value;switch(o.op){case"array-contains-any":return o.value.arrayValue.values||[];case"array-contains":return[o.value]}}}catch(a){i.e(a)}finally{i.f()}return null}(o,i),c=function(e,t){var n,r=new Map,i=je(au(t));try{for(i.s();!(n=i.n()).done;){var o,a=n.value,s=je(Cc(e,a.fieldPath));try{for(s.s();!(o=s.n()).done;){var u=o.value;switch(u.op){case"==":case"in":r.set(a.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(a.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(o,i),l=function(e,t){var n,r=[],i=!0,o=je(au(t));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=0===a.kind?Ac(e,a.fieldPath,e.startAt):Nc(e,a.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){o.e(u)}finally{o.f()}return new Vc(r,i)}(o,i),h=function(e,t){var n,r=[],i=!0,o=je(au(t));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=0===a.kind?Nc(e,a.fieldPath,e.endAt):Ac(e,a.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){o.e(u)}finally{o.f()}return new Vc(r,i)}(o,i),f=n.nn(i,o,l),d=n.nn(i,o,h),p=n.sn(i,o,c),v=n.rn(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return mu.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=ru.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),a.push(n))}))}))}))})).next((function(){return a}))}return mu.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,o,a){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(u){var h=t?s.on(t[u/c]):nd,d=s.un(e,h,n[u%c],r),p=s.cn(e,h,i[u%c],o),v=a.map((function(t){return s.un(e,h,t,!0)}));l.push.apply(l,f(s.createRange(d,p,v)))},d=0;d<u;++d)h(d);return l}},{key:"un",value:function(e,t,n,r){var i=new Xf(e,ru.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new Xf(e,ru.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Zf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=je(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.We(o)&&(!r||o.fields.length>r.fields.length)&&(r=o)}}catch(a){i.e(a)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return mu.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new ju(nu.comparator),r=!1,i=je(e.filters);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.field.isKeyField()||("array-contains"===o.op||"array-contains-any"===o.op?r=!0:n=n.add(o.field))}}catch(c){i.e(c)}finally{i.f()}var a,s=je(e.orderBy);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Yf,i=je(au(e));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.fieldPath);if(null==a)return null;var s=r.qe(o.kind);qf.Te.ce(a,s)}}catch(u){i.e(u)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Yf;return qf.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Yf;return qf.Te.ce(uc(this.databaseId,t),n.qe(function(e){var t=au(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Yf);var i,o=0,a=je(au(e));try{for(a.s();!(i=a.n()).done;){var s,u=i.value,c=n[o++],l=je(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.ln(t,u.fieldPath)&&lc(c))r=this.fn(r,u,c);else{var f=h.qe(u.kind);qf.Te.ce(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){a.e(d)}finally{a.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=f(e),o=[],a=je(n.arrayValue.values||[]);try{for(a.s();!(r=a.n()).done;){var s,u=r.value,c=je(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new Yf;h.seed(l.$e()),qf.Te.ce(u,h.qe(t.kind)),o.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){a.e(d)}finally{a.f()}return o}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Rc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ad(e),i=sd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return mu.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new uu(t.sequenceNumber,new hu(Nf(t.readTime),new ru(Yh(t.documentKey)),t.largestBatchId)):uu.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new su(nu.fromServerFormat(n),r)}));return new iu(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qs(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ad(e),o=sd(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return mu.forEach(t,(function(t){return o.put(Ff(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return mu.forEach(t,(function(t,i){var o=r.get(t.collectionGroup);return(o?mu.resolve(o):n.getFieldIndexes(e,t.collectionGroup)).next((function(o){return r.set(t.collectionGroup,o),mu.forEach(o,(function(r){return n.wn(e,t,r).next((function(t){var o=n.mn(i,r);return t.isEqual(o)?mu.resolve():n.gn(e,i,r,t,o)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return od(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return od(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=od(e),i=new ju(Jf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new Xf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new ju(Jf),r=this.an(t,e);if(null==r)return n;var i=ou(t);if(null!=i){var o=e.data.field(i.fieldPath);if(lc(o)){var a,s=je(o.arrayValue.values||[]);try{for(s.s();!(a=s.n()).done;){var u=a.value;n=n.add(new Xf(t.indexId,e.key,this.on(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Xf(t.indexId,e.key,nd,r));return n}},{key:"gn",value:function(e,t,n,r,i){var o=this;Cs("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var o=e.getIterator(),a=t.getIterator(),s=Mu(o),u=Mu(a);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Mu(a)):l?(i(s),s=Mu(o)):(s=Mu(o),u=Mu(a))}}(r,i,Jf,(function(r){a.push(o.yn(e,t,n,r))}),(function(r){a.push(o.pn(e,t,n,r))})),mu.waitFor(a)}},{key:"_n",value:function(e){var t=1;return sd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Jf(e,t)})).filter((function(e,t,n){return!t||0!==Jf(e,n[t-1])}));var r=[];r.push(e);var i,o=je(n);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=Jf(a,e),u=Jf(a,t);if(0===s)r[0]=e.Ke();else if(s>0&&u<0)r.push(a),r.push(a.Ke());else if(u>0)break}}catch(h){o.e(h)}finally{o.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,nd,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,nd,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ud)}},{key:"getMinOffset",value:function(e,t){var n=this;return mu.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Ps()}))})).next(ud)}}]),e}();function id(e){return wf(e,"collectionParents")}function od(e){return wf(e,"indexEntries")}function ad(e){return wf(e,"indexConfiguration")}function sd(e){return wf(e,"indexState")}function ud(e){Ds(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;fu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hu(t.readTime,t.documentKey,n)}var cd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ld=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function hd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Ds(1===s)})));var c,l=[],h=je(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=$h(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return mu.waitFor(o).next((function(){return l}))}function fd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ps();t=e.noDocument}return JSON.stringify(t).length}ld.DEFAULT_COLLECTION_PERCENTILE=10,ld.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ld.DEFAULT=new ld(41943040,ld.DEFAULT_COLLECTION_PERCENTILE,ld.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ld.DISABLED=new ld(-1,0,0);var dd=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vd(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,o=gd(e),a=vd(e);return a.add({}).next((function(s){Ds("number"==typeof s);var u,c=new _f(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ph(e.re,t)})),i=n.mutations.map((function(t){return Ph(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),h=[],f=new ju((function(e,t){return Qs(e.canonicalString(),t.canonicalString())})),d=je(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=$h(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(a.put(l)),h.push(o.put(v,Zh))}}catch(g){d.e(g)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[s]=c.keys()})),mu.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return vd(e).get(t).next((function(e){return e?(Ds(e.userId===n.userId),Rf(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?mu.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return vd(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ds(t.batchId>=r),o=Rf(n.It,t)),i.done()})).next((function(){return o}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vd(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Rf(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Jh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return gd(e).Z({range:i},(function(r,i,a){var s=l(r,3),u=s[0],c=s[1],h=s[2],f=Yh(c);if(u===n.userId&&t.path.isEqual(f))return vd(e).get(h).next((function(e){if(!e)throw Ps();Ds(e.userId===n.userId),o.push(Rf(n.It,e))}));a.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ju(Qs),i=[];return t.forEach((function(t){var o=Jh(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=gd(e).Z({range:a},(function(e,i,o){var a=l(e,3),s=a[0],u=a[1],c=a[2],h=Yh(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):o.done()}));i.push(s)})),mu.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=Jh(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ju(Qs);return gd(e).Z({range:a},(function(e,t,o){var a=l(e,3),u=a[0],c=a[1],h=a[2],f=Yh(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):o.done()})).next((function(){return n.En(e,s)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(vd(e).get(t).next((function(e){if(null===e)throw Ps();Ds(e.userId===n.userId),r.push(Rf(n.It,e))})))})),mu.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return hd(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),mu.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return mu.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return gd(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Yh(e[1]);i.push(o)}else r.done()})).next((function(){Ds(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return pd(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return md(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Ds(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function pd(e,t,n){var r=Jh(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return gd(e).Z({range:o,X:!0},(function(e,n,r){var o=l(e,3),s=o[0],u=o[1];o[2];s===t&&u===i&&(a=!0),r.done()})).next((function(){return a}))}function vd(e){return wf(e,"mutations")}function gd(e){return wf(e,"documentMutations")}function md(e){return wf(e,"mutationQueues")}var yd=function(){function e(t){d(this,e),this.bn=t}return v(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),kd=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.It=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new yd(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return $s.fromTimestamp(new Js(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return bd(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Ds(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return bd(e).Z((function(a,s){var u=Pf(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return mu.waitFor(o)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return bd(e).Z((function(e,n){var r=Pf(n);t(r)}))}},{key:"Vn",value:function(e){return wd(e).get("targetGlobalKey").next((function(e){return Ds(null!==e),e}))}},{key:"Sn",value:function(e,t){return wd(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return bd(e).put(Df(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ec(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bd(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var o=Pf(n);Ic(t,o.target)&&(i=o,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],o=_d(e);return t.forEach((function(t){var a=Hh(t.path);i.push(o.put({targetId:n,path:a})),i.push(r.referenceDelegate.addReference(e,n,t))})),mu.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=_d(e);return mu.forEach(t,(function(t){var o=Hh(t.path);return mu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=_d(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_d(e),i=nh();return r.Z({range:n,X:!0},(function(e,t,n){var r=Yh(e[1]),o=new ru(r);i=i.add(o)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Hh(t.path),r=IDBKeyRange.bound([n],[Xs(n)],!1,!0),i=0;return _d(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),o=r[0];r[1];0!==o&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return bd(e).get(t).next((function(e){return e?Pf(e):null}))}}]),e}();function bd(e){return wf(e,"targets")}function wd(e){return wf(e,"targetGlobal")}function _d(e){return wf(e,"targetDocuments")}function xd(e,t){var n=l(e,2),r=n[0],i=n[1],o=l(t,2),a=o[0],s=o[1],u=Qs(r,a);return 0===u?Qs(i,s):u}var Sd=function(){function e(t){d(this,e),this.xn=t,this.buffer=new ju(xd),this.Nn=0}return v(e,[{key:"kn",value:function(){return++this.Nn}},{key:"Mn",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();xd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ed=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return v(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"Fn",value:function(e){var t=this;Cs("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!_u(e.t0)){e.next=12;break}Cs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,vu(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Id=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return mu.resolve(Au.at);var r=new Sd(t);return this.$n.forEachTarget(e,(function(e){return r.Mn(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.Mn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Cs("LruGarbageCollector","Garbage collection skipped; disabled"),mu.resolve(cd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Cs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),cd):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Cs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ts()<=Mt.DEBUG&&Cs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),mu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Td=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Id(e,t)}(this,n)}return v(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Cd(e,n)}},{key:"removeReference",value:function(e,t,n){return Cd(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Cd(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return md(e).tt((function(r){return pd(e,r,t).next((function(e){return e&&(n=!0),mu.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Kn(e,(function(a,s){if(s<=t){var u=n.Gn(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a,$s.min()),_d(e).delete([0,Hh(a.path)])}))}));i.push(u)}})).next((function(){return mu.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Cd(e,t)}},{key:"Kn",value:function(e,t){var n,r=_d(e),i=Au.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var o=l(e,2),a=o[0],s=(o[1],r.path),u=r.sequenceNumber;0===a?(i!==Au.at&&t(new ru(Yh(n)),i),i=u,n=s):i=Au.at})).next((function(){i!==Au.at&&t(new ru(Yh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Cd(e,t){return _d(e).put(function(e,t){return{targetId:0,path:Hh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ad=function(){function e(){d(this,e),this.changes=new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,_c.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?mu.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Nd=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Od(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Od(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Cf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=_c.newInvalidDocument(t);return Od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ld(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:_c.newInvalidDocument(t)};return Od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ld(t))},(function(e,i){r={document:n.jn(t,i),size:fd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Gl();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Gl(),i=new Du(ru.comparator);return this.zn(e,t,(function(e,t){var o=n.jn(e,t);r=r.insert(e,o),i=i.insert(e,fd(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return mu.resolve();var r=new ju(Fd);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ld(r.first()),Ld(r.last())),o=r.getIterator(),a=o.getNext();return Od(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ru.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));a&&Fd(a,i)<0;)n(a,null),a=o.getNext();a&&a.isEqual(i)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?r.j(Ld(a)):r.done()})).next((function(){for(;a;)n(a,null),a=o.hasNext()?o.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Cf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Od(e).W(IDBKeyRange.bound(i,o,!0)).next((function(e){var t,n=Gl(),i=je(e);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=r.jn(ru.fromSegments(o.prefixPath.concat(o.collectionGroup,o.documentId)),o);n=n.insert(a.key,a)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,o=Gl(),a=jd(t,n),s=jd(t,hu.max());return Od(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,s,!0)},(function(e,t,n){var a=i.jn(ru.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(o=o.insert(a.key,a)).size===r&&n.done()})).next((function(){return o}))}},{key:"newChangeBuffer",value:function(e){return new Pd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Dd(e).get("remoteDocumentGlobalKey").next((function(e){return Ds(!!e),e}))}},{key:"Qn",value:function(e,t){return Dd(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Nh(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ru.fromSegments(t.noDocument.path),i=Nf(t.noDocument.readTime);n=_c.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ps();var o=ru.fromSegments(t.unknownDocument.path),a=Nf(t.unknownDocument.version);n=_c.newUnknownDocument(o,a)}return t.readTime&&n.setReadTime(function(e){var t=new Js(e[0],e[1]);return $s.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual($s.min()))return n}return _c.newInvalidDocument(e)}}]),e}();function Rd(e){return new Nd(e)}var Pd=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new ju((function(e,t){return Qs(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Xn.get(o);if(n.push(t.Yn.removeEntry(e,o,s.readTime)),a.isValidDocument()){var u=Tf(t.Yn.It,a);i=i.add(o.path.popLast());var c=fd(u);r+=c-s.size,n.push(t.Yn.addEntry(e,o,u))}else if(r-=s.size,t.trackRemovals){var l=Tf(t.Yn.It,a.convertToNoDocument($s.min()));n.push(t.Yn.addEntry(e,o,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),mu.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Ad);function Dd(e){return wf(e,"remoteDocumentGlobal")}function Od(e){return wf(e,"remoteDocumentsV14")}function Ld(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function jd(e,t){var n=t.documentKey.path.toArray();return[e,Cf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Fd(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,o=0;o<n.length-2&&o<r.length-2;++o)if(i=Qs(n[o],r[o]))return i;return(i=Qs(n.length,r.length))||((i=Qs(n[n.length-2],r[r.length-2]))||Qs(n[n.length-1],r[r.length-1]))}var Md=v((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Ud=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Nl(r.mutation,e,Uu.empty(),Js.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,nh()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nh(),i=Jl();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Yl();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Jl();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,nh())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Gl(),o=Zl(),a=Zl();return t.forEach((function(e,t){var a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Ol)?i=i.insert(t.key,t):void 0!==a&&(o.set(t.key,a.mutation.getFieldMask()),Nl(a.mutation,t,a.mutation.getFieldMask(),Js.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return o.set(e,t)})),t.forEach((function(e,t){var n;return a.set(e,new Md(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Zl(),i=new Du((function(e,t){return e-t})),o=nh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,o=je(e);try{var a=function(){var e=n.value;e.keys().forEach((function(n){var o=t.get(n);if(null!==o){var a=r.get(n)||Uu.empty();a=e.applyToLocalView(o,a),r.set(n,a);var s=(i.get(e.batchId)||nh()).add(n);i=i.insert(e.batchId,s)}}))};for(o.s();!(n=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}})).next((function(){for(var a=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=$l();c.forEach((function(e){if(!o.has(e)){var n=Cl(t.get(e),r.get(e));null!==n&&l.set(e,n),o=o.add(e)}})),a.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return mu.waitFor(a)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ru.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(o){var a=r-o.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):mu.resolve(Jl()),s=-1,u=o;return a.next((function(t){return mu.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),o.get(t)?mu.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,o)})).next((function(){return i.computeViews(e,u,t,nh())})).next((function(e){return{batchId:s,changes:Xl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ru(t)).next((function(e){var t=Yl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,o=Yl();return this.indexManager.getCollectionParents(e,i).next((function(a){return mu.forEach(a,(function(a){var s=function(e,t){return new Wc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(o){return r=o,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,_c.newInvalidDocument(n)))}));var n=Yl();return r.forEach((function(r,i){var o=e.get(r);void 0!==o&&Nl(o.mutation,i,Uu.empty(),Js.now()),il(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):mu.resolve(_c.newInvalidDocument(t))}}]),e}(),Vd=function(){function e(t){d(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return mu.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:bh(n.createTime)}),mu.resolve()}},{key:"getNamedQuery",value:function(e,t){return mu.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Of(e.bundledQuery),readTime:bh(e.readTime)}}(t)),mu.resolve()}}]),e}(),Bd=function(){function e(){d(this,e),this.overlays=new Du(ru.comparator),this.es=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return mu.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jl();return mu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),mu.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),mu.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Jl(),i=t.length+1,o=new ru(t.child("")),a=this.overlays.getIteratorFrom(o);a.hasNext();){var s=a.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return mu.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Du((function(e,t){return e-t})),o=this.overlays.getIterator();o.hasNext();){var a=o.getNext().value;if(a.getKey().getCollectionGroup()===t&&a.largestBatchId>n){var s=i.get(a.largestBatchId);null===s&&(s=Jl(),i=i.insert(a.largestBatchId,s)),s.set(a.getKey(),a)}}for(var u=Jl(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return mu.resolve(u)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Sf(t,n));var o=this.es.get(t);void 0===o&&(o=nh(),this.es.set(t,o)),this.es.set(t,o.add(n.key))}}]),e}(),Kd=function(){function e(){d(this,e),this.ns=new ju(qd.ss),this.rs=new ju(qd.os)}return v(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new qd(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new qd(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new ru(new eu([])),r=new qd(n,e),i=new qd(n,e+1),o=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),o.push(e.key)})),o}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new ru(new eu([])),n=new qd(t,e),r=new qd(t,e+1),i=nh();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new qd(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),qd=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return v(e,null,[{key:"ss",value:function(e,t){return ru.comparator(e.key,t.key)||Qs(e._s,t._s)}},{key:"os",value:function(e,t){return Qs(e._s,t._s)||ru.comparator(e.key,t.key)}}]),e}(),zd=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new ju(qd.ss)}return v(e,[{key:"checkEmpty",value:function(e){return mu.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var o=new _f(i,t,n,r);this.mutationQueue.push(o);var a,s=je(r);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.gs=this.gs.add(new qd(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return mu.resolve(o)}},{key:"lookupMutationBatch",value:function(e,t){return mu.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return mu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return mu.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return mu.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new qd(t,0),i=new qd(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);o.push(t)})),mu.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ju(Qs);return t.forEach((function(e){var t=new qd(e,0),i=new qd(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),mu.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ru.isDocumentKey(i)||(i=i.child(""));var o=new qd(new ru(i),0),a=new ju(Qs);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e._s)),!0)}),o),mu.resolve(this.Is(a))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ds(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return mu.forEach(t.mutations,(function(i){var o=new qd(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new qd(t,0),r=this.gs.firstAfterOrEqual(n);return mu.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,mu.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Wd=function(){function e(t){d(this,e),this.Es=t,this.docs=new Du(ru.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return mu.resolve(n?n.document.mutableCopy():_c.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():_c.newInvalidDocument(e))})),mu.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Gl(),i=new ru(t.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||fu(lu(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return mu.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ps()}},{key:"As",value:function(e,t){return mu.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Hd(this)}},{key:"getSize",value:function(e){return mu.resolve(this.size)}}]),e}(),Hd=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),mu.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Ad),Gd=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new Wl((function(e){return Ec(e)}),Ic),this.lastRemoteSnapshotVersion=$s.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Kd,this.targetCount=0,this.vs=yd.Pn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),mu.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return mu.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return mu.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),mu.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),mu.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new yd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,mu.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),mu.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,mu.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return this.Rs.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),mu.waitFor(o).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return mu.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return mu.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),mu.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),mu.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),mu.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return mu.resolve(n)}},{key:"containsKey",value:function(e,t){return mu.resolve(this.Ps.containsKey(t))}}]),e}(),Qd=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new Au(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Gd(this),this.indexManager=new ed,this.remoteDocumentCache=new Wd((function(e){return r.referenceDelegate.xs(e)})),this.It=new If(n),this.Ns=new Vd(this.It)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Bd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new zd(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Cs("MemoryPersistence","Starting transaction:",e);var i=new Yd(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Ms(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return mu.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Yd=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(pu),Xd=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new Kd,this.$s=null}return v(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Ps()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),mu.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),mu.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),mu.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Ms",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mu.forEach(this.Ls,(function(r){var i=ru.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,$s.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return mu.or([function(){return mu.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Jd=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"$",value:function(e,t,n,r){var i=this,o=new yu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xh,{unique:!0}),e.createObjectStore("documentMutations")}(e),$d(e),function(e){e.createObjectStore("remoteDocuments")}(e));var a=mu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),$d(e)),a=a.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$s.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return mu.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.qs(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.Gs(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Qs(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.js(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(a=a.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ff});t.createIndex("collectionPathOverlayIndex",df,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",pf,{unique:!1})}(e)}))),n<13&&r>=13&&(a=a.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ef});t.createIndex("documentKeyIndex",tf),t.createIndex("collectionGroupIndex",nf)}(e)})).next((function(){return i.Ws(e,o)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(a=a.next((function(){return i.zs(e,o)}))),n<15&&r>=15&&(a=a.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:uf}).createIndex("sequenceNumberIndex",cf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:lf}).createIndex("documentKeyIndex",hf,{unique:!1})}(e)}))),a}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=fd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return mu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return mu.forEach(r,(function(r){Ds(r.userId===n.userId);var i=Rf(t.It,r);return hd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var o=new eu(n),a=function(e){return[0,Hh(e)]}(o);r.push(t.get(a).next((function(n){return n?mu.resolve():function(n){return t.put({targetId:0,path:Hh(n),sequenceNumber:e.highestListenSequenceNumber})}(o)})))})).next((function(){return mu.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:sf});var n=t.store("collectionParents"),r=new td,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Hh(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new eu(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),o=(n[2],Yh(r));return i(o.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Pf(r),o=Df(t.It,i);return n.put(o)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,o=t.store("remoteDocumentsV14"),a=(i=n,i.document?new ru(eu.fromString(i.document.name).popFirst(5)):i.noDocument?ru.fromSegments(i.noDocument.path):i.unknownDocument?ru.fromSegments(i.unknownDocument.path):Ps()).path.toArray(),s={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(o.put(s))})).next((function(){return mu.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Rd(this.It),o=new Qd(Xd.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:nh();Rf(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),mu.forEach(r,(function(e,r){var a=new Ss(r),s=Bf.oe(n.It,a),u=o.getIndexManager(a),c=dd.oe(a,n.It,u,o.referenceDelegate);return new Ud(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new bf(t,Au.at),e).next()}))}))}}]),e}();function $d(e){e.createObjectStore("targetDocuments",{keyPath:of}).createIndex("documentTargetsIndex",af,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rf,{unique:!0}),e.createObjectStore("targetGlobal")}var Zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ep=function(){function e(t,n,r,i,o,a,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=o,this.window=a,this.document=s,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new js(Ls.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Td(this,i),this.ii=n+"main",this.It=new If(u),this.ri=new ku(this.ii,this.Xs,new Jd(this.It)),this.Cs=new kd(this.referenceDelegate,this.It),this.remoteDocumentCache=Rd(this.It),this.Ns=new Mf,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&As("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new js(Ls.FAILED_PRECONDITION,Zd);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Au(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Pt(Nt().mark((function n(r){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Pt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return np(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(_u(t))return Cs("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Cs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return tp(e).get("owner").next((function(e){return mu.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return np(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,o=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=wf(e,"clientMetadata");return t.W().next((function(e){var n=o.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return mu.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=je(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?mu.resolve(!0):tp(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new js(Ls.FAILED_PRECONDITION,Zd);return!1}}return!(!t.networkEnabled||!t.inForeground)||np(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Cs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Pt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new bf(e,Au.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return np(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return dd.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new rd(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Bf.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Cs("IndexedDbPersistence","Starting transaction:",e);var i,o,a="readonly"===t?"readonly":"readwrite",s=15===(i=this.Xs)?kf:14===i?yf:13===i?mf:12===i?gf:11===i?vf:void Ps();return this.ri.runTransaction(e,a,s,(function(i){return o=new bf(i,r.Ss?r.Ss.next():Au.at),"readwrite-primary"===t?r.fi(o).next((function(e){return!!e||r.di(o)})).next((function(t){if(!t)throw As("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new js(Ls.FAILED_PRECONDITION,du);return n(o)})).next((function(e){return r.wi(o).next((function(){return e}))})):r.Vi(o).next((function(){return n(o)}))})).then((function(e){return o.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return tp(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new js(Ls.FAILED_PRECONDITION,Zd)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tp(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=tp(e);return n.get("owner").next((function(e){return t.mi(e)?(Cs("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):mu.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(As("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Cs("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return As("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(xr){As("Failed to set zombie client id.",xr)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(xr){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return ku.C()}}]),e}();function tp(e){return wf(e,"owner")}function np(e){return wf(e,"clientMetadata")}function rp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ip=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return v(e,null,[{key:"Ci",value:function(t,n){var r,i=nh(),o=nh(),a=je(n.docChanges);try{for(a.s();!(r=a.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}}}catch(u){a.e(u)}finally{a.f()}return new e(t,n.fromCache,i,o)}}]),e}(),op=function(){function e(){d(this,e),this.xi=!1}return v(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(o){return o||i.Mi(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Qc(t))return mu.resolve(null);var r=Zc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=el(t,null,"F"),r=Zc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var o=nh.apply(void 0,f(i));return n.Ni.getDocuments(e,o).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var a=n.Fi(t,i);return n.$i(t,a,o,r.readTime)?n.ki(e,el(t,null,"F")):n.Bi(e,a,t,r)}))}))})))}))}},{key:"Mi",value:function(e,t,n,r){var i=this;return Qc(t)||r.isEqual($s.min())?this.Oi(e,t):this.Ni.getDocuments(e,n).next((function(o){var a=i.Fi(t,o);return i.$i(t,a,n,r)?i.Oi(e,t):(Ts()<=Mt.DEBUG&&Cs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rl(t)),i.Bi(e,a,t,cu(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new ju(al(e));return t.forEach((function(t,r){il(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Ts()<=Mt.DEBUG&&Cs("QueryEngine","Using full collection scan to execute query:",rl(t)),this.Ni.getDocumentsMatchingQuery(e,t,hu.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ap=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Du(Qs),this.qi=new Wl((function(e){return Ec(e)}),Ic),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return v(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ud(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function sp(e,t,n,r){return new ap(e,t,n,r)}function up(e,t){return cp.apply(this,arguments)}function cp(){return cp=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,o=[],a=[],s=nh(),u=je(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;o.push(c.batchId);var l,h=je(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=je(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;a.push(v.batchId);var g,m=je(v.mutations);try{for(m.s();!(g=m.n()).done;){var y=g.value;s=s.add(y.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:o,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function lp(e,t){var n=Os(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=mu.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);Ds(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=nh(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function hp(e){var t=Os(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function fp(e,t){var n=Os(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var a=[];t.targetChanges.forEach((function(o,s){var u=i.get(s);if(u){a.push(n.Cs.removeMatchingKeys(e,o.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,o.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Vu.EMPTY_BYTE_STRING,$s.min()).withLastLimboFreeSnapshotVersion($s.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,o)&&a.push(n.Cs.updateTargetData(e,c))}}));var s=Gl(),u=nh();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(dp(e,o,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual($s.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(c)}return mu.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ui=i,e}))}function dp(e,t,n){var r=nh(),i=nh();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gl();return n.forEach((function(n,o){var a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual($s.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Cs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Wi:r,zi:i}}))}function pp(e,t){var n=Os(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function vp(e,t){var n=Os(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,mu.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Ef(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function gp(e,t,n){return mp.apply(this,arguments)}function mp(){return mp=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Os(t),o=i.Ui.get(n),a=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_u(e.t1)){e.next=12;break}throw e.t1;case 12:Cs("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),mp.apply(this,arguments)}function yp(e,t,n){var r=Os(e),i=$s.min(),o=nh();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Os(e),i=r.qi.get(n);return void 0!==i?mu.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Zc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:$s.min(),n?o:nh())})).next((function(e){return wp(r,ol(t),e),{documents:e,Hi:o}}))}))}function kp(e,t){var n=Os(e),r=Os(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function bp(e,t){var n=Os(e),r=n.Ki.get(t)||$s.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,cu(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return wp(n,t,e),e}))}function wp(e,t,n){var r=$s.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function _p(e,t,n,r){return xp.apply(this,arguments)}function xp(){return xp=Pt(Nt().mark((function e(t,n,r,i){var o,a,s,u,c,l,h,f,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Os(t),a=nh(),s=Gl(),u=je(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Ji(l.metadata.name),l.document&&(a=a.add(h)),(f=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=o.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,vp(o,function(e){return Zc(Gc(eu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return dp(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return o.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.Cs.addMatchingKeys(e,a,p.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Sp(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=Pt(Nt().mark((function e(t,n){var r,i,o,a=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:nh(),e.next=3,vp(t,Zc(Of(n.bundledQuery)));case 3:return i=e.sent,o=Os(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=bh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ns.saveNamedQuery(e,n);var a=i.withResumeToken(Vu.EMPTY_BYTE_STRING,t);return o.Ui=o.Ui.insert(a.targetId,a),o.Cs.updateTargetData(e,a).next((function(){return o.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function Ip(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Tp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Cp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ap=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&((a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new js(o.error.code,o.error.message))),a?new e(t,n,o.state,i):(As("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Np=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new js(i.error.code,i.error.message))),o?new e(t,i.state,r):(As("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Rp=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ih(),a=0;i&&a<r.activeTargetIds.length;++a)i=$u(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(As("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Pp=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(As("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Dp=function(){function e(){d(this,e),this.activeTargetIds=ih()}return v(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Op=function(){function e(t,n,r,i,o){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Du(Qs),this.started=!1,this.cr=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=Ip(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Dp),this.lr=new RegExp("^firestore_clients_".concat(a,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(a,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(a,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return v(e,[{key:"start",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,o,a,s,u,c,l,h,f=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=je(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(Ip(this.persistenceKey,i)))&&(a=Rp.Zi(i,o))&&(this.ur=this.ur.insert(a.clientId,a));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(s=this.storage.getItem(this.wr))&&(u=this.yr(s))&&this.pr(u),c=je(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.rr(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Cp(this.persistenceKey,e));if(n){var r=Np.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Cp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Cs("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Cs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Cs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Cs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void As("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Pt(Nt().mark((function e(){var r,i,o,a,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(o));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(a));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(s));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}u=function(e){var t=Au.at;if(null!=e)try{var n=JSON.parse(e);Ds("number"==typeof n),t=n}catch(e){As("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Au.at&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Mr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Ap(this.currentUser,e,t,n),i=Tp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Tp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Cp(this.persistenceKey,e),i=new Np(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Rp.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ap.Zi(new Ss(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Np.Zi(r,t)}},{key:"yr",value:function(e){return Pp.Zi(e)}},{key:"Mr",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Cs("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),o=this.Ir(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.Br(a,s).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=ih();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Lp=function(){function e(){d(this,e),this.Lr=new Dp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Dp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),jp=function(){function e(){d(this,e)}return v(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Fp=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return v(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Cs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=je(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Cs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=je(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Mp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Up=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return v(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Vp=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"lo",value:function(e,t,n,r){return new Promise((function(i,o){var a=new _s;a.listenOnce(ms.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case gs.NO_ERROR:var t=a.getResponseJson();Cs("Connection","XHR received:",JSON.stringify(t)),i(t);break;case gs.TIMEOUT:Cs("Connection",'RPC "'+e+'" timed out'),o(new js(Ls.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:var n=a.getStatus();if(Cs("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ls).indexOf(t)>=0?t:Ls.UNKNOWN}(r.status);o(new js(s,r.message))}else o(new js(Ls.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new js(Ls.UNAVAILABLE,"Connection failed."));break;default:Ps()}}finally{Cs("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))}},{key:"_o",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ps(),o=vs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new bs({})),this.ho(a.initMessageHeaders,t,n),Je()||et()||Xe().indexOf("Electron/")>=0||tt()||Xe().indexOf("MSAppHost/")>=0||Ze()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Cs("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,h=new Up({Hr:function(e){l?Cs("Connection","Not sending because WebChannel is closed:",e):(c||(Cs("Connection","Opening WebChannel transport."),u.open(),c=!0),Cs("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,ws.EventType.OPEN,(function(){l||Cs("Connection","WebChannel transport opened.")})),f(u,ws.EventType.CLOSE,(function(){l||(l=!0,Cs("Connection","WebChannel transport closed"),h.io())})),f(u,ws.EventType.ERROR,(function(e){l||(l=!0,Ns("Connection","WebChannel transport errored:",e),h.io(new js(Ls.UNAVAILABLE,"The operation could not be completed")))})),f(u,ws.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ds(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Cs("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Ml[e];if(void 0!==t)return zl(t)}(o),s=i.message;void 0===a&&(a=Ls.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.io(new js(a,s)),u.close()}else Cs("Connection","WebChannel received:",n),h.ro(n)}})),f(o,ys.STAT_EVENT,(function(e){e.stat===ks.PROXY?Cs("Connection","Detected buffering proxy"):e.stat===ks.NOPROXY&&Cs("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"co",value:function(e,t,n,r,i){var o=this.ao(e,t);Cs("RestConnection","Sending: ",o,n);var a={};return this.ho(a,r,i),this.lo(e,o,a,n).then((function(e){return Cs("RestConnection","Received: ",e),e}),(function(t){throw Ns("RestConnection","".concat(e," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,o){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Es,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Mp[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Bp(){return"undefined"!=typeof window?window:null}function Kp(){return"undefined"!=typeof document?document:null}function qp(e){return new gh(e,!0)}var zp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.wo=r,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Cs("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}},{key:"bo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Wp=function(){function e(t,n,r,i,o,a,s,u){d(this,e),this.Hs=t,this.Po=r,this.vo=i,this.Vo=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zp(t,n)}return v(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ls.RESOURCE_EXHAUSTED?(As(n.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===Ls.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],o=r[1];e.So===n&&e.Go(i,o)}),(function(n){t((function(){var t=new js(Ls.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.xo.Ao(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Cs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Cs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Hp=function(e){m(n,e);var t=x(n);function n(e,r,i,o,a,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,s)).It=a,u}return v(n,[{key:"jo",value:function(e,t){return this.Vo._o("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ps()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.gt?(Ds(void 0===t||"string"==typeof t),Vu.fromBase64String(t||"")):(Ds(void 0===t||t instanceof Uint8Array),Vu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){var t=void 0===e.code?Ls.UNKNOWN:zl(e.code);return new js(t,e.message||"")}(a);n=new ch(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Sh(e,u.document.name),l=bh(u.document.updateTime),h=new bc({mapValue:{fields:u.document.fields}}),f=_c.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new sh(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var g=Sh(e,v.document),m=v.readTime?bh(v.readTime):$s.min(),y=_c.newNoDocument(g,m),k=v.removedTargetIds||[];n=new sh([],k,y.key,y)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Sh(e,b.document),_=b.removedTargetIds||[];n=new sh([],_,w,null)}else{if(!("filter"in t))return Ps();t.filter;var x=t.filter;x.targetId;var S=x.count||0,E=new Kl(S),I=x.targetId;n=new uh(I,E)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return $s.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$s.min():t.readTime?bh(t.readTime):$s.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Th(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Tc(r)?{documents:Oh(e,r)}:{query:Lh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=yh(e,t.resumeToken):t.snapshotVersion.compareTo($s.min())>0&&(n.readTime=mh(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ps()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Th(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(Wp),Gp=function(e){m(n,e);var t=x(n);function n(e,r,i,o,a,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,s)).It=a,u.Jo=!1,u}return v(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,ur(y(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.Vo._o("Write",e,t)}},{key:"onMessage",value:function(e){if(Ds(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Ds(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?bh(e.updateTime):bh(t);return n.isEqual($s.min())&&(n=bh(t)),new Sl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=bh(e.commitTime);return this.listener.Zo(n,t)}return Ds(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Th(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ph(t.It,e)}))};this.Bo(n)}}]),n}(Wp),Qp=function(e){m(n,e);var t=x(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this)).authCredentials=e,a.appCheckCredentials=r,a.Vo=i,a.It=o,a.nu=!1,a}return v(n,[{key:"su",value:function(){if(this.nu)throw new js(Ls.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=l(i,2),a=o[0],s=o[1];return r.Vo.co(e,t,n,a,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ls.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new js(Ls.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var a=l(o,2),s=a[0],u=a[1];return i.Vo.fo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ls.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new js(Ls.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return v((function e(){d(this,e)}))}()),Yp=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return v(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(As(t),this.ou=!1):Cs("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Xp=v((function e(t,n,r,i,o){var a=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.qr((function(e){r.enqueueAndForget(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=sv(a),!e.t0){e.next=5;break}return Cs("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Os(t))._u.add(4),e.next=4,Zp(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Jp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(a);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Yp(r,i)}));function Jp(e){return $p.apply(this,arguments)}function $p(){return $p=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sv(t)){e.next=18;break}n=je(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),$p.apply(this,arguments)}function Zp(e){return ev.apply(this,arguments)}function ev(){return ev=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=je(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ev.apply(this,arguments)}function tv(e,t){var n=Os(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),av(n)?ov(n):jv(n).ko()&&rv(n,t))}function nv(e,t){var n=Os(e),r=jv(n);n.du.delete(t),r.ko()&&iv(n,t),0===n.du.size&&(r.ko()?r.Fo():sv(n)&&n.gu.set("Unknown"))}function rv(e,t){e.yu.Ot(t.targetId),jv(e).zo(t)}function iv(e,t){e.yu.Ot(t),jv(e).Ho(t)}function ov(e){e.yu=new hh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),jv(e).start(),e.gu.uu()}function av(e){return sv(e)&&!jv(e).No()&&e.du.size>0}function sv(e){return 0===Os(e)._u.size}function uv(e){e.yu=void 0}function cv(e){return lv.apply(this,arguments)}function lv(){return lv=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){rv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function hv(e,t){return fv.apply(this,arguments)}function fv(){return fv=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uv(t),av(t)?(t.gu.hu(n),ov(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function dv(e,t,n){return pv.apply(this,arguments)}function pv(){return pv=Pt(Nt().mark((function e(t,n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof ch&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=je(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(a=o.value,e.t0=t.du.has(a),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(a,r);case 10:t.du.delete(a),t.yu.removeTarget(a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Cs("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,vv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof sh?t.yu.Gt(n):n instanceof uh?t.yu.Yt(n):t.yu.Wt(n),r.isEqual($s.min())){e.next=29;break}return e.prev=14,e.next=17,hp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Vu.EMPTY_BYTE_STRING,n.snapshotVersion)),iv(e,t);var r=new Ef(n.target,t,1,n.sequenceNumber);rv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Cs("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,vv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),pv.apply(this,arguments)}function vv(e,t,n){return gv.apply(this,arguments)}function gv(){return gv=Pt(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_u(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Zp(t);case 5:t.gu.set("Offline"),r||(r=function(){return hp(t.localStore)}),t.asyncQueue.enqueueRetryable(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Jp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),gv.apply(this,arguments)}function mv(e,t){return t().catch((function(n){return vv(e,n,t)}))}function yv(e){return kv.apply(this,arguments)}function kv(){return kv=Pt(Nt().mark((function e(t){var n,r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Os(t),r=Fv(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!bv(n)){e.next=19;break}return e.prev=3,e.next=6,pp(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=o.batchId,wv(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,vv(n,e.t0);case 17:e.next=2;break;case 19:_v(n)&&xv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),kv.apply(this,arguments)}function bv(e){return sv(e)&&e.fu.length<10}function wv(e,t){e.fu.push(t);var n=Fv(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function _v(e){return sv(e)&&!Fv(e).No()&&e.fu.length>0}function xv(e){Fv(e).start()}function Sv(e){return Ev.apply(this,arguments)}function Ev(){return Ev=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fv(t).eu();case 1:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function Iv(e){return Tv.apply(this,arguments)}function Tv(){return Tv=Pt(Nt().mark((function e(t){var n,r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fv(t),r=je(t.fu);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Xo(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Cv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),o=xf.from(i,n,r),e.next=3,mv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,yv(t);case 5:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Nv(e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Fv(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ql(i=n.code)||i===Ls.ABORTED){e.next=7;break}return r=t.fu.shift(),Fv(t).Oo(),e.next=5,mv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,yv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:_v(t)&&xv(t);case 5:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Pv(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Os(t)).asyncQueue.verifyOperationInProgress(),Cs("RemoteStore","RemoteStore received new credentials"),i=sv(r),r._u.add(3),e.next=6,Zp(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Jp(r);case 12:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Ov(e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Jp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Zp(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function jv(e){return e.pu||(e.pu=function(e,t,n){var r=Os(e);return r.su(),new Hp(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:cv.bind(null,e),Zr:hv.bind(null,e),Wo:dv.bind(null,e)}),e.wu.push(function(){var t=Pt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Oo(),av(e)?ov(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:uv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Fv(e){return e.Iu||(e.Iu=function(e,t,n){var r=Os(e);return r.su(),new Gp(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Sv.bind(null,e),Zr:Nv.bind(null,e),tu:Iv.bind(null,e),Zo:Cv.bind(null,e)}),e.wu.push(function(){var t=Pt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Oo(),t.next=4,yv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Cs("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Mv=function(){function e(t,n,r,i,o){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new js(Ls.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a}}]),e}();function Uv(e,t){if(As("AsyncQueue","".concat(t,": ").concat(e)),_u(e))return new js(Ls.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Vv=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||ru.comparator(e.key,n.key)}:function(e,t){return ru.comparator(e.key,t.key)},this.keyedMap=Yl(),this.sortedSet=new Du(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Bv=function(){function e(){d(this,e),this.Tu=new Du(ru.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ps():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Kv=function(){function e(t,n,r,i,o,a,s,u){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Vv.emptySet(n),o,r,i,!0,!1)}}]),e}(),qv=v((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),zv=v((function e(){d(this,e),this.queries=new Wl((function(e){return nl(e)}),tl),this.onlineState="Unknown",this.Ru=new Set}));function Wv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=Pt(Nt().mark((function e(t,n){var r,i,o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),i=n.query,o=!1,(a=r.queries.get(i))||(o=!0,a=new qv),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:a.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Uv(e.t0,"Initialization of query '".concat(rl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,a),a.listeners.push(n),n.bu(r.onlineState),a.Au&&n.Pu(a.Au)&&Jv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Hv.apply(this,arguments)}function Gv(e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=Pt(Nt().mark((function e(t,n){var r,i,o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),i=n.query,o=!1,(a=r.queries.get(i))&&(s=a.listeners.indexOf(n))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(e,t){var n,r=Os(e),i=!1,o=je(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.query,u=r.queries.get(s);if(u){var c,l=je(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(a)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Au=a}}}catch(h){o.e(h)}finally{o.f()}i&&Jv(r)}function Xv(e,t,n){var r=Os(e),i=r.queries.get(t);if(i){var o,a=je(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(s){a.e(s)}finally{a.f()}}r.queries.delete(t)}function Jv(e){e.Ru.forEach((function(e){e.next()}))}var $v=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=je(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}e=new Kv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),o=!0):this.Cu(e,this.onlineState)&&(this.xu(e),o=!0),this.Su=e,o}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}]),e}(),Zv=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return v(e,[{key:"ku",value:function(){return"metadata"in this.payload}}]),e}(),eg=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"Ji",value:function(e){return Sh(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Nh(this.It,e.document,!1):_c.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return bh(e)}}]),e}(),tg=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ng(t)}return v(e,[{key:"Ou",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=eu.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Fu",value:function(e){var t,n=new Map,r=new eg(this.It),i=je(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.metadata.queries){var a,s=r.Ji(o.metadata.name),u=je(o.metadata.queries);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=(n.get(c)||nh()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_p(this.localStore,new eg(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.Fu(this.documents),r=je(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,Sp(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ng(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var rg=v((function e(t){d(this,e),this.key=t})),ig=v((function e(t){d(this,e),this.key=t})),og=function(){function e(t,n){d(this,e),this.query=t,this.Lu=n,this.Uu=null,this.current=!1,this.qu=nh(),this.mutatedKeys=nh(),this.Ku=al(t),this.Gu=new Vv(this.Ku)}return v(e,[{key:"Qu",get:function(){return this.Lu}},{key:"ju",value:function(e,t){var n=this,r=t?t.Wu:new Bv,i=t?t.Gu:this.Gu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=il(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.zu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Ku(h,u)>0||c&&n.Ku(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){var l="F"===this.query.limitType?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Gu:a,Wu:r,$i:s,mutatedKeys:o}}},{key:"zu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var o=e.Wu.Eu();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ps()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var a=t?this.Ju():[],s=0===this.qu.size&&this.current?1:0,u=s!==this.Uu;return this.Uu=s,0!==o.length||u?{snapshot:new Kv(this.query,e.Gu,i,o,e.mutatedKeys,0===s,u,!1),Yu:a}:{Yu:a}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Bv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}},{key:"Xu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.qu;this.qu=nh(),this.Gu.forEach((function(t){e.Xu(t.key)&&(e.qu=e.qu.add(t.key))}));var n=[];return t.forEach((function(t){e.qu.has(t)||n.push(new ig(t))})),this.qu.forEach((function(e){t.has(e)||n.push(new rg(e))})),n}},{key:"Zu",value:function(e){this.Lu=e.Hi,this.qu=nh();var t=this.ju(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Kv.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}]),e}(),ag=v((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),sg=v((function e(t){d(this,e),this.key=t,this.ec=!1})),ug=function(){function e(t,n,r,i,o,a){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.nc={},this.sc=new Wl((function(e){return nl(e)}),tl),this.ic=new Map,this.rc=new Set,this.oc=new Du(ru.comparator),this.uc=new Map,this.cc=new Kd,this.ac={},this.hc=new Map,this.lc=yd.vn(),this.onlineState="Unknown",this.fc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function cg(e,t){return lg.apply(this,arguments)}function lg(){return lg=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nm(t),!(a=r.sc.get(n))){e.next=6;break}i=a.targetId,r.sharedClientState.addLocalQueryTarget(i),o=a.view.tc(),e.next=15;break;case 6:return e.next=8,vp(r.localStore,Zc(n));case 8:return s=e.sent,r.isPrimaryClient&&tv(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,hg(r,n,i,"current"===u);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),lg.apply(this,arguments)}function hg(e,t,n,r){return fg.apply(this,arguments)}function fg(){return fg=Pt(Nt().mark((function e(t,n,r,i){var o,a,s,u,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=Pt(Nt().mark((function e(t,n,r,i){var o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.ju(r),e.t0=o.$i,!e.t0){e.next=6;break}return e.next=5,yp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ju(t,o)}));case 5:o=e.sent;case 6:return a=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,a),e.abrupt("return",(Pg(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,yp(t.localStore,n,!0);case 3:return o=e.sent,a=new og(n,o.Hi),s=a.ju(o.documents),u=ah.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=a.applyChanges(s,t.isPrimaryClient,u),Pg(t,r,c.Yu),l=new ag(n,r,a),e.abrupt("return",(t.sc.set(n,l),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),fg.apply(this,arguments)}function dg(e,t){return pg.apply(this,arguments)}function pg(){return pg=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),i=r.sc.get(n),!((o=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,o.filter((function(e){return!tl(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,gp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),nv(r.remoteStore,i.targetId),Ng(r,i.targetId)})).catch(vu);case 9:e.next=14;break;case 11:return Ng(r,i.targetId),e.next=14,gp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),pg.apply(this,arguments)}function vg(e,t,n){return gg.apply(this,arguments)}function gg(){return gg=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Os(e),o=Js.now(),a=t.reduce((function(e,t){return e.add(t.key)}),nh());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Gl(),u=nh();return i.Gi.getEntries(e,a).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var a,s=[],u=je(t);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=Rl(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Ol(c.key,l,wc(l.value.mapValue),El.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,o,s,t)})).next((function(t){r=t;var o=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,o)}))})).then((function(){return{batchId:r.batchId,changes:Xl(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Du(Qs)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,Lg(i,o.changes);case 9:return e.next=11,yv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a=Uv(e.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),gg.apply(this,arguments)}function mg(e,t){return yg.apply(this,arguments)}function yg(){return yg=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.prev=1,e.next=4,fp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Ds(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Ds(n.ec):e.removedDocuments.size>0&&(Ds(n.ec),n.ec=!1))})),e.next=8,Lg(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,vu(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),yg.apply(this,arguments)}function kg(e,t,n){var r=Os(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Os(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,o=je(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.bu(t)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}})),r&&Jv(n)}(r.eventManager,t),i.length&&r.nc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bg(e,t,n){return wg.apply(this,arguments)}function wg(){return wg=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Os(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.uc.get(n),!(a=o&&o.key)){e.next=14;break}return s=(s=new Du(ru.comparator)).insert(a,_c.newNoDocument(a,$s.min())),u=nh().add(a),c=new oh($s.min(),new Map,new ju(Qs),s,u),e.next=9,mg(i,c);case 9:i.oc=i.oc.remove(a),i.uc.delete(n),Og(i),e.next=16;break;case 14:return e.next=16,gp(i.localStore,n,!1).then((function(){return Ng(i,n,r)})).catch(vu);case 16:case"end":return e.stop()}}),e)}))),wg.apply(this,arguments)}function _g(e,t){return xg.apply(this,arguments)}function xg(){return xg=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),i=n.batch.batchId,e.prev=1,e.next=4,lp(r.localStore,n);case 4:return o=e.sent,Ag(r,i,null),Cg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Lg(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),xg.apply(this,arguments)}function Sg(e,t,n){return Eg.apply(this,arguments)}function Eg(){return Eg=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Os(t),e.prev=1,e.next=4,function(e,t){var n=Os(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ds(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,Ag(i,n,r),Cg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Lg(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Eg.apply(this,arguments)}function Ig(e,t){return Tg.apply(this,arguments)}function Tg(){return Tg=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sv((r=Os(t)).remoteStore)||Cs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Os(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.hc.get(i)||[]).push(n),r.hc.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),a=Uv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(a);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Tg.apply(this,arguments)}function Cg(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function Ag(e,t,n){var r=Os(e),i=r.ac[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function Ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=je(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.sc.delete(o),n&&e.nc._c(o,n)}}catch(a){i.e(a)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.ls(t).forEach((function(t){e.cc.containsKey(t)||Rg(e,t)}))}function Rg(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(nv(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Og(e))}function Pg(e,t,n){var r,i=je(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof rg?(e.cc.addReference(o.key,t),Dg(e,o)):o instanceof ig?(Cs("SyncEngine","Document no longer in limbo: "+o.key),e.cc.removeReference(o.key,t),e.cc.containsKey(o.key)||Rg(e,o.key)):Ps()}}catch(a){i.e(a)}finally{i.f()}}function Dg(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Cs("SyncEngine","New document in limbo: "+n),e.rc.add(r),Og(e))}function Og(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new ru(eu.fromString(t)),r=e.lc.next();e.uc.set(r,new sg(n)),e.oc=e.oc.insert(n,r),tv(e.remoteStore,new Ef(Zc(Gc(n.path)),r,2,Au.at))}}function Lg(e,t,n){return jg.apply(this,arguments)}function jg(){return jg=Pt(Nt().mark((function e(t,n,r){var i,o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Os(t),o=[],a=[],s=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){s.push(i.dc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=ip.Ci(t.targetId,e);a.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.nc.Wo(o),e.next=9,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return mu.forEach(n,(function(t){return mu.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return mu.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_u(e.t0)){e.next=10;break}throw e.t0;case 10:Cs("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=je(n);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.targetId,a.fromCache||(u=r.Ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,a);case 9:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function Fg(e,t){return Mg.apply(this,arguments)}function Mg(){return Mg=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Os(t)).currentUser.isEqual(n)){e.next=11;break}return Cs("SyncEngine","User change. New user:",n.toKey()),e.next=5,up(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new js(Ls.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Lg(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Ug(e,t){var n=Os(e),r=n.uc.get(t);if(r&&r.ec)return nh().add(r.key);var i=nh(),o=n.ic.get(t);if(!o)return i;var a,s=je(o);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=n.sc.get(u);i=i.unionWith(c.view.Qu)}}catch(l){s.e(l)}finally{s.f()}return i}function Vg(e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.next=3,yp(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.Zu(i),e.abrupt("return",(r.isPrimaryClient&&Pg(r,n.targetId,o.Yu),o));case 6:case"end":return e.stop()}}),e)}))),Bg.apply(this,arguments)}function Kg(e,t){return qg.apply(this,arguments)}function qg(){return qg=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.abrupt("return",bp(r.localStore,n).then((function(e){return Lg(r,e)})));case 2:case"end":return e.stop()}}),e)}))),qg.apply(this,arguments)}function zg(e,t,n,r){return Wg.apply(this,arguments)}function Wg(){return Wg=Pt(Nt().mark((function e(t,n,r,i){var o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Os(t),e.next=3,function(e,t){var n=Os(e),r=Os(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):mu.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(a=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,yv(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ag(o,n,i||null),Cg(o,n),function(e,t){Os(Os(e).mutationQueue).An(t)}(o.localStore,n)):Ps();case 11:return e.next=13,Lg(o,a);case 13:e.next=16;break;case 15:Cs("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Wg.apply(this,arguments)}function Hg(e,t){return Gg.apply(this,arguments)}function Gg(){return Gg=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nm(r=Os(t)),rm(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Qg(r,i.toArray());case 5:return o=e.sent,r.fc=!0,e.next=9,Ov(r.remoteStore,!0);case 9:a=je(o);try{for(a.s();!(s=a.n()).done;)u=s.value,tv(r.remoteStore,u)}catch(h){a.e(h)}finally{a.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ng(r,t),gp(r.localStore,t,!0)})),nv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Qg(r,c);case 21:return function(e){var t=Os(e);t.uc.forEach((function(e,n){nv(t.remoteStore,n)})),t.cc.fs(),t.uc=new Map,t.oc=new Du(ru.comparator)}(r),r.fc=!1,e.next=25,Ov(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Gg.apply(this,arguments)}function Qg(e,t,n){return Yg.apply(this,arguments)}function Yg(){return Yg=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u,c,l,h,f,d,p,v,g,m;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Os(t),o=[],a=[],s=je(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ic.get(c))||0===h.length){e.next=34;break}return e.next=11,vp(i.localStore,Zc(h[0]));case 11:l=e.sent,f=je(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.sc.get(p),e.next=20,Vg(i,v);case 20:(g=e.sent).snapshot&&a.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,kp(i.localStore,c);case 36:return m=e.sent,e.next=39,vp(i.localStore,m);case 39:return l=e.sent,e.next=42,hg(i,Xg(m),c,!1);case 42:o.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.Wo(a),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Yg.apply(this,arguments)}function Xg(e){return Hc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Jg(e){var t=Os(e);return Os(Os(t.localStore).persistence).vi()}function $g(e,t,n,r){return Zg.apply(this,arguments)}function Zg(){return Zg=Pt(Nt().mark((function e(t,n,r,i){var o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Os(t)).fc){e.next=3;break}return e.abrupt("return",void Cs("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((a=o.ic.get(n))&&a.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,bp(o.localStore,ol(a[0]));case 10:return s=e.sent,u=oh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Lg(o,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,gp(o.localStore,n,!0);case 17:return Ng(o,n,i),e.abrupt("break",20);case 19:Ps();case 20:case"end":return e.stop()}}),e)}))),Zg.apply(this,arguments)}function em(e,t,n){return tm.apply(this,arguments)}function tm(){return tm=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=nm(t)).fc){e.next=45;break}o=je(n),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=21;break}if(s=a.value,!i.ic.has(s)){e.next=10;break}return Cs("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,kp(i.localStore,s);case 12:return u=e.sent,e.next=15,vp(i.localStore,u);case 15:return c=e.sent,e.next=18,hg(i,Xg(u),c.targetId,!1);case 18:tv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:l=je(r),e.prev=30,f=Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,gp(i.localStore,t,!1).then((function(){nv(i.remoteStore,t),Ng(i,t)})).catch(vu);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),tm.apply(this,arguments)}function nm(e){var t=Os(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ug.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bg.bind(null,t),t.nc.Wo=Yv.bind(null,t.eventManager),t.nc._c=Xv.bind(null,t.eventManager),t}function rm(e){var t=Os(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_g.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sg.bind(null,t),t}function im(e,t,n){var r=Os(e);(function(){var e=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Os(e),r=bh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ng(i)),o=new tg(i,t.localStore,n.It),e.next=15,n.wc();case 15:a=e.sent;case 16:if(!a){e.next=26;break}return e.next=19,o.Ou(a);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.wc();case 23:a=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return u=e.sent,e.next=31,Lg(t,u.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Os(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.$u));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ns("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var om=function(){function e(){d(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=qp(t.databaseInfo.databaseId),this.sharedClientState=this.mc(t),this.persistence=this.gc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.yc(t),this.gcScheduler=this.Ic(t,this.localStore),this.indexBackfillerScheduler=this.Tc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e,t){return null}},{key:"Tc",value:function(e,t){return null}},{key:"yc",value:function(e){return sp(this.persistence,new op,e.initialUser,this.It)}},{key:"gc",value:function(e){return new Qd(Xd.Bs,this.It)}},{key:"mc",value:function(e){return new Lp}},{key:"terminate",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),am=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).Ec=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return v(n,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ec.initialize(this,t);case 4:return e.next=6,rm(this.Ec.syncEngine);case 6:return e.next=8,yv(this.Ec.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"yc",value:function(e){return sp(this.persistence,new op,e.initialUser,this.It)}},{key:"Ic",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ed(n,e.asyncQueue,t)}},{key:"Tc",value:function(e,t){var n=new Cu(t,this.persistence);return new Tu(e.asyncQueue,n)}},{key:"gc",value:function(e){var t=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ld.withCacheSize(this.cacheSizeBytes):ld.DEFAULT;return new ep(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Bp(),Kp(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"mc",value:function(e){return new Lp}}]),n}(om),sm=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ec=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t){var r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ec.syncEngine,e.t0=this.sharedClientState instanceof Op,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:zg.bind(null,r),$r:$g.bind(null,r),Br:em.bind(null,r),vi:Jg.bind(null,r),Or:Kg.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hg(i.Ec.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e){var t=Bp();if(!Op.C(t))throw new js(Ls.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Op(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(am),um=function(){function e(){d(this,e)}return v(e,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return kg(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fg.bind(null,this.syncEngine),e.next=12,Ov(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new zv}},{key:"createDatastore",value:function(e){var t,n=qp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Vp(t));return function(e,t,n,r){return new Qp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return kg(a.syncEngine,e,0)},o=Fp.C()?new Fp:new jp,new Xp(t,n,r,i,o)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,o,a){var s=new ug(e,t,n,r,i,o);return a&&(s.fc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Os(t),Cs("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Zp(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function cm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Pt(Nt().mark((function r(){var i;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var lm=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.Ac(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ac(this.observer.error,e):As("Uncaught Error in snapshot listener:",e)}},{key:"Rc",value:function(){this.muted=!0}},{key:"Ac",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),hm=function(){function e(t,n){var r=this;d(this,e),this.bc=t,this.It=n,this.metadata=new Fs,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then((function(e){e&&e.ku()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.bc.cancel()}},{key:"getMetadata",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wc",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Pc.decode(t),r=Number(n),isNaN(r)&&this.Sc("length string (".concat(n,") is not valid number")),e.next=9,this.Dc(r);case 9:return i=e.sent,e.abrupt("return",new Zv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Vc",value:function(){var e=Pt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Cc()<0)){e.next=7;break}return e.next=3,this.xc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Cc())<0&&this.Sc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.xc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Sc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Pc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Sc",value:function(e){throw this.bc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"xc",value:function(){var e=Pt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),fm=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=Pt(Nt().mark((function e(t){var n,r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new js(Ls.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),i=Th(r.It)+"/documents",o={documents:n.map((function(e){return xh(r.It,e)}))},e.next=5,r.fo("BatchGetDocuments",i,o,n.length);case 5:return a=e.sent,s=new Map,a.forEach((function(e){var t=Rh(r.It,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Ds(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Vl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Pt(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ru.fromPath(t);n.mutations.push(new Bl(r,n.precondition(r)))})),e.next=7,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),i=Th(r.It)+"/documents",o={writes:n.map((function(e){return Ph(r.It,e)}))},e.next=3,r.co("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ps();t=$s.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new js(Ls.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($s.min())?El.exists(!1):El.updateTime(t):El.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($s.min()))throw new js(Ls.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return El.updateTime(t)}return El.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),dm=function(){function e(t,n,r,i,o){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Nc=r.maxAttempts,this.xo=new zp(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.Nc-=1,this.kc()}},{key:"kc",value:function(){var e=this;this.xo.Ao(Pt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new fm(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Oc(t)}))}))})).catch((function(t){e.Oc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Oc",value:function(e){var t=this;this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget((function(){return t.kc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Fc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ql(t)}return!1}}]),e}(),pm=function(){function e(t,n,r,i){var o=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ss.UNAUTHENTICATED,this.clientId=Gs.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Cs("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new js(Ls.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Pt(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Uv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function vm(e,t){return gm.apply(this,arguments)}function gm(){return gm=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Cs("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,up(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,km(t);case 3:return r=e.sent,Cs("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Pv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Pv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function km(e){return bm.apply(this,arguments)}function bm(){return bm=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Cs("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,vm(t,new om);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),bm.apply(this,arguments)}function wm(e){return _m.apply(this,arguments)}function _m(){return _m=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Cs("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,mm(t,new um);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),_m.apply(this,arguments)}function xm(e){return km(e).then((function(e){return e.persistence}))}function Sm(e){return km(e).then((function(e){return e.localStore}))}function Em(e){return wm(e).then((function(e){return e.remoteStore}))}function Im(e){return wm(e).then((function(e){return e.syncEngine}))}function Tm(e){return Cm.apply(this,arguments)}function Cm(){return Cm=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=cg.bind(null,n.syncEngine),r.onUnlisten=dg.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Am(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new lm({next:function(o){t.enqueueAndForget((function(){return Gv(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new js(Ls.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new js(Ls.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new $v(Gc(n.path),o,{includeMetadataChanges:!0,Nu:!0});return Wv(e,a)},i.next=3,Tm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Nm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new lm({next:function(n){t.enqueueAndForget((function(){return Gv(e,a)})),n.fromCache&&"server"===r.source?i.reject(new js(Ls.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new $v(n,o,{includeMetadataChanges:!0,Nu:!0});return Wv(e,a)},i.next=3,Tm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Rm=new Map;function Pm(e,t,n){if(!n)throw new js(Ls.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Dm(e,t,n,r){if(!0===t&&!0===r)throw new js(Ls.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Om(e){if(!ru.isDocumentKey(e))throw new js(Ls.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lm(e){if(ru.isDocumentKey(e))throw new js(Ls.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function jm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ps()}function Fm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new js(Ls.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jm(e);throw new js(Ls.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Mm(e,t){if(t<=0)throw new js(Ls.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Um=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new js(Ls.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new js(Ls.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Dm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Vm=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new js(Ls.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new js(Ls.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Us;switch(e.type){case"gapi":var t=e.client;return new qs(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new js(Ls.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Rm.get(e);t&&(Cs("ComponentProvider","Removing Datastore"),Rm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Bm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(e=Fm(e,Vm))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var a,s;if("string"==typeof i.mockUserToken)a=i.mockUserToken,s=Ss.MOCK_USER;else{a=Ye(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new js(Ls.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ss(u)}e._authCredentials=new Vs(new Ms(a,s))}}var Km=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new zm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),qm=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),zm=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r,Gc(i)))._path=i,o.type="collection",o}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Km(this.firestore,null,new ru(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(qm);function Wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),Pm("collection","path",t),e instanceof Vm){var o=eu.fromString.apply(eu,[t].concat(r));return Lm(o),new zm(e,null,o)}if(!(e instanceof Km||e instanceof zm))throw new js(Ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(eu.fromString.apply(eu,[t].concat(r)));return Lm(a),new zm(e.firestore,null,a)}function Hm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),1===arguments.length&&(t=Gs.R()),Pm("doc","path",t),e instanceof Vm){var o=eu.fromString.apply(eu,[t].concat(r));return Om(o),new Km(e,null,new ru(o))}if(!(e instanceof Km||e instanceof zm))throw new js(Ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(eu.fromString.apply(eu,[t].concat(r)));return Om(a),new Km(e.firestore,e instanceof zm?e.converter:null,new ru(a))}function Gm(e,t){return e=At(e),t=At(t),(e instanceof Km||e instanceof zm)&&(t instanceof Km||t instanceof zm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qm(e,t){return e=At(e),t=At(t),e instanceof qm&&t instanceof qm&&e.firestore===t.firestore&&tl(e._query,t._query)&&e.converter===t.converter}var Ym=function(){function e(){var t=this;d(this,e),this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new zp(this,"async_queue_retry"),this.jc=function(){var e=Kp();e&&Cs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.bo()};var n=Kp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.jc)}return v(e,[{key:"isShuttingDown",get:function(){return this.Lc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Wc(),this.zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;var t=Kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Wc(),this.Lc)return new Promise((function(){}));var n=new Fs;return this.zc((function(){return t.Lc&&t.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Bc.push(e),t.Hc()}))}},{key:"Hc",value:function(){var e=Pt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Bc.length){e.next=14;break}return e.prev=1,e.next=4,this.Bc[0]();case 4:this.Bc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_u(e.t0)){e.next=12;break}throw e.t0;case 12:Cs("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Bc.length>0&&this.xo.Ao((function(){return t.Hc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"zc",value:function(e){var t=this,n=this.$c.then((function(){return t.Kc=!0,e().catch((function(e){t.qc=e,t.Kc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw As("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Kc=!1,e}))}));return this.$c=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);var i=Mv.createAndSchedule(this,e,t,n,(function(e){return r.Jc(e)}));return this.Uc.push(i),i}},{key:"Wc",value:function(){this.qc&&Ps()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Yc",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$c,e.next=3,t;case 3:if(t!==this.$c){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xc",value:function(e){var t,n=je(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Zc",value:function(e){var t=this;return this.Yc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=je(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(o){r.e(o)}finally{r.f()}return t.Yc()}))}},{key:"ta",value:function(e){this.Qc.push(e)}},{key:"Jc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function Xm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=je(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"==typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e)}var Jm=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),$m=function(e){m(n,e);var t=x(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r,i,o)).type="firestore",a._queue=new Ym,a._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",a}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||ey(this),this._firestoreClient.terminate()}}]),n}(Vm);function Zm(e){return e._firestoreClient||ey(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ey(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Qu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function ty(e,t,n){var r=new Fs;return e.asyncQueue.enqueue(Pt(Nt().mark((function i(){var o;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,vm(e,n);case 3:return i.next=5,mm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ls.FAILED_PRECONDITION||e.code===Ls.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(o=i.t0)){i.next=13;break}throw o;case 13:Ns("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ny(e){return function(e){return e.asyncQueue.enqueue(Pt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xm(e);case 2:return n=t.sent,t.next=5,Em(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Os(e);return t._u.delete(0),Jp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Zm(e=Fm(e,$m)))}function ry(e){return function(e){return e.asyncQueue.enqueue(Pt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xm(e);case 2:return n=t.sent,t.next=5,Em(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Os(t))._u.add(0),e.next=4,Zp(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Zm(e=Fm(e,$m)))}function iy(e,t){var n=Zm(e=Fm(e,$m)),r=new Jm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new hm(e,t)}(function(e,t){if(e instanceof Uint8Array)return cm(e,t);if(e instanceof ArrayBuffer)return cm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,qp(t));e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=im,t.next=3,Im(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function oy(e,t){return function(e,t){return e.asyncQueue.enqueue(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Os(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,Sm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Zm(e=Fm(e,$m)),t).then((function(t){return t?new qm(e,null,t.query):null}))}function ay(e){if(e._initialized||e._terminated)throw new js(Ls.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sy=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new js(Ls.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nu(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var uy=function(){function e(t){d(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Vu.fromBase64String(t))}catch(t){throw new js(Ls.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Vu.fromUint8Array(t))}}]),e}(),cy=v((function e(t){d(this,e),this._methodName=t})),ly=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new js(Ls.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new js(Ls.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Qs(this._lat,e._lat)||Qs(this._long,e._long)}}]),e}(),hy=/^__.*__$/,fy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ol(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}]),e}(),dy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new Ol(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function py(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ps()}}var vy=function(){function e(t,n,r,i,o,a){d(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ea(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"na",get:function(){return this.settings.na}},{key:"sa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.oa(e),r}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.ea(),r}},{key:"ca",value:function(e){return this.sa({path:void 0,ra:!0})}},{key:"aa",value:function(e){return Ly(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ea",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.oa(this.path.get(e))}},{key:"oa",value:function(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(py(this.na)&&hy.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}]),e}(),gy=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||qp(t)}return v(e,[{key:"fa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new vy({na:e,methodName:t,la:n,path:nu.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function my(e){var t=e._freezeSettings(),n=qp(e._databaseId);return new gy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yy(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=e.fa(o.merge||o.mergeFields?2:0,t,n,i);Ry("Data must be an object, but it was:",a,r);var s,u,c=Ay(r,a);if(o.merge)s=new Uu(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){var l,h=[],f=je(o.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=Py(t,d,n);if(!a.contains(p))throw new js(Ls.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));jy(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new Uu(h),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new fy(new bc(c),s,u)}var ky=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.na)throw 1===e.na?e.aa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.aa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(cy);function by(e,t,n){return new vy({na:3,la:t.settings.la,methodName:e._methodName,ra:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var wy=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new xl(e.path,new vl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(cy),_y=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).da=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=by(this,e,!0),n=this.da.map((function(e){return Cy(e,t)})),r=new gl(n);return new xl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy),xy=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).da=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=by(this,e,!0),n=this.da.map((function(e){return Cy(e,t)})),r=new yl(n);return new xl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy),Sy=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new bl(e.It,ll(e.It,this._a));return new xl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy);function Ey(e,t,n,r){var i=e.fa(1,t,n);Ry("Data must be an object, but it was:",i,r);var o=[],a=bc.empty();Ru(r,(function(e,r){var s=Oy(t,e,n);r=At(r);var u=i.ua(s);if(r instanceof ky)o.push(s);else{var c=Cy(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Uu(o);return new dy(a,s,i.fieldTransforms)}function Iy(e,t,n,r,i,o){var a=e.fa(1,t,n),s=[Py(t,r,n)],u=[i];if(o.length%2!=0)throw new js(Ls.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<o.length;c+=2)s.push(Py(t,o[c])),u.push(o[c+1]);for(var l=[],h=bc.empty(),f=s.length-1;f>=0;--f)if(!jy(l,s[f])){var d=s[f],p=u[f];p=At(p);var v=a.ua(d);if(p instanceof ky)l.push(d);else{var g=Cy(p,v);null!=g&&(l.push(d),h.set(d,g))}}var m=new Uu(l);return new dy(h,m,a.fieldTransforms)}function Ty(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cy(n,e.fa(r?4:3,t))}function Cy(e,t){if(Ny(e=At(e)))return Ry("Unsupported field value:",t,e),Ay(e,t);if(e instanceof cy)return function(e,t){if(!py(t.na))throw t.aa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.aa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,o=je(e);try{for(o.s();!(n=o.n()).done;){var a=Cy(n.value,t.ca(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(s){o.e(s)}finally{o.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=At(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ll(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Js.fromDate(e);return{timestampValue:mh(t.It,n)}}if(e instanceof Js){var r=new Js(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mh(t.It,r)}}if(e instanceof ly)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uy)return{bytesValue:yh(t.It,e._byteString)};if(e instanceof Km){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.aa("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:wh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.aa("Unsupported field value: ".concat(jm(e)))}(e,t)}function Ay(e,t){var n={};return Pu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ru(e,(function(e,r){var i=Cy(r,t.ia(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ny(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Js||e instanceof ly||e instanceof uy||e instanceof Km||e instanceof cy)}function Ry(e,t,n){if(!Ny(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=jm(n);throw"an object"===r?t.aa(e+" a custom object"):t.aa(e+" "+r)}}function Py(e,t,n){if((t=At(t))instanceof sy)return t._internalPath;if("string"==typeof t)return Oy(e,t);throw Ly("Field path arguments must be of type string or ",e,!1,void 0,n)}var Dy=new RegExp("[~\\*/\\[\\]]");function Oy(e,t,n){if(t.search(Dy)>=0)throw Ly("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(sy,f(t.split(".")))._internalPath}catch(r){throw Ly("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ly(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field ".concat(r)),a&&(u+=" in document ".concat(i)),u+=")"),new js(Ls.INVALID_ARGUMENT,s+e+u)}function jy(e,t){return e.some((function(e){return e.isEqual(t)}))}var Fy=function(){function e(t,n,r,i,o){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Km(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new My(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),My=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return ur(y(n.prototype),"data",this).call(this)}}]),n}(Fy);function Uy(e,t){return"string"==typeof t?Oy(e,t):t instanceof sy?t._internalPath:t._delegate._internalPath}var Vy=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),By=function(e){m(n,e);var t=x(n);function n(e,r,i,o,a,s){var u;return d(this,n),(u=t.call(this,e,r,i,o,s))._firestore=e,u._firestoreImpl=e,u.metadata=a,u}return v(n,[{key:"exists",value:function(){return ur(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Fy),Ky=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ur(y(n.prototype),"data",this).call(this,e)}}]),n}(By),qy=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vy(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ky(n._firestore,n._userDataWriter,r.key,r,new Vy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new js(Ls.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:zy(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function zy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ps()}}function Wy(e,t){return e instanceof By&&t instanceof By?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof qy&&t instanceof qy&&e._firestore===t._firestore&&Qm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Hy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new js(Ls.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gy=v((function e(){d(this,e)}));function Qy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=a._apply(e)}return e}var Yy=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).wa=e,o.ma=r,o.ga=i,o.type="where",o}return v(n,[{key:"_apply",value:function(e){var t=my(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new js(Ls.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){ak(a,o);var u,c=[],l=je(a);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(ok(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=ok(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ak(a,o),s=Ty(n,"where",a,"in"===o||"not-in"===o);var f=Rc.create(i,o,s);return function(e,t){if(t.dt()){var n=Xc(e);if(null!==n&&!n.isEqual(t.field))throw new js(Ls.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Yc(e);null!==r&&sk(e,t.field,r)}var i=function(e,t){var n,r=je(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new js(Ls.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new js(Ls.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new qm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Gy);var Xy=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).wa=e,i.ya=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new js(Ls.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new js(Ls.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bc(t,n);return function(e,t){if(null===Yc(e)){var n=Xc(e);null!==n&&sk(e,n,t.field)}}(e,r),r}(e._query,this.wa,this.ya);return new qm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Wc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Gy);var Jy=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).type=e,o.pa=r,o.Ia=i,o}return v(n,[{key:"_apply",value:function(e){return new qm(e.firestore,e.converter,el(e._query,this.pa,this.Ia))}}]),n}(Gy);var $y=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).type=e,o.Ta=r,o.Ea=i,o}return v(n,[{key:"_apply",value:function(e){var t=ik(e,this.type,this.Ta,this.Ea);return new qm(e.firestore,e.converter,function(e,t){return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Gy);function Zy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $y("startAt",t,!0)}function ek(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $y("startAfter",t,!1)}var tk=function(e){m(n,e);var t=x(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).type=e,o.Ta=r,o.Ea=i,o}return v(n,[{key:"_apply",value:function(e){var t=ik(e,this.type,this.Ta,this.Ea);return new qm(e.firestore,e.converter,function(e,t){return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Gy);function nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tk("endBefore",t,!1)}function rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tk("endAt",t,!0)}function ik(e,t,n,r){if(n[0]=At(n[0]),n[0]instanceof Fy)return function(e,t,n,r,i){if(!r)throw new js(Ls.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var o,a=[],s=je($c(e));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.field.isKeyField())a.push(uc(t,r.key));else{var c=r.data.field(u.field);if(Wu(c))throw new js(Ls.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new js(Ls.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}a.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Vc(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=my(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new js(Ls.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new js(Ls.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Jc(e)&&-1!==c.indexOf("/"))throw new js(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(eu.fromString(c));if(!ru.isDocumentKey(l))throw new js(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new ru(l);s.push(uc(t,h))}else{var f=Ty(n,r,c);s.push(f)}}return new Vc(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function ok(e,t,n){if("string"==typeof(n=At(n))){if(""===n)throw new js(Ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jc(t)&&-1!==n.indexOf("/"))throw new js(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(eu.fromString(n));if(!ru.isDocumentKey(r))throw new js(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return uc(e,new ru(r))}if(n instanceof Km)return uc(e,n._key);throw new js(Ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(jm(n),"."))}function ak(e,t){if(!Array.isArray(e)||0===e.length)throw new js(Ls.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new js(Ls.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function sk(e,t,n){if(!n.isEqual(t))throw new js(Ls.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var uk={maxAttempts:5},ck=function(){function e(){d(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ps()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ru(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ly(qu(e.latitude),qu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Hu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ku(e);return new Js(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=eu.fromString(e);Ds(Wh(n));var r=new Yu(n.get(1),n.get(3)),i=new ru(n.popFirst(5));return r.isEqual(t)||As("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function lk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var hk=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new uy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Km(this.firestore,null,t)}}]),n}(ck),fk=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=my(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dk(e,this._firestore),i=lk(r.converter,t,n),o=yy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,El.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dk(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return r="string"==typeof(t=At(t))||t instanceof sy?Iy(this._dataReader,"WriteBatch.update",i._key,t,n,a):Ey(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,El.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dk(e,this._firestore);return this._mutations=this._mutations.concat(new Vl(t._key,El.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new js(Ls.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dk(e,t){if((e=At(e)).firestore!==t)throw new js(Ls.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pk=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new uy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Km(this.firestore,null,t)}}]),n}(ck);function vk(e){e=Fm(e,Km);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Os(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new js(Ls.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=Uv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Sm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new By(t,r,e._key,n,new Vy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function gk(e){e=Fm(e,qm);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yp(t,n,!0);case 3:i=e.sent,o=new og(n,i.Hi),a=o.ju(i.documents),s=o.applyChanges(a,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Uv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Sm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new qy(t,r,e,n)}))}function mk(e,t,n){e=Fm(e,Km);var r=Fm(e.firestore,$m),i=lk(e.converter,t,n);return wk(r,[yy(my(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,El.none())])}function yk(e,t,n){e=Fm(e,Km);for(var r=Fm(e.firestore,$m),i=my(r),o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return wk(r,[("string"==typeof(t=At(t))||t instanceof sy?Iy(i,"updateDoc",e._key,t,n,a):Ey(i,"updateDoc",e._key,t)).toMutation(e._key,El.exists(!0))])}function kk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=At(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Xm(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Xm(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(o=d.error)||void 0===o?void 0:o.bind(d),n[u+2]=null===(a=d.complete)||void 0===a?void 0:a.bind(d)}if(e instanceof Km)l=Fm(e.firestore,$m),h=Gc(e._key.path),c={next:function(t){n[u]&&n[u](_k(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Fm(e,qm);l=Fm(p.firestore,$m),h=p._query;var v=new pk(l);c={next:function(e){n[u]&&n[u](new qy(l,v,p,e))},error:n[u+1],complete:n[u+2]},Hy(e._query)}return function(e,t,n,r){var i=new lm(r),o=new $v(t,i,n);return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Wv,t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Rc(),e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gv,t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Zm(l),h,f,c)}function bk(e,t){return function(e,t){var n=new lm(t);return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Os(e).Ru.add(t),t.next()},t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Rc(),e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Os(e).Ru.delete(t)},t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Zm(e=Fm(e,$m)),Xm(t)?t:{next:t})}function wk(e,t){return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=vg,r.next=3,Im(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Zm(e),t)}function _k(e,t,n){var r=n.docs.get(t._key),i=new pk(e);return new By(e,i,t._key,r,new Vy(n.hasPendingWrites,n.fromCache),t.converter)}var xk=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=dk(e,this._firestore),i=new pk(this._firestore);return ur(y(n.prototype),"get",this).call(this,e).then((function(e){return new By(t._firestore,i,r._key,e._document,new Vy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=my(t)}return v(e,[{key:"get",value:function(e){var t=this,n=dk(e,this._firestore),r=new hk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ps();var i=e[0];if(i.isFoundDocument())return new Fy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fy(t._firestore,r,n._key,null,n.converter);throw Ps()}))}},{key:"set",value:function(e,t,n){var r=dk(e,this._firestore),i=lk(r.converter,t,n),o=yy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}},{key:"update",value:function(e,t,n){for(var r,i=dk(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return r="string"==typeof(t=At(t))||t instanceof sy?Iy(this._dataReader,"Transaction.update",i._key,t,n,a):Ey(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Sk(e,t,n){e=Fm(e,$m);var r=Object.assign(Object.assign({},uk),n);return function(e){if(e.maxAttempts<1)throw new js(Ls.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function i(){var o;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return wm(e).then((function(e){return e.datastore}))}(e);case 2:o=i.sent,new dm(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Zm(e),(function(n){return t(new xk(e,n))}),r)}function Ek(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _y("arrayUnion",t)}function Ik(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Es=e}(Nn),xn(new Dt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,o=e.getProvider("app").getImmediate(),a=new $m(new Bs(e.getProvider("auth-internal")),new Ws(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new js(Ls.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),jn(xs,"3.4.15",e),jn(xs,"3.4.15","esm2017")}();function Tk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new js("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ck(){if("undefined"===typeof Uint8Array)throw new js("unimplemented","Uint8Arrays are not available in this environment.")}function Ak(){if("undefined"==typeof atob)throw new js("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Nk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return Ak(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ck(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Ak(),new e(uy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ck(),new e(uy.fromUint8Array(t))}}]),e}();function Rk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=je(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"===typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e,["next","error","complete"])}var Pk=function(){function e(){d(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){ay(e=Fm(e,$m));var n=Zm(e),r=e._freezeSettings(),i=new um;return ty(n,i,new am(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){ay(e=Fm(e,$m));var t=Zm(e),n=e._freezeSettings(),r=new um;return ty(t,r,new sm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new js(Ls.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Fs;return e._queue.enqueueAndForgetEvenWhileRestricted(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ku.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ku.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Dk=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Yu||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ny(this._delegate)}},{key:"disableNetwork",value:function(){return ry(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Dm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Fs;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Ig,n.next=3,Im(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Zm(e=Fm(e,$m)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return bk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new js("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Gk(this,Wm(this._delegate,e))}catch(t){throw Uk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Mk(this,Hm(this._delegate,e))}catch(t){throw Uk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new zk(this,function(e,t){if(e=Fm(e,Vm),Pm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new js(Ls.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new qm(e,null,function(e){return new Wc(eu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Uk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Sk(this._delegate,(function(n){return e(new Lk(t,n))}))}},{key:"batch",value:function(){var e=this;return Zm(this._delegate),new jk(new fk(this._delegate,(function(t){return wk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return iy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return oy(this._delegate,e).then((function(e){return e?new zk(t,e):null}))}}]),e}(),Ok=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new Nk(new uy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Mk.forKey(t,this.firestore,null)}}]),n}(ck);var Lk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Ok(t)}return v(e,[{key:"get",value:function(e){var t=this,n=Qk(e);return this._delegate.get(n).then((function(e){return new Kk(t._firestore,new By(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Qk(e);return n?(Tk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a,s=Qk(e);2===arguments.length?this._delegate.update(s,t):(a=this._delegate).update.apply(a,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Qk(e);return this._delegate.delete(t),this}}]),e}(),jk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=Qk(e);return n?(Tk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a,s=Qk(e);2===arguments.length?this._delegate.update(s,t):(a=this._delegate).update.apply(a,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Qk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Fk=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new Ky(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Ok(t),n),i.set(n,o)),o}}]),e}();Fk.INSTANCES=new WeakMap;var Mk=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ok(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Gk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Gk(this.firestore,Wm(this._delegate,e))}catch(t){throw Uk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=At(e))instanceof Km&&Gm(this._delegate,e)}},{key:"set",value:function(e,t){t=Tk("DocumentReference.set",t);try{return t?mk(this._delegate,e,t):mk(this._delegate,e)}catch(n){throw Uk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?yk(this._delegate,e):yk.apply(void 0,[this._delegate,e,t].concat(r))}catch(o){throw Uk(o,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return wk(Fm(e.firestore,$m),[new Vl(e._key,El.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vk(n),o=Bk(n,(function(t){return new Kk(e.firestore,new By(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return kk(this._delegate,i,o)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fm(e,Km);var t=Fm(e.firestore,$m);return Am(Zm(t),e._key,{source:"server"}).then((function(n){return _k(t,e,n)}))}(this._delegate):function(e){e=Fm(e,Km);var t=Fm(e.firestore,$m);return Am(Zm(t),e._key).then((function(n){return _k(t,e,n)}))}(this._delegate),t.then((function(e){return new Kk(n.firestore,new By(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Fk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new js("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Km(n._delegate,r,new ru(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Km(n._delegate,r,t))}}]),e}();function Uk(e,t,n){return e.message=e.message.replace(t,n),e}function Vk(e){var t,n=je(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Rk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Bk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Rk(e[0])?e[0]:Rk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Kk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new Mk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Wy(this._delegate,e._delegate)}}]),e}(),qk=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ps()}(void 0!==t),t}}]),n}(Kk),zk=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ok(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Qy(this._delegate,function(e,t,n){var r=t,i=Uy("where",e);return new Yy(i,r,n)}(t,n,r)))}catch(i){throw Uk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Qy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Uy("orderBy",e);return new Xy(n,t)}(t,n)))}catch(r){throw Uk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Qy(this._delegate,function(e){return Mm("limit",e),new Jy("limit",e,"F")}(t)))}catch(n){throw Uk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Qy(this._delegate,function(e){return Mm("limitToLast",e),new Jy("limitToLast",e,"L")}(t)))}catch(n){throw Uk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Qy(this._delegate,Zy.apply(void 0,arguments)))}catch(t){throw Uk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Qy(this._delegate,ek.apply(void 0,arguments)))}catch(t){throw Uk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Qy(this._delegate,nk.apply(void 0,arguments)))}catch(t){throw Uk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Qy(this._delegate,rk.apply(void 0,arguments)))}catch(t){throw Uk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Qm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?gk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fm(e,qm);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return Nm(n,e._query,{source:"server"}).then((function(n){return new qy(t,r,e,n)}))}(this._delegate):function(e){e=Fm(e,qm);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return Hy(e._query),Nm(n,e._query).then((function(n){return new qy(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Hk(n.firestore,new qy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vk(n),o=Bk(n,(function(t){return new Hk(e.firestore,new qy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return kk(this._delegate,i,o)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Fk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Wk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new qk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Hk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new zk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new qk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Wk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new qk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Wy(this._delegate,e._delegate)}}]),e}(),Gk=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Mk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Mk(this.firestore,void 0===e?Hm(this._delegate):Hm(this._delegate,e))}catch(t){throw Uk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Fm(e.firestore,$m),r=Hm(e),i=lk(e.converter,t);return wk(n,[yy(my(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,El.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Mk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Gm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Fk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(zk);function Qk(e){return Fm(e,Km)}var Yk,Xk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(sy,n)}return v(e,[{key:"isEqual",value:function(e){return(e=At(e))instanceof sy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(nu.keyField().canonicalString())}}]),e}(),Jk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new wy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ky("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Ek.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Ik.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Sy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),$k={Firestore:Dk,GeoPoint:ly,Timestamp:Js,Blob:Nk,Transaction:Lk,WriteBatch:jk,DocumentReference:Mk,DocumentSnapshot:Kk,Query:zk,QueryDocumentSnapshot:qk,QuerySnapshot:Hk,CollectionReference:Gk,FieldPath:Xk,FieldValue:Jk,setLogLevel:function(e){!function(e){Is.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Dt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},$k)))})(Yk=ar,(function(e,t){return new Dk(e,t,new Pk)})),Yk.registerVersion("@firebase/firestore-compat","0.1.24");var Zk=ar.initializeApp({apiKey:"AIzaSyDt_KICb8jM4LODy7lLJZ9y5PZeRni3UZ0",authDomain:"mealeasy-7c600.firebaseapp.com",databaseURL:"https://mealeasy-7c600-default-rtdb.europe-west1.firebasedatabase.app",projectId:"mealeasy-7c600",storageBucket:"mealeasy-7c600.appspot.com",messagingSenderId:"277026662201",appId:"1:277026662201:web:fd8b2f11746087fc816ae8",measurementId:"G-6XKQKQRG0L"}).firestore();function eb(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function tb(e,t){if(null==e)return{};var n,r,i=eb(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var nb=n(694),rb=n.n(nb),ib=n(184),ob=["xxl","xl","lg","md","sm","xs"],ab=r.createContext({prefixes:{},breakpoints:ob,minBreakpoint:"xs"});ab.Consumer,ab.Provider;function sb(e,t){var n=(0,r.useContext)(ab).prefixes;return e||n[t]||t}function ub(){return(0,r.useContext)(ab).breakpoints}function cb(){return(0,r.useContext)(ab).minBreakpoint}var lb=["bsPrefix","fluid","as","className"],hb=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,o=void 0===i?"div":i,a=e.className,s=tb(e,lb),u=sb(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,ib.jsx)(o,Gt(Gt({ref:t},s),{},{className:rb()(a,r?"".concat(u).concat(c):u)}))}));hb.displayName="Container",hb.defaultProps={fluid:!1};var fb=hb,db=["bsPrefix","className","as"],pb=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,o=void 0===i?"div":i,a=tb(e,db),s=sb(n,"row"),u=ub(),c=cb(),l="".concat(s,"-cols"),h=[];return u.forEach((function(e){var t,n=a[e];delete a[e],t=null!=n&&"object"===typeof n?n.cols:n;var r=e!==c?"-".concat(e):"";null!=t&&h.push("".concat(l).concat(r,"-").concat(t))})),(0,ib.jsx)(o,Gt(Gt({ref:t},a),{},{className:rb().apply(void 0,[r,s].concat(h))}))}));pb.displayName="Row";var vb=pb,gb=["as","bsPrefix","className"],mb=["className"];var yb=r.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=tb(e,gb);n=sb(n,"col");var o=ub(),a=cb(),s=[],u=[];return o.forEach((function(e){var t,r,o,c=i[e];delete i[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,o=c.order):t=c;var l=e!==a?"-".concat(e):"";t&&s.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=o&&u.push("order".concat(l,"-").concat(o)),null!=r&&u.push("offset".concat(l,"-").concat(r))})),[Gt(Gt({},i),{},{className:rb().apply(void 0,[r].concat(s,u))}),{as:t,bsPrefix:n,spans:s}]}(e),r=l(n,2),i=r[0],o=i.className,a=tb(i,mb),s=r[1],u=s.as,c=void 0===u?"div":u,h=s.bsPrefix,f=s.spans;return(0,ib.jsx)(c,Gt(Gt({},a),{},{ref:t,className:rb()(o,!f.length&&h)}))}));yb.displayName="Col";var kb=yb;var bb=function(){return(0,r.useEffect)((function(){})),(0,ib.jsxs)(fb,{className:"home-page",style:{height:"100vh"},children:[(0,ib.jsx)(vb,{children:(0,ib.jsx)("div",{style:{margin:"auto"},children:(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Chef Easy"})})}),(0,ib.jsxs)(vb,{xl:2,lg:2,md:2,sm:2,xs:2,style:{height:"100%"},children:[(0,ib.jsx)(Oe,{to:"/demo",children:(0,ib.jsx)(kb,{style:{height:"90%",backgroundColor:"#FEC76D"},children:(0,ib.jsx)("div",{style:{textAlign:"center"},children:(0,ib.jsx)("h1",{style:{color:"white",textAlign:"center"},children:"Demo"})})})}),(0,ib.jsx)(Oe,{style:{},to:"/actual",children:(0,ib.jsx)(kb,{style:{height:"90%",backgroundColor:"#FF9F33"},children:(0,ib.jsx)("div",{children:(0,ib.jsx)("h1",{style:{color:"white"},children:"Actual"})})})})]})]})};function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wb.apply(this,arguments)}function _b(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=_b(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var xb=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=_b(e))&&(r&&(r+=" "),r+=t);return r};function Sb(e,t){var n=wb({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}function Eb(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}function Ib(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Tb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Cb(e){if(e.type)return e;if("#"===e.charAt(0))return Cb(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(Ib(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(Ib(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function Ab(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Nb(e){var t="hsl"===(e=Cb(e)).type||"hsla"===e.type?Cb(function(e){var t=(e=Cb(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Ab({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Rb(e,t){return e=Cb(e),t=Tb(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Ab(e)}function Pb(e,t){if(e=Cb(e),t=Tb(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Ab(e)}function Db(e,t){if(e=Cb(e),t=Tb(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ab(e)}var Ob=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Lb=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jb=Ob((function(e){return Lb.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var Fb=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Mb=Math.abs,Ub=String.fromCharCode,Vb=Object.assign;function Bb(e){return e.trim()}function Kb(e,t,n){return e.replace(t,n)}function qb(e,t){return e.indexOf(t)}function zb(e,t){return 0|e.charCodeAt(t)}function Wb(e,t,n){return e.slice(t,n)}function Hb(e){return e.length}function Gb(e){return e.length}function Qb(e,t){return t.push(e),e}var Yb=1,Xb=1,Jb=0,$b=0,Zb=0,ew="";function tw(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Yb,column:Xb,length:a,return:""}}function nw(e,t){return Vb(tw("",null,null,"",null,null,0),e,{length:-e.length},t)}function rw(){return Zb=$b>0?zb(ew,--$b):0,Xb--,10===Zb&&(Xb=1,Yb--),Zb}function iw(){return Zb=$b<Jb?zb(ew,$b++):0,Xb++,10===Zb&&(Xb=1,Yb++),Zb}function ow(){return zb(ew,$b)}function aw(){return $b}function sw(e,t){return Wb(ew,e,t)}function uw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cw(e){return Yb=Xb=1,Jb=Hb(ew=e),$b=0,[]}function lw(e){return ew="",e}function hw(e){return Bb(sw($b-1,pw(91===e?e+2:40===e?e+1:e)))}function fw(e){for(;(Zb=ow())&&Zb<33;)iw();return uw(e)>2||uw(Zb)>3?"":" "}function dw(e,t){for(;--t&&iw()&&!(Zb<48||Zb>102||Zb>57&&Zb<65||Zb>70&&Zb<97););return sw(e,aw()+(t<6&&32==ow()&&32==iw()))}function pw(e){for(;iw();)switch(Zb){case e:return $b;case 34:case 39:34!==e&&39!==e&&pw(Zb);break;case 40:41===e&&pw(e);break;case 92:iw()}return $b}function vw(e,t){for(;iw()&&e+Zb!==57&&(e+Zb!==84||47!==ow()););return"/*"+sw(t,$b-1)+"*"+Ub(47===e?e:iw())}function gw(e){for(;!uw(ow());)iw();return sw(e,$b)}var mw="-ms-",yw="-moz-",kw="-webkit-",bw="comm",ww="rule",_w="decl",xw="@keyframes";function Sw(e,t){for(var n="",r=Gb(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Ew(e,t,n,r){switch(e.type){case"@import":case _w:return e.return=e.return||e.value;case bw:return"";case xw:return e.return=e.value+"{"+Sw(e.children,r)+"}";case ww:e.value=e.props.join(",")}return Hb(n=Sw(e.children,r))?e.return=e.value+"{"+n+"}":""}function Iw(e,t){switch(function(e,t){return(((t<<2^zb(e,0))<<2^zb(e,1))<<2^zb(e,2))<<2^zb(e,3)}(e,t)){case 5103:return kw+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kw+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return kw+e+yw+e+mw+e+e;case 6828:case 4268:return kw+e+mw+e+e;case 6165:return kw+e+mw+"flex-"+e+e;case 5187:return kw+e+Kb(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return kw+e+mw+"flex-item-"+Kb(e,/flex-|-self/,"")+e;case 4675:return kw+e+mw+"flex-line-pack"+Kb(e,/align-content|flex-|-self/,"")+e;case 5548:return kw+e+mw+Kb(e,"shrink","negative")+e;case 5292:return kw+e+mw+Kb(e,"basis","preferred-size")+e;case 6060:return kw+"box-"+Kb(e,"-grow","")+kw+e+mw+Kb(e,"grow","positive")+e;case 4554:return kw+Kb(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return Kb(Kb(Kb(e,/(zoom-|grab)/,kw+"$1"),/(image-set)/,kw+"$1"),e,"")+e;case 5495:case 3959:return Kb(e,/(image-set\([^]*)/,kw+"$1$`$1");case 4968:return Kb(Kb(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+kw+e+e;case 4095:case 3583:case 4068:case 2532:return Kb(e,/(.+)-inline(.+)/,kw+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hb(e)-1-t>6)switch(zb(e,t+1)){case 109:if(45!==zb(e,t+4))break;case 102:return Kb(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+yw+(108==zb(e,t+3)?"$3":"$2-$3"))+e;case 115:return~qb(e,"stretch")?Iw(Kb(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==zb(e,t+1))break;case 6444:switch(zb(e,Hb(e)-3-(~qb(e,"!important")&&10))){case 107:return Kb(e,":",":"+kw)+e;case 101:return Kb(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+kw+(45===zb(e,14)?"inline-":"")+"box$3$1"+kw+"$2$3$1"+mw+"$2box$3")+e}break;case 5936:switch(zb(e,t+11)){case 114:return kw+e+mw+Kb(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return kw+e+mw+Kb(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return kw+e+mw+Kb(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return kw+e+mw+e+e}return e}function Tw(e){return function(t){t.root||(t=t.return)&&e(t)}}function Cw(e){return lw(Aw("",null,null,null,[""],e=cw(e),0,[0],e))}function Aw(e,t,n,r,i,o,a,s,u){for(var c=0,l=0,h=a,f=0,d=0,p=0,v=1,g=1,m=1,y=0,k="",b=i,w=o,_=r,x=k;g;)switch(p=y,y=iw()){case 40:if(108!=p&&58==x.charCodeAt(h-1)){-1!=qb(x+=Kb(hw(y),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:x+=hw(y);break;case 9:case 10:case 13:case 32:x+=fw(p);break;case 92:x+=dw(aw()-1,7);continue;case 47:switch(ow()){case 42:case 47:Qb(Rw(vw(iw(),aw()),t,n),u);break;default:x+="/"}break;case 123*v:s[c++]=Hb(x)*m;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+l:d>0&&Hb(x)-h&&Qb(d>32?Pw(x+";",r,n,h-1):Pw(Kb(x," ","")+";",r,n,h-2),u);break;case 59:x+=";";default:if(Qb(_=Nw(x,t,n,c,l,i,s,k,b=[],w=[],h),o),123===y)if(0===l)Aw(x,t,_,_,b,o,h,s,w);else switch(f){case 100:case 109:case 115:Aw(e,_,_,r&&Qb(Nw(e,_,_,0,0,i,s,k,i,b=[],h),w),i,w,h,s,r?b:w);break;default:Aw(x,_,_,_,[""],w,0,s,w)}}c=l=d=0,v=m=1,k=x="",h=a;break;case 58:h=1+Hb(x),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==rw())continue;switch(x+=Ub(y),y*v){case 38:m=l>0?1:(x+="\f",-1);break;case 44:s[c++]=(Hb(x)-1)*m,m=1;break;case 64:45===ow()&&(x+=hw(iw())),f=ow(),l=h=Hb(k=x+=gw(aw())),y++;break;case 45:45===p&&2==Hb(x)&&(v=0)}}return o}function Nw(e,t,n,r,i,o,a,s,u,c,l){for(var h=i-1,f=0===i?o:[""],d=Gb(f),p=0,v=0,g=0;p<r;++p)for(var m=0,y=Wb(e,h+1,h=Mb(v=a[p])),k=e;m<d;++m)(k=Bb(v>0?f[m]+" "+y:Kb(y,/&\f/g,f[m])))&&(u[g++]=k);return tw(e,t,n,0===i?ww:s,u,c,l)}function Rw(e,t,n){return tw(e,t,n,bw,Ub(Zb),Wb(e,2,-2),0)}function Pw(e,t,n,r){return tw(e,t,n,_w,Wb(e,0,r),Wb(e,r+1,-1),r)}var Dw=function(e,t,n){for(var r=0,i=0;r=i,i=ow(),38===r&&12===i&&(t[n]=1),!uw(i);)iw();return sw(e,$b)},Ow=function(e,t){return lw(function(e,t){var n=-1,r=44;do{switch(uw(r)){case 0:38===r&&12===ow()&&(t[n]=1),e[n]+=Dw($b-1,t,n);break;case 2:e[n]+=hw(r);break;case 4:if(44===r){e[++n]=58===ow()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Ub(r)}}while(r=iw());return e}(cw(e),t))},Lw=new WeakMap,jw=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Lw.get(n))&&!r){Lw.set(e,!0);for(var i=[],o=Ow(t,i),a=n.props,s=0,u=0;s<o.length;s++)for(var c=0;c<a.length;c++,u++)e.props[u]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},Fw=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Mw=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case _w:e.return=Iw(e.value,e.length);break;case xw:return Sw([nw(e,{value:Kb(e.value,"@","@"+kw)})],r);case ww:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sw([nw(e,{props:[Kb(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Sw([nw(e,{props:[Kb(t,/:(plac\w+)/,":-webkit-input-$1")]}),nw(e,{props:[Kb(t,/:(plac\w+)/,":-moz-$1")]}),nw(e,{props:[Kb(t,/:(plac\w+)/,mw+"input-$1")]})],r)}return""}))}}],Uw=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Mw;var i,o,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var u=[jw,Fw];var c,l=[Ew,Tw((function(e){c.insert(e)}))],h=function(e){var t=Gb(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}(u.concat(r,l));o=function(e,t,n,r){c=n,Sw(Cw(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new Fb({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(s),f};var Vw=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Bw={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Kw=/[A-Z]|^ms/g,qw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zw=function(e){return 45===e.charCodeAt(1)},Ww=function(e){return null!=e&&"boolean"!==typeof e},Hw=Ob((function(e){return zw(e)?e:e.replace(Kw,"-$&").toLowerCase()})),Gw=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(qw,(function(e,t,n){return Yw={name:t,styles:n,next:Yw},t}))}return 1===Bw[e]||zw(e)||"number"!==typeof t||0===t?t:t+"px"};function Qw(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Yw={name:n.name,styles:n.styles,next:Yw},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Yw={name:r.name,styles:r.styles,next:Yw},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Qw(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Ww(a)&&(r+=Hw(o)+":"+Gw(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=Qw(e,t,a);switch(o){case"animation":case"animationName":r+=Hw(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var u=0;u<a.length;u++)Ww(a[u])&&(r+=Hw(o)+":"+Gw(o,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Yw,o=n(e);return Yw=i,Qw(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var Yw,Xw=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Jw=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Yw=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=Qw(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=Qw(n,t,e[a]),r&&(i+=o[a]);Xw.lastIndex=0;for(var s,u="";null!==(s=Xw.exec(i));)u+="-"+s[1];return{name:Vw(i)+u,styles:i,next:Yw}},$w=!!i.useInsertionEffect&&i.useInsertionEffect,Zw=$w||function(e){return e()},e_=($w||r.useLayoutEffect,(0,r.createContext)("undefined"!==typeof HTMLElement?Uw({key:"css"}):null));e_.Provider;var t_=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(e_);return e(t,i,n)}))},n_=(0,r.createContext)({});function r_(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i_=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o_=jb,a_=function(e){return"theme"!==e},s_=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?o_:a_},u_=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},c_=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;i_(t,n,r);Zw((function(){return function(e,t,n){i_(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)}));return null},l_=function e(t,n){var i,o,a=t.__emotion_real===t,s=a&&t.__emotion_base||t;void 0!==n&&(i=n.label,o=n.target);var u=u_(t,n,a),c=u||s_(s),l=!c("as");return function(){var h=arguments,f=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var d=h.length,p=1;p<d;p++)f.push(h[p],h[0][p])}var v=t_((function(e,t,n){var i=l&&e.as||s,a="",h=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=(0,r.useContext)(n_)}"string"===typeof e.className?a=r_(t.registered,h,e.className):null!=e.className&&(a=e.className+" ");var v=Jw(f.concat(h),t.registered,d);a+=t.key+"-"+v.name,void 0!==o&&(a+=" "+o);var g=l&&void 0===u?s_(i):c,m={};for(var y in e)l&&"as"===y||g(y)&&(m[y]=e[y]);return m.className=a,m.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c_,{cache:t,serialized:v,isStringTag:"string"===typeof i}),(0,r.createElement)(i,m))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=t.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=f,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+o}}),v.withComponent=function(t,r){return e(t,wb({},n,r,{shouldForwardProp:u_(v,r,!0)})).apply(void 0,f)},v}},h_=l_.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){h_[e]=h_(e)}));var f_=h_;function d_(e,t){return f_(e,t)}var p_=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function v_(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function g_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?wb({},e):e;return v_(e)&&v_(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(v_(t[i])&&i in e&&v_(e[i])?r[i]=g_(e[i],t[i],n):r[i]=t[i])})),r}var m_=["values","unit","step"];function y_(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=eb(e,m_),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return wb({},e,Le({},t.key,t.val))}),{})}(n),c=Object.keys(u);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-a/100).concat(i,")")}function f(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-a/100).concat(i,")")}return wb({keys:c,values:u,up:l,down:h,between:f,only:function(e){return c.indexOf(e)+1<c.length?f(e,c[c.indexOf(e)+1]):l(e)},not:function(e){var t=c.indexOf(e);return 0===t?l(c[1]):t===c.length-1?h(c[t]):f(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}var k_={borderRadius:4},b_={xs:0,sm:600,md:900,lg:1200,xl:1536},w_={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(b_[e],"px)")}};function __(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||w_;return t.reduce((function(e,r,o){return e[i.up(i.keys[o])]=n(t[o]),e}),{})}if("object"===typeof t){var o=r.breakpoints||w_;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(o.values||b_).indexOf(r)){e[o.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function x_(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function S_(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function E_(e){if("string"!==typeof e)throw new Error(Ib(7));return e.charAt(0).toUpperCase()+e.slice(1)}function I_(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function T_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:I_(e,n)||i,t&&(r=t(r)),r}var C_=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,o=e.transform,a=function(e){if(null==e[t])return null;var n=e[t],a=I_(e.theme,i)||{};return __(e,n,(function(e){var n=T_(a,o,e);return e===n&&"string"===typeof e&&(n=T_(a,o,"".concat(t).concat("default"===e?"":E_(e)),e)),!1===r?n:Le({},r,n)}))};return a.propTypes={},a.filterProps=[t],a};var A_=function(e,t){return t?g_(e,t,{clone:!1}):e};var N_={m:"margin",p:"padding"},R_={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},P_={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},D_=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!P_[e])return[e];e=P_[e]}var t=l(e.split(""),2),n=t[0],r=t[1],i=N_[n],o=R_[r]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),O_=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],L_=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],j_=[].concat(O_,L_);function F_(e,t,n,r){var i,o=null!=(i=I_(e,t,!1))?i:n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function M_(e){return F_(e,"spacing",8)}function U_(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function V_(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=U_(t,n),e}),{})}}(D_(n),r);return __(e,e[n],i)}function B_(e,t){var n=M_(e.theme);return Object.keys(e).map((function(r){return V_(e,t,r,n)})).reduce(A_,{})}function K_(e){return B_(e,O_)}function q_(e){return B_(e,L_)}function z_(e){return B_(e,j_)}K_.propTypes={},K_.filterProps=O_,q_.propTypes={},q_.filterProps=L_,z_.propTypes={},z_.filterProps=j_;var W_=z_;function H_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=M_({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var G_=["breakpoints","palette","spacing","shape"];var Q_=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,o=e.spacing,a=e.shape,s=void 0===a?{}:a,u=eb(e,G_),c=y_(n),l=H_(o),h=g_({breakpoints:c,direction:"ltr",components:{},palette:wb({mode:"light"},i),spacing:l,shape:wb({},k_,s)},u),f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return h=d.reduce((function(e,t){return g_(e,t)}),h)},Y_=["variant"];function X_(e){return 0===e.length}function J_(e){var t=e.variant,n=eb(e,Y_),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?X_(r)?e[t]:E_(e[t]):"".concat(X_(r)?t:E_(t)).concat(E_(e[t].toString()))})),r}var $_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?A_(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function Z_(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var ex=C_({prop:"border",themeKey:"borders",transform:Z_}),tx=C_({prop:"borderTop",themeKey:"borders",transform:Z_}),nx=C_({prop:"borderRight",themeKey:"borders",transform:Z_}),rx=C_({prop:"borderBottom",themeKey:"borders",transform:Z_}),ix=C_({prop:"borderLeft",themeKey:"borders",transform:Z_}),ox=C_({prop:"borderColor",themeKey:"palette"}),ax=C_({prop:"borderTopColor",themeKey:"palette"}),sx=C_({prop:"borderRightColor",themeKey:"palette"}),ux=C_({prop:"borderBottomColor",themeKey:"palette"}),cx=C_({prop:"borderLeftColor",themeKey:"palette"}),lx=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=F_(e.theme,"shape.borderRadius",4);return __(e,e.borderRadius,(function(e){return{borderRadius:U_(t,e)}}))}return null};lx.propTypes={},lx.filterProps=["borderRadius"];var hx=$_(ex,tx,nx,rx,ix,ox,ax,sx,ux,cx,lx),fx=$_(C_({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),C_({prop:"display"}),C_({prop:"overflow"}),C_({prop:"textOverflow"}),C_({prop:"visibility"}),C_({prop:"whiteSpace"})),dx=$_(C_({prop:"flexBasis"}),C_({prop:"flexDirection"}),C_({prop:"flexWrap"}),C_({prop:"justifyContent"}),C_({prop:"alignItems"}),C_({prop:"alignContent"}),C_({prop:"order"}),C_({prop:"flex"}),C_({prop:"flexGrow"}),C_({prop:"flexShrink"}),C_({prop:"alignSelf"}),C_({prop:"justifyItems"}),C_({prop:"justifySelf"})),px=function(e){if(void 0!==e.gap&&null!==e.gap){var t=F_(e.theme,"spacing",8);return __(e,e.gap,(function(e){return{gap:U_(t,e)}}))}return null};px.propTypes={},px.filterProps=["gap"];var vx=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=F_(e.theme,"spacing",8);return __(e,e.columnGap,(function(e){return{columnGap:U_(t,e)}}))}return null};vx.propTypes={},vx.filterProps=["columnGap"];var gx=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=F_(e.theme,"spacing",8);return __(e,e.rowGap,(function(e){return{rowGap:U_(t,e)}}))}return null};gx.propTypes={},gx.filterProps=["rowGap"];var mx=$_(px,vx,gx,C_({prop:"gridColumn"}),C_({prop:"gridRow"}),C_({prop:"gridAutoFlow"}),C_({prop:"gridAutoColumns"}),C_({prop:"gridAutoRows"}),C_({prop:"gridTemplateColumns"}),C_({prop:"gridTemplateRows"}),C_({prop:"gridTemplateAreas"}),C_({prop:"gridArea"})),yx=$_(C_({prop:"position"}),C_({prop:"zIndex",themeKey:"zIndex"}),C_({prop:"top"}),C_({prop:"right"}),C_({prop:"bottom"}),C_({prop:"left"})),kx=$_(C_({prop:"color",themeKey:"palette"}),C_({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),C_({prop:"backgroundColor",themeKey:"palette"})),bx=C_({prop:"boxShadow",themeKey:"shadows"});function wx(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var _x=C_({prop:"width",transform:wx}),xx=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return __(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||b_[t]||wx(t)}}))}return null};xx.filterProps=["maxWidth"];var Sx=C_({prop:"minWidth",transform:wx}),Ex=C_({prop:"height",transform:wx}),Ix=C_({prop:"maxHeight",transform:wx}),Tx=C_({prop:"minHeight",transform:wx}),Cx=(C_({prop:"size",cssProperty:"width",transform:wx}),C_({prop:"size",cssProperty:"height",transform:wx}),$_(_x,xx,Sx,Ex,Ix,Tx,C_({prop:"boxSizing"}))),Ax=C_({prop:"fontFamily",themeKey:"typography"}),Nx=C_({prop:"fontSize",themeKey:"typography"}),Rx=C_({prop:"fontStyle",themeKey:"typography"}),Px=C_({prop:"fontWeight",themeKey:"typography"}),Dx=C_({prop:"letterSpacing"}),Ox=C_({prop:"textTransform"}),Lx=C_({prop:"lineHeight"}),jx=C_({prop:"textAlign"}),Fx=$_(C_({prop:"typography",cssProperty:!1,themeKey:"typography"}),Ax,Nx,Rx,Px,Dx,Lx,jx,Ox),Mx={borders:hx.filterProps,display:fx.filterProps,flexbox:dx.filterProps,grid:mx.filterProps,positions:yx.filterProps,palette:kx.filterProps,shadows:bx.filterProps,sizing:Cx.filterProps,spacing:W_.filterProps,typography:Fx.filterProps},Ux={borders:hx,display:fx,flexbox:dx,grid:mx,positions:yx,palette:kx,shadows:bx,sizing:Cx,spacing:W_,typography:Fx},Vx=Object.keys(Mx).reduce((function(e,t){return Mx[t].forEach((function(n){e[n]=Ux[t]})),e}),{});function Bx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function Kx(e,t){return"function"===typeof e?e(t):e}var qx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ux,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var i,o=(Le(i={},e,n),Le(i,"theme",r),i),a=t[e];return a?a(o):Le({},e,n)}function r(e){var i=e||{},o=i.sx,a=i.theme,s=void 0===a?{}:a;if(!o)return null;function u(e){var i=e;if("function"===typeof e)i=e(s);else if("object"!==typeof e)return e;if(!i)return null;var o=x_(s.breakpoints),a=Object.keys(o),u=o;return Object.keys(i).forEach((function(e){var o=Kx(i[e],s);if(null!==o&&void 0!==o)if("object"===typeof o)if(t[e])u=A_(u,n(e,o,s));else{var a=__({theme:s},o,(function(t){return Le({},e,t)}));Bx(a,o)?u[e]=r({sx:o,theme:s}):u=A_(u,a)}else u=A_(u,n(e,o,s))})),S_(a,u)}return Array.isArray(o)?o.map(u):u(o)}return r}();qx.filterProps=["sx"];var zx=qx,Wx=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Hx=["theme"],Gx=["theme"];function Qx(e){return 0===Object.keys(e).length}function Yx(e){return"string"===typeof e&&e.charCodeAt(0)>96}var Xx=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},Jx=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=J_(e.props);r[t]=e.style})),r},$x=function(e,t,n,r){var i,o,a=e.ownerState,s=void 0===a?{}:a,u=[],c=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[J_(n.props)])})),u};function Zx(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var eS=Q_();function tS(e,t){var n;return wb({toolbar:(n={minHeight:56},Le(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),Le(n,e.up("sm"),{minHeight:64}),n)},t)}var nS={black:"#000",white:"#fff"},rS={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},iS={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},oS={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},aS={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},sS={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},uS={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cS={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},lS=["mode","contrastThreshold","tonalOffset"],hS={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:nS.white,default:nS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},fS={text:{primary:nS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:nS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dS(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Db(e.main,i):"dark"===t&&(e.dark=Pb(e.main,o)))}function pS(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,o=e.tonalOffset,a=void 0===o?.2:o,s=eb(e,lS),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:sS[200],light:sS[50],dark:sS[400]}:{main:sS[700],light:sS[400],dark:sS[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:iS[200],light:iS[50],dark:iS[400]}:{main:iS[500],light:iS[300],dark:iS[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oS[500],light:oS[300],dark:oS[700]}:{main:oS[700],light:oS[400],dark:oS[800]}}(n),h=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:uS[400],light:uS[300],dark:uS[700]}:{main:uS[700],light:uS[500],dark:uS[900]}}(n),f=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:cS[400],light:cS[300],dark:cS[700]}:{main:cS[800],light:cS[500],dark:cS[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:aS[400],light:aS[300],dark:aS[700]}:{main:"#ed6c02",light:aS[500],dark:aS[900]}}(n);function p(e){var t=function(e,t){var n=Nb(e),r=Nb(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,fS.text.primary)>=i?fS.text.primary:hS.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,o=e.lightShade,s=void 0===o?300:o,u=e.darkShade,c=void 0===u?700:u;if(!(t=wb({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(Ib(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(Ib(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return dS(t,"light",s,a),dS(t,"dark",c,a),t.contrastText||(t.contrastText=p(t.main)),t},g={dark:fS,light:hS};return g_(wb({common:wb({},nS),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:l,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:f,name:"success"}),grey:rS,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:a},g[n]),s)}var vS=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var gS={textTransform:"uppercase"},mS='"Roboto", "Helvetica", "Arial", sans-serif';function yS(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?mS:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,h=n.fontWeightMedium,f=void 0===h?500:h,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,g=void 0===v?16:v,m=n.allVariants,y=n.pxToRem,k=eb(n,vS);var b=a/14,w=y||function(e){return"".concat(e/g*b,"rem")},_=function(e,t,n,r,o){return wb({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===mS?{letterSpacing:"".concat((a=r/t,Math.round(1e5*a)/1e5),"em")}:{},o,m);var a},x={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(l,48,1.167,0),h4:_(l,34,1.235,.25),h5:_(l,24,1.334,0),h6:_(f,20,1.6,.15),subtitle1:_(l,16,1.75,.15),subtitle2:_(f,14,1.57,.1),body1:_(l,16,1.5,.15),body2:_(l,14,1.43,.15),button:_(f,14,1.75,.4,gS),caption:_(l,12,1.66,.4),overline:_(l,12,2.66,1,gS)};return g_(wb({htmlFontSize:g,pxToRem:w,fontFamily:i,fontSize:a,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:f,fontWeightBold:p},x),k,{clone:!1})}function kS(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var bS=["none",kS(0,2,1,-1,0,1,1,0,0,1,3,0),kS(0,3,1,-2,0,2,2,0,0,1,5,0),kS(0,3,3,-2,0,3,4,0,0,1,8,0),kS(0,2,4,-1,0,4,5,0,0,1,10,0),kS(0,3,5,-1,0,5,8,0,0,1,14,0),kS(0,3,5,-1,0,6,10,0,0,1,18,0),kS(0,4,5,-2,0,7,10,1,0,2,16,1),kS(0,5,5,-3,0,8,10,1,0,3,14,2),kS(0,5,6,-3,0,9,12,1,0,3,16,2),kS(0,6,6,-3,0,10,14,1,0,4,18,3),kS(0,6,7,-4,0,11,15,1,0,4,20,3),kS(0,7,8,-4,0,12,17,2,0,5,22,4),kS(0,7,8,-4,0,13,19,2,0,5,24,4),kS(0,7,9,-4,0,14,21,2,0,5,26,4),kS(0,8,9,-5,0,15,22,2,0,6,28,5),kS(0,8,10,-5,0,16,24,2,0,6,30,5),kS(0,8,11,-5,0,17,26,2,0,6,32,5),kS(0,9,11,-5,0,18,28,2,0,7,34,6),kS(0,9,12,-6,0,19,29,2,0,7,36,6),kS(0,10,13,-6,0,20,31,3,0,8,38,7),kS(0,10,13,-6,0,21,33,3,0,8,40,7),kS(0,10,14,-6,0,22,35,3,0,8,42,7),kS(0,11,14,-7,0,23,36,3,0,9,44,8),kS(0,11,15,-7,0,24,38,3,0,9,46,8)],wS=["duration","easing","delay"],_S={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},xS={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function SS(e){return"".concat(Math.round(e),"ms")}function ES(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function IS(e){var t=wb({},_S,e.easing),n=wb({},xS,e.duration);return wb({getAutoHeightDuration:ES,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,a=r.easing,s=void 0===a?t.easeInOut:a,u=r.delay,c=void 0===u?0:u;eb(r,wS);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:SS(o)," ").concat(s," ").concat("string"===typeof c?c:SS(c))})).join(",")}},e,{easing:t,duration:n})}var TS={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},CS=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function AS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,o=e.transitions,a=void 0===o?{}:o,s=e.typography,u=void 0===s?{}:s,c=eb(e,CS);if(e.vars)throw new Error(Ib(18));var l=pS(i),h=Q_(e),f=g_(h,{mixins:tS(h.breakpoints,n),palette:l,shadows:bS.slice(),typography:yS(l,u),transitions:IS(a),zIndex:wb({},TS)});f=g_(f,c);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return f=p.reduce((function(e,t){return g_(e,t)}),f)}var NS=AS(),RS=function(e){return Zx(e)&&"classes"!==e},PS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?eS:t,r=e.rootShouldForwardProp,i=void 0===r?Zx:r,o=e.slotShouldForwardProp,a=void 0===o?Zx:o,s=e.styleFunctionSx,u=void 0===s?zx:s,c=function(e){var t=Qx(e.theme)?n:e.theme;return u(wb({},e,{theme:t}))};return c.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p_(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r,o=t.name,s=t.slot,u=t.skipVariantsResolver,h=t.skipSx,d=t.overridesResolver,p=eb(t,Wx),v=void 0!==u?u:s&&"Root"!==s||!1,g=h||!1;var m=Zx;"Root"===s?m=i:s?m=a:Yx(e)&&(m=void 0);var y=d_(e,wb({shouldForwardProp:m,label:r},p)),k=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=eb(t,Hx);return e(wb({theme:Qx(r)?n:r},i))}:e})):[],s=e;o&&d&&a.push((function(e){var t=Qx(e.theme)?n:e.theme,r=Xx(o,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=l(n,2),o=r[0],a=r[1];i[o]="function"===typeof a?a(wb({},e,{theme:t})):a})),d(e,i)}return null})),o&&!v&&a.push((function(e){var t=Qx(e.theme)?n:e.theme;return $x(e,Jx(o,t),t,o)})),g||a.push(c);var u=a.length-r.length;if(Array.isArray(e)&&u>0){var h=new Array(u).fill("");(s=[].concat(f(e),f(h))).raw=[].concat(f(e.raw),f(h))}else"function"===typeof e&&e.__emotion_real!==e&&(s=function(t){var r=t.theme,i=eb(t,Gx);return e(wb({theme:Qx(r)?n:r},i))});var p=y.apply(void 0,[s].concat(f(a)));return p};return y.withConfig&&(k.withConfig=y.withConfig),k}}({defaultTheme:NS,rootShouldForwardProp:RS}),DS=PS;var OS=r.createContext(null);function LS(){return r.useContext(OS)}function jS(e){return 0===Object.keys(e).length}var FS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=LS();return!t||jS(t)?e:t},MS=Q_();var US=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MS;return FS(e)};function VS(e){var t=e.props,n=e.name,r=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Sb(t.components[n].defaultProps,r):r}({theme:US(r),name:n,props:t});return i}function BS(e){return VS({props:e.props,name:e.name,defaultTheme:NS})}function KS(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var qS=function(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){KS(e,n),KS(t,n)}}),[e,t])},zS="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var WS,HS=function(e){var t=r.useRef(e);return zS((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])},GS=!0,QS=!1,YS={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function XS(e){e.metaKey||e.altKey||e.ctrlKey||(GS=!0)}function JS(){GS=!1}function $S(){"hidden"===this.visibilityState&&QS&&(GS=!0)}function ZS(e){var t=e.target;try{return t.matches(":focus-visible")}catch(FL){}return GS||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!YS[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var eE=function(){var e=r.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",XS,!0),t.addEventListener("mousedown",JS,!0),t.addEventListener("pointerdown",JS,!0),t.addEventListener("touchstart",JS,!0),t.addEventListener("visibilitychange",$S,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!ZS(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(QS=!0,window.clearTimeout(WS),WS=window.setTimeout((function(){QS=!1}),100),t.current=!1,!0)},ref:e}};function tE(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function nE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}var rE=r.createContext(null);function iE(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function oE(e,t,n){return null!=n[t]?n[t]:e.props[t]}function aE(e,t,n){var i=iE(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,r.isValidElement)(s)){var u=a in t,c=a in i,l=t[a],h=(0,r.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,r.isValidElement)(l)&&(o[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:oE(s,"exit",e),enter:oE(s,"enter",e)})):o[a]=(0,r.cloneElement)(s,{in:!1}):o[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:oE(s,"exit",e),enter:oE(s,"enter",e)})}})),o}var sE=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},uE=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(w(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}nE(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,i=a,iE(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:oE(e,"appear",n),enter:oE(e,"enter",n),exit:oE(e,"exit",n)})}))):aE(e,o,a),firstRender:!1}},n.handleExited=function(e,t){var n=iE(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=wb({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=eb(e,["component","childFactory"]),o=this.state.contextValue,a=sE(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(rE.Provider,{value:o},a):r.createElement(rE.Provider,{value:o},r.createElement(t,i,a))},t}(r.Component);uE.propTypes={},uE.defaultProps={component:"div",childFactory:function(e){return e}};var cE=uE;n(110);function lE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jw(t)}var hE=function(){var e=lE.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var fE=function(e){var t=e.className,n=e.classes,i=e.pulsate,o=void 0!==i&&i,a=e.rippleX,s=e.rippleY,u=e.rippleSize,c=e.in,h=e.onExited,f=e.timeout,d=l(r.useState(!1),2),p=d[0],v=d[1],g=xb(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),m={width:u,height:u,top:-u/2+s,left:-u/2+a},y=xb(n.child,p&&n.childLeaving,o&&n.childPulsate);return c||p||v(!0),r.useEffect((function(){if(!c&&null!=h){var e=setTimeout(h,f);return function(){clearTimeout(e)}}}),[h,c,f]),(0,ib.jsx)("span",{className:g,style:m,children:(0,ib.jsx)("span",{className:y})})},dE=function(e){return e},pE=function(){var e=dE;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=dE}}}(),vE={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function gE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=vE[t];return r?"".concat(n,"-").concat(r):"".concat(pE.generate(e),"-").concat(t)}function mE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=gE(e,t,n)})),r}var yE,kE,bE,wE,_E,xE,SE,EE,IE=mE("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),TE=["center","classes","className"],CE=hE(_E||(_E=yE||(yE=tE(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),AE=hE(xE||(xE=kE||(kE=tE(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),NE=hE(SE||(SE=bE||(bE=tE(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),RE=DS("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),PE=DS(fE,{name:"MuiTouchRipple",slot:"Ripple"})(EE||(EE=wE||(wE=tE(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),IE.rippleVisible,CE,550,(function(e){return e.theme.transitions.easing.easeInOut}),IE.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),IE.child,IE.childLeaving,AE,550,(function(e){return e.theme.transitions.easing.easeInOut}),IE.childPulsate,NE,(function(e){return e.theme.transitions.easing.easeInOut})),DE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiTouchRipple"}),i=n.center,o=void 0!==i&&i,a=n.classes,s=void 0===a?{}:a,u=n.className,c=eb(n,TE),h=l(r.useState([]),2),d=h[0],p=h[1],v=r.useRef(0),g=r.useRef(null);r.useEffect((function(){g.current&&(g.current(),g.current=null)}),[d]);var m=r.useRef(!1),y=r.useRef(null),k=r.useRef(null),b=r.useRef(null);r.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var w=r.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;p((function(e){return[].concat(f(e),[(0,ib.jsx)(PE,{classes:{ripple:xb(s.ripple,IE.ripple),rippleVisible:xb(s.rippleVisible,IE.rippleVisible),ripplePulsate:xb(s.ripplePulsate,IE.ripplePulsate),child:xb(s.child,IE.child),childLeaving:xb(s.childLeaving,IE.childLeaving),childPulsate:xb(s.childPulsate,IE.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},v.current)])})),v.current+=1,g.current=o}),[s]),_=r.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,s=void 0===a?o||t.pulsate:a,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&m.current)m.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(m.current=!0);var l,h,f,d=c?null:b.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),h=Math.round(p.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,g=v.clientX,_=v.clientY;l=Math.round(g-p.left),h=Math.round(_-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var x=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,S=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(x,2)+Math.pow(S,2))}null!=e&&e.touches?null===k.current&&(k.current=function(){w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})},y.current=setTimeout((function(){k.current&&(k.current(),k.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[o,w]),x=r.useCallback((function(){_({},{pulsate:!0})}),[_]),S=r.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&k.current)return k.current(),k.current=null,void(y.current=setTimeout((function(){S(e,t)})));k.current=null,p((function(e){return e.length>0?e.slice(1):e})),g.current=t}),[]);return r.useImperativeHandle(t,(function(){return{pulsate:x,start:_,stop:S}}),[x,_,S]),(0,ib.jsx)(RE,wb({className:xb(IE.root,s.root,u),ref:b},c,{children:(0,ib.jsx)(cE,{component:null,exit:!0,children:d})}))})),OE=DE;function LE(e){return gE("MuiButtonBase",e)}var jE,FE=mE("MuiButtonBase",["root","disabled","focusVisible"]),ME=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],UE=DS("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Le(jE={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(FE.disabled),{pointerEvents:"none",cursor:"default"}),Le(jE,"@media print",{colorAdjust:"exact"}),jE)),VE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiButtonBase"}),i=n.action,o=n.centerRipple,a=void 0!==o&&o,s=n.children,u=n.className,c=n.component,h=void 0===c?"button":c,f=n.disabled,d=void 0!==f&&f,p=n.disableRipple,v=void 0!==p&&p,g=n.disableTouchRipple,m=void 0!==g&&g,y=n.focusRipple,k=void 0!==y&&y,b=n.LinkComponent,w=void 0===b?"a":b,_=n.onBlur,x=n.onClick,S=n.onContextMenu,E=n.onDragLeave,I=n.onFocus,T=n.onFocusVisible,C=n.onKeyDown,A=n.onKeyUp,N=n.onMouseDown,R=n.onMouseLeave,P=n.onMouseUp,D=n.onTouchEnd,O=n.onTouchMove,L=n.onTouchStart,j=n.tabIndex,F=void 0===j?0:j,M=n.TouchRippleProps,U=n.touchRippleRef,V=n.type,B=eb(n,ME),K=r.useRef(null),q=r.useRef(null),z=qS(q,U),W=eE(),H=W.isFocusVisibleRef,G=W.onFocus,Q=W.onBlur,Y=W.ref,X=l(r.useState(!1),2),J=X[0],$=X[1];d&&J&&$(!1),r.useImperativeHandle(i,(function(){return{focusVisible:function(){$(!0),K.current.focus()}}}),[]);var Z=l(r.useState(!1),2),ee=Z[0],te=Z[1];r.useEffect((function(){te(!0)}),[]);var ne=ee&&!v&&!d;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return HS((function(r){return t&&t(r),!n&&q.current&&q.current[e](r),!0}))}r.useEffect((function(){J&&k&&!v&&ee&&q.current.pulsate()}),[v,k,J,ee]);var ie=re("start",N),oe=re("stop",S),ae=re("stop",E),se=re("stop",P),ue=re("stop",(function(e){J&&e.preventDefault(),R&&R(e)})),ce=re("start",L),le=re("stop",D),he=re("stop",O),fe=re("stop",(function(e){Q(e),!1===H.current&&$(!1),_&&_(e)}),!1),de=HS((function(e){K.current||(K.current=e.currentTarget),G(e),!0===H.current&&($(!0),T&&T(e)),I&&I(e)})),pe=function(){var e=K.current;return h&&"button"!==h&&!("A"===e.tagName&&e.href)},ve=r.useRef(!1),ge=HS((function(e){k&&!ve.current&&J&&q.current&&" "===e.key&&(ve.current=!0,q.current.stop(e,(function(){q.current.start(e)}))),e.target===e.currentTarget&&pe()&&" "===e.key&&e.preventDefault(),C&&C(e),e.target===e.currentTarget&&pe()&&"Enter"===e.key&&!d&&(e.preventDefault(),x&&x(e))})),me=HS((function(e){k&&" "===e.key&&q.current&&J&&!e.defaultPrevented&&(ve.current=!1,q.current.stop(e,(function(){q.current.pulsate(e)}))),A&&A(e),x&&e.target===e.currentTarget&&pe()&&" "===e.key&&!e.defaultPrevented&&x(e)})),ye=h;"button"===ye&&(B.href||B.to)&&(ye=w);var ke={};"button"===ye?(ke.type=void 0===V?"button":V,ke.disabled=d):(B.href||B.to||(ke.role="button"),d&&(ke["aria-disabled"]=d));var be=qS(Y,K),we=qS(t,be);var _e=wb({},n,{centerRipple:a,component:h,disabled:d,disableRipple:v,disableTouchRipple:m,focusRipple:k,tabIndex:F,focusVisible:J}),xe=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=Eb({root:["root",t&&"disabled",n&&"focusVisible"]},LE,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(_e);return(0,ib.jsxs)(UE,wb({as:ye,className:xb(xe.root,u),ownerState:_e,onBlur:fe,onClick:x,onContextMenu:oe,onFocus:de,onKeyDown:ge,onKeyUp:me,onMouseDown:ie,onMouseLeave:ue,onMouseUp:se,onDragLeave:ae,onTouchEnd:le,onTouchMove:he,onTouchStart:ce,ref:we,tabIndex:d?-1:F,type:V},ke,B,{children:[s,ne?(0,ib.jsx)(OE,wb({ref:z,center:a},M)):null]}))})),BE=VE,KE=E_;function qE(e){return gE("MuiButton",e)}var zE=mE("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var WE=r.createContext({}),HE=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],GE=function(e){return wb({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},QE=DS(BE,{shouldForwardProp:function(e){return RS(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(KE(n.color))],t["size".concat(KE(n.size))],t["".concat(n.variant,"Size").concat(KE(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,o=e.ownerState;return wb({},i.typography.button,(Le(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":wb({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Rb(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Rb(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((i.vars||i).palette[o.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[o.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Rb(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(i.vars||i).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[o.color].main}}),"&:active":wb({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[8]})},"&.".concat(zE.focusVisible),wb({},"contained"===o.variant&&{boxShadow:(i.vars||i).shadows[6]})),Le(t,"&.".concat(zE.disabled),wb({color:(i.vars||i).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"outlined"===o.variant&&"secondary"===o.color&&{border:"1px solid ".concat((i.vars||i).palette.action.disabled)},"contained"===o.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat(Rb(i.palette[o.color].main,.5))},"contained"===o.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(i.vars||i).palette[o.color].contrastText,backgroundColor:(i.vars||i).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(Le(t={boxShadow:"none","&:hover":{boxShadow:"none"}},"&.".concat(zE.focusVisible),{boxShadow:"none"}),Le(t,"&:active",{boxShadow:"none"}),Le(t,"&.".concat(zE.disabled),{boxShadow:"none"}),t)})),YE=DS("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat(KE(n.size))]]}})((function(e){var t=e.ownerState;return wb({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},GE(t))})),XE=DS("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat(KE(n.size))]]}})((function(e){var t=e.ownerState;return wb({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},GE(t))})),JE=r.forwardRef((function(e,t){var n=r.useContext(WE),i=BS({props:Sb(n,e),name:"MuiButton"}),o=i.children,a=i.color,s=void 0===a?"primary":a,u=i.component,c=void 0===u?"button":u,l=i.className,h=i.disabled,f=void 0!==h&&h,d=i.disableElevation,p=void 0!==d&&d,v=i.disableFocusRipple,g=void 0!==v&&v,m=i.endIcon,y=i.focusVisibleClassName,k=i.fullWidth,b=void 0!==k&&k,w=i.size,_=void 0===w?"medium":w,x=i.startIcon,S=i.type,E=i.variant,I=void 0===E?"text":E,T=eb(i,HE),C=wb({},i,{color:s,component:c,disabled:f,disableElevation:p,disableFocusRipple:g,fullWidth:b,size:_,type:S,variant:I}),A=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,o=e.variant,a=e.classes;return wb({},a,Eb({root:["root",o,"".concat(o).concat(KE(t)),"size".concat(KE(i)),"".concat(o,"Size").concat(KE(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(KE(i))],endIcon:["endIcon","iconSize".concat(KE(i))]},qE,a))}(C),N=x&&(0,ib.jsx)(YE,{className:A.startIcon,ownerState:C,children:x}),R=m&&(0,ib.jsx)(XE,{className:A.endIcon,ownerState:C,children:m});return(0,ib.jsxs)(QE,wb({ownerState:C,className:xb(n.className,A.root,l),component:c,disabled:f,focusRipple:!g,focusVisibleClassName:xb(A.focusVisible,y),ref:t,type:S},T,{classes:A,children:[N,o,R]}))})),$E=JE;function ZE(e){return gE("MuiFormGroup",e)}mE("MuiFormGroup",["root","row","error"]);var eI=r.createContext();function tI(){return r.useContext(eI)}function nI(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var rI=["className","row"],iI=DS("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.row&&t.row]}})((function(e){return wb({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.ownerState.row&&{flexDirection:"row"})})),oI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiFormGroup"}),r=n.className,i=n.row,o=void 0!==i&&i,a=eb(n,rI),s=wb({},n,{row:o,error:nI({props:n,muiFormControl:tI(),states:["error"]}).error}),u=function(e){var t=e.classes;return Eb({root:["root",e.row&&"row",e.error&&"error"]},ZE,t)}(s);return(0,ib.jsx)(iI,wb({className:xb(u.root,r),ownerState:s,ref:t},a))})),aI=["sx"];function sI(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){Vx[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}(eb(e,aI)),i=r.systemProps,o=r.otherProps;return t=Array.isArray(n)?[i].concat(f(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return v_(e)?wb({},i,e):i}:wb({},i,n),wb({},o,{sx:t})}function uI(e){return gE("MuiTypography",e)}mE("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var cI=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],lI=DS("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(KE(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return wb({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),hI={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},fI={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},dI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiTypography"}),r=function(e){return fI[e]||e}(n.color),i=sI(wb({},n,{color:r})),o=i.align,a=void 0===o?"inherit":o,s=i.className,u=i.component,c=i.gutterBottom,l=void 0!==c&&c,h=i.noWrap,f=void 0!==h&&h,d=i.paragraph,p=void 0!==d&&d,v=i.variant,g=void 0===v?"body1":v,m=i.variantMapping,y=void 0===m?hI:m,k=eb(i,cI),b=wb({},i,{align:a,color:r,className:s,component:u,gutterBottom:l,noWrap:f,paragraph:p,variant:g,variantMapping:y}),w=u||(p?"p":y[g]||hI[g])||"span",_=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,o=e.variant,a=e.classes;return Eb({root:["root",o,"inherit"!==e.align&&"align".concat(KE(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},uI,a)}(b);return(0,ib.jsx)(lI,wb({as:w,ref:t,ownerState:b,className:xb(_.root,s)},k))})),pI=dI;function vI(e){return gE("MuiFormControlLabel",e)}var gI=mE("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),mI=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],yI=DS("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[Le({},"& .".concat(gI.label),t.label),t.root,t["labelPlacement".concat(KE(n.labelPlacement))]]}})((function(e){var t=e.theme,n=e.ownerState;return wb(Le({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(gI.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},Le({},"& .".concat(gI.label),Le({},"&.".concat(gI.disabled),{color:(t.vars||t).palette.text.disabled})))})),kI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiFormControlLabel"}),i=n.className,o=n.componentsProps,a=void 0===o?{}:o,s=n.control,u=n.disabled,c=n.disableTypography,l=n.label,h=n.labelPlacement,f=void 0===h?"end":h,d=eb(n,mI),p=tI(),v=u;"undefined"===typeof v&&"undefined"!==typeof s.props.disabled&&(v=s.props.disabled),"undefined"===typeof v&&p&&(v=p.disabled);var g={disabled:v};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof s.props[e]&&"undefined"!==typeof n[e]&&(g[e]=n[e])}));var m=nI({props:n,muiFormControl:p,states:["error"]}),y=wb({},n,{disabled:v,labelPlacement:f,error:m.error}),k=function(e){var t=e.classes,n=e.disabled,r=e.labelPlacement,i=e.error;return Eb({root:["root",n&&"disabled","labelPlacement".concat(KE(r)),i&&"error"],label:["label",n&&"disabled"]},vI,t)}(y),b=l;return null==b||b.type===pI||c||(b=(0,ib.jsx)(pI,wb({component:"span",className:k.label},a.typography,{children:b}))),(0,ib.jsxs)(yI,wb({className:xb(k.root,i),ownerState:y,ref:t},d,{children:[r.cloneElement(s,g),b]}))})),bI=kI;var wI=function(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),o=l(r.useState(n),2),a=o[0],s=o[1];return[i?t:a,r.useCallback((function(e){i||s(e)}),[])]};function _I(e){return gE("PrivateSwitchBase",e)}mE("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var xI=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],SI=DS(BE)((function(e){var t=e.ownerState;return wb({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),EI=DS("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),II=r.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,i=e.checkedIcon,o=e.className,a=e.defaultChecked,s=e.disabled,u=e.disableFocusRipple,c=void 0!==u&&u,h=e.edge,f=void 0!==h&&h,d=e.icon,p=e.id,v=e.inputProps,g=e.inputRef,m=e.name,y=e.onBlur,k=e.onChange,b=e.onFocus,w=e.readOnly,_=e.required,x=e.tabIndex,S=e.type,E=e.value,I=eb(e,xI),T=l(wI({controlled:r,default:Boolean(a),name:"SwitchBase",state:"checked"}),2),C=T[0],A=T[1],N=tI(),R=s;N&&"undefined"===typeof R&&(R=N.disabled);var P="checkbox"===S||"radio"===S,D=wb({},e,{checked:C,disabled:R,disableFocusRipple:c,edge:f}),O=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge;return Eb({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(KE(i))],input:["input"]},_I,t)}(D);return(0,ib.jsxs)(SI,wb({component:"span",className:xb(O.root,o),centerRipple:!0,focusRipple:!c,disabled:R,tabIndex:null,role:void 0,onFocus:function(e){b&&b(e),N&&N.onFocus&&N.onFocus(e)},onBlur:function(e){y&&y(e),N&&N.onBlur&&N.onBlur(e)},ownerState:D,ref:t},I,{children:[(0,ib.jsx)(EI,wb({autoFocus:n,checked:r,defaultChecked:a,className:O.input,disabled:R,id:P&&p,name:m,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;A(t),k&&k(e,t)}},readOnly:w,ref:g,required:_,ownerState:D,tabIndex:x,type:S},"checkbox"===S&&void 0===E?{}:{value:E},v)),C?i:d]}))})),TI=II;function CI(e){return gE("MuiSwitch",e)}var AI=mE("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),NI=["className","color","edge","size","sx"],RI=DS("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat(KE(n.edge))],t["size".concat(KE(n.size))]]}})((function(e){var t,n=e.ownerState;return wb({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(Le(t={width:40,height:24,padding:7},"& .".concat(AI.thumb),{width:16,height:16}),Le(t,"& .".concat(AI.switchBase),Le({padding:4},"&.".concat(AI.checked),{transform:"translateX(16px)"})),t))})),PI=DS(TI,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,Le({},"& .".concat(AI.input),t.input),"default"!==n.color&&t["color".concat(KE(n.color))]]}})((function(e){var t,n=e.theme;return Le(t={position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:"".concat("light"===n.palette.mode?n.palette.common.white:n.palette.grey[300]),transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},"&.".concat(AI.checked),{transform:"translateX(20px)"}),Le(t,"&.".concat(AI.disabled),{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:"".concat("light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600])}),Le(t,"&.".concat(AI.checked," + .").concat(AI.track),{opacity:.5}),Le(t,"&.".concat(AI.disabled," + .").concat(AI.track),{opacity:n.vars?n.vars.opacity.switchTrackDisabled:"".concat("light"===n.palette.mode?.12:.2)}),Le(t,"& .".concat(AI.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return wb({"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Rb(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(Le(t={},"&.".concat(AI.checked),Le({color:(n.vars||n).palette[r.color].main,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[r.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Rb(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(AI.disabled),{color:n.vars?n.vars.palette.Switch["".concat(r.color,"DisabledColor")]:"".concat("light"===n.palette.mode?Db(n.palette[r.color].main,.62):Pb(n.palette[r.color].main,.55))})),Le(t,"&.".concat(AI.checked," + .").concat(AI.track),{backgroundColor:(n.vars||n).palette[r.color].main}),t))})),DI=DS("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),OI=DS("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),LI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiSwitch"}),r=n.className,i=n.color,o=void 0===i?"primary":i,a=n.edge,s=void 0!==a&&a,u=n.size,c=void 0===u?"medium":u,l=n.sx,h=eb(n,NI),f=wb({},n,{color:o,edge:s,size:c}),d=function(e){var t=e.classes,n=e.edge,r=e.size,i=e.color,o=e.checked,a=e.disabled;return wb({},t,Eb({root:["root",n&&"edge".concat(KE(n)),"size".concat(KE(r))],switchBase:["switchBase","color".concat(KE(i)),o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},CI,t))}(f),p=(0,ib.jsx)(OI,{className:d.thumb,ownerState:f});return(0,ib.jsxs)(RI,{className:xb(d.root,r),sx:l,ownerState:f,children:[(0,ib.jsx)(PI,wb({type:"checkbox",icon:p,checkedIcon:p,ref:t,ownerState:f},h,{classes:wb({},d,{root:d.switchBase})})),(0,ib.jsx)(DI,{className:d.track,ownerState:f})]})})),jI=LI,FI="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCMRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAV+gAwAEAAAAAQAAAV8AAAAA/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/AABEIAV8BXwMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2wBDAAICAgICAgMCAgMFAwMDBQYFBQUFBggGBgYGBggKCAgICAgICgoKCgoKCgoMDAwMDAwODg4ODg8PDw8PDw8PDw//2wBDAQICAgQEBAcEBAcQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/3QAEABb/2gAMAwEAAhEDEQA/AP38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKazKgyxCj3rMudc0i0z593GpHbOT+lAGrRXHT+OdCiyI3eUj+6h/mcVzt98UtLtB8sPPbe4X9Bk1PMh8rPU6K+e9R+Nn2cYggQn2Bb9SRXHXnxu8STcWkKxj3wP6f1o5w5T61or4qPxQ8bXsojk1BbcN02qPyyax5vGfiy4kMd3rVwuOysF/kKOYLH3U0saffcLj1NU31TTkzvuY1x6sK+KYry0kbdqOs3MgIz/rW/I816RpOq/CLTbFtQ1y+EcadXuJDt/HJouwsfQza9oy/evIh/wIVA3ijw8pw2oQg/74ryaPxZ8Er+0M0E1tNGB/CDmvkb4q/tKfs+eELx7BdNuprhM58mPcD9CXAok2gVj9DT4v8ADK9dSg/7+Cj/AIS7wx/0E4P+/gr81fDPi7UPiJo1v4k8FeAtXu9MuyRFOIo1RsHBwTJ2rpP7C+Ir4J8C3sYH9+W2XH5yVyPGxXU6VhJvofoQPFnhtuBqUH/fwVKPEvh9umowH/gYr85Na1DXPB+iX3iPxB4NvBY6bE007JLbOVRerbVlyce1eW6J+2N8A5HUahYX0QOOtvnH5Oa0pYiM/hZlVoyh8SP10XXdGf7t7Cf+BirKajYSHCXEbfRhXwJ4U/af/ZW1QpHLPLbSN086CQD9K+nfDWq/BvxlZi88O3Vvcxt3R2Vh+BINdKMro9nWWNvusD9DT68D8SaX4OsMva6lc2zjtHK2K8pu9bvrRy2leJrrA7MwP881LbQz7Sor4iT4k+ObA/u9b88DtJGD/LFaEPx08aWhxcJBcj2G0/1pc4WPs2ivlix/aGmAH9oafj1K4I/mK7XTvjl4fvQPNTyif7xK/wAxT50Fj3KiuIs/H2hXiB1cgHuMMP0rfg1/R7n/AFd0mfQnB/WmpILGxRUaTRSDMbhh7HNSUxBRRRQAUUUUAFFFFABRRRQB/9b9/KKKKACiiigApkjxxoXlYIo6knArmPEXie30NfKUeZcsMhPT3NeSX+tanrD5uZSR1Cg4UfhSbGkerah400exysbG4cdl6fma4u88b6zecWSLbRnv1P5n/CuMLW1uN88iqRz8xH9ax7vxV4etDi51GFD/ALTjNYyqGkYHTT3t9dfNeXTyH0B4rKmuEjztUD36n9ay4Nd0+/Utp1xHcj1Rw38qhumlIPTIrPmuacpV1q/kjjwHIdl3CvKdR1Jrht0n317+tei60m6O3nJ6pj8uK8y1GLbMQOmf51bZBV+1k4HXNOFyd+wKfY9qz+QuM4wcVKkqkgKwJHOKCRt48gOQcZ5FVbiaZ4llJ+YcVbvlJRT6VnKxkiKY5681dwKUk0p6ufXrXz58edUvrTwgHhY4SXueAQpIP6V75LvBPymvAvjtBLN4Fv2jX5oWVgT/ALQZD/OhsLaHFeH/ABXdxaV5bTERN15OM9ulfLnxM1aK41KZmAZmUgEsePoO9e2+G76e88PqfMUb40IzjoRng18y+P7a5iv3lMisfm74qWSz7H/ZZ8Ya7Z6dpOjQapKLSSWZfIDtsHORgZx+Nfdvi3ULlPC11MlyyOqD5sn1r4R/ZY0i7OhaTeJah18yZmdmwBnp0HXt1r7q8X2Etz4Su4IVDyso+UfWvzjM5r27SPvsDD9zFs+GfHfiDUp9A1q1e/aXdbuuzeeQwHBr4O8m+VsmJh7d/wAq+sPHTXFs/ieGeDatpBk8khRwO9fHUE26TfLKUxz619NkK92Vj57PX78bnd6TdX9u6Fgycfxcfzr7W/Z38R61b67ZRJLJskLhueCoQk96+EdM1K43bPNZo8dDzxX2T8B43udVtMcokU0hIOMfLt/ma+qobM+bqbo/Q3WteurmxjaSQklf6mvOnv5y3Dn86vXEZgsIYjI5IQH5jn73OPwzXPAPuPPWsTdm0l5cY+9mpTeS44OfrVJM7M0NJtI+Un6UpAi39rmI64x6Cp4ros3zEt9TWfLKEULtOTyfap4toHPU1AzqdM1m9sZVeCUpjsDXtfhzxRNqKCKTmXsOze31/nXz5BGSM969H8HRv/aFuB0Vwx+i/Mf0FNDPdLPU84eJ2iJ/usRXT2viTWLcjy7nzVHZxn9a8qs5XBJHcmumguBtANTzW2Lsj1S08cAEJqEBX/aWuts9a02+A8iYZPY8GvDo5c8/zp65Db4W2H9K0jUIcOx9B0V49pvirULBhFKfNQfwt/Q16VpWtWerJmBsOPvKeorRMzaNeiiimAUUUUAf/9f9/KKKKACmsdqlvQZp1IRkEHvQB8w6hqcl9qlzPOSXZ269gDgCuf8AE2uLoekrcsdokbaT05x612XxA8OT6DfNq8K/6BO2WYDiNz2b0B7Hp29K4XULOw8Q6XPo+oAtDOuCRwynsyn1FZyvYtHz5qvxPsmu0tbo+VFcsUWUE4Vu270rybxrPPFqRmEm+OQAjnjB/wDr1T+J3wy8ZeEmnuHgOp6Q/wB27gUnYQcqZkHKEdM/dPrXB6JriajpKaPfSf6RbEiIk8sh5AB9jnH1rmcLGil0Ow0vxNf6NOl5ZTNHIhzwf6V9D+GvjCLuOOHxBF5YYDEseSPqV/wr5M3YUg+laOlXbxNGTyBwfwNSmXE/QRbq01fRIbuxlE0XmFdw9xkfqK4TV7cBuuOP5Vm/DO+2PNpKti2vYhLGCcjzU5wPqMiuh1+IKc+h7+9bXvG5ElZnHeVHvYgcsBzSCMZ3IME8Zx2pnnqGXnPUcVNBKWbAFRzCcSaeMtACRzWdbQKdxbk81tShvIwx7Vm2wYuRwcg4rW5JmNbBhn1rzj4ieHJNc8G61Yqm9nt3KjuXQb1/Va9R/fEcDgVUutLuNTs7yyQlWmiZM46bgVz+tF9APgz4feGr660aK3jARYYwpAYAkKMdz7V5b8Z/DK6aYzwXOckYz06cYr7A+H/gfWdF1CXQ7qNWZGZDweeTgj2I6V5H+0n4Tl0oRiZiCpOM5xz+Fb1UrKxhBu9mfUX7KX7Q3hDQfhDpPhe88Kw3FzYtIruijDHP3iTnBNfVkfx9+HDW8smpeEp44VQvmNd2QAT7fhX4tfC/xhc+G/D8dtbsvErvyOTk16/rnx817T/DV6luwVmhdFLKDjeMccZ718hXhVU3GFrei/yPqqVSk6alO9/V/wCZZ8d/Fr4W+M/CPxkm0jRry3u9RW0XTjKwIhRZsybiPU+vbj3r880jZmwBn6V22neJb+30bX7LeGXU4kjkyOT84bP6VzVukhZSOCK9fAYVUk4o8bHYp1WpM3tCsGnmGEJJ4/Ov1P8A2b/hzdf2NJqs9vs84CJWIAO1fmY/TpX56+C7y7WaCE28Mh3DG5ACc+pXGfxNfsP8GdL1eDwNa3VwVt90bSBU5G1htXrnrjP0r3aatTZ5b+NGf4jszHK4RcKScD27Vx4gwS2K63XmvBPtZ92M9q52MzZw6g4rmOiwixZjPHSpIlyoPpUyZ2MxGDjp9aiwwz6VDYxJEHmetLbxdm61GXG6rcXUH2pDRpWsPIA7V6f4Vh8pLi5P/LOMqP8Aek4/lmuCsYyzfiK6HxZrc/hHwV9ptQBeXsn7skZAA+UN/Mihaagjotb8aeHvCVuZNWuQsu3csK8yMPYf4183+NPjzr+o3RtvDr/2dZ4yCP8AWn6nt9BXjWu6rcXdy81zM00rHLOxyTXIGRnJLnOeazSLkz23wl8QvGdzrUEbanPN5rDcGcnjv3r6g0f4kCB0s7/UA05APlkb3CnoTjkZr4d0jXrTwvZ3GtXQDz7THbx93dxyfoo6n6VD4MvfEWsa0kemwS6hq+qyFmWIFmESnn2VSe5wAAaOXsTfQ/UHTNah1aPKsGYcgjj866TTNRl0++iuYmwVPI9R3FeZeB/D1z4Z0cLqkwkvZQPM2nKRj+6D39z+XFd1pVpc6zqUVhZjJY7mbsqDqf8APeuiJLR9JRuJEWQdGAP50+mRoIo1jXooAH4U+tCAooooA//Q/fyiiigAooooAjmhiuIngnRZI3BVlYAqQeoIPBFeLa/8I9pe78HXQs3PP2WfL25PorD54/wyB6V7bRQ0CZ8W6tqOteEZhb+LdOl0zd8olOJbaT12zJx+DBT6ivLte+F/wv8AGx+3xW4069Y7hcWJEeWHIJQZQ8+1ffPjLTl1LQbmMrvMY3YPOcdf0r4p1jwrpYuHks0axlz9+3byzn6D5f0qHEpPueL63+z/AK7E7zeHr+DUIzz5cv7mT8Dyp/MV5Rqfgjxh4caRdX0i5gQEESbC8fv865X9a+p4h4s0xv8ARNSS7QdFuEwf++k/wrYtvHfiCxBXUdMdl7tA4kH5HBrB00a8x4t8I9f1b+27bSrazjvHZ02JLkYXPzYI5yK+tPija6St0lrpUITy4wJCuSC/fBPXFefW3jjwcb6O+uLWO0vIzlZHh8twf94Cuo/tvw1rSKi3KORnlZBnk55ojC10VKV7Hjv2Yb29jmtGCJBzXoTeEtPnYyW18QD2ZQR+YxVb/hDb6NiYriKQdskqf1FOMSHc5Ro/3fA5wapWkGLoAjhuK7NvDOsIOIA/+6ymqUWiapDcxvLZyBQeTtJ/lVpE3Ofis2MhjHUE/wA66nQtHZtQ2nnepAHv2qMWU8VzKzxMqj1U+teqeHrAPdRlVAPBq0I891n4Wz3ms2WsaYjLICN/bIz1yfQ8V8o/tXeB/Ey3kflWMstqkf3vLLAsfcDFfr5Z2kDWsJkjBYAN06HvXO+MNHtb2xd5oldcYIKgj8RWnN7trGfLrc/mQGj6np7CN7BkbJwCjKT+FJq3hPxRqViRHpNw0b9WAwMDnoa/a7xT4O8NrM7SabCSDn5eK84l8OeHGkANoQB0GcivNnh3e6R3xrRtZs/HOy+F3iu8VorXSrpy5HRcdK6ux+BHxKe4S3TQ7p92OQFI5981+yuh6NpdugjtLdUB9AMn9K9s8KeHLCaRWkgBA9RXVCEupzS5eh+V3wo/ZZ8bXOrWZ1ix+zwGRC4dgTsz82AB1A96/V6fwtD4e8MR2MEJjCKq7f7qoMKPyFe1aR4fs7MLP5Ko2OBjGPrVXxjYJcaTIwGNo5rrc7xsYKCTuj4O1m28y6bjvWDNaFDgcZOa9T1nTF85nwOpxXG3Vm2/CoT9KwaLOZji3GQDljyBVSRMMRXVW+k30khWK3lYkdkJ706bwj4juLkvb6bMynoduB+uKjlHc4TysSfT1rSgiPmYz1rsofhz4rlbc1skI9ZJVH6Ak10dl8M9QRg15ewRgf3dzn+QpWKMKwiWC0e5k+6gLHjJ49K82+LnjBb94rAwLDbw48rJ3OVAwOnAz14z9a+mYvDOl2lq9tPeE742jJAC8MMEjOecGuSuPB3wqtWSTUYI7xohgGeUv+gIpS1HHQ/P6eKS8d1t42lduFVQWYknsBk13Ph74L/EXxDte30eS0gbH727/cLjuQG+Y/gpr7Ys/EXhbR18nw3pioP+na3Cfm2B/Okm8S69eHMFslsp7yvvb/vleP1pJAzwrSP2WNKkvo9Q8baw92sSgLa2o8tAOpzI2WOT6AV9BaPZeD/BFqNJ8OWcOnrJgFIl3TSkdNxGXc+mc+1Zsdpfag4N9eyOD1WP92v6c/rX0X8LfCWn6VZvqyWqRzTfKrYy+3udxyefrWsYkNnF6L4N8WeI2Wa5gOj2R/jnGZ2H+zF/D9XOf9mvdNB8O6Z4dtfs2nodzcySMcySH1Y/yHQdhW7RVpCbCiiimIKKKKAP/9H9/KKKKACiiigAooooAayK6sjDKsCCPrXyB4y05tK1m6tP4Uc7fcHkfpX2DXh/xa0TeItWiX7w2OR6jpQB87Pgmq0ie1OnYxuRTkfeMispItFNoI5V2SKGHoRmsubQNKlO5rVM+qjB/Suh70bcioLuc6mixwjNpPPB/uStj8qtp/b0H+o1eU47SAN/hWuEzThEMilYLla31rxbA2DcRzAf3l25/HDV01l4svAQL5JE6ZMSo/6FkrGEftSNHzxzS1KR6RB4m0WRPn1B4yO0lq//ALI71KfFGlwgNDqMJPvHcIf/AEUa8w2Y7YxTtg7c0czFY9RX4lvYnCXgcDpsdyPyZBVe7+MUEiNFcyzMh6gAkGvMwgH0pQq+tHMw5TeufiP4JlH+lwsx/wBqI1kv46+GbHLWy/8AflqreUOaFixxilzvuHKjRg+Ifw8jYLbJhj0Aif8AwrorX4q6JZFWtfOjI5G2M1xojx06U7yx/dpc8u40o9j0ZvjoiLuMtyR0/wBUT/Ss65+NCXqlH+1yKexibB/SuMVcc4qYRggZGKalLuDsdPB42sLkg/Z1QHvIjg/kENbieItK2bmvoY/ZYJmP/ota89Majio3UY2+tNtk2OxuvGSoSLRpbgeqw7B/49ID+lc7N4r8STORbwxovq78/iAD/OqkcQ7dKeqgHGKSbG7ET6r4ql5kvEi9kTP88VUc6xOcXGpTMD2XC/yGa02U4wRzTPJY9qfoJIxzpNvL81wZJj/00dm/rViOwtIf9XEi/RRWkYuMZxSJGB15oYaEZRSOmatwQbuvQihFHXGMVKsgzsFXFEtnR6JYm9vreyhGWlYL+dfWdpbR2VtFaQjCRKFH4V4n8K9HM11LrEy/JANiZ7s3U/gK91FbozCiiigAooooAKKKKAP/0v38ooooAKKKKACiiigArG17S49Z0qewkAy6nafRu1bNJ3oA+EPEFjJYXclvMNrIxBHuK5mO6MZw3Q19I/F/wtkf2zbp8knEmOzetfLdyHgJU5bHr1qJFROoSVXGRU+UIxXM2d6mcE4+tbaSKw61kUXVx61MvtWepYcipFkI4NA7F/OD0pcjpVM3GOtSrMh4zQNE+AfoadtQ+gqNXTHWn7waBXGmNSeaQwrjNSgrSFh0osFysUToO1N8sd+KmDjcQV49acSpFQyyAADq3H1p+ARwTSgITgjNPAQdTipSARYsk1PsA75qISBelSb09atCAKO/NAQFhgZp4K96XzUHSmhDjtUYHBpobj5hzTPNUdetHmDORU3HYlJaThcjFN2Nu3MckdKZ5vYU1pW6A1SJsS49OaczBevFVGkABOfrWXc3agfK1MRoS3Y3bVrQ02J7mZVUZLEAD3NcpC7SONvc1778K/DZvb4ancL+5tuee79h/WtIomTPcvDOkro2i29ljDhdz/7zcmt+iitCQooooAKKKKACiiigD//T/fyiiigAooooAKKKKACjOKKKAKWoWFtqllLY3S7opQVIr4Y+IXhe68NarJbTKdhO6NuzKehr7wLbDz0rivHfg+08YaO9q+EuYwTDJ6H0PsaLAfnXcXTRNuHrW3YaqDtDGs/xJpN7omoT2F7GY5YiVZT7VzFvd+U22sGjRM9cjuN4GKlEvHPWuFsNVBG1jzXRxXiuOam5djbDxuOaAi5ypxVBJw9TBwfcUrgkXBMyttYZq0pJrL3N1B/CnpMyn5jikmOxq7jQSDx3qsJeAPWneb+NVzE2ZKajL+nFQNNj2qPzhUNlWLAbvRuyarC4U96XzVzn1qbjsWQxB608P2qmZOcilEpyM0XCxe3HFNyfSoPMPrURk9W/WnzCLffNP3Y5OKoCQZ65pGmHY0JgaBmUdxUL3SqC1Zc12EHJ5rBu9T64b8KbmHKa95qBI8sHC96xmuDI/wB7IrIe7LHg8Vd06Ce+nSOIFixAwKcbtkyZ6D4T0i51q/htbZCzO2OO3ua+3tA0eDQ9Lh0+EfcHzH1bua4L4Y+CF8Oact7eJ/pc4zyPug9q9XrpitDJsKKKKoQUUUUAFFFFABRRRQB//9T9/KKKKACiiigAooooAKTIpN1NoAa4zUAcxttbketWDyKhkTIxQB4r8X/h1F4o01tV05Auo269v+Wijsff0r4D1S0ntJXjkUo6Egg9iK/V4Dcpjb/9Yr5b+M/wyW6WTX9IixJyZUUdfcD1qZDTPi+DUHjbDHBFdPp2tYYKzfhXI6hAbaRo5F2kH8qzVuDGeTxWEomqke1W+oBhuJB+laUd6Gxg5ryGx1lo+N2RXT22qB8EmsmzTc9EE+Oaa8m8Y3c1y8d9kdaspeA47mpchqJuRTTRnnkVbFxmsBbrnAarHnAjOalSBo2WuBj0pguPU8VitNlsGkFwvI6VLqXDlNszDOeOKQXAz14rF+0L6809ZlfgnFLnZVjaNwG6c0x7pVxWUX/ut0qMz7Thhk03MRsecG5NM89B6VivfALkYrMl1RBwDRzjSOoe82ghSBms+XU0jyd1chc6u3ROtYs+oOTkNj8aaYrHU3WqmTODxWQ91ufJNc+boyHG7NaunWsl1IqRgsxOOK1jFsicrG1ZQtdOFxmvr/4RfDM2qx+INYj2twYo2GMf7R/pWX8JvhRGscWua6mQOY4z6+pr6hRQoCqMKvAArqhCxztk4wBgUtR5xTga0EOopBnvS0AFFFFABRRRQAUUUUAf/9X9/KKKKAEJxQfypaQ0AITSZpKKACiiigBDUZ5p7U2gCFhg1Su7dLiJo5BuVhgg1otUTDNAHwz8aPhHNH5+s6N8p5baB+hr4avPEiabevp2sKbWdTj5vuk/XtX7a6jp0F9E0M6hlbjBr4b+Of7M0PiSGfVdCTF0QTtAGDWMrotWZ8eRaojKJLeQMOowa3LHXWU7ZOK+YPF3hXx98Pb54o/MiCH7j52n6ZrlrP42ahpUgh121KY4LEcfmOKz0ZpsfetpriOAN9dDb6gjgc18V6X8aPDt2AfOMZPvkV6Bp3xN0yXBhvUYehODUOmWmfUqXUZbIb9auLcqP4v614HY/EDT5MB5l/MV01t4x06UZFwv51DgVc9YNznvURnz14rhI/ElnJ9yVSP94VN/bkBPDg/jWbgNM7UTgUovFAweK4dtehH8YP5VRn8RxjO1h+dLksO56G1/szg8VSl1RQOWrzWXxPEox5g/OsW48VQAHMgp8pNz0y51UY+9WJPqgIIBry+58YWsakyTqo9yK5XUPiZ4eswxnvUyOwOf5VSpicj2aXUVODmqxvMnk1813fxt015PI0iB7uU9MDArofClr8SPiJfR21nbSQxyH/Vxg9Pdq15UtzNyue722pWnnLArebMx4ROTX2P8Gfhrc3/l6zq8XlxggqhHWs74Mfs12vh+KHU/ES+dcEBtp7H3r7TsbG3soFggQKijAAraEWZNlq3gSCJYoxtVRgAVbXpUS1ItbkjqKKKAFyaX3pv0pw96AHUUh6UtABRRRQAUUUUAf//W/fyiiigAoxmiigBDmk206igCPFFPIzRigBlMPWpSKbgUAREZplTkelN20AVyKrSwq6kMMir+ymlPagDyLxp8JvCHjW2kh1iwjkZgRv2jIz718GfEn9hGzuoZJ/DM288ny3HX6V+pxiqMwA9azlTTKUmfzcePP2PvGnh6WSb+zZ4lUnDxA4z+FfO+pfDf4gaEzCKWUbf4ZVOfz4Nf1f3WjWl2pWaJZAeoIzXneu/BvwN4g3HUtIglZuCdgB/So9k1sylM/lla++I2l8SQmQDurH+Rpy/EfxjZ8T2s4x6c/wBa/ow1v9jr4XaozOlh5JbJIXgZryPV/wBgTwfdYaznMZycg8g/4VDhLsPnPwyT4zeIoPvCdP8AgLVdj+POux8edKv4NX6/3v8AwTptH3G31BMnpuTgVhzf8E32ZgYtRhwTzlOlS4vsVz+Z+Un/AA0FroAxPKf+AtTG+PviSXhHmb6If8K/V+D/AIJuAD99qMOc9kOMV0Vh/wAE5dIiINzqi57hYqfI+wc/mfj4fjD40u/9TDcNn/ZIpo8W/EvVDiGCRc92bH8q/cfR/wBgPwDZlTeXUtwe+FCd/wAa9W0L9j34S6MQw0v7Qw7ysW4+nShU5diXM/n5sPCvxL191SWZ13HGEUsefrXv/gT9kT4h+LJUkbT7mdGwd82UTnvzX73aJ8IPBOhBBp2kW8OzGMRrxivQrXSLW1G2GMKB2AFWqL6sTmfmj8K/2ErbSmhu/Fs0e1cEwxDP5mvvjwf8M/Cngq1S10SxSLb/ABYy3516MIgKl8vFaRppENkKRhQAvSpgMCnbadgVoIAMU4DnNGDT6ACilwaSgAFPwKMCloAKKKKACiiigAooooA//9f9/KKKKACiiigAooooAKKKKACkpaKAEIzTcU+g0AR0UuPypdvNADaKXBoIwaAEpCKdjjNAx3oAZtFJsFSAZpdtAEWwUeWtSY9aDjtQBF5anqKPKX0/GpcZpccc0AQ+UtLsFScUuOmKAI9tG2pMHFA4oAj204qBTyM0Ed6AG444pccdKcKKAEwKXAoooAKKKKACiiigAooooAKKKKACiiigD//Q/fyiiigAooooAKKKKACiiigAooooAKKKKAEHAoxS0UAJnse9GBS0nSgAwMU0jFOHrRigA6UmTnFKetLQAgPakI9KdSGgA6UYoFLQA3AHWlwe9LRQAYpMc0tFACc0tFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Z",MI=n.p+"static/media/Black_Circle.d90d1f69e27b26a272b3.jpeg",UI=n.p+"static/media/NewNotification.d2345dad38de196bf139.mp3";function VI(e){return gE("MuiPaper",e)}mE("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var BI=["className","component","elevation","square","variant"],KI=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},qI=DS("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return wb({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&wb({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat(Rb("#fff",KI(r.elevation)),", ").concat(Rb("#fff",KI(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),zI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiPaper"}),r=n.className,i=n.component,o=void 0===i?"div":i,a=n.elevation,s=void 0===a?1:a,u=n.square,c=void 0!==u&&u,l=n.variant,h=void 0===l?"elevation":l,f=eb(n,BI),d=wb({},n,{component:o,elevation:s,square:c,variant:h}),p=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes;return Eb({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},VI,i)}(d);return(0,ib.jsx)(qI,wb({as:o,ownerState:d,className:xb(p.root,r),ref:t},f))})),WI=zI;function HI(e){return gE("MuiCard",e)}mE("MuiCard",["root"]);var GI=["className","raised"],QI=DS(WI,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),YI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiCard"}),r=n.className,i=n.raised,o=void 0!==i&&i,a=eb(n,GI),s=wb({},n,{raised:o}),u=function(e){return Eb({root:["root"]},HI,e.classes)}(s);return(0,ib.jsx)(QI,wb({className:xb(u.root,r),elevation:o?8:void 0,ref:t,ownerState:s},a))})),XI=["bsPrefix","variant","animation","size","as","className"],JI=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.animation,o=e.size,a=e.as,s=void 0===a?"div":a,u=e.className,c=tb(e,XI);n=sb(n,"spinner");var l="".concat(n,"-").concat(i);return(0,ib.jsx)(s,Gt(Gt({ref:t},c),{},{className:rb()(u,l,o&&"".concat(l,"-").concat(o),r&&"text-".concat(r))}))}));JI.displayName="Spinner";var $I=JI;function ZI(e){var t=function(e){var t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((function(){return function(){return t.current()}}),[])}var eT=Math.pow(2,31)-1;function tT(e,t,n){var r=n-Date.now();e.current=r<=eT?setTimeout(t,r):setTimeout((function(){return tT(e,t,n)}),eT)}function nT(){var e=function(){var e=(0,r.useRef)(!0),t=(0,r.useRef)((function(){return e.current}));return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}(),t=(0,r.useRef)();return ZI((function(){return clearTimeout(t.current)})),(0,r.useMemo)((function(){var n=function(){return clearTimeout(t.current)};return{set:function(r,i){void 0===i&&(i=0),e()&&(n(),i<=eT?t.current=setTimeout(r,i):tT(t,r,Date.now()+i))},clear:n}}),[])}var rT=n(164),iT=!1,oT="unmounted",aT="exited",sT="entering",uT="entered",cT="exiting",lT=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=aT,r.appearStatus=sT):i=uT:i=t.unmountOnExit||t.mountOnEnter?oT:aT,r.state={status:i},r.nextCallback=null,r}nE(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===oT?{status:aT}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==sT&&n!==uT&&(t=sT):n!==sT&&n!==uT||(t=cT)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===sT){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:rT.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===aT&&this.setState({status:oT})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[rT.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||iT?this.safeSetState({status:uT},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:sT},(function(){t.props.onEntering(o,a),t.onTransitionEnd(u,(function(){t.safeSetState({status:uT},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:rT.findDOMNode(this);t&&!iT?(this.props.onExit(r),this.safeSetState({status:cT},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:aT},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:aT},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:rT.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===oT)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,eb(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(rE.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function hT(){}lT.contextType=rE,lT.propTypes={},lT.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:hT,onEntering:hT,onEntered:hT,onExit:hT,onExiting:hT,onExited:hT},lT.UNMOUNTED=oT,lT.EXITED=aT,lT.ENTERING=sT,lT.ENTERED=uT,lT.EXITING=cT;var fT=lT;function dT(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var pT=/([A-Z])/g;var vT=/^ms-/;function gT(e){return function(e){return e.replace(pT,"-$1").toLowerCase()}(e).replace(vT,"-ms-")}var mT=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var yT=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(gT(t))||function(e,t){return dT(e).getComputedStyle(e,t)}(e).getPropertyValue(gT(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!mT.test(e))}(i)?n+=gT(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(gT(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},kT=!("undefined"===typeof window||!window.document||!window.document.createElement),bT=!1,wT=!1;try{var _T={get passive(){return bT=!0},get once(){return wT=bT=!0}};kT&&(window.addEventListener("test",_T,_T),window.removeEventListener("test",_T,!0))}catch(PK){}var xT=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!wT){var i=r.once,o=r.capture,a=n;!wT&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=a),e.addEventListener(t,a,bT?r:o)}e.addEventListener(t,n,r)};var ST=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var ET=function(e,t,n,r){return xT(e,t,n,r),function(){ST(e,t,n,r)}};function IT(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=ET(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function TT(e,t,n,r){null==n&&(n=function(e){var t=yT(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=IT(e,n,r),o=ET(e,"transitionend",t);return function(){i(),o()}}function CT(e,t){var n=yT(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function AT(e,t){var n=CT(e,"transitionDuration"),r=CT(e,"transitionDelay"),i=TT(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var NT=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var RT=function(e,t){return(0,r.useMemo)((function(){return function(e,t){var n=NT(e),r=NT(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};var PT,DT=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],OT=r.forwardRef((function(e,t){var n=e.onEnter,i=e.onEntering,o=e.onEntered,a=e.onExit,s=e.onExiting,u=e.onExited,c=e.addEndListener,l=e.children,h=e.childRef,f=tb(e,DT),d=(0,r.useRef)(null),p=RT(d,h),v=function(e){var t;p((t=e)&&"setState"in t?rT.findDOMNode(t):null!=t?t:null)},g=function(e){return function(t){e&&d.current&&e(d.current,t)}},m=(0,r.useCallback)(g(n),[n]),y=(0,r.useCallback)(g(i),[i]),k=(0,r.useCallback)(g(o),[o]),b=(0,r.useCallback)(g(a),[a]),w=(0,r.useCallback)(g(s),[s]),_=(0,r.useCallback)(g(u),[u]),x=(0,r.useCallback)(g(c),[c]);return(0,ib.jsx)(fT,Gt(Gt({ref:t},f),{},{onEnter:m,onEntered:k,onEntering:y,onExit:b,onExited:_,onExiting:w,addEndListener:x,nodeRef:d,children:"function"===typeof l?function(e,t){return l(e,Gt(Gt({},t),{},{ref:v}))}:r.cloneElement(l,{ref:v})}))})),LT=OT,jT=["className","children","transitionClasses"],FT=(Le(PT={},sT,"show"),Le(PT,uT,"show"),PT),MT=r.forwardRef((function(e,t){var n=e.className,i=e.children,o=e.transitionClasses,a=void 0===o?{}:o,s=tb(e,jT),u=(0,r.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==s.onEnter||s.onEnter(e,t)}),[s]);return(0,ib.jsx)(LT,Gt(Gt({ref:t,addEndListener:AT},s),{},{onEnter:u,childRef:i.ref,children:function(e,t){return r.cloneElement(i,Gt(Gt({},t),{},{className:rb()("fade",n,i.props.className,FT[e],a[e])}))}}))}));MT.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},MT.displayName="Fade";var UT,VT=MT,BT=(Le(UT={},sT,"showing"),Le(UT,cT,"showing show"),UT),KT=r.forwardRef((function(e,t){return(0,ib.jsx)(VT,Gt(Gt({},e),{},{ref:t,transitionClasses:BT}))}));KT.displayName="ToastFade";var qT=KT;var zT=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e}),[e]),t};var WT=n(7),HT=n.n(WT),GT=["className","variant"],QT={"aria-label":HT().string,onClick:HT().func,variant:HT().oneOf(["white"])},YT=r.forwardRef((function(e,t){var n=e.className,r=e.variant,i=tb(e,GT);return(0,ib.jsx)("button",Gt({ref:t,type:"button",className:rb()("btn-close",r&&"btn-close-".concat(r),n)},i))}));YT.displayName="CloseButton",YT.propTypes=QT,YT.defaultProps={"aria-label":"Close"};var XT=YT,JT=r.createContext({onClose:function(){}}),$T=["bsPrefix","closeLabel","closeVariant","closeButton","className","children"],ZT=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.closeLabel,o=e.closeVariant,a=e.closeButton,s=e.className,u=e.children,c=tb(e,$T);n=sb(n,"toast-header");var l=(0,r.useContext)(JT),h=function(e){var t=zT(e);return(0,r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}((function(e){null==l||null==l.onClose||l.onClose(e)}));return(0,ib.jsxs)("div",Gt(Gt({ref:t},c),{},{className:rb()(n,s),children:[u,a&&(0,ib.jsx)(XT,{"aria-label":i,variant:o,onClick:h,"data-dismiss":"toast"})]}))}));ZT.displayName="ToastHeader",ZT.defaultProps={closeLabel:"Close",closeButton:!0};var eC=ZT,tC=/-(.)/g;var nC=["className","bsPrefix","as"],rC=function(e){return e[0].toUpperCase()+(t=e,t.replace(tC,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var iC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,i=void 0===n?rC(e):n,o=t.Component,a=t.defaultProps,s=r.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,a=t.as,s=void 0===a?o||"div":a,u=tb(t,nC),c=sb(i,e);return(0,ib.jsx)(s,Gt({ref:n,className:rb()(r,c)},u))}));return s.defaultProps=a,s.displayName=i,s}("toast-body"),oC=["bsPrefix","className","transition","show","animation","delay","autohide","onClose","bg"],aC=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.transition,a=void 0===o?qT:o,s=e.show,u=void 0===s||s,c=e.animation,l=void 0===c||c,h=e.delay,f=void 0===h?5e3:h,d=e.autohide,p=void 0!==d&&d,v=e.onClose,g=e.bg,m=tb(e,oC);n=sb(n,"toast");var y=(0,r.useRef)(f),k=(0,r.useRef)(v);(0,r.useEffect)((function(){y.current=f,k.current=v}),[f,v]);var b=nT(),w=!(!p||!u),_=(0,r.useCallback)((function(){w&&(null==k.current||k.current())}),[w]);(0,r.useEffect)((function(){b.set(_,y.current)}),[b,_]);var x=(0,r.useMemo)((function(){return{onClose:v}}),[v]),S=!(!a||!l),E=(0,ib.jsx)("div",Gt(Gt({},m),{},{ref:t,className:rb()(n,i,g&&"bg-".concat(g),!S&&(u?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return(0,ib.jsx)(JT.Provider,{value:x,children:S&&a?(0,ib.jsx)(a,{in:u,unmountOnExit:!0,children:E}):E})}));aC.displayName="Toast";var sC=Object.assign(aC,{Body:iC,Header:eC});function uC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var cC;Object.create;var lC="facebook.com",hC="github.com",fC="google.com",dC="password",pC="twitter.com",vC="EMAIL_SIGNIN",gC="PASSWORD_RESET",mC="RECOVER_EMAIL",yC="REVERT_SECOND_FACTOR_ADDITION",kC="VERIFY_AND_CHANGE_EMAIL",bC="VERIFY_EMAIL";function wC(){return Le({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var _C=function(){var e;return Le(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Le(e,"argument-error",""),Le(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Le(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Le(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Le(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Le(e,"cordova-not-ready","Cordova framework is not ready."),Le(e,"cors-unsupported","This browser is not supported."),Le(e,"credential-already-in-use","This credential is already associated with a different user account."),Le(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Le(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Le(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Le(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Le(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Le(e,"email-already-in-use","The email address is already in use by another account."),Le(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Le(e,"expired-action-code","The action code has expired."),Le(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Le(e,"internal-error","An internal AuthError has occurred."),Le(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Le(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Le(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Le(e,"invalid-auth-event","An internal AuthError has occurred."),Le(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Le(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Le(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Le(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Le(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Le(e,"invalid-email","The email address is badly formatted."),Le(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Le(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Le(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Le(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Le(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Le(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Le(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Le(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Le(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Le(e,"wrong-password","The password is invalid or the user does not have a password."),Le(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Le(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Le(e,"invalid-provider-id","The specified provider ID is invalid."),Le(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Le(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Le(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Le(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Le(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Le(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Le(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Le(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Le(e,"missing-continue-uri","A continue URL must be provided in the request."),Le(e,"missing-iframe-start","An internal AuthError has occurred."),Le(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Le(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Le(e,"missing-multi-factor-info","No second factor identifier is provided."),Le(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Le(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Le(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Le(e,"app-deleted","This instance of FirebaseApp has been deleted."),Le(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Le(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Le(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Le(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Le(e,"no-auth-event","An internal AuthError has occurred."),Le(e,"no-such-provider","User was not linked to an account with the given provider."),Le(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Le(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Le(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Le(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Le(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Le(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Le(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Le(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Le(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Le(e,"rejected-credential","The request contains malformed or mismatching credentials."),Le(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Le(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Le(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Le(e,"timeout","The operation has timed out."),Le(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Le(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Le(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Le(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Le(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Le(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Le(e,"unverified-email","The operation requires a verified email."),Le(e,"user-cancelled","The user did not grant your application the permissions it requested."),Le(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Le(e,"user-disabled","The user account has been disabled by an administrator."),Le(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Le(e,"user-signed-out",""),Le(e,"weak-password","The password must be 6 characters long or more."),Le(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Le(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},xC=wC,SC=new ot("auth","Firebase",wC()),EC=new Wt("@firebase/auth");function IC(e){if(EC.logLevel<=Mt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];EC.error.apply(EC,["Auth (".concat(Nn,"): ").concat(e)].concat(n))}}function TC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw RC.apply(void 0,[e].concat(n))}function CC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return RC.apply(void 0,[e].concat(n))}function AC(e,t,n){var r=Object.assign(Object.assign({},xC()),Le({},t,n));return new ot("auth","Firebase",r).create(t,{appName:e.name})}function NC(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&TC(e,"argument-error"),AC(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function RC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,o=n[0],a=f(n.slice(1));return a[0]&&(a[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(f(a)))}return SC.create.apply(SC,[e].concat(n))}function PC(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw RC.apply(void 0,[t].concat(r))}}function DC(e){var t="INTERNAL ASSERTION FAILED: "+e;throw IC(t),new Error(t)}function OC(e,t){e||DC(t)}var LC=new Map;function jC(e){OC(e instanceof Function,"Expected a class definition");var t=LC.get(e);return t?(OC(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,LC.set(e,t),t)}function FC(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function MC(){return"http:"===UC()||"https:"===UC()}function UC(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var VC=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,OC(n>t,"Short delay should be less than long delay!"),this.isMobile=Je()||et()}return v(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(MC()||Ze()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function BC(e,t){OC(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var KC=function(){function e(){d(this,e)}return v(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void DC("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void DC("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void DC("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),qC=(Le(cC={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Le(cC,"MISSING_CUSTOM_TOKEN","internal-error"),Le(cC,"INVALID_IDENTIFIER","invalid-email"),Le(cC,"MISSING_CONTINUE_URI","internal-error"),Le(cC,"INVALID_PASSWORD","wrong-password"),Le(cC,"MISSING_PASSWORD","internal-error"),Le(cC,"EMAIL_EXISTS","email-already-in-use"),Le(cC,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Le(cC,"INVALID_IDP_RESPONSE","invalid-credential"),Le(cC,"INVALID_PENDING_TOKEN","invalid-credential"),Le(cC,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Le(cC,"MISSING_REQ_TYPE","internal-error"),Le(cC,"EMAIL_NOT_FOUND","user-not-found"),Le(cC,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Le(cC,"EXPIRED_OOB_CODE","expired-action-code"),Le(cC,"INVALID_OOB_CODE","invalid-action-code"),Le(cC,"MISSING_OOB_CODE","internal-error"),Le(cC,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Le(cC,"INVALID_ID_TOKEN","invalid-user-token"),Le(cC,"TOKEN_EXPIRED","user-token-expired"),Le(cC,"USER_NOT_FOUND","user-token-expired"),Le(cC,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Le(cC,"INVALID_CODE","invalid-verification-code"),Le(cC,"INVALID_SESSION_INFO","invalid-verification-id"),Le(cC,"INVALID_TEMPORARY_PROOF","invalid-credential"),Le(cC,"MISSING_SESSION_INFO","missing-verification-id"),Le(cC,"SESSION_EXPIRED","code-expired"),Le(cC,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Le(cC,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Le(cC,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Le(cC,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Le(cC,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Le(cC,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Le(cC,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Le(cC,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Le(cC,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Le(cC,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Le(cC,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),cC),zC=new VC(3e4,6e4);function WC(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function HC(e,t,n,r){return GC.apply(this,arguments)}function GC(){return GC=Pt(Nt().mark((function e(t,n,r,i){var o,a=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>4&&void 0!==a[4]?a[4]:{},e.abrupt("return",QC(t,o,Pt(Nt().mark((function e(){var o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},a={},i&&("GET"===n?a=i:o={body:JSON.stringify(i)}),s=mt(Object.assign({key:t.config.apiKey},a)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",KC.fetch()($C(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),GC.apply(this,arguments)}function QC(e,t,n){return YC.apply(this,arguments)}function YC(){return YC=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u,c,h,f,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},qC),n),e.prev=2,o=new ZC(t),e.next=6,Promise.race([r(),o.promise]);case 6:return a=e.sent,o.clearNetworkTimeout(),e.next=10,a.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw eA(t,"account-exists-with-different-credential",s);case 13:if(!a.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=a.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw eA(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw eA(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw eA(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw AC(t,p,d);case 34:TC(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof it)){e.next=41;break}throw e.t0;case 41:TC(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),YC.apply(this,arguments)}function XC(e,t,n,r){return JC.apply(this,arguments)}function JC(){return JC=Pt(Nt().mark((function e(t,n,r,i){var o,a,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,HC(t,n,r,i,o);case 3:return"mfaPendingCredential"in(a=e.sent)&&TC(t,"multi-factor-auth-required",{_serverResponse:a}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),JC.apply(this,arguments)}function $C(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?BC(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ZC=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(CC(n.auth,"network-request-failed"))}),zC.get())}))}return v(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function eA(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=CC(e,t,r);return i.customData._tokenResponse=n,i}function tA(e,t){return nA.apply(this,arguments)}function nA(){return(nA=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rA(e,t){return iA.apply(this,arguments)}function iA(){return(iA=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oA(e,t){return aA.apply(this,arguments)}function aA(){return(aA=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sA(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(PK){}}function uA(){return uA=Pt(Nt().mark((function e(t){var n,r,i,o,a,s,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=At(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,PC((o=lA(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),a="object"===typeof o.firebase?o.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:sA(cA(o.auth_time)),issuedAtTime:sA(cA(o.iat)),expirationTime:sA(cA(o.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),uA.apply(this,arguments)}function cA(e){return 1e3*Number(e)}function lA(e){var t,n=l(e.split("."),3),r=n[0],i=n[1],o=n[2];if(void 0===r||void 0===i||void 0===o)return IC("JWT malformed, contained fewer than 3 sections"),null;try{var a=He(i);return a?JSON.parse(a):(IC("Failed to decode base64 JWT payload"),null)}catch(PK){return IC("Caught error parsing JWT payload as JSON",null===(t=PK)||void 0===t?void 0:t.toString()),null}}function hA(e,t){return fA.apply(this,arguments)}function fA(){return fA=Pt(Nt().mark((function e(t,n){var r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof it&&dA(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),fA.apply(this,arguments)}function dA(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var pA=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return v(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),vA=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return v(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=sA(this.lastLoginAt),this.creationTime=sA(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function gA(e){return mA.apply(this,arguments)}function mA(){return mA=Pt(Nt().mark((function e(t){var n,r,i,o,a,s,u,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,hA(t,oA(r,{idToken:i}));case 6:PC(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),a=o.users[0],t._notifyReloadListener(a),s=(null===(n=a.providerUserInfo)||void 0===n?void 0:n.length)?bA(a.providerUserInfo):[],u=kA(t.providerData,s),c=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new vA(a.createdAt,a.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),mA.apply(this,arguments)}function yA(){return(yA=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=At(t),e.next=3,gA(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kA(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(f(n),f(t))}function bA(e){return e.map((function(e){var t=e.providerId,n=uC(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function wA(e,t){return _A.apply(this,arguments)}function _A(){return(_A=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QC(t,{},Pt(Nt().mark((function e(){var r,i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,a=i.apiKey,s=$C(t,o,"/v1/token","key=".concat(a)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",KC.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xA=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return v(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){PC(e.idToken,"internal-error"),PC("undefined"!==typeof e.idToken,"internal-error"),PC("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=lA(e);return PC(t,"internal-error"),PC("undefined"!==typeof t.exp,"internal-error"),PC("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Pt(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],PC(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wA(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,a=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return DC("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new e;return r&&(PC("string"===typeof r,"internal-error",{appName:t}),a.refreshToken=r),i&&(PC("string"===typeof i,"internal-error",{appName:t}),a.accessToken=i),o&&(PC("number"===typeof o,"internal-error",{appName:t}),a.expirationTime=o),a}}]),e}();function SA(e,t){PC("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var EA=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=uC(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?f(o.providerData):[],this.metadata=new vA(o.createdAt||void 0,o.lastLoginAt||void 0)}return v(e,[{key:"getIdToken",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hA(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(PC(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return uA.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return yA.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(PC(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){PC(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,gA(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,hA(this,tA(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,o,a,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(a=n.photoURL)&&void 0!==a?a:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,g=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;PC(k&&x,t,"internal-error");var S=xA.fromJSON(this.name,x);PC("string"===typeof k,t,"internal-error"),SA(h,t.name),SA(f,t.name),PC("boolean"===typeof b,t,"internal-error"),PC("boolean"===typeof w,t,"internal-error"),SA(d,t.name),SA(p,t.name),SA(v,t.name),SA(g,t.name),SA(m,t.name),SA(y,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),g&&(E._redirectEventId=g),E}},{key:"_fromIdTokenResponse",value:function(){var t=Pt(Nt().mark((function t(n,r){var i,o,a,s=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(o=new xA).updateFromServerResponse(r),a=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,gA(a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),IA=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return v(e,[{key:"_isAvailable",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();IA.type="NONE";var TA=IA;function CA(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var AA=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,a=i.name;this.fullUserKey=CA(this.userKey,o.apiKey,a),this.fullPersistenceKey=CA("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return v(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?EA._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Pt(Nt().mark((function t(n,r){var i,o,a,s,u,c,l,h,f,d,p,v=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(jC(TA),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),a=o[0]||jC(TA),s=CA(i,n.config.apiKey,n.name),u=null,c=je(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=EA._fromJSON(n,f),h!==a&&(u=d),a=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=o.filter((function(e){return e._shouldAllowMigration})),a._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(a,n,i));case 40:if(a=p[0],!u){t.next=44;break}return t.next=44,a._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(a,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function NA(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(OA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(RA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jA(t))return"Blackberry";if(FA(t))return"Webos";if(PA(t))return"Safari";if((t.includes("chrome/")||DA(t))&&!t.includes("edge/"))return"Chrome";if(LA(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function RA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/firefox\//i.test(e)}function PA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function DA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/crios\//i.test(e)}function OA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iemobile/i.test(e)}function LA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/android/i.test(e)}function jA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/blackberry/i.test(e)}function FA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/webos/i.test(e)}function MA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function UA(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return MA(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function VA(){return tt()&&10===document.documentMode}function BA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return MA(e)||LA(e)||FA(e)||jA(e)||/windows phone/i.test(e)||OA(e)}function KA(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=NA(Xe());break;case"Worker":t="".concat(NA(Xe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Nn,"/").concat(r)}var qA=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return v(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(PK){r(PK)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,o,a,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=je(this.queue),e.prev=5,i.s();case 7:if((o=i.n()).done){e.next=14;break}return a=o.value,e.next=11,a(t);case 11:a.onAbort&&r.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=je(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),zA=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HA(this),this.idTokenSubscription=new HA(this),this.beforeStateQueue=new qA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return v(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=jC(t)),this._initializationPromise=this.queue(Pt(Nt().mark((function r(){var i,o;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,AA.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,o=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return a=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,a&&a!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,o=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!o){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return PC(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gA(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?At(t):null)&&PC(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){var n,r=this,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&PC(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(jC(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ot("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return PC(n=t&&jC(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,AA.create(this,[jC(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Pt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"===typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return PC(a,this,"internal-error"),a.then((function(){return o(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return PC(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KA(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function WA(e){return At(e)}var HA=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=wt((function(e){return n.observer=e}))}return v(e,[{key:"next",get:function(){return PC(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function GA(e,t,n){var r=WA(e);PC(r._canInitEmulator,r,"emulator-config-failed"),PC(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=QA(t),a=function(e){var t=QA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var o=i[1];return{host:o,port:YA(r.substr(o.length+1))}}var a=l(r.split(":"),2);return{host:a[0],port:YA(a[1])}}(t),s=a.host,u=a.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function QA(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function YA(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var XA=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return v(e,[{key:"toJSON",value:function(){return DC("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return DC("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return DC("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return DC("not implemented")}}]),e}();function JA(e,t){return $A.apply(this,arguments)}function $A(){return($A=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:resetPassword",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZA(e,t){return eN.apply(this,arguments)}function eN(){return(eN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tN(e,t){return nN.apply(this,arguments)}function nN(){return(nN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:update",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rN(e,t){return iN.apply(this,arguments)}function iN(){return(iN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithPassword",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oN(e,t){return aN.apply(this,arguments)}function aN(){return(aN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:sendOobCode",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sN(e,t){return uN.apply(this,arguments)}function uN(){return(uN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oN(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cN(e,t){return lN.apply(this,arguments)}function lN(){return(lN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oN(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hN(e,t){return fN.apply(this,arguments)}function fN(){return(fN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oN(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dN(e,t){return pN.apply(this,arguments)}function pN(){return(pN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oN(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vN(e,t){return gN.apply(this,arguments)}function gN(){return(gN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithEmailLink",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mN(e,t){return yN.apply(this,arguments)}function yN(){return(yN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithEmailLink",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kN=function(e){m(n,e);var t=x(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=a,o}return v(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",rN(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",vN(t,{email:this._email,oobCode:this._password}));case 5:TC(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ZA(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",mN(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:TC(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(XA);function bN(e,t){return wN.apply(this,arguments)}function wN(){return(wN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithIdp",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _N=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return v(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return bN(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bN(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bN(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):TC("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=uC(t,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}}]),n}(XA);function xN(e,t){return SN.apply(this,arguments)}function SN(){return(SN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:sendVerificationCode",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EN(){return(EN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithPhoneNumber",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IN(){return(IN=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XC(t,"POST","/v1/accounts:signInWithPhoneNumber",WC(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw eA(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var TN=Le({},"USER_NOT_FOUND","user-not-found");function CN(){return(CN=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithPhoneNumber",WC(t,r),TN));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var AN=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return EN.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return IN.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return CN.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,o=t.phoneNumber,a=t.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(XA);var NN=function(){function e(t){var n,r,i,o,a,s;d(this,e);var u=yt(kt(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);PC(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(o=u.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=u.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return v(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=yt(kt(e)).link,n=t?yt(kt(t)).deep_link_id:null,r=yt(kt(e)).deep_link_id;return(r?yt(kt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var RN=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return v(e,null,[{key:"credential",value:function(e,t){return kN._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=NN.parseLink(t);return PC(n,"argument-error"),kN._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();RN.PROVIDER_ID="password",RN.EMAIL_PASSWORD_SIGN_IN_METHOD="password",RN.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var PN=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return v(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),DN=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return v(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return f(this.scopes)}}]),n}(PN),ON=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return PC(e.idToken||e.accessToken,"argument-error"),_N._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return PC("providerId"in t&&"signInMethod"in t,"argument-error"),_N._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,a=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!o&&!r&&!a)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:a})}catch(PK){return null}}}]),n}(DN),LN=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"facebook.com")}return v(n,null,[{key:"credential",value:function(e){return _N._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(DN);LN.FACEBOOK_SIGN_IN_METHOD="facebook.com",LN.PROVIDER_ID="facebook.com";var jN=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return v(n,null,[{key:"credential",value:function(e,t){return _N._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(DN);jN.GOOGLE_SIGN_IN_METHOD="google.com",jN.PROVIDER_ID="google.com";var FN=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"github.com")}return v(n,null,[{key:"credential",value:function(e){return _N._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(DN);FN.GITHUB_SIGN_IN_METHOD="github.com",FN.PROVIDER_ID="github.com";var MN=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return v(n,[{key:"_getIdTokenResponse",value:function(e){return bN(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bN(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bN(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=t.pendingToken;return r&&i&&o&&r===i?new n(r,o):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(XA),UN=function(e){m(n,e);var t=x(n);function n(e){return d(this,n),PC(e.startsWith("saml."),"argument-error"),t.call(this,e)}return v(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=MN.fromJSON(e);return PC(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return MN._create(r,n)}catch(PK){return null}}}]),n}(PN),VN=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"twitter.com")}return v(n,null,[{key:"credential",value:function(e,t){return _N._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(DN);function BN(e,t){return KN.apply(this,arguments)}function KN(){return(KN=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signUp",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}VN.TWITTER_SIGN_IN_METHOD="twitter.com",VN.PROVIDER_ID="twitter.com";var qN=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return v(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Pt(Nt().mark((function t(n,r,i){var o,a,s,u,c=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3&&void 0!==c[3]&&c[3],t.next=3,EA._fromIdTokenResponse(n,i,o);case 3:return a=t.sent,s=zN(i),u=new e({user:a,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Pt(Nt().mark((function t(n,r,i){var o;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=zN(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function zN(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function WN(){return WN=Pt(Nt().mark((function e(t){var n,r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WA(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qN({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,BN(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,qN._fromIdTokenResponse(r,"signIn",i,!0);case 10:return o=e.sent,e.next=13,r._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),WN.apply(this,arguments)}var HN=function(e){m(n,e);var t=x(n);function n(e,r,i,o){var a,s;return d(this,n),(a=t.call(this,r.code,r.message)).operationType=i,a.user=o,Object.setPrototypeOf(w(a),n.prototype),a.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},a}return v(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(it);function GN(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw HN._fromErrorAndOperation(e,n,t,r);throw n}))}function QN(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function YN(e,t){return XN.apply(this,arguments)}function XN(){return XN=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,ZN(!0,r,n);case 3:return e.t0=rA,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,o=i.providerUserInfo,a=QN(o||[]),r.providerData=r.providerData.filter((function(e){return a.has(e.providerId)})),a.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),XN.apply(this,arguments)}function JN(e,t){return $N.apply(this,arguments)}function $N(){return $N=Pt(Nt().mark((function e(t,n){var r,i,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=hA,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qN._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),$N.apply(this,arguments)}function ZN(e,t,n){return eR.apply(this,arguments)}function eR(){return(eR=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gA(n);case 2:i=QN(n.providerData),o=!1===t?"provider-already-linked":"no-such-provider",PC(i.has(r)===t,n.auth,o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tR(e,t){return nR.apply(this,arguments)}function nR(){return nR=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u,c,l=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],o=t.auth,a="reauthenticate",e.prev=3,e.next=6,hA(t,GN(o,a,n,t),r);case 6:return PC((s=e.sent).idToken,o,"internal-error"),PC(u=lA(s.idToken),o,"internal-error"),c=u.sub,PC(t.uid===c,o,"user-mismatch"),e.abrupt("return",qN._forOperation(t,a,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&TC(o,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),nR.apply(this,arguments)}function rR(e,t){return iR.apply(this,arguments)}function iR(){return iR=Pt(Nt().mark((function e(t,n){var r,i,o,a,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,GN(t,i,n);case 4:return o=e.sent,e.next=7,qN._fromIdTokenResponse(t,i,o);case 7:if(a=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),iR.apply(this,arguments)}function oR(e,t){return aR.apply(this,arguments)}function aR(){return(aR=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rR(WA(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sR(e,t){return uR.apply(this,arguments)}function uR(){return(uR=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,ZN(!1,r,n.providerId);case 3:return e.abrupt("return",JN(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cR(e,t){return lR.apply(this,arguments)}function lR(){return(lR=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tR(At(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hR(e,t){return fR.apply(this,arguments)}function fR(){return(fR=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XC(t,"POST","/v1/accounts:signInWithCustomToken",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dR(){return(dR=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WA(t),e.next=3,hR(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,qN._fromIdTokenResponse(r,"signIn",i);case 6:return o=e.sent,e.next=9,r._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pR=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return v(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?vR._fromServerResponse(e,t):TC(e,"internal-error")}}]),e}(),vR=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return v(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(pR);function gR(e,t,n){var r;PC((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),PC("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(PC(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(PC(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function mR(){return(mR=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),o={requestType:"PASSWORD_RESET",email:n},r&&gR(i,o,r),e.next=5,cN(i,o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yR(){return(yR=Pt(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JA(At(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kR(){return(kR=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tN(At(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bR(e,t){return wR.apply(this,arguments)}function wR(){return(wR=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,JA(r,{oobCode:n});case 3:i=e.sent,PC(o=i.requestType,r,"internal-error"),e.t0=o,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return PC(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:PC(i.mfaInfo,r,"internal-error");case 13:PC(i.email,r,"internal-error");case 14:return a=null,i.mfaInfo&&(a=pR._fromServerResponse(WA(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:a},operation:o});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _R(){return(_R=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bR(At(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xR(e,t,n){return SR.apply(this,arguments)}function SR(){return(SR=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=WA(t),e.next=3,BN(i,{returnSecureToken:!0,email:n,password:r});case 3:return o=e.sent,e.next=6,qN._fromIdTokenResponse(i,"signIn",o);case 6:return a=e.sent,e.next=9,i._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ER(){return(ER=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),o={requestType:"EMAIL_SIGNIN",email:n},PC(r.handleCodeInApp,i,"argument-error"),r&&gR(i,o,r),e.next=6,hN(i,o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IR(){return(IR=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),PC((o=RN.credentialWithLink(n,r||FC()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",oR(i,o));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TR(e,t){return CR.apply(this,arguments)}function CR(){return(CR=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:createAuthUri",WC(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AR(){return(AR=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MC()?FC():"http://localhost",i={identifier:n,continueUri:r},e.next=4,TR(At(t),i);case 4:return o=e.sent,a=o.signinMethods,e.abrupt("return",a||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NR(){return(NR=Pt(Nt().mark((function e(t,n){var r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_EMAIL",idToken:i},n&&gR(r.auth,o,n),e.next=8,sN(r.auth,o);case 8:if(a=e.sent,a.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RR(){return(RR=Pt(Nt().mark((function e(t,n,r){var i,o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,t.getIdToken();case 3:return o=e.sent,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:n},r&&gR(i.auth,a,r),e.next=8,dN(i.auth,a);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PR(e,t){return DR.apply(this,arguments)}function DR(){return(DR=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HC(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OR(){return(OR=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return o=At(t),e.next=6,o.getIdToken();case 6:return a=e.sent,s={idToken:a,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,hA(o,PR(o.auth,s));case 10:return u=e.sent,o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null,(c=o.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=o.displayName,c.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LR(e,t,n){return jR.apply(this,arguments)}function jR(){return(jR=Pt(Nt().mark((function e(t,n,r){var i,o,a,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return o=e.sent,a={idToken:o,returnSecureToken:!0},n&&(a.email=n),r&&(a.password=r),e.next=9,hA(t,ZA(i,a));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var FR=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),MR=function(e){m(n,e);var t=x(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r,i)).username=o,a}return v(n)}(FR),UR=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return v(n)}(FR),VR=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return v(n)}(MR),BR=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return v(n)}(FR),KR=function(e){m(n,e);var t=x(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return v(n)}(MR);function qR(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var a=null===(n=null===(t=lA(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(a)return new FR(o,"anonymous"!==a&&"custom"!==a?a:null)}if(!r)return null;switch(r){case"facebook.com":return new UR(o,i);case"github.com":return new VR(o,i);case"google.com":return new BR(o,i);case"twitter.com":return new KR(o,i,e.screenName||null);case"custom":case"anonymous":return new FR(o,null);default:return new FR(o,r,i)}}(n)}var zR=function(){function e(t,n){d(this,e),this.type=t,this.credential=n}return v(e,[{key:"toJSON",value:function(){return{multiFactorSession:Le({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),WR=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return v(e,[{key:"resolveSignIn",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=WA(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return pR._fromServerResponse(r,e)}));PC(i.mfaPendingCredential,r,"internal-error");var a=zR._fromMfaPendingCredential(i.mfaPendingCredential);return new e(a,o,function(){var e=Pt(Nt().mark((function e(t){var o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,a);case 2:o=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qN._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return PC(n.user,r,"internal-error"),e.abrupt("return",qN._forOperation(n.user,n.operationType,s));case 17:TC(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function HR(e,t){return HC(e,"POST","/v2/accounts/mfaEnrollment:start",WC(e,t))}var GR=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return pR._fromServerResponse(t.auth,e)})))}))}return v(e,[{key:"getSession",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=zR,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,hA(this.user,r._process(this.user.auth,i,n));case 6:return o=e.sent,e.next=9,this.user._updateTokensIfNecessary(o);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,hA(this.user,HC(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",WC(a,{idToken:i,mfaEnrollmentId:r})));case 6:return o=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(o);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),QR=new WeakMap;var YR="__sak",XR=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return v(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(YR,"1"),this.storage.removeItem(YR),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var JR=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Xe();return PA(e)||MA(e)}()&&function(){try{return!(!window||window===window.top)}catch(PK){return!1}}(),e.fallbackToPolling=BA(),e._shouldAllowMigration=!0,e}return v(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var o=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},a=this.storage.getItem(r);VA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Pt(Nt().mark((function e(t,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(XR);JR.type="LOCAL";var $R=JR,ZR=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return v(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(XR);ZR.type="SESSION";var eP=ZR;function tP(e){return Promise.all(e.map(function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var nP=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return v(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,o,a,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,a=r.data,null===(s=this.handlersMap[o])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),u=Array.from(s).map(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,tP(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function rP(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}nP.receivers=[];var iP=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return v(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a,s=this,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=rP("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);a={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),u(new Error("invalid_response"))}}},s.handlers.add(a),i.port1.addEventListener("message",a.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){a&&s.removeMessageHandler(a)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function oP(){return window}function aP(){return"undefined"!==typeof oP().WorkerGlobalScope&&"function"===typeof oP().importScripts}function sP(){return uP.apply(this,arguments)}function uP(){return(uP=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function cP(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var lP="firebaseLocalStorageDb",hP="firebaseLocalStorage",fP="fbase_key",dP=function(){function e(t){d(this,e),this.request=t}return v(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function pP(e,t){return e.transaction([hP],t?"readwrite":"readonly").objectStore(hP)}function vP(){var e=indexedDB.deleteDatabase(lP);return new dP(e).toPromise()}function gP(){var e=indexedDB.open(lP,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(hP,{keyPath:fP})}catch(PK){n(PK)}})),e.addEventListener("success",Pt(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(hP)){n.next=12;break}return r.close(),n.next=5,vP();case 5:return n.t0=t,n.next=8,gP();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function mP(e,t,n){return yP.apply(this,arguments)}function yP(){return yP=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=pP(t,!0).put((Le(i={},fP,n),Le(i,"value",r),i)),e.abrupt("return",new dP(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),yP.apply(this,arguments)}function kP(e,t){return bP.apply(this,arguments)}function bP(){return bP=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pP(t,!1).get(n),e.next=3,new dP(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),bP.apply(this,arguments)}function wP(e,t){var n=pP(e,!0).delete(t);return new dP(n).toPromise()}var _P=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return v(e,[{key:"_openDb",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,gP();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aP()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Pt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=nP._getInstance(aP()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Pt(Nt().mark((function e(n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sP();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new iP(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&cP()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,gP();case 5:return t=e.sent,e.next=8,mP(t,YR,"1");case 8:return e.next=10,wP(t,YR);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Pt(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return mP(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return kP(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return wP(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,o,a,s,u,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=pP(e,!1).getAll();return new dP(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=je(t);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.fbase_key,u=a.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();_P.type="LOCAL";var xP=_P;function SP(e,t){return HC(e,"POST","/v2/accounts/mfaSignIn:start",WC(e,t))}function EP(e){return IP.apply(this,arguments)}function IP(){return(IP=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HC(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TP(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=CC("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function CP(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var AP=1e12,NP=function(){function e(t){d(this,e),this.auth=t,this.counter=AP,this._widgets=new Map}return v(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new RP(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||AP;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||AP;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||AP,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),RP=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"===typeof t?document.getElementById(t):t;PC(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return v(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(PK){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(PK){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var PP=CP("rcb"),DP=new VC(3e4,6e4),OP="https://www.google.com/recaptcha/api.js?",LP=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=oP().grecaptcha)||void 0===t?void 0:t.render)}return v(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return PC(jP(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(oP().grecaptcha):new Promise((function(r,i){var o=oP().setTimeout((function(){i(CC(e,"network-request-failed"))}),DP.get());oP()[PP]=function(){oP().clearTimeout(o),delete oP()[PP];var a=oP().grecaptcha;if(a){var s=a.render;a.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(a)}else i(CC(e,"internal-error"))},TP("".concat(OP,"?").concat(mt({onload:PP,render:"explicit",hl:n}))).catch((function(){clearTimeout(o),i(CC(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=oP().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function jP(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var FP=function(){function e(){d(this,e)}return v(e,[{key:"load",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new NP(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),MP="recaptcha",UP={theme:"light",type:"image"},VP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},UP),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=MP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=WA(r),this.isInvisible="invisible"===this.parameters.size,PC("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;PC(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new FP:new LP,this.validateStartingState()}return v(e,[{key:"verify",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(PK){return Promise.reject(PK)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){PC(!this.parameters.sitekey,this.auth,"argument-error"),PC(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),PC("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=oP()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){PC(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Pt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PC(MC()&&!aP(),this.auth,"internal-error"),e.next=3,BP();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,EP(this.auth);case 8:PC(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return PC(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function BP(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var KP=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return v(e,[{key:"confirm",value:function(e){var t=AN._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function qP(){return(qP=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=WA(t),e.next=3,GP(i,n,At(r));case 3:return o=e.sent,e.abrupt("return",new KP(o,(function(e){return oR(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zP(e,t,n){return WP.apply(this,arguments)}function WP(){return(WP=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,ZN(!1,i,"phone");case 3:return e.next=5,GP(i.auth,n,At(r));case 5:return o=e.sent,e.abrupt("return",new KP(o,(function(e){return sR(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HP(){return(HP=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,GP(i.auth,n,At(r));case 3:return o=e.sent,e.abrupt("return",new KP(o,(function(e){return cR(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GP(e,t,n){return QP.apply(this,arguments)}function QP(){return QP=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,PC("string"===typeof o,t,"argument-error"),PC(r.type===MP,t,"argument-error"),!("session"in(a="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=a.session,!("phoneNumber"in a)){e.next=17;break}return PC("enroll"===s.type,t,"internal-error"),e.next=13,HR(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return PC("signin"===s.type,t,"internal-error"),PC(c=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,SP(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:o}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,xN(t,{phoneNumber:a.phoneNumber,recaptchaToken:o});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),QP.apply(this,arguments)}function YP(){return(YP=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JN(At(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var XP=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=WA(t)}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return GP(this.auth,e,At(t))}}],[{key:"credential",value:function(e,t){return AN._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?AN._fromTokenResponse(n,r):null}}]),e}();function JP(e,t){return t?jC(t):(PC(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}XP.PROVIDER_ID="phone",XP.PHONE_SIGN_IN_METHOD="phone";var $P=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return bN(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return bN(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return bN(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(XA);function ZP(e){return rR(e.auth,new $P(e),e.bypassAuthState)}function eD(e){var t=e.auth,n=e.user;return PC(n,t,"internal-error"),tR(n,new $P(e),e.bypassAuthState)}function tD(e){return nD.apply(this,arguments)}function nD(){return(nD=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,PC(r=t.user,n,"internal-error"),e.abrupt("return",JN(r,new $P(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rD=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return v(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Pt(Nt().mark((function t(n,r){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,a=t.error,s=t.type,!a){e.next=4;break}return this.reject(a),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZP;case"linkViaPopup":case"linkViaRedirect":return tD;case"reauthViaPopup":case"reauthViaRedirect":return eD;default:TC(this.auth,"internal-error")}}},{key:"resolve",value:function(e){OC(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){OC(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),iD=new VC(2e3,1e4);function oD(e,t,n){return aD.apply(this,arguments)}function aD(){return(aD=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=WA(t),NC(t,n,PN),o=JP(i,r),a=new lD(i,"signInViaPopup",n,o),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sD(){return(sD=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NC((i=At(t)).auth,n,PN),o=JP(i.auth,r),a=new lD(i.auth,"reauthViaPopup",n,o,i),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uD(e,t,n){return cD.apply(this,arguments)}function cD(){return(cD=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NC((i=At(t)).auth,n,PN),o=JP(i.auth,r),a=new lD(i.auth,"linkViaPopup",n,o,i),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lD=function(e){m(n,e);var t=x(n);function n(e,r,i,o,a){var s;return d(this,n),(s=t.call(this,e,r,o,a)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=w(s),s}return v(n,[{key:"executeNotNull",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return PC(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Pt(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OC(1===this.filter.length,"Popup operations only handle one event"),t=rP(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(CC(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(CC(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(CC(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,iD.get())}()}}]),n}(rD);lD.currentPopupAction=null;var hD=new Map,fD=function(e){m(n,e);var t=x(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return v(n,[{key:"execute",value:function(){var e=Pt(Nt().mark((function e(){var t,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hD.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,dD(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ur(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:hD.set(this.auth._key(),t);case 21:return this.bypassAuthState||hD.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Pt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ur(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ur(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(rD);function dD(e,t){return pD.apply(this,arguments)}function pD(){return(pD=Pt(Nt().mark((function e(t,n){var r,i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kD(n),i=yD(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vD(e,t){return gD.apply(this,arguments)}function gD(){return(gD=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yD(t)._set(kD(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mD(e,t){hD.set(e._key(),t)}function yD(e){return jC(e._redirectPersistence)}function kD(e){return CA("pendingRedirect",e.config.apiKey,e.name)}function bD(e,t,n){return function(e,t,n){return wD.apply(this,arguments)}(e,t,n)}function wD(){return(wD=Pt(Nt().mark((function e(t,n,r){var i,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=WA(t),NC(t,n,PN),o=JP(i,r),e.next=5,vD(o,i);case 5:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _D(e,t,n){return function(e,t,n){return xD.apply(this,arguments)}(e,t,n)}function xD(){return(xD=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NC((i=At(t)).auth,n,PN),o=JP(i.auth,r),e.next=5,vD(o,i.auth);case 5:return e.next=7,ND(i);case 7:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"reauthViaRedirect",a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SD(e,t,n){return function(e,t,n){return ED.apply(this,arguments)}(e,t,n)}function ED(){return(ED=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NC((i=At(t)).auth,n,PN),o=JP(i.auth,r),e.next=5,ZN(!1,i,n.providerId);case 5:return e.next=7,vD(o,i.auth);case 7:return e.next=9,ND(i);case 9:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"linkViaRedirect",a));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ID(e,t){return TD.apply(this,arguments)}function TD(){return(TD=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WA(t)._initializationPromise;case 2:return e.abrupt("return",CD(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CD(e,t){return AD.apply(this,arguments)}function AD(){return AD=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=WA(t),o=JP(i,n),a=new fD(i,o,r),e.next=6,a.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),AD.apply(this,arguments)}function ND(e){return RD.apply(this,arguments)}function RD(){return(RD=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rP("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var PD=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return v(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OD(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!OD(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(CC(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(DD(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(DD(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function DD(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function OD(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function LD(e){return jD.apply(this,arguments)}function jD(){return jD=Pt(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",HC(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jD.apply(this,arguments)}var FD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MD=/^https?/;function UD(){return(UD=Pt(Nt().mark((function e(t){var n,r,i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,LD(t);case 4:n=e.sent,r=n.authorizedDomains,i=je(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(a=o.value,e.prev=11,!VD(a)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:TC(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function VD(e){var t=FC(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var o=new URL(e);return""===o.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!MD.test(r))return!1;if(FD.test(e))return i===e;var a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var BD=new VC(3e4,6e4);function KD(){var e=oP().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=f(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var qD=null;function zD(e){return qD=qD||function(e){return new Promise((function(t,n){var r,i,o;function a(){KD(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){KD(),n(CC(e,"network-request-failed"))},timeout:BD.get()})}if(null===(i=null===(r=oP().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=oP().gapi)||void 0===o?void 0:o.load)){var s=CP("iframefcb");return oP()[s]=function(){gapi.load?a():n(CC(e,"network-request-failed"))},TP("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}a()}})).catch((function(e){throw qD=null,e}))}(e),qD}var WD=new VC(5e3,15e3),HD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QD(e){var t=e.config;PC(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?BC(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Nn},i=GD.get(e.config.apiHost);i&&(r.eid=i);var o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(mt(r).slice(1))}function YD(e){return XD.apply(this,arguments)}function XD(){return XD=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zD(t);case 2:return n=e.sent,PC(r=oP().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:QD(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HD,dontclear:!0},(function(e){return new Promise(function(){var n=Pt(Nt().mark((function n(r,i){var o,a,s;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){oP().clearTimeout(a),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=CC(t,"network-request-failed"),a=oP().setTimeout((function(){i(o)}),WD.get()),e.ping(s).then(s,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),XD.apply(this,arguments)}var JD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$D="_blank",ZD="http://localhost",eO=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return v(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(PK){}}}]),e}();function tO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},JD),{width:r.toString(),height:i.toString(),top:o,left:a}),c=Xe().toLowerCase();n&&(s=DA(c)?$D:n),RA(c)&&(t=t||ZD,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(UA(c)&&"_self"!==s)return nO(t||"",s),new eO(null);var f=window.open(t||"",s,h);PC(f,e,"popup-blocked");try{f.focus()}catch(PK){}return new eO(f)}function nO(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rO="__/auth/handler",iO="emulator/auth/handler";function oO(e,t,n,r,i,o){PC(e.config.authDomain,e,"auth-domain-config-required"),PC(e.config.apiKey,e,"invalid-api-key");var a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Nn,eventId:i};if(t instanceof PN){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",dt(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(o||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];a[h]=f}}if(t instanceof DN){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);for(var p=a,v=0,g=Object.keys(p);v<g.length;v++){var m=g[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(rO);return BC(t,iO)}(e),"?").concat(mt(p).slice(1))}var aO="webStorageSupport",sO=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eP,this._completeRedirectFn=CD,this._overrideRedirectResult=mD}return v(e,[{key:"_openPopup",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){var o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OC(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),a=oO(t,n,r,FC(),i),e.abrupt("return",tO(t,a,rP()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return o=oO(t,n,r,FC(),i),oP().location.href=o,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var o}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,o=r.promise;return i?Promise.resolve(i):(OC(o,"If manager is not set, promise should be"),o)}var a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch((function(){delete t.eventManagers[n]})),a}},{key:"initAndGetManager",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YD(t);case 2:return n=e.sent,r=new PD(t),n.register("authEvent",(function(e){return PC(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(aO,{type:aO},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),TC(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return UD.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return BA()||PA()||MA()}}]),e}(),uO=sO,cO=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return v(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return HC(e,"POST","/v2/accounts/mfaEnrollment:finalize",WC(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return HC(e,"POST","/v2/accounts/mfaSignIn:finalize",WC(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return v(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return DC("unexpected MultiFactorSessionType")}}}]),e}()),lO=function(){function e(){d(this,e)}return v(e,null,[{key:"assertion",value:function(e){return cO._fromCredential(e)}}]),e}();lO.FACTOR_ID="phone";var hO,fO="@firebase/auth",dO="0.20.6",pO=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return v(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){PC(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function vO(){return window}hO="Browser",xn(new Dt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=r.options,a=o.apiKey,s=o.authDomain;return function(e,t){PC(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),PC(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:a,authDomain:s,clientPlatform:hO,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KA(hO)},i=new zA(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jC);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),xn(new Dt("auth-internal",(function(e){return function(e){return new pO(e)}(WA(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),jn(fO,dO,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(hO)),jn(fO,dO,"esm2017");function gO(e,t,n){return mO.apply(this,arguments)}function mO(){return mO=Pt(Nt().mark((function e(t,n,r){var i,o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=vO(),a=o.BuildInfo,OC(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,xO(n.sessionId);case 4:return s=e.sent,u={},MA()?u.ibi=a.packageName:LA()?u.apn=a.packageName:TC(t,"operation-not-supported-in-this-environment"),a.displayName&&(u.appDisplayName=a.displayName),u.sessionId=s,e.abrupt("return",oO(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),mO.apply(this,arguments)}function yO(){return(yO=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vO(),r=n.BuildInfo,i={},MA()?i.iosBundleId=r.packageName:LA()?i.androidPackageName=r.packageName:TC(t,"operation-not-supported-in-this-environment"),e.next=5,LD(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kO(e){var t=vO().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function bO(e,t,n){return wO.apply(this,arguments)}function wO(){return wO=Pt(Nt().mark((function e(t,n,r){var i,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vO(),o=i.cordova,a=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=o.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(CC(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),LA()&&document.addEventListener("visibilitychange",l,!1),a=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,a(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),wO.apply(this,arguments)}function _O(e){var t,n,r,i,o,a,s,u,c,l,h=vO();PC("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),PC("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),PC("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),PC("function"===typeof(null===(u=null===(s=null===(a=null===h||void 0===h?void 0:h.cordova)||void 0===a?void 0:a.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),PC("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function xO(e){return SO.apply(this,arguments)}function SO(){return(SO=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=EO(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EO(e){if(OC(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var IO=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return v(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ur(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(PD);function TO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:PO(),postBody:null,tenantId:e.tenantId,error:CC(e,"no-auth-event")}}function CO(e,t){return DO()._set(OO(e),t)}function AO(e){return NO.apply(this,arguments)}function NO(){return(NO=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DO()._get(OO(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,DO()._remove(OO(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RO(e,t){var n,r,i=function(e){var t=LO(e),n=t.link?decodeURIComponent(t.link):void 0,r=LO(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return LO(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var o=LO(i),a=o.firebaseError?function(e){try{return JSON.parse(e)}catch(PK){return null}}(decodeURIComponent(o.firebaseError)):null,s=null===(r=null===(n=null===a||void 0===a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?CC(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function PO(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function DO(){return jC($R)}function OO(e){return CA("authEvent",e.config.apiKey,e.name)}function LO(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||h(t)||u(t)||c();r[0];return yt(r.slice(1).join("?"))}var jO=function(){function e(){d(this,e),this._redirectPersistence=eP,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=CD,this._overrideRedirectResult=mD}return v(e,[{key:"_initialize",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new IO(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){TC(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){var o,a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _O(t),e.next=3,this._initialize(t);case 3:return o=e.sent,e.next=6,o.initialized();case 6:return o.resetRedirect(),hD.clear(),e.next=10,this._originValidation(t);case 10:return a=TO(t,r,i),e.next=13,CO(t,a);case 13:return e.next=15,gO(t,a,n);case 15:return s=e.sent,e.next=18,kO(s);case 18:return u=e.sent,e.abrupt("return",bO(t,o,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yO.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=vO(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,a=setTimeout(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,AO(e);case 2:t.onEvent(MO());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Pt(Nt().mark((function n(r){var i,o;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(a),n.next=3,AO(e);case 3:i=n.sent,o=null,i&&(null===r||void 0===r?void 0:r.url)&&(o=RO(i,r.url)),t.onEvent(o||MO());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(o.packageName.toLowerCase(),"://");vO().handleOpenURL=function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(PK){console.error(PK)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),FO=jO;function MO(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:CC("no-auth-event")}}function UO(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function VO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return!("file:"!==UO()&&"ionic:"!==UO()&&"capacitor:"!==UO()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function BO(){return tt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function KO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/Edge\/\d+/.test(e)}function qO(){try{var e=self.localStorage,t=rP();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return BO()||KO(e)}()||rt()}catch(PK){return zO()&&rt()}return!1}function zO(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function WO(){return("http:"===UO()||"https:"===UO()||Ze()||VO())&&!(et()||$e())&&qO()&&!zO()}function HO(){return VO()&&"undefined"!==typeof document}function GO(){return QO.apply(this,arguments)}function QO(){return(QO=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(HO()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var YO={LOCAL:"local",NONE:"none",SESSION:"session"},XO=PC,JO="persistence";function $O(e,t){XO(Object.values(YO).includes(t),e,"invalid-persistence-type"),et()?XO(t!==YO.SESSION,e,"unsupported-persistence-type"):$e()?XO(t===YO.NONE,e,"unsupported-persistence-type"):zO()?XO(t===YO.NONE||t===YO.LOCAL&&rt(),e,"unsupported-persistence-type"):XO(t===YO.NONE||qO(),e,"unsupported-persistence-type")}function ZO(e){return eL.apply(this,arguments)}function eL(){return(eL=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=tL(),r=CA(JO,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tL(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(PK){return null}}var nL=PC,rL=function(){function e(){d(this,e),this.browserResolver=jC(uO),this.cordovaResolver=jC(FO),this.underlyingResolver=null,this._redirectPersistence=eP,this._completeRedirectFn=CD,this._overrideRedirectResult=mD}return v(e,[{key:"_initialize",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return HO()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return nL(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,GO();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function iL(e){return e.unwrap()}function oL(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new lL(e,function(e,t){var n,r=At(e),i=t;return PC(t.customData.operationType,r,"argument-error"),PC(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),WR._fromError(r,i)}(e,t));else if(i){var o=aL(t),a=t;o&&(a.credential=o,a.tenantId=i.tenantId||void 0,a.email=i.email||void 0,a.phoneNumber=i.phoneNumber||void 0)}}function aL(e){var t=(e instanceof it?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof it)&&"temporaryProof"in t&&"phoneNumber"in t)return XP.credentialFromResult(e);var n,r=t.providerId;if(!r||r===dC)return null;switch(r){case fC:n=jN;break;case lC:n=LN;break;case hC:n=FN;break;case pC:n=VN;break;default:var i=t.oauthIdToken,o=t.oauthAccessToken,a=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return o||a||i||s?s?r.startsWith("saml.")?MN._create(r,s):_N._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:o}):new ON(r).credential({idToken:i,accessToken:o,rawNonce:u}):null}return e instanceof it?n.credentialFromError(e):n.credentialFromResult(e)}function sL(e,t){return t.catch((function(t){throw t instanceof it&&oL(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,aL(t)),additionalUserInfo:qR(e),user:hL.getOrCreate(r)}}))}function uL(e,t){return cL.apply(this,arguments)}function cL(){return(cL=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return sL(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lL=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return v(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return sL(iL(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),hL=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=At(e);return QR.has(t)||QR.set(t,GR._fromUser(t)),QR.get(t)}(t)}return v(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sL(this.auth,sR(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uL(this.auth,zP(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sL(this.auth,uD(this._delegate,t,rL)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZO(WA(this.auth));case 2:return e.abrupt("return",SD(this._delegate,t,rL));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sL(this.auth,cR(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return uL(this.auth,function(e,t,n){return HP.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return sL(this.auth,function(e,t,n){return sD.apply(this,arguments)}(this._delegate,e,rL))}},{key:"reauthenticateWithRedirect",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZO(WA(this.auth));case 2:return e.abrupt("return",_D(this._delegate,t,rL));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return NR.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YN(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return LR(At(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return LR(At(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return YP.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return OR.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return RR.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();hL.USER_MAP=new WeakMap;var fL=PC,dL=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;fL(r,"invalid-api-key",{appName:t.name}),fL(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?rL:void 0;this._delegate=n.initialize({options:{persistence:vL(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(_C),this.linkUnderlyingAuth()}return v(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?hL.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){GA(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return kR.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return bR(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return yR.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sL(this._delegate,xR(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return AR.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=NN.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fL(WO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ID(this._delegate,rL);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",sL(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){WA(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=pL(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onAuthStateChanged(i,o,a)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=pL(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onIdTokenChanged(i,o,a)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ER.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return mR.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$O(this._delegate,t),e.t0=t,e.next=e.t0===YO.SESSION?4:e.t0===YO.LOCAL?6:e.t0===YO.NONE?11:13;break;case 4:return n=eP,e.abrupt("break",14);case 6:return e.next=8,jC(xP)._isAvailable();case 8:return r=e.sent,n=r?xP:$R,e.abrupt("break",14);case 11:return n=TA,e.abrupt("break",14);case 13:return e.abrupt("return",TC("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return sL(this._delegate,function(e){return WN.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return sL(this._delegate,oR(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return sL(this._delegate,function(e,t){return dR.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return sL(this._delegate,function(e,t,n){return oR(At(e),RN.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return sL(this._delegate,function(e,t,n){return IR.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return uL(this._delegate,function(e,t,n){return qP.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fL(WO(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",sL(this._delegate,oD(this._delegate,t,rL)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fL(WO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ZO(this._delegate);case 3:return e.abrupt("return",bD(this._delegate,t,rL));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return _R.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function pL(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&hL.getOrCreate(e))},error:t,complete:n}}function vL(e,t){var n=function(e,t){var n=tL();if(!n)return[];var r=CA(JO,e,t);switch(n.getItem(r)){case YO.NONE:return[TA];case YO.LOCAL:return[xP,eP];case YO.SESSION:return[eP];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(xP)||n.push(xP),"undefined"!==typeof window)for(var r=0,i=[$R,eP];r<i.length;r++){var o=i[r];n.includes(o)||n.push(o)}return n.includes(TA)||n.push(TA),n}dL.Persistence=YO;var gL=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new XP(iL(ar.auth()))}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return XP.credential(e,t)}}]),e}();gL.PHONE_SIGN_IN_METHOD=XP.PHONE_SIGN_IN_METHOD,gL.PROVIDER_ID=XP.PROVIDER_ID;var mL=PC,yL=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar.app();d(this,e),mL(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new VP(t,n,i.auth()),this.type=this._delegate.type}return v(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Dt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new dL(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vC,PASSWORD_RESET:gC,RECOVER_EMAIL:mC,REVERT_SECOND_FACTOR_ADDITION:yC,VERIFY_AND_CHANGE_EMAIL:kC,VERIFY_EMAIL:bC}},EmailAuthProvider:RN,FacebookAuthProvider:LN,GithubAuthProvider:FN,GoogleAuthProvider:jN,OAuthProvider:ON,SAMLAuthProvider:UN,PhoneAuthProvider:gL,PhoneMultiFactorGenerator:lO,RecaptchaVerifier:yL,TwitterAuthProvider:VN,Auth:dL,AuthCredential:XA,Error:it}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.19")}(ar);var kL="@firebase/database",bL="0.13.6",wL="";function _L(e){wL=e}var xL=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return v(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ut(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),SL=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return v(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ht(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),EL=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new xL(t)}}catch(PK){}return new SL},IL=EL("localStorage"),TL=EL("sessionStorage"),CL=new Wt("@firebase/database"),AL=function(){var e=1;return function(){return e++}}(),NL=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,Ve(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new bt;n.update(t);var r=n.digest();return qe.encodeByteArray(r)},RL=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ct(r):r,t+=" "}return t},PL=null,DL=!0,OL=function(e,t){Ve(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(CL.logLevel=Mt.VERBOSE,PL=CL.log.bind(CL),t&&TL.set("logging_enabled",!0)):"function"===typeof e?PL=e:(PL=null,TL.remove("logging_enabled"))},LL=function(){if(!0===DL&&(DL=!1,null===PL&&!0===TL.get("logging_enabled")&&OL(!0)),PL){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=RL.apply(null,t);PL(r)}},jL=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];LL.apply(void 0,[e].concat(n))}},FL=function(){var e="FIREBASE INTERNAL ERROR: "+RL.apply(void 0,arguments);CL.error(e)},ML=function(){var e="FIREBASE FATAL ERROR: ".concat(RL.apply(void 0,arguments));throw CL.error(e),new Error(e)},UL=function(){var e="FIREBASE WARNING: "+RL.apply(void 0,arguments);CL.warn(e)},VL=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},BL="[MIN_NAME]",KL="[MAX_NAME]",qL=function(e,t){if(e===t)return 0;if(e===BL||t===KL)return-1;if(t===BL||e===KL)return 1;var n=ZL(e),r=ZL(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},zL=function(e,t){return e===t?0:e<t?-1:1},WL=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ct(t))},HL=function e(t){if("object"!==typeof t||null===t)return ct(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=ct(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},GL=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function QL(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var YL=function(e){Ve(!VL(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var XL=new RegExp("^-?(0*)\\d{1,10}$"),JL=-2147483648,$L=2147483647,ZL=function(e){if(XL.test(e)){var t=Number(e);if(t>=JL&&t<=$L)return t}return null},ej=function(e){try{e()}catch(PK){setTimeout((function(){var t=PK.stack||"";throw UL("Exception was thrown by user callback.",t),PK}),Math.floor(0))}},tj=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},nj=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){UL('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),rj=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(LL("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',UL(e)}}]),e}(),ij=function(){function e(t){d(this,e),this.accessToken=t}return v(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();ij.OWNER="owner";var oj="5",aj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sj="websocket",uj="long_polling",cj=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=IL.get("host:"+t)||this._host}return v(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&IL.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function lj(e,t,n){var r;if(Ve("string"===typeof t,"typeof type must == string"),Ve("object"===typeof n,"typeof params must == object"),t===sj)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==uj)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return QL(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var hj=function(){function e(){d(this,e),this.counters_={}}return v(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ge(void 0,this.counters_)}}]),e}(),fj={},dj={};function pj(e){var t=e.toString();return fj[t]||(fj[t]=new hj),fj[t]}var vj=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return v(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&ej((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),gj="start",mj="close",yj=function(){function e(t,n,r,i,o,a,s){var u=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jL(t),this.stats_=pj(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),lj(n,uj,e)}}return v(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new kj((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===gj)n.id=o,n.password=a;else{if(i!==mj)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=oj,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&aj.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=ze(t),r=GL(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!nt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!nt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),kj=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=AL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(PK){LL("frame writing exception"),PK.stack&&LL(PK.stack),LL(PK)}}}return v(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;nt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){LL("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(PK){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||LL("No IE domain setting required")}catch(PK){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),bj=null;"undefined"!==typeof MozWebSocket?bj=MozWebSocket:"undefined"!==typeof WebSocket&&(bj=WebSocket);var wj=function(){function e(t,n,r,i,o,a,s){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jL(this.connId),this.stats_=pj(n),this.connURL=e.connectionURL_(n,a,s,i,r),this.nodeAdmin=n.nodeAdmin}return v(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,IL.set("previous_websocket_failure",!0);try{var r;if(nt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(oj,"/").concat(wL,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new bj(this.connURL,[],r)}catch(PK){this.log_("Error instantiating WebSocket.");var s=PK.message||PK.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){IL.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ut(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ve(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=GL(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(PK){this.log_("Exception thrown from WebSocket.send():",PK.message||PK.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var o={};return o.v=oj,!nt()&&"undefined"!==typeof location&&location.hostname&&aj.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o.ac=r),i&&(o.p=i),lj(e,sj,o)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==bj&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return IL.isInMemoryStorage||!0===IL.get("previous_websocket_failure")}}]),e}();wj.responsesRequiredToBeHealthy=2,wj.healthyTimeout=3e4;var _j=function(){function e(t){d(this,e),this.initTransports_(t)}return v(e,[{key:"initTransports_",value:function(t){var n=wj&&wj.isAvailable(),r=n&&!wj.previouslyFailed();if(t.webSocketOnly&&(n||UL("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[wj];else{var i,o=this.transports_=[],a=je(e.ALL_TRANSPORTS);try{for(a.s();!(i=a.n()).done;){var s=i.value;s&&s.isAvailable()&&o.push(s)}}catch(u){a.e(u)}finally{a.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[yj,wj]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();_j.globalTransportInitialized_=!1;var xj=function(){function e(t,n,r,i,o,a,s,u,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jL("c:"+this.id+":"),this.transportManager_=new _j(n),this.log_("Connection created"),this.start_()}return v(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=tj((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=WL("t",e),n=WL("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=WL("t",e),n=WL("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=WL("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?FL("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):FL("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oj!==n&&UL("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),tj((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tj((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(IL.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Sj=function(){function e(){d(this,e)}return v(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ej=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Ve(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return v(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=f(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ve(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Ij=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Je()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return v(n,[{key:"getInitialEvent",value:function(e){return Ve("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ej),Tj=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return v(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Cj(){return new Tj("")}function Aj(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Nj(e){return e.pieces_.length-e.pieceNum_}function Rj(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Tj(e.pieces_,t)}function Pj(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Dj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Oj(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Tj(t,0)}function Lj(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Tj)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var o=t.split("/"),a=0;a<o.length;a++)o[a].length>0&&n.push(o[a]);return new Tj(n,0)}function jj(e){return e.pieceNum_>=e.pieces_.length}function Fj(e,t){var n=Aj(e),r=Aj(t);if(null===n)return t;if(n===r)return Fj(Rj(e),Rj(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Mj(e,t){for(var n=Dj(e,0),r=Dj(t,0),i=0;i<n.length&&i<r.length;i++){var o=qL(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Uj(e,t){if(Nj(e)!==Nj(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Vj(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Nj(e)>Nj(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Bj=v((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=Dj(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ct(this.parts_[r]);Kj(this)}));function Kj(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qj(e))}function qj(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var zj=function(e){m(n,e);var t=x(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return v(n,[{key:"getInitialEvent",value:function(e){return Ve("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ej),Wj=1e3,Hj=function(e){m(n,e);var t=x(n);function n(e,r,i,o,a,s,u,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=jL("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Wj,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return zj.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&Ij.getInstance().on("online",l.onOnline_,w(l)),l}return v(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ct(i)),Ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Qe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ve(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(o))===e&&(t.log_("listen response",a),"ok"!==u&&t.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=lt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=lt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ct(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):FL("Unrecognized action received from server: "+ct(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wj,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Wj,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Wj),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Pt(Nt().mark((function e(){var t,r,i,o,a,s,u,c,h,f,d,p,v,g,m=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){Ve(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],g=p[1],s?LL("getToken() completed but was canceled"):(LL("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=g&&g.token,u=new xj(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){UL(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),a)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&UL(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){LL("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){LL("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dt(this.interruptReasons_)&&(this.reconnectDelay_=Wj,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return HL(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Tj(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){LL("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){LL("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=je(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=je(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){var a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+wL.replace(/\./g,"-")]=1,Je()?e["framework.cordova"]=1:et()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Ij.getInstance().currentlyOnline();return dt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ht(e,"w")){var n=ft(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();UL("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Sj);Hj.nextPersistentConnectionId_=0,Hj.nextConnectionId_=0;var Gj,Qj=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return v(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Yj=function(){function e(){d(this,e)}return v(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Qj(BL,e),r=new Qj(BL,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Qj.MIN}}]),e}(),Xj=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){return qL(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Be("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Qj.MIN}},{key:"maxPost",value:function(){return new Qj(KL,Gj)}},{key:"makePost",value:function(e,t){return Ve("string"===typeof e,"KeyIndex indexValue must always be a string."),new Qj(e,Gj)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Gj},set:function(e){Gj=e}}]),n}(Yj),Jj=new Xj,$j=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return v(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Zj=function(){function e(t,n,r,i,o){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:nF.EMPTY_NODE,this.right=null!=o?o:nF.EMPTY_NODE}return v(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return nF.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return nF.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Zj.RED=!0,Zj.BLACK=!1;var eF,tF=function(){function e(){d(this,e)}return v(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Zj(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),nF=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Zj.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Zj.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new $j(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new $j(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new $j(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new $j(this.root_,null,this.comparator_,!0,e)}}]),e}();function rF(e,t){return qL(e.name,t.name)}function iF(e,t){return qL(e,t)}nF.EMPTY_NODE=new tF;var oF,aF,sF,uF=function(e){return"number"===typeof e?"number:"+YL(e):"string:"+e},cF=function(e){if(e.isLeafNode()){var t=e.val();Ve("string"===typeof t||"number"===typeof t||"object"===typeof t&&ht(t,".sv"),"Priority must be a string or number.")}else Ve(e===eF||e.isEmpty(),"priority of unexpected type.");Ve(e===eF||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},lF=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ve(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),cF(this.priorityNode_)}return v(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return jj(t)?this:".priority"===Aj(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Aj(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ve(".priority"!==r||1===Nj(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rj(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+uF(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?YL(this.value_):this.value_,this.lazyHash_=NL(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ve(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return Ve(i>=0,"Unknown leaf type: "+n),Ve(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return oF},set:function(e){oF=e}}]),e}();lF.VALUE_TYPE_ORDER=["object","boolean","number","string"];var hF,fF,dF=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?qL(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Qj.MIN}},{key:"maxPost",value:function(){return new Qj(KL,new lF("[PRIORITY-POST]",sF))}},{key:"makePost",value:function(e,t){var n=aF(e);return new Qj(t,new lF("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Yj),pF=new dF,vF=Math.log(2),gF=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/vF,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return v(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),mF=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new Zj(a,o.node,Zj.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new Zj(a,o.node,Zj.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new Zj(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Zj.BLACK):(s(h,Zj.BLACK),s(h,Zj.RED))}return o}(new gF(e.length));return new nF(r||t,o)},yF={},kF=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return v(e,[{key:"get",value:function(e){var t=ft(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof nF?t:null}},{key:"hasIndex",value:function(e){return ht(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ve(t!==Jj,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Qj.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?mF(i,t.getCompare()):yF;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=pt(this.indexes_,(function(e,i){var o=ft(r.indexSet_,i);if(Ve(o,"Missing index implementation for "+i),e===yF){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(Qj.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),mF(a,o.getCompare())}return yF}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Qj(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(pt(this.indexes_,(function(e){if(e===yF)return e;var r=n.get(t.name);return r?e.remove(new Qj(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ve(yF&&pF,"ChildrenNode.ts has not been loaded"),hF=hF||new e({".priority":yF},{".priority":pF})}}]),e}(),bF=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&cF(this.priorityNode_),this.children_.isEmpty()&&Ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return v(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||fF}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?fF:t}},{key:"getChild",value:function(e){var t=Aj(e);return null===t?this:this.getImmediateChild(t).getChild(Rj(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ve(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,o=new Qj(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(o,this.children_));var a=r.isEmpty()?fF:this.priorityNode_;return new e(r,a,i)}},{key:"updateChild",value:function(e,t){var n=Aj(e);if(null===n)return t;Ve(".priority"!==Aj(e)||1===Nj(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Rj(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(pF,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+uF(this.getPriority().val())+":"),this.forEachChild(pF,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":NL(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Qj(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Qj(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Qj(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Qj.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Qj.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wF?-1:0}},{key:"withIndex",value:function(t){if(t===Jj||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Jj||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(pF),r=t.getIterator(pF),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Jj?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return fF||(fF=new e(new nF(iF),null,kF.Default))}}]),e}();bF.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var wF=new(function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,new nF(iF),bF.EMPTY_NODE,kF.Default)}return v(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return bF.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(bF));Object.defineProperties(Qj,{MIN:{value:new Qj(BL,bF.EMPTY_NODE)},MAX:{value:new Qj(KL,wF)}}),Xj.__EMPTY_NODE=bF.EMPTY_NODE,lF.__childrenNodeConstructor=bF,eF=wF,function(e){sF=e}(wF);function _F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return bF.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ve(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new lF(n,_F(t))}if(e instanceof Array){var r=bF.EMPTY_NODE;return QL(e,(function(t,n){if(ht(e,t)&&"."!==t.substring(0,1)){var i=_F(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(_F(t))}var i=[],o=!1,a=e;if(QL(a,(function(e,t){if("."!==e.substring(0,1)){var n=_F(t);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new Qj(e,n)))}})),0===i.length)return bF.EMPTY_NODE;var s=mF(i,rF,(function(e){return e.name}),iF);if(o){var u=mF(i,pF.getCompare());return new bF(s,_F(t),new kF({".priority":u},{".priority":pF}))}return new bF(s,_F(t),kF.Default)}!function(e){aF=e}(_F);var xF=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Ve(!jj(e)&&".priority"!==Aj(e),"Can't create PathIndex with empty path or .priority key"),r}return v(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?qL(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=_F(e),r=bF.EMPTY_NODE.updateChild(this.indexPath_,n);return new Qj(t,r)}},{key:"maxPost",value:function(){var e=bF.EMPTY_NODE.updateChild(this.indexPath_,wF);return new Qj(KL,e)}},{key:"toString",value:function(){return Dj(this.indexPath_,0).join("/")}}]),n}(Yj),SF=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?qL(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Qj.MIN}},{key:"maxPost",value:function(){return Qj.MAX}},{key:"makePost",value:function(e,t){var n=_F(e);return new Qj(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Yj),EF=new SF,IF="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",TF=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var o=new Array(8);for(r=7;r>=0;r--)o[r]=IF.charAt(n%64),n=Math.floor(n/64);Ve(0===n,"Cannot push at time == 0");var a=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=IF.charAt(t[r]);return Ve(20===a.length,"nextPushId: Length should be 20."),a}}(),CF=function(e){if("2147483647"===e)return"-";var t=ZL(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return KL;var o=n[i],a=IF.charAt(IF.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},AF=function(e){if("-2147483648"===e)return BL;var t=ZL(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=IF.charAt(IF.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function NF(e){return{type:"value",snapshotNode:e}}function RF(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function PF(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function DF(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var OF=function(){function e(t){d(this,e),this.index_=t}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,o){Ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(PF(t,a)):Ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(RF(t,n)):o.trackChildChange(DF(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(pF,(function(e,r){t.hasChild(e)||n.trackChildChange(PF(e,r))})),t.isLeafNode()||t.forEachChild(pF,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(DF(t,r,i))}else n.trackChildChange(RF(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?bF.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),LF=function(){function e(t){d(this,e),this.indexedFilter_=new OF(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return v(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,o){return this.matches(new Qj(t,n))||(n=bF.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=bF.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(bF.EMPTY_NODE);var i=this;return t.forEachChild(pF,(function(e,t){i.matches(new Qj(e,t))||(r=r.updateImmediateChild(e,bF.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),jF=function(){function e(t){d(this,e),this.rangedFilter_=new LF(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Qj(t,n))||(n=bF.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=bF.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=bF.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(bF.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,bF.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;Ve(s.numChildren()===this.limit_,"");var u=new Qj(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(DF(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(PF(t,h));var p=s.updateImmediateChild(t,bF.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(RF(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(PF(c.name,c.node)),i.trackChildChange(RF(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,bF.EMPTY_NODE)):e}}]),e}(),FF=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pF}return v(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:BL}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:KL}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===pF}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function MF(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function UF(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function VF(e,t){var n=e.copy();return n.index_=t,n}function BF(e){var t,n={};return e.isDefault()||(e.index_===pF?t="$priority":e.index_===EF?t="$value":e.index_===Jj?t="$key":(Ve(e.index_ instanceof xF,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ct(t),e.startSet_&&(n.startAt=ct(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+ct(e.indexStartName_))),e.endSet_&&(n.endAt=ct(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+ct(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function KF(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==pF&&(t.i=e.index_.toString()),t}var qF=function(e){m(n,e);var t=x(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this)).repoInfo_=e,a.onDataUpdate_=r,a.authTokenProvider_=i,a.appCheckTokenProvider_=o,a.log_=jL("p:rest:"),a.listens_={},a}return v(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=BF(e._queryParams);this.restRequest_(a+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),ft(o.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=BF(e._queryParams),r=e._path.toString(),i=new Qe;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=l(i,2),a=o[0],s=o[1];a&&a.accessToken&&(n.auth=a.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+mt(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ut(c.responseText)}catch(PK){UL("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&UL("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Sj),zF=function(){function e(){d(this,e),this.rootNode_=bF.EMPTY_NODE}return v(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function WF(){return{value:null,children:new Map}}function HF(e,t,n){if(jj(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Aj(t);e.children.has(r)||e.children.set(r,WF()),HF(e.children.get(r),t=Rj(t),n)}}function GF(e,t){if(jj(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(pF,(function(t,n){HF(e,new Tj(t),n)})),GF(e,t)}if(e.children.size>0){var r=Aj(t);if(t=Rj(t),e.children.has(r))GF(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function QF(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){QF(r,new Tj(t.toString()+"/"+e),n)}))}var YF,XF=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return v(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&QL(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),JF=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new XF(t);var r=1e4+2e4*Math.random();tj(this.reportStats_.bind(this),Math.floor(r))}return v(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;QL(t,(function(t,i){i>0&&ht(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),tj(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function $F(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(YF||(YF={}));var ZF,eM=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=YF.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return v(e,[{key:"operationForChild",value:function(t){if(jj(this.path)){if(null!=this.affectedTree.value)return Ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Tj(t));return new e(Cj(),n,this.revert)}return Ve(Aj(this.path)===t,"operationForChild called for unrelated child."),new e(Rj(this.path),this.affectedTree,this.revert)}}]),e}(),tM=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=YF.LISTEN_COMPLETE}return v(e,[{key:"operationForChild",value:function(t){return jj(this.path)?new e(this.source,Cj()):new e(this.source,Rj(this.path))}}]),e}(),nM=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=YF.OVERWRITE}return v(e,[{key:"operationForChild",value:function(t){return jj(this.path)?new e(this.source,Cj(),this.snap.getImmediateChild(t)):new e(this.source,Rj(this.path),this.snap)}}]),e}(),rM=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=YF.MERGE}return v(e,[{key:"operationForChild",value:function(t){if(jj(this.path)){var n=this.children.subtree(new Tj(t));return n.isEmpty()?null:n.value?new nM(this.source,Cj(),n.value):new e(this.source,Cj(),n)}return Ve(Aj(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Rj(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),iM=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return v(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(jj(e))return this.isFullyInitialized()&&!this.filtered_;var t=Aj(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),oM=v((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function aM(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Be("Should only compare child_ events.");var r=new Qj(t.childName,t.snapshotNode),i=new Qj(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function sM(e,t){return{eventCache:e,serverCache:t}}function uM(e,t,n,r){return sM(new iM(t,n,r),e.serverCache)}function cM(e,t,n,r){return sM(e.eventCache,new iM(t,n,r))}function lM(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function hM(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var fM=function(){return ZF||(ZF=new nF(zL)),ZF},dM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fM();d(this,e),this.value=t,this.children=n}return v(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Cj(),value:this.value};if(jj(e))return null;var n=Aj(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Rj(e),t);return null!=i?{path:Lj(new Tj(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(jj(t))return this;var n=Aj(t),r=this.children.get(n);return null!==r?r.subtree(Rj(t)):new e(null)}},{key:"set",value:function(t,n){if(jj(t))return new e(n,this.children);var r=Aj(t),i=(this.children.get(r)||new e(null)).set(Rj(t),n),o=this.children.insert(r,i);return new e(this.value,o)}},{key:"remove",value:function(t){if(jj(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Aj(t),r=this.children.get(n);if(r){var i,o=r.remove(Rj(t));return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(jj(e))return this.value;var t=Aj(e),n=this.children.get(t);return n?n.get(Rj(e)):null}},{key:"setTree",value:function(t,n){if(jj(t))return n;var r,i=Aj(t),o=(this.children.get(i)||new e(null)).setTree(Rj(t),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Cj(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Lj(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Cj(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(jj(e))return null;var i=Aj(e),o=this.children.get(i);return o?o.findOnPath_(Rj(e),Lj(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Cj(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(jj(t))return this;this.value&&r(n,this.value);var i=Aj(t),o=this.children.get(i);return o?o.foreachOnPath_(Rj(t),Lj(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Cj(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Lj(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return QL(t,(function(e,t){n=n.set(new Tj(e),t)})),n}}]),e}(),pM=function(){function e(t){d(this,e),this.writeTree_=t}return v(e,null,[{key:"empty",value:function(){return new e(new dM(null))}}]),e}();function vM(e,t,n){if(jj(t))return new pM(new dM(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=Fj(i,t);return o=o.updateChild(a,n),new pM(e.writeTree_.set(i,o))}var s=new dM(n),u=e.writeTree_.setTree(t,s);return new pM(u)}function gM(e,t,n){var r=e;return QL(n,(function(e,n){r=vM(r,Lj(t,e),n)})),r}function mM(e,t){if(jj(t))return pM.empty();var n=e.writeTree_.setTree(t,new dM(null));return new pM(n)}function yM(e,t){return null!=kM(e,t)}function kM(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Fj(n.path,t)):null}function bM(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(pF,(function(e,n){t.push(new Qj(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Qj(e,n.value))})),t}function wM(e,t){if(jj(t))return e;var n=kM(e,t);return new pM(null!=n?new dM(n):e.writeTree_.subtree(t))}function _M(e){return e.writeTree_.isEmpty()}function xM(e,t){return SM(Cj(),e.writeTree_,t)}function SM(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ve(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=SM(Lj(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Lj(e,".priority"),r)),n}function EM(e,t){return UM(t,e)}function IM(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function TM(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ve(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&CM(s,r.path)?i=!1:Vj(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=NM(e.allWrites,AM,Cj()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=mM(e.visibleWrites,r.path):QL(r.children,(function(t){e.visibleWrites=mM(e.visibleWrites,Lj(r.path,t))}));return!0}return!1}function CM(e,t){if(e.snap)return Vj(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Vj(Lj(e.path,n),t))return!0;return!1}function AM(e){return e.visible}function NM(e,t,n){for(var r=pM.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)Vj(n,a)?r=vM(r,s=Fj(n,a),o.snap):Vj(a,n)&&(s=Fj(a,n),r=vM(r,Cj(),o.snap.getChild(s)));else{if(!o.children)throw Be("WriteRecord should have .snap or .children");if(Vj(n,a))r=gM(r,s=Fj(n,a),o.children);else if(Vj(a,n))if(jj(s=Fj(a,n)))r=gM(r,Cj(),o.children);else{var u=ft(o.children,Aj(s));if(u){var c=u.getChild(Rj(s));r=vM(r,Cj(),c)}}}}}return r}function RM(e,t,n,r,i){if(r||i){var o=wM(e.visibleWrites,t);if(!i&&_M(o))return n;if(i||null!=n||yM(o,Cj())){return xM(NM(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Vj(e.path,t)||Vj(t,e.path))}),t),n||bF.EMPTY_NODE)}return null}var a=kM(e.visibleWrites,t);if(null!=a)return a;var s=wM(e.visibleWrites,t);return _M(s)?n:null!=n||yM(s,Cj())?xM(s,n||bF.EMPTY_NODE):null}function PM(e,t,n,r){return RM(e.writeTree,e.treePath,t,n,r)}function DM(e,t){return function(e,t,n){var r=bF.EMPTY_NODE,i=kM(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(pF,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=wM(e.visibleWrites,t);return n.forEachChild(pF,(function(e,t){var n=xM(wM(o,new Tj(e)),t);r=r.updateImmediateChild(e,n)})),bM(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return bM(wM(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function OM(e,t,n,r){return function(e,t,n,r,i){Ve(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=Lj(t,n);if(yM(e.visibleWrites,o))return null;var a=wM(e.visibleWrites,o);return _M(a)?i.getChild(n):xM(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function LM(e,t){return function(e,t){return kM(e.visibleWrites,t)}(e.writeTree,Lj(e.treePath,t))}function jM(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=wM(e.visibleWrites,t),c=kM(u,Cj());if(null!=c)s=c;else{if(null==n)return[];s=xM(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function FM(e,t,n){return function(e,t,n,r){var i=Lj(t,n),o=kM(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?xM(wM(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function MM(e,t){return UM(Lj(e.treePath,t),e.writeTree)}function UM(e,t){return{treePath:e,writeTree:t}}var VM=function(){function e(){d(this,e),this.changeMap=new Map}return v(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ve("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ve(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,DF(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,PF(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,RF(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Be("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,DF(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),BM=new(function(){function e(){d(this,e)}return v(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),KM=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return v(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new iM(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FM(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hM(this.viewCache_),i=jM(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function qM(e,t,n,r,i){var o,a,s=new VM;if(n.type===YF.OVERWRITE){var u=n;u.source.fromUser?o=HM(e,t,u.path,u.snap,r,i,s):(Ve(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!jj(u.path),o=WM(e,t,u.path,u.snap,r,i,a,s))}else if(n.type===YF.MERGE){var c=n;c.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=Lj(n,r);GM(t,Aj(c))&&(s=HM(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=Lj(n,r);GM(t,Aj(c))||(s=HM(e,s,c,u,i,o,a))})),s}(e,t,c.path,c.children,r,i,s):(Ve(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=YM(e,t,c.path,c.children,r,i,a,s))}else if(n.type===YF.ACK_USER_WRITE){var l=n;o=l.revert?function(e,t,n,r,i,o){var a;if(null!=LM(r,n))return t;var s,u=new KM(r,t,i),c=t.eventCache.getNode();if(jj(n)||".priority"===Aj(n)){var l;if(t.serverCache.isFullyInitialized())l=PM(r,hM(t));else{var h=t.serverCache.getNode();Ve(h instanceof bF,"serverChildren would be complete if leaf node"),l=DM(r,h)}s=e.filter.updateFullNode(c,l,o)}else{var f=Aj(n),d=FM(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Rj(n),u,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,bF.EMPTY_NODE,Rj(n),u,o):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=PM(r,hM(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,a,o))}return a=t.serverCache.isFullyInitialized()||null!=LM(r,Cj()),uM(t,s,a,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=LM(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(jj(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return WM(e,t,n,u.getNode().getChild(n),i,o,s,a);if(jj(n)){var c=new dM(null);return u.getNode().forEachChild(Jj,(function(e,t){c=c.set(new Tj(e),t)})),YM(e,t,n,c,i,o,s,a)}return t}var l=new dM(null);return r.foreach((function(e,t){var r=Lj(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),YM(e,t,n,l,i,o,s,a)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==YF.LISTEN_COMPLETE)throw Be("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=cM(t,o.getNode(),o.isFullyInitialized()||jj(n),o.isFiltered());return zM(e,a,n,r,BM,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=lM(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(NF(lM(t)))}}(t,o,h),{viewCache:o,changes:h}}function zM(e,t,n,r,i,o){var a,s,u=t.eventCache;if(null!=LM(r,n))return t;if(jj(n))if(Ve(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=hM(t),l=DM(r,c instanceof bF?c:bF.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var h=PM(r,hM(t));a=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=Aj(n);if(".priority"===f){Ve(1===Nj(n),"Can't have a priority with additional path components");var d=u.getNode(),p=OM(r,n,d,s=t.serverCache.getNode());a=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,g=Rj(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=OM(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(g,m):u.getNode().getImmediateChild(f)}else v=FM(r,f,t.serverCache);a=null!=v?e.filter.updateChild(u.getNode(),f,v,g,i,o):u.getNode()}}return uM(t,a,u.isFullyInitialized()||jj(n),e.filter.filtersNodes())}function WM(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(jj(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Aj(n);if(!c.isCompleteForPath(n)&&Nj(n)>1)return t;var d=Rj(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,BM,null)}var v=cM(t,u,c.isFullyInitialized()||jj(n),l.filtersNodes());return zM(e,v,n,i,new KM(i,v,o),s)}function HM(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new KM(i,t,o);if(jj(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=uM(t,u,!0,e.filter.filtersNodes());else{var h=Aj(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=uM(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Rj(n),p=c.getNode().getImmediateChild(h);if(jj(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Pj(d)&&v.getChild(Oj(d)).isEmpty()?v:v.updateChild(d,r):bF.EMPTY_NODE}if(p.equals(f))s=t;else s=uM(t,e.filter.updateChild(c.getNode(),h,f,d,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function GM(e,t){return e.eventCache.isCompleteForChild(t)}function QM(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function YM(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=jj(n)?r:new dM(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=QM(0,t.serverCache.getNode().getImmediateChild(n),r);c=WM(e,c,new Tj(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=QM(0,t.serverCache.getNode().getImmediateChild(n),r);c=WM(e,c,new Tj(n),h,i,o,a,s)}})),c}var XM,JM=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,o=new OF(i.getIndex()),a=(r=i).loadsAllData()?new OF(r.getIndex()):r.hasLimit()?new jF(r):new LF(r);this.processor_=function(e){return{filter:e}}(a);var s=n.serverCache,u=n.eventCache,c=o.updateFullNode(bF.EMPTY_NODE,s.getNode(),null),l=a.updateFullNode(bF.EMPTY_NODE,u.getNode(),null),h=new iM(c,s.isFullyInitialized(),o.filtersNodes()),f=new iM(l,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=sM(f,h),this.eventGenerator_=new oM(this.query_)}return v(e,[{key:"query",get:function(){return this.query_}}]),e}();function $M(e,t){var n=hM(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!jj(t)&&!n.getImmediateChild(Aj(t)).isEmpty())?n.getChild(t):null}function ZM(e){return 0===e.eventRegistrations_.length}function eU(e,t,n){var r=[];if(n){Ve(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function tU(e,t,n,r){t.type===YF.MERGE&&null!==t.source.queryId&&(Ve(hM(e.viewCache_),"We should always have a full cache before handling merges"),Ve(lM(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=qM(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,Ve(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ve(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ve(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,nU(e,s.changes,s.viewCache.eventCache.getNode(),null)}function nU(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),aM(e,i,"child_removed",t,r,n),aM(e,i,"child_added",t,r,n),aM(e,i,"child_moved",o,r,n),aM(e,i,"child_changed",t,r,n),aM(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var rU,iU=v((function e(){d(this,e),this.views=new Map}));function oU(e){return 0===e.views.size}function aU(e,t,n,r){var i=t.source.queryId;if(null!==i){var o=e.views.get(i);return Ve(null!=o,"SyncTree gave us an op for an invalid query."),tU(o,t,n,r)}var a,s=[],u=je(e.views.values());try{for(u.s();!(a=u.n()).done;){var c=a.value;s=s.concat(tU(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function sU(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=PM(n,i?r:null),u=!1;s?u=!0:r instanceof bF?(s=DM(n,r),u=!1):(s=bF.EMPTY_NODE,u=!1);var c=sM(new iM(s,u,!1),new iM(r,i,!1));return new JM(t,c)}return a}function uU(e,t,n,r,i,o){var a=sU(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pF,(function(e,t){r.push(RF(e,t))})),n.isFullyInitialized()&&r.push(NF(n.getNode())),nU(e,r,n.getNode(),t)}(a,n)}function cU(e,t,n,r){var i=t._queryIdentifier,o=[],a=[],s=pU(e);if("default"===i){var u,c=je(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];a=a.concat(eU(d,n,r)),ZM(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||o.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(a=a.concat(eU(p,n,r)),ZM(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return s&&!pU(e)&&o.push(new(Ve(XM,"Reference.ts has not been loaded"),XM)(t._repo,t._path)),{removed:o,events:a}}function lU(e){var t,n=[],r=je(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function hU(e,t){var n,r=null,i=je(e.views.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r||$M(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}function fU(e,t){if(t._queryParams.loadsAllData())return vU(e);var n=t._queryIdentifier;return e.views.get(n)}function dU(e,t){return null!=fU(e,t)}function pU(e){return null!=vU(e)}function vU(e){var t,n=je(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var gU=1,mU=v((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new dM(null),this.pendingWriteTree_={visibleWrites:pM.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function yU(e,t,n,r,i){return function(e,t,n,r,i){Ve(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=vM(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?TU(e,new nM({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function kU(e,t,n,r){!function(e,t,n,r){Ve(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=gM(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=dM.fromObject(n);return TU(e,new rM({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function bU(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=IM(e.pendingWriteTree_,t),i=TM(e.pendingWriteTree_,t);if(i){var o=new dM(null);return null!=r.snap?o=o.set(Cj(),!0):QL(r.children,(function(e){o=o.set(new Tj(e),!0)})),TU(e,new eM(r.path,o,n))}return[]}function wU(e,t,n){return TU(e,new nM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function _U(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t._path,a=e.syncPointTree_.get(o),s=[];if(a&&("default"===t._queryIdentifier||dU(a,t))){var u=cU(a,t,n,r);oU(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(o,(function(e,t){return pU(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=jU(f),p=0;p<d.length;++p){var v=d[p],g=v.query,m=NU(e,v);e.listenProvider_.startListening(FU(g),RU(e,g),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){var y=null;e.listenProvider_.stopListening(FU(t),y)}else c.forEach((function(t){var n=e.queryToTagMap.get(PU(t));e.listenProvider_.stopListening(FU(t),n)}))}MU(e,c)}return s}function xU(e,t,n,r){var i=DU(e,r);if(null!=i){var o=OU(i),a=o.path,s=o.queryId,u=Fj(a,t);return LU(e,a,new nM($F(s),u,n))}return[]}function SU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Fj(e,i);o=o||hU(t,n),a=a||pU(t)}));var s,u=e.syncPointTree_.get(i);if(u?(a=a||pU(u),o=o||hU(u,Cj())):(u=new iU,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=o)s=!0;else{s=!1,o=bF.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=hU(t,Cj());n&&(o=o.updateImmediateChild(e,n))}))}var l=dU(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=PU(t);Ve(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=UU();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=EM(e.pendingWriteTree_,i),p=uU(u,t,n,d,o,s);if(!l&&!a&&!r){var v=fU(u,t);p=p.concat(VU(e,t,v))}return p}function EU(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=hU(n,Fj(e,t));if(r)return r}));return RM(r,t,i,n,!0)}function IU(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Fj(e,n);r=r||hU(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||hU(i,Cj()):(i=new iU,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new iM(r,!0,!1):null;return function(e){return lM(e.viewCache_)}(sU(i,t,EM(e.pendingWriteTree_,t._path),o?a.getNode():bF.EMPTY_NODE,o))}function TU(e,t){return CU(t,e.syncPointTree_,null,EM(e.pendingWriteTree_,Cj()))}function CU(e,t,n,r){if(jj(e.path))return AU(e,t,n,r);var i=t.get(Cj());null==n&&null!=i&&(n=hU(i,Cj()));var o=[],a=Aj(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=MM(r,a);o=o.concat(CU(s,u,c,l))}return i&&(o=o.concat(aU(i,e,r,n))),o}function AU(e,t,n,r){var i=t.get(Cj());null==n&&null!=i&&(n=hU(i,Cj()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=MM(r,t),u=e.operationForChild(t);u&&(o=o.concat(AU(u,i,a,s)))})),i&&(o=o.concat(aU(i,e,r,n))),o}function NU(e,t){var n=t.query,r=RU(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||bF.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=DU(e,n);if(r){var i=OU(r),o=i.path,a=i.queryId,s=Fj(o,t);return LU(e,o,new tM($F(a),s))}return[]}(e,n._path,r):function(e,t){return TU(e,new tM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return _U(e,n,null,i)}}}function RU(e,t){var n=PU(t);return e.queryToTagMap.get(n)}function PU(e){return e._path.toString()+"$"+e._queryIdentifier}function DU(e,t){return e.tagToQueryMap.get(t)}function OU(e){var t=e.indexOf("$");return Ve(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Tj(e.substr(0,t))}}function LU(e,t,n){var r=e.syncPointTree_.get(t);return Ve(r,"Missing sync point for query tag that we're tracking"),aU(r,n,EM(e.pendingWriteTree_,t),null)}function jU(e){return e.fold((function(e,t,n){if(t&&pU(t))return[vU(t)];var r=[];return t&&(r=lU(t)),QL(n,(function(e,t){r=r.concat(t)})),r}))}function FU(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ve(rU,"Reference.ts has not been loaded"),rU)(e._repo,e._path):e}function MU(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=PU(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function UU(){return gU++}function VU(e,t,n){var r=t._path,i=RU(e,t),o=NU(e,n),a=e.listenProvider_.startListening(FU(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ve(!pU(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!jj(e)&&t&&pU(t))return[vU(t).query];var r=[];return t&&(r=r.concat(lU(t).map((function(e){return e.query})))),QL(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(FU(l),RU(e,l))}return a}var BU=function(){function e(t){d(this,e),this.node_=t}return v(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),KU=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return v(e,[{key:"getImmediateChild",value:function(t){var n=Lj(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return EU(this.syncTree_,this.path_)}}]),e}(),qU=function(e,t,n){return e&&"object"===typeof e?(Ve(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?zU(e[".sv"],t,n):"object"===typeof e[".sv"]?WU(e[".sv"],t):void Ve(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},zU=function(e,t,n){if("timestamp"===e)return n.timestamp;Ve(!1,"Unexpected server value: "+e)},WU=function(e,t,n){e.hasOwnProperty("increment")||Ve(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ve(!1,"Unexpected increment value: "+r);var i=t.node();if(Ve(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},HU=function(e,t,n,r){return QU(t,new KU(n,e),r)},GU=function(e,t,n){return QU(e,new BU(t),n)};function QU(e,t,n){var r,i=e.getPriority().val(),o=qU(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=qU(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new lF(s,_F(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new lF(o))),u.forEachChild(pF,(function(e,i){var o=QU(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var YU=v((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function XU(e,t){for(var n=t instanceof Tj?t:new Tj(t),r=e,i=Aj(n);null!==i;){var o=ft(r.node.children,i)||{children:{},childCount:0};r=new YU(i,r,o),i=Aj(n=Rj(n))}return r}function JU(e){return e.node.value}function $U(e,t){e.node.value=t,rV(e)}function ZU(e){return e.node.childCount>0}function eV(e,t){QL(e.node.children,(function(n,r){t(new YU(n,e,r))}))}function tV(e,t,n,r){n&&!r&&t(e),eV(e,(function(e){tV(e,t,!0,r)})),n&&r&&t(e)}function nV(e){return new Tj(null===e.parent?e.name:nV(e.parent)+"/"+e.name)}function rV(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===JU(e)&&!ZU(e)}(n),i=ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,rV(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,rV(e))}(e.parent,e.name,e)}var iV=/[\[\].#$\/\u0000-\u001F\u007F]/,oV=/[\[\].#$\u0000-\u001F\u007F]/,aV=10485760,sV=function(e){return"string"===typeof e&&0!==e.length&&!iV.test(e)},uV=function(e){return"string"===typeof e&&0!==e.length&&!oV.test(e)},cV=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!VL(e)||e&&"object"===typeof e&&ht(e,".sv")},lV=function(e,t,n,r){r&&void 0===t||hV(Et(e,"value"),t,n)},hV=function e(t,n,r){var i=r instanceof Tj?new Bj(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+qj(i));if("function"===typeof n)throw new Error(t+"contains a function "+qj(i)+" with contents = "+n.toString());if(VL(n))throw new Error(t+"contains "+n.toString()+" "+qj(i));if("string"===typeof n&&n.length>aV/3&&Ct(n)>aV)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+qj(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,a=!1;if(QL(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!sV(n)))throw new Error(t+" contains an invalid key ("+n+") "+qj(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Ct(u),Kj(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ct(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),o&&a)throw new Error(t+' contains ".value" child '+qj(i)+" in addition to actual children.")}},fV=function(e,t,n,r){if(!r||void 0!==t){var i=Et(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];QL(t,(function(e,t){var r=new Tj(e);if(hV(i,t,Lj(n,r)),".priority"===Pj(r)&&!cV(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Dj(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!sV(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Mj);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Vj(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},dV=function(e,t,n){if(!n||void 0!==t){if(VL(t))throw new Error(Et(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cV(t))throw new Error(Et(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pV=function(e,t,n,r){if((!r||void 0!==n)&&!sV(n))throw new Error(Et(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vV=function(e,t,n,r){if((!r||void 0!==n)&&!uV(n))throw new Error(Et(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gV=function(e,t){if(".info"===Aj(t))throw new Error(e+" failed = Can't modify data under /.info/")},mV=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!sV(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),uV(e)}(n))throw new Error(Et(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yV=v((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function kV(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||Uj(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function bV(e,t,n){kV(e,n),_V(e,(function(e){return Uj(e,t)}))}function wV(e,t,n){kV(e,n),_V(e,(function(e){return Vj(e,t)||Vj(t,e)}))}function _V(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(xV(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function xV(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();PL&&LL("event: "+n.toString()),ej(r)}}}var SV="repo_interrupt",EV=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=WF(),this.transactionQueueTree_=new YU,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return v(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function IV(e,t,n){if(e.stats_=pj(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qF(e.repoInfo_,(function(t,n,r,i){AV(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return NV(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(PK){throw new Error("Invalid authOverride provided: "+PK)}}e.persistentConnection_=new Hj(e.repoInfo_,t,(function(t,n,r,i){AV(e,t,n,r,i)}),(function(t){NV(e,t)}),(function(t){!function(e,t){QL(t,(function(t,n){RV(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return dj[n]||(dj[n]=t()),dj[n]}(e.repoInfo_,(function(){return new JF(e.stats_,e.server_)})),e.infoData_=new zF,e.infoSyncTree_=new mU({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=wU(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),RV(e,"connected",!1),e.serverSyncTree_=new mU({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);wV(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function TV(e){var t=e.infoData_.getNode(new Tj(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CV(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:TV(e)})}function AV(e,t,n,r,i){e.dataUpdateCount++;var o=new Tj(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=pt(n,(function(e){return _F(e)}));a=function(e,t,n,r){var i=DU(e,r);if(i){var o=OU(i),a=o.path,s=o.queryId,u=Fj(a,t),c=dM.fromObject(n);return LU(e,a,new rM($F(s),u,c))}return[]}(e.serverSyncTree_,o,s,i)}else{var u=_F(n);a=xU(e.serverSyncTree_,o,u,i)}else if(r){var c=pt(n,(function(e){return _F(e)}));a=function(e,t,n){var r=dM.fromObject(n);return TU(e,new rM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{var l=_F(n);a=wU(e.serverSyncTree_,o,l)}var h=o;a.length>0&&(h=qV(e,o)),wV(e.eventQueue_,h,a)}function NV(e,t){RV(e,"connected",t),!1===t&&function(e){MV(e,"onDisconnectEvents");var t=CV(e),n=WF();QF(e.onDisconnect_,Cj(),(function(r,i){var o=HU(r,i,e.serverSyncTree_,t);HF(n,r,o)}));var r=[];QF(n,Cj(),(function(t,n){r=r.concat(wU(e.serverSyncTree_,t,n));var i=QV(e,t);qV(e,i)})),e.onDisconnect_=WF(),wV(e.eventQueue_,Cj(),r)}(e)}function RV(e,t,n){var r=new Tj("/.info/"+t),i=_F(n);e.infoData_.updateSnapshot(r,i);var o=wU(e.infoSyncTree_,r,i);wV(e.eventQueue_,r,o)}function PV(e){return e.nextWriteId_++}function DV(e,t,n,r,i){MV(e,"set",{path:t.toString(),value:n,priority:r});var o=CV(e),a=_F(n,r),s=EU(e.serverSyncTree_,t),u=GU(a,s,o),c=PV(e),l=yU(e.serverSyncTree_,t,u,c,!0);kV(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||UL("set at "+t+" failed: "+n);var a=bU(e.serverSyncTree_,c,!o);wV(e.eventQueue_,t,a),UV(e,i,n,r)}));var h=QV(e,t);qV(e,h),wV(e.eventQueue_,h,[])}function OV(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&GF(e.onDisconnect_,t),UV(e,n,r,i)}))}function LV(e,t,n,r){var i=_F(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&HF(e.onDisconnect_,t,i),UV(e,r,n,o)}))}function jV(e,t,n){var r;r=".info"===Aj(t._path)?_U(e.infoSyncTree_,t,n):_U(e.serverSyncTree_,t,n),bV(e.eventQueue_,t._path,r)}function FV(e){e.persistentConnection_&&e.persistentConnection_.interrupt(SV)}function MV(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];LL.apply(void 0,[t].concat(r))}function UV(e,t,n,r){t&&ej((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function VV(e,t,n){return EU(e.serverSyncTree_,t,n)||bF.EMPTY_NODE}function BV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||GV(e,t),JU(t)){var n=WV(e,t);Ve(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&KV(e,nV(t),n)}else ZU(t)&&eV(t,(function(t){BV(e,t)}))}function KV(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=VV(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];Ve(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Fj(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){MV(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(bU(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);GV(e,XU(e.transactionQueueTree_,t)),BV(e,e.transactionQueueTree_),wV(e.eventQueue_,t,i);for(var u=0;u<o.length;u++)ej(o[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{UL("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}qV(e,t)}}),a)}function qV(e,t){var n=zV(e,t),r=nV(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})),a=o.map((function(e){return e.currentWriteId})),s=function(o){var s,u=t[o],c=Fj(n,u.path),l=!1,h=void 0;if(Ve(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(bU(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(bU(e.serverSyncTree_,u.currentWriteId,!0));else{var f=VV(e,u.path,a);u.currentInputSnapshot=f;var d=t[o].update(f.val());if(void 0!==d){hV("transaction failed: Data returned ",d,u.path);var p=_F(d);"object"===typeof d&&null!=d&&ht(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,g=CV(e),m=GU(p,f,g);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=PV(e),a.splice(a.indexOf(v),1),i=(i=i.concat(yU(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(bU(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(bU(e.serverSyncTree_,u.currentWriteId,!0))}wV(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,s=t[o].unwatcher,setTimeout(s,Math.floor(0)),t[o].onComplete&&("nodata"===h?r.push((function(){return t[o].onComplete(null,!1,t[o].currentInputSnapshot)})):r.push((function(){return t[o].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);GV(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)ej(r[c]);BV(e,e.transactionQueueTree_)}(e,WV(e,n),r),r}function zV(e,t){var n,r=e.transactionQueueTree_;for(n=Aj(t);null!==n&&void 0===JU(r);)r=XU(r,n),n=Aj(t=Rj(t));return r}function WV(e,t){var n=[];return HV(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function HV(e,t,n){var r=JU(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);eV(t,(function(t){HV(e,t,n)}))}function GV(e,t){var n=JU(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,$U(t,n.length>0?n:void 0)}eV(t,(function(t){GV(e,t)}))}function QV(e,t){var n=nV(zV(e,t)),r=XU(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){YV(e,t)})),YV(e,r),tV(r,(function(t){YV(e,t)})),n}function YV(e,t){var n=JU(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Ve(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(Ve(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(bU(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?$U(t,void 0):n.length=o+1,wV(e.eventQueue_,nV(t),i);for(var s=0;s<r.length;s++)ej(r[s])}}var XV=function(e,t){var n=JV(e),r=n.namespace;"firebase.com"===n.domain&&ML(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ML("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&UL("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new cj(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Tj(n.pathString)}},JV=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(PK){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=je(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):UL("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(a){r.e(a)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},$V=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return v(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ct(this.snapshot.exportVal())}}]),e}(),ZV=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return v(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),eB=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return v(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),tB=function(){function e(t,n){d(this,e),this._repo=t,this._path=n}return v(e,[{key:"cancel",value:function(){var e=new Qe;return OV(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){gV("OnDisconnect.remove",this._path);var e=new Qe;return LV(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){gV("OnDisconnect.set",this._path),lV("OnDisconnect.set",e,this._path,!1);var t=new Qe;return LV(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){gV("OnDisconnect.setWithPriority",this._path),lV("OnDisconnect.setWithPriority",e,this._path,!1),dV("OnDisconnect.setWithPriority",t,!1);var n=new Qe;return function(e,t,n,r,i){var o=_F(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&HF(e.onDisconnect_,t,o),UV(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){gV("OnDisconnect.update",this._path),fV("OnDisconnect.update",e,this._path,!1);var t=new Qe;return function(e,t,n,r){if(dt(n))return LL("onDisconnect().update() called with empty data.  Don't do anything."),void UV(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&QL(n,(function(n,r){var i=_F(r);HF(e.onDisconnect_,Lj(t,n),i)})),UV(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),nB=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return v(e,[{key:"key",get:function(){return jj(this._path)?null:Pj(this._path)}},{key:"ref",get:function(){return new aB(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=KF(this._queryParams),t=HL(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return KF(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=At(t))instanceof e))return!1;var n=this._repo===t._repo,r=Uj(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function rB(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function iB(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Jj){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==BL)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==KL)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===pF){if(null!=t&&!cV(t)||null!=n&&!cV(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ve(e.getIndex()instanceof xF||e.getIndex()===EF,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function oB(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var aB=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,r,new FF,!1)}return v(n,[{key:"parent",get:function(){var e=Oj(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(nB),sB=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return v(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Tj(t),r=lB(this.ref,t);return new e(this._node.getChild(n),r,pF)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,lB(n.ref,r),pF))}))}},{key:"hasChild",value:function(e){var t=new Tj(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function uB(e,t){return(e=At(e))._checkNotDeleted("ref"),void 0!==t?lB(e._root,t):e._root}function cB(e,t){(e=At(e))._checkNotDeleted("refFromURL");var n=XV(t,e._repo.repoInfo_.nodeAdmin);mV("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||ML("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),uB(e,n.path.toString())}function lB(e,t){var n,r,i,o;return null===Aj((e=At(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),vV(n,r,i,o)):vV("child","path",t,!1),new aB(e._repo,Lj(e._path,t))}function hB(e,t){e=At(e),gV("push",e._path),lV("push",t,e._path,!0);var n,r=TV(e._repo),i=TF(r),o=lB(e,i),a=lB(e,i);return n=null!=t?dB(a,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function fB(e){return gV("remove",e._path),dB(e,null)}function dB(e,t){e=At(e),gV("set",e._path),lV("set",t,e._path,!1);var n=new Qe;return DV(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function pB(e,t){e=At(e),gV("setPriority",e._path),dV("setPriority",t,!1);var n=new Qe;return DV(e._repo,Lj(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function vB(e,t,n){if(gV("setWithPriority",e._path),lV("setWithPriority",t,e._path,!1),dV("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Qe;return DV(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function gB(e,t){fV("update",t,e._path,!1);var n=new Qe;return function(e,t,n,r){MV(e,"update",{path:t.toString(),value:n});var i=!0,o=CV(e),a={};if(QL(n,(function(n,r){i=!1,a[n]=HU(Lj(t,n),_F(r),e.serverSyncTree_,o)})),i)LL("update() called with empty data.  Don't do anything."),UV(0,r,"ok",void 0);else{var s=PV(e),u=kU(e.serverSyncTree_,t,a,s);kV(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||UL("update at "+t+" failed: "+n);var a=bU(e.serverSyncTree_,s,!o),u=a.length>0?qV(e,t):t;wV(e.eventQueue_,u,a),UV(0,r,n,i)})),QL(n,(function(n){var r=QV(e,Lj(t,n));qV(e,r)})),wV(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function mB(e){e=At(e);var t=new eB((function(){})),n=new yB(t);return function(e,t,n){var r=IU(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,o=_F(r).withIndex(t._queryParams.getIndex());if(SU(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=wU(e.serverSyncTree_,t._path,o);else{var a=RU(e.serverSyncTree_,t);i=xU(e.serverSyncTree_,t._path,o,a)}return wV(e.eventQueue_,t._path,i),_U(e.serverSyncTree_,t,n,null,!0),o}),(function(n){return MV(e,"get for query "+ct(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new sB(t,new aB(e._repo,e._path),e._queryParams.getIndex())}))}var yB=function(){function e(t){d(this,e),this.callbackContext=t}return v(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new $V("value",this,new sB(e.snapshotNode,new aB(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ZV(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),kB=function(){function e(t,n){d(this,e),this.eventType=t,this.callbackContext=n}return v(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ZV(this,e,t):null}},{key:"createEvent",value:function(e,t){Ve(null!=e.childName,"Child events should have a childName.");var n=lB(new aB(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new $V(e.type,this,new sB(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function bB(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){jV(e._repo,e,c),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new eB(n,o||void 0),c="value"===t?new yB(u):new kB(t,u);return function(e,t,n){var r;r=".info"===Aj(t._path)?SU(e.infoSyncTree_,t,n):SU(e.serverSyncTree_,t,n),bV(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return jV(e._repo,e,c)}}function wB(e,t,n,r){return bB(e,"value",t,n,r)}function _B(e,t,n,r){return bB(e,"child_added",t,n,r)}function xB(e,t,n,r){return bB(e,"child_changed",t,n,r)}function SB(e,t,n,r){return bB(e,"child_moved",t,n,r)}function EB(e,t,n,r){return bB(e,"child_removed",t,n,r)}function IB(e,t,n){var r=null,i=n?new eB(n):null;"value"===t?r=new yB(i):t&&(r=new kB(t,i)),jV(e._repo,e,r)}var TB=v((function e(){d(this,e)})),CB=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){lV("endAt",this._value,e._path,!0);var t=UF(e._queryParams,this._value,this._key);if(oB(t),iB(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nB(e._repo,e._path,t,e._orderByCalled)}}]),n}(TB);function AB(e,t){return pV("endAt","key",t,!0),new CB(e,t)}var NB=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){lV("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Jj?("string"===typeof t&&(t=AF(t)),r=UF(e,t,n)):r=UF(e,t,null==n?BL:AF(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(oB(t),iB(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nB(e._repo,e._path,t,e._orderByCalled)}}]),n}(TB);function RB(e,t){return pV("endBefore","key",t,!0),new NB(e,t)}var PB=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){lV("startAt",this._value,e._path,!0);var t=MF(e._queryParams,this._value,this._key);if(oB(t),iB(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new nB(e._repo,e._path,t,e._orderByCalled)}}]),n}(TB);function DB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return pV("startAt","key",t,!0),new PB(e,t)}var OB=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){lV("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Jj?("string"===typeof t&&(t=CF(t)),r=MF(e,t,n)):r=MF(e,t,null==n?KL:CF(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(oB(t),iB(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new nB(e._repo,e._path,t,e._orderByCalled)}}]),n}(TB);function LB(e,t){return pV("startAfter","key",t,!0),new OB(e,t)}var jB=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return v(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new nB(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(TB);function FB(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jB(e)}var MB=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return v(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new nB(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(TB);function UB(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new MB(e)}var VB=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._path=e,r}return v(n,[{key:"_apply",value:function(e){rB(e,"orderByChild");var t=new Tj(this._path);if(jj(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new xF(t),r=VF(e._queryParams,n);return iB(r),new nB(e._repo,e._path,r,!0)}}]),n}(TB);function BB(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vV("orderByChild","path",e,!1),new VB(e)}var KB=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){rB(e,"orderByKey");var t=VF(e._queryParams,Jj);return iB(t),new nB(e._repo,e._path,t,!0)}}]),n}(TB);function qB(){return new KB}var zB=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){rB(e,"orderByPriority");var t=VF(e._queryParams,pF);return iB(t),new nB(e._repo,e._path,t,!0)}}]),n}(TB);function WB(){return new zB}var HB=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){rB(e,"orderByValue");var t=VF(e._queryParams,EF);return iB(t),new nB(e._repo,e._path,t,!0)}}]),n}(TB);function GB(){return new HB}var QB=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){if(lV("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new CB(this._value,this._key)._apply(new PB(this._value,this._key)._apply(e))}}]),n}(TB);function YB(e,t){return pV("equalTo","key",t,!0),new QB(e,t)}function XB(e){for(var t=At(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];t=s._apply(t)}return t}!function(e){Ve(!XM,"__referenceConstructor has already been defined"),XM=e}(aB),function(e){Ve(!rU,"__referenceConstructor has already been defined"),rU=e}(aB);var JB={},$B=!1;function ZB(e,t,n,r){e.repoInfo_=new cj("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function eK(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||ML("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),LL("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var a,s=XV(o,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://".concat(c,"?ns=").concat(u.namespace),u=(s=XV(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new ij(ij.OWNER):new rj(e.name,e.options,t);mV("Invalid Firebase Database URL",s),jj(s.path)||ML("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=JB[t.name];i||(i={},JB[t.name]=i);var o=i[e.toURLString()];o&&ML("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new EV(e,$B,n,r),i[e.toURLString()]=o,o}(u,e,l,new nj(e.name,n));return new tK(h,e)}var tK=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return v(e,[{key:"_repo",get:function(){return this._instanceStarted||(IV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new aB(this._repo,Cj())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=JB[t];n&&n[e.key]===e||ML("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),FV(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&ML("Cannot call "+e+" on a deleted database.")}}]),e}();function nK(){_j.IS_TRANSPORT_INITIALIZED&&UL("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function rK(){nK(),yj.forceDisallow()}function iK(){nK(),wj.forceDisallow(),yj.forceAllow()}function oK(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=At(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&ML("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ML('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ij(ij.OWNER);else if(r.mockUserToken){var a="string"===typeof r.mockUserToken?r.mockUserToken:Ye(r.mockUserToken,e.app.options.projectId);o=new ij(a)}ZB(i,t,n,o)}function aK(e){(e=At(e))._checkNotDeleted("goOffline"),FV(e._repo)}function sK(e){var t;(e=At(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(SV)}function uK(e,t){OL(e,t)}var cK={".sv":"timestamp"};var lK=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return v(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function hK(e,t,n){var r;if(e=At(e),gV("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,o=new Qe,a=wB(e,(function(){}));return function(e,t,n,r,i,o){MV(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:AL(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=VV(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{hV("transaction failed: Data returned ",u,a.path),a.status=0;var c,l=XU(e.transactionQueueTree_,t),h=JU(l)||[];h.push(a),$U(l,h),"object"===typeof u&&null!==u&&ht(u,".priority")?(c=ft(u,".priority"),Ve(cV(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(EU(e.serverSyncTree_,t)||bF.EMPTY_NODE).getPriority().val();var f=CV(e),d=_F(u,c),p=GU(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=PV(e);var v=yU(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);wV(e.eventQueue_,t,v),BV(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?o.reject(t):(i=new sB(r,new aB(e._repo,e._path),pF),o.resolve(new lK(n,i)))}),a,i),o.promise}Hj.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Hj.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){_L(Nn),xn(new Dt("database",(function(e,t){var n=t.instanceIdentifier;return eK(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),jn(kL,bL,e),jn(kL,bL,"esm2017")}();var fK=new Wt("@firebase/database-compat"),dK=function(e){var t="FIREBASE WARNING: "+e;fK.warn(t)},pK=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Et(e,t)+"must be a boolean.")},vK=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Et(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},gK=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"cancel",value:function(e){St("OnDisconnect.cancel",0,1,arguments.length),It("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){St("OnDisconnect.remove",0,1,arguments.length),It("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){St("OnDisconnect.set",1,2,arguments.length),It("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){St("OnDisconnect.setWithPriority",2,3,arguments.length),It("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(St("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,dK("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}It("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),mK=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return v(e,[{key:"toJSON",value:function(){return St("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),yK=function(){function e(t,n){d(this,e),this._database=t,this._delegate=n}return v(e,[{key:"val",value:function(){return St("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return St("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return St("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return St("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return St("DataSnapshot.child",0,1,arguments.length),t=String(t),vV("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return St("DataSnapshot.hasChild",1,1,arguments.length),vV("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return St("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return St("DataSnapshot.forEach",1,1,arguments.length),It("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return St("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return St("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return St("DataSnapshot.ref",0,0,arguments.length),new bK(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),kK=function(){function e(t,n){d(this,e),this.database=t,this._delegate=n}return v(e,[{key:"on",value:function(t,n,r,i){var o,a=this;St("Query.on",2,4,arguments.length),It("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new yK(a.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return wB(this._delegate,u,c),n;case"child_added":return _B(this._delegate,u,c),n;case"child_removed":return EB(this._delegate,u,c),n;case"child_changed":return xB(this._delegate,u,c),n;case"child_moved":return SB(this._delegate,u,c),n;default:throw new Error(Et("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(St("Query.off",0,3,arguments.length),vK("Query.off",e,!0),It("Query.off","callback",t,!0),Tt("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,IB(this._delegate,e,r)}else IB(this._delegate,e)}},{key:"get",value:function(){var e=this;return mB(this._delegate).then((function(t){return new yK(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var o=this;St("Query.once",1,4,arguments.length),It("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new Qe,u=function(e,t){var r=new yK(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":wB(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":_B(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":EB(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":xB(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":SB(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Et("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return St("Query.limitToFirst",1,1,arguments.length),new e(this.database,XB(this._delegate,FB(t)))}},{key:"limitToLast",value:function(t){return St("Query.limitToLast",1,1,arguments.length),new e(this.database,XB(this._delegate,UB(t)))}},{key:"orderByChild",value:function(t){return St("Query.orderByChild",1,1,arguments.length),new e(this.database,XB(this._delegate,BB(t)))}},{key:"orderByKey",value:function(){return St("Query.orderByKey",0,0,arguments.length),new e(this.database,XB(this._delegate,qB()))}},{key:"orderByPriority",value:function(){return St("Query.orderByPriority",0,0,arguments.length),new e(this.database,XB(this._delegate,WB()))}},{key:"orderByValue",value:function(){return St("Query.orderByValue",0,0,arguments.length),new e(this.database,XB(this._delegate,GB()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.startAt",0,2,arguments.length),new e(this.database,XB(this._delegate,DB(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.startAfter",0,2,arguments.length),new e(this.database,XB(this._delegate,LB(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.endAt",0,2,arguments.length),new e(this.database,XB(this._delegate,AB(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.endBefore",0,2,arguments.length),new e(this.database,XB(this._delegate,RB(t,n)))}},{key:"equalTo",value:function(t,n){return St("Query.equalTo",1,2,arguments.length),new e(this.database,XB(this._delegate,YB(t,n)))}},{key:"toString",value:function(){return St("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return St("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(St("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new bK(this.database,new aB(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,It(e,"cancel",r.cancel,!0),r.context=n,Tt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Et(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),bK=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,new nB(r._repo,r._path,new FF,!1))).database=e,i._delegate=r,i}return v(n,[{key:"getKey",value:function(){return St("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return St("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,lB(this._delegate,e))}},{key:"getParent",value:function(){St("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return St("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){St("Reference.set",1,2,arguments.length),It("Reference.set","onComplete",t,!0);var n=dB(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(St("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,dK("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gV("Reference.update",this._delegate._path),It("Reference.update","onComplete",t,!0);var i=gB(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){St("Reference.setWithPriority",2,3,arguments.length),It("Reference.setWithPriority","onComplete",n,!0);var r=vB(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){St("Reference.remove",0,1,arguments.length),It("Reference.remove","onComplete",e,!0);var t=fB(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;St("Reference.transaction",1,3,arguments.length),It("Reference.transaction","transactionUpdate",e,!1),It("Reference.transaction","onComplete",t,!0),pK("Reference.transaction","applyLocally",n,!0);var i=hK(this._delegate,e,{applyLocally:n}).then((function(e){return new mK(e.committed,new yK(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){St("Reference.setPriority",1,2,arguments.length),It("Reference.setPriority","onComplete",t,!0);var n=pB(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;St("Reference.push",0,2,arguments.length),It("Reference.push","onComplete",t,!0);var i=hB(this._delegate,e),o=i.then((function(e){return new n(r.database,e)}));t&&o.then((function(){return t(null)}),(function(e){return t(e)}));var a=new n(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a}},{key:"onDisconnect",value:function(){return gV("Reference.onDisconnect",this._delegate._path),new gK(new tB(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(kK),wK=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:rK,forceLongPolling:iK}}return v(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oK(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(St("database.ref",0,1,arguments.length),e instanceof bK){var t=cB(this._delegate,e.toString());return new bK(this,t)}var n=uB(this._delegate,e);return new bK(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";St(t,1,1,arguments.length);var n=cB(this._delegate,e);return new bK(this,n)}},{key:"goOffline",value:function(){return St("database.goOffline",0,0,arguments.length),aK(this._delegate)}},{key:"goOnline",value:function(){return St("database.goOnline",0,0,arguments.length),sK(this._delegate)}}]),e}();wK.ServerValue={TIMESTAMP:cK,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var _K=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,s=void 0!==a&&a;_L(r);var u=new Lt("auth-internal",new Ut("database-standalone"));return u.setComponent(new Dt("auth-internal",(function(){return i}),"PRIVATE")),{instance:new wK(eK(t,u,void 0,n,s),t),namespace:o}}}),xK=wK.ServerValue;!function(e){e.INTERNAL.registerComponent(new Dt("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new wK(i,r)}),"PUBLIC").setServiceProps({Reference:bK,Query:kK,Database:wK,DataSnapshot:yK,enableLogging:uK,INTERNAL:_K,ServerValue:xK}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.6")}(ar);var SK=function(e){var t=l((0,r.useState)(null),2),n=t[0],i=t[1];console.log("useBackgroundFunc render ran again..."),console.log("instance is: ",e);var o=l((0,r.useState)("transparent"),2),a=o[0],s=o[1],u=l((0,r.useState)("transparent"),2),c=u[0],h=u[1],f=l((0,r.useState)("transparent"),2),d=f[0],p=f[1],v=l((0,r.useState)("transparent"),2),g=v[0],m=v[1];return(0,r.useEffect)((function(){if(e){console.log("instance is: ",e);var t=Zk.collection("to-do-steps").doc(e).onSnapshot(function(){var t=Pt(Nt().mark((function t(n){var r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.id!==e){t.next=3;break}return r=[],t.abrupt("return",new Promise((function(e,t){i(n.data()),console.log("got to usebckgrnd set"),"steps"in n.data()&&(r=n.data(),n.data().steps.length>0?(1===n.data().steps[0]["recipe-number"]&&(s("#ff5440"),h("transparent"),p("transparent"),m("transparent")),2===n.data().steps[0]["recipe-number"]&&(h("#ff5440"),s("transparent"),p("transparent"),m("transparent")),3===n.data().steps[0]["recipe-number"]&&(p("#ff5440"),s("transparent"),h("transparent"),m("transparent")),4===n.data().steps[0]["recipe-number"]&&(m("#ff5440"),s("transparent"),h("transparent"),p("transparent"))):(m("transparent"),s("transparent"),h("transparent"),p("transparent"))),e({to_do_steps:r,background_colour_1:a,background_colour_2:c,background_colour_3:d,background_colour_4:g})})).then((function(e){console.log("todos at background func: ",e)})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){console.log("document id passed, likely not defined"),console.log("error",e)}));return function(){return t()}}}),[e]),{toDos:n,background_colour_1:a,background_colour_2:c,background_colour_3:d,background_colour_4:g}};var EK=function(){var e=(0,r.useRef)(null),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],o=l((0,r.useState)(null),2),a=o[0],s=o[1],u=l((0,r.useState)(null),2),c=u[0],h=u[1],d=l((0,r.useState)(!1),2),p=d[0],v=d[1],g=l((0,r.useState)(0),2),m=g[0],y=g[1],k=l((0,r.useState)(0),2),b=k[0],w=k[1],_=l((0,r.useState)(4),2),x=_[0],S=(_[1],l((0,r.useState)(null),2)),E=(S[0],S[1]),I=l((0,r.useState)([]),2),T=I[0],C=I[1],A=l((0,r.useState)([]),2),N=A[0],R=A[1],P=l((0,r.useState)([]),2),D=P[0],O=P[1],L=l((0,r.useState)([]),2),j=L[0],F=L[1],M=l((0,r.useState)(null),2),U=M[0],V=M[1],B=l((0,r.useState)(null),2),K=B[0],q=B[1],z=l((0,r.useState)(null),2),W=z[0],H=z[1],G=l((0,r.useState)(null),2),Q=G[0],Y=G[1],X=l((0,r.useState)(null),2),J=X[0],$=X[1],Z=l((0,r.useState)(0),2),ee=Z[0],te=Z[1],ne=l((0,r.useState)(0),2),re=ne[0],ie=ne[1],oe=l((0,r.useState)(0),2),ae=oe[0],se=oe[1],ue=l((0,r.useState)(0),2),ce=ue[0],le=ue[1],he=l((0,r.useState)(!1),2),fe=he[0],de=he[1],pe=l((0,r.useState)(!1),2),ve=pe[0],ge=pe[1],me=l((0,r.useState)(!1),2),ye=me[0],ke=me[1],be=l((0,r.useState)(!1),2),we=be[0],_e=be[1],xe=l((0,r.useState)(!1),2),Se=xe[0],Ee=xe[1],Ie=l((0,r.useState)(0),2),Te=Ie[0],Ce=Ie[1],Ae=SK(J).background_colour_1,Ne=SK(J).background_colour_2,Re=SK(J).background_colour_3,Pe=SK(J).background_colour_4,De=l((0,r.useState)([]),2),Oe=(De[0],De[1]),Le=l((0,r.useState)(null),2),je=Le[0],Fe=Le[1],Me=SK(J).toDos,Ue=l((0,r.useState)(0),2),Ve=(Ue[0],Ue[1]),Be=l((0,r.useState)(0),2),Ke=Be[0],qe=Be[1],ze=l((0,r.useState)([]),2),We=ze[0],He=ze[1],Ge=l((0,r.useState)(-1),2),Qe=Ge[0],Ye=Ge[1],Xe=l((0,r.useState)(!1),2),Je=Xe[0],$e=Xe[1],Ze={1:{1:"#FF9F33",2:"#FEC76D",3:"#FEC76D",4:"#FEC76D"},2:{1:"#FEC76D",2:"#FF9F33",3:"#FEC76D",4:"#FEC76D"},3:{1:"#FEC76D",2:"#FEC76D",3:"#FF9F33",4:"#FEC76D"},4:{1:"#FEC76D",2:"#FEC76D",3:"#FEC76D",4:"#FF9F33"}},et=l((0,r.useState)(null),2),tt=et[0],nt=et[1],rt=l((0,r.useState)(!0),2),it=rt[0],ot=rt[1],at=l((0,r.useState)(!1),2),st=at[0],ut=at[1];function ct(e,t,n){console.log("======================================="),console.log("TIMER FUNCTION RUNNING"),console.log("======================================="),console.log(typeof e,typeof t,typeof recipe_number),setTimeout((function(){console.log("==========================================="),console.log("TIMER DONE, ABOUT TO RERUN BACKGROUND FUNC"),console.log("==========================================="),function(e,t,n){new Promise(function(){var t=Pt(Nt().mark((function t(r,i){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?Zk.collection("upcoming-recipes").doc(n).get().then((function(t){var i=t.data().info,o=0;if(console.log("recipe number at background type: ",typeof recipe_number),console.log("recipe ID is: ",n),console.log("chosen recipe is: ",n),console.log("recipe steps info at background: ",JSON.stringify(i)),console.log("step is, ",e.toString()),void 0!==t.data()&&void 0!==i){for(;o<i.length;o++)if(i[o]["step-info"]["step-dependency"].includes(e)){console.log("step is: ",e);var a=i[o]["step-info"]["step-dependency"].indexOf(e);console.log("index is: ",a.toString()),a>-1&&(console.log("removed dependency"),i[o]["step-info"]["step-dependency"].splice(a,1))}o===i.length&&(console.log("recipe ".concat(n," deletion of step: ").concat(e)),Zk.collection("upcoming-recipes").doc(n).update({info:i}).then((function(){r()})))}})):r();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(e,0,n)}),1e3*t*60),console.log("timer created for recipe",n,"of",(60*t).toString()," seconds")}return(0,r.useEffect)((function(){window.innerWidth<700&&window.alert("Please use this app on a tablet to avoid design breakages")}),[]),(0,r.useEffect)((function(){Me&&"steps"in Me&&(0===Me.steps.length&&(qe(0),Ve(0)),Me.steps.length>0&&0===Ke&&"STOVE-SECONDARY"===a&&(e.current.play(),qe(Ke+1)))}),[Me]),(0,r.useEffect)((function(){Se&&Ee(!1),console.log("I re-rendered"),console.log("to do steps: ",Me),p?(console.log("running stage complete"),"LOAD"===a?(s("RETRIEVAL"),v(!1),y(1),w(1)):"RETRIEVAL"===a?(s("PREP"),v(!1),y(1),w(1)):"PREP"===a?(s("QUEUE_NEXT_STEP"),v(!1),y(1),w(1)):"QUEUE_NEXT_STEP"===a?(s("OVEN"),v(!1),y(1),w(1)):"OVEN"===a?(s("BASE"),v(!1),y(1),w(1)):"BASE"===a?(s("PRE-HEAT"),v(!1),y(1),w(1)):"PRE-HEAT"===a?(s("STOVE-PRELIM"),v(!1),y(1),w(1)):"STOVE-PRELIM"===a?(s("STOVE-SECONDARY"),v(!1),y(1),w(1)):"STOVE-SECONDARY"===a&&(s("PACKAGE"),v(!1),y(1),w(1))):(console.log("program running"),console.log("stage is: "+a),console.log("instruction stage is: "+m),"LOAD"===a?(console.log("running load func"),Je||($e(!0),new Promise(function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk.collection("to-do-steps").add({steps:[]}).then((function(e){console.log("Document written with ID: ",e.id),s=e.id,$(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),u=e.id,V(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),c=e.id,q(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),l=e.id,H(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),h=e.id,Y(e.id)})).then((function(){Zk.collection("to-do-steps").doc(s).update({upcoming_recipe_1_FBID:u,upcoming_recipe_2_FBID:c,upcoming_recipe_3_FBID:l,upcoming_recipe_4_FBID:h})}))}))}))}))})).then((function(){Zk.collection("recipes_test").doc("1").get().then((function(e){r=e.data()})).then((function(){Zk.collection("recipes_test").doc("2").get().then((function(e){i=e.data()})).then((function(){Zk.collection("recipes_test").doc("3").get().then((function(e){o=e.data()})).then((function(){Zk.collection("recipes_test").doc("4").get().then((function(e){a=e.data()})).then((function(){r&&i&&o&&a&&(nt({1:r,2:i,3:o,4:a}),Oe([u,c,l,h]),v(!0),t())}))}))}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))):"RETRIEVAL"===a?(i(!1),console.log("program chosen: ingredientRetrieval"),console.log("starting ingredient retrieval"),console.log("recipe cycle number: ",b.toString()),m<=tt[b]["retrieval-steps"].length?(console.log("recipe: ",tt[b].name),console.log("instruction stage: ",m.toString()),console.log("instruction: ",tt[b]["retrieval-steps"][m-1].instruction),E(tt[b].name),h(tt[b]["retrieval-steps"][m-1].instruction),Fe(tt[b]["retrieval-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"PREP"===a?(console.log("program chosen: prep"),console.log("starting prep"),m<=tt[b]["prep-steps"].length?(console.log("recipe: ",tt[b].name),E(tt[b].name),h(tt[b]["prep-steps"][m-1].instruction),Fe(tt[b]["prep-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"QUEUE_NEXT_STEP"===a?(function(){var e=setInterval((function(){console.log("queue next step interval ran again..."),console.log("todosteps: ",Me);for(var t=1;t<=4;t++)1===t?Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_1_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:ar.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_1_FBID).update({info:ar.firestore.FieldValue.arrayRemove(e)})}))}()})):2===t?Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_2_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:ar.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_2_FBID).update({info:ar.firestore.FieldValue.arrayRemove(e)})}))}()})):3===t?Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_3_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:ar.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_3_FBID).update({info:ar.firestore.FieldValue.arrayRemove(e)})}))}()})):4===t&&Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_4_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:ar.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(Me.upcoming_recipe_4_FBID).update({info:ar.firestore.FieldValue.arrayRemove(e)})}))}()}))}),5e3)}(),s("OVEN")):"OVEN"===a?(console.log("program chosen: oven"),console.log("starting oven"),m-2>=0&&tt[b]["oven-steps"].length>=m-2&&0!==tt[b]["oven-steps"].length&&"duration"in tt[b]["oven-steps"][m-2]&&ct(tt[b]["oven-steps"][m-2]["step-number"],tt[b]["oven-steps"][m-2].duration,Me["upcoming_recipe_".concat(b,"_FBID")]),m<=tt[b]["oven-steps"].length?(console.log("recipe: ",tt[b].name),E(tt[b].name),h(tt[b]["oven-steps"][m-1].instruction),Fe(tt[b]["oven-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"BASE"===a?(console.log("program chosen: base"),i(!1),console.log("starting base"),m-2>=0&&tt[b]["base-steps"].length>=m-2&&0!==tt[b]["base-steps"].length&&"duration"in tt[b]["base-steps"][m-2]&&ct(tt[b]["base-steps"][m-2]["step-number"],tt[b]["base-steps"][m-2].duration,Me["upcoming_recipe_".concat(b,"_FBID")]),m<=tt[b]["base-steps"].length?(console.log("recipe: ",tt[b].name),E(tt[b].name),h(tt[b]["base-steps"][m-1].instruction),Fe(tt[b]["base-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"STOVE-PRELIM"===a?(console.log("program chosen: stove-prelim"),function(){h(null);for(var e=1;e<=Object.keys(tt).length;e++){for(var t=0,n=[];t<tt[e]["stove-steps"].length;t++)n.push({"recipe-number":tt[e]["recipe-number"],"recipe-name":tt[e].name,"step-info":tt[e]["stove-steps"][t]});1===e?(C(n),console.log("recipe 1 write"),Zk.collection("upcoming-recipes").doc(U).set({to_do_steps_instance_FBID:J,info:n})):2===e?(R(n),console.log("recipe 2 write"),Zk.collection("upcoming-recipes").doc(K).set({to_do_steps_instance_FBID:J,info:n})):3===e?(O(n),console.log("recipe 3 write"),Zk.collection("upcoming-recipes").doc(W).set({to_do_steps_instance_FBID:J,info:n})):4===e&&(F(n),console.log("recipe 4 write"),Zk.collection("upcoming-recipes").doc(Q).set({to_do_steps_instance_FBID:J,info:n}))}e===Object.keys(tt).length+1&&(Ce(Te+1),s("STOVE-SECONDARY"))}()):"STOVE-SECONDARY"===a&&(console.log("program chosen: stove-secondary"),console.log("running stove func ")))}),[Se,p,a,m,b,Me,Qe]),(0,r.useEffect)((function(){ee>0&&!fe&&function(){var e=ee;console.log("timer func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 1: ",ee.toString()),console.log("setting to now be ",(ee-1).toString()),de(!0),te((function(e){return e-1})),(e-=1)<=0)return te(0),de(!1),clearInterval(t)}),1e3)}()}),[ee]),(0,r.useEffect)((function(){re>0&&!ve&&function(){var e=re;console.log("timer2 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 2: ",re.toString()),console.log("setting to now be ",(re-1).toString()),ge(!0),ie((function(e){return e-1})),(e-=1)<=0)return ie(0),ge(!1),clearInterval(t)}),1e3)}()}),[re]),(0,r.useEffect)((function(){ae>0&&!ye&&function(){var e=ae;console.log("timer3 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 3: ",ae.toString()),console.log("setting to now be ",(ae-1).toString()),ke(!0),se((function(e){return e-1})),(e-=1)<=0)return se(0),ke(!1),clearInterval(t)}),1e3)}()}),[ae]),(0,r.useEffect)((function(){ce>0&&!we&&function(){var e=ce;console.log("timer4 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 4: ",ce.toString()),console.log("setting to now be ",(ce-1).toString()),_e(!0),le((function(e){return e-1})),(e-=1)<=0)return le(0),_e(!1),clearInterval(t)}),1e3)}()}),[ce]),null===a?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:"Please read then press Start button to begin"})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h5",{children:"This model is built on the premise that ALL the ingredients required for ALL of the meals that will be cooked, will already be chopped/grated/sliced/prepared and stored in labelled small storage cases, stored in large walk-in fridges in an industrial kitchen."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"This is done so that the chef can monitor all hobs at the same time, without having to divert their attention to chop and prepare ingredients. With this model the chef will only have to pick up the prepared ingredients and place them into the pot/pan in which the meal is being cooked on the hob - a quick step where the chef's attention is not diverted so that he/she can continue monitoring and cooking the other meals."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"Since you will be using this model at home, and won't have pre-cut and pre-prepared ingredients sitting in labelled and easily accessible storage, you will have to prepare these ingredients yourself and keep them separate (whilst keeping track of which ingredients they are and which meals they are for!)."})]})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:0===m&&0===b&&(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){s("REQUIREMENTS"),i(!0),y(m+1),w(b+1),Ee(!0)},children:" Start"})})})]}):"REQUIREMENTS"===a?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Requirements: "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"You will need: "}),(0,ib.jsxs)(fb,{children:[(0,ib.jsx)(YI,{children:"Small item organiser / 4 large plates (i)"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(YI,{children:"2 Woks/Frying Pans"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(YI,{children:"2 Pots"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(YI,{children:"4 induction hobs"})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){s("LOAD"),i(!0),y(m+1),w(b+1),Ee(!0)},children:"Next"})]}):"LOAD"===a||"RETRIEVAL"===a||"PREP"===a||"OVEN"===a||"BASE"===a?n?(0,ib.jsx)("div",{style:{display:"flex",alignItems:"center","justify-content":"center"},children:(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)($I,{animation:"border"}),(0,ib.jsx)("h2",{children:"Loading Steps..."})]})}):(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h1",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:m>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){Qe>=0?Ye(Qe-1):(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),y(m+1),He((function(e){return[{stage:a,instruction:c}].concat(f(e))})),Ee(!0))},children:"Next"})]})})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(fb,{style:{margin:"0 auto"},children:("RETRIEVAL"===a||"PREP"===a||"OVEN"===a||"BASE"===a)&&(0,ib.jsxs)(vb,{style:{height:"100%"},children:[(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][1],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[1].name]}),1===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:FI,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][2],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[2].name]}),2===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:FI,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][3],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[3].name]}),3===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:FI,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][4],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[4].name]}),4===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:FI,alt:"mixing bowl"})]})]})})}),(0,ib.jsx)(vb,{children:Qe>=0&&We.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Previous Instruction:"}),(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})})]}):"PRE-HEAT"===a?(0,ib.jsx)(fb,{children:(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Pre-Heating "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:["1. Set all stoves to low-medium heat","2. Set oven to low-medium heat"].map((function(e,t){return(0,ib.jsxs)("div",{children:[(0,ib.jsx)(YI,{children:(0,ib.jsxs)("h3",{children:[" ",e," "]},t)}),(0,ib.jsx)("br",{})]})}))}),(0,ib.jsx)(kb,{children:(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){s("STOVE-PRELIM"),y(m+1),w(b+1),Ee(!0)},children:"Next"})})]})]})}):"STOVE-SECONDARY"===a||"STOVE-PRELIM"===a?window.innerWidth<700?(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)($E,{variant:"info",onClick:function(){ut(!st)},"aria-label":"info",children:"Orientation Info"}),(0,ib.jsxs)(sC,{show:st,onClose:function(){ut(!1)},children:[(0,ib.jsx)(sC.Header,{children:"Orientation Help"}),(0,ib.jsxs)(sC.Body,{children:[(0,ib.jsxs)("h5",{children:["Set orientation of device to horizontal for ",(0,ib.jsx)("strong",{children:"horizontal"})," stove layout "]}),(0,ib.jsxs)("h5",{children:["Set orientation of device to vertical for ",(0,ib.jsx)("strong",{children:"square"})," stove layout "]})]})]}),(0,ib.jsx)("audio",{ref:e,src:UI,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:Me&&Me.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:a,instruction:Me.steps[0]}].concat(f(e))})),Me.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",ae.toString()),console.log("Duration 4: ",ce.toString()),1===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),te(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_1_FBID)),2===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),ie(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_2_FBID)),3===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),se(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_3_FBID)),4===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),le(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Me));var e=Me.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(je))}Ee(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(vb,{lg:1,md:1,sm:1,style:{border:"solid",height:.35*window.innerHeight,margin:"auto",marginBottom:"10px"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):Me?Me.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",Me.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",Me.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",Me.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})}),(0,ib.jsx)(vb,{lg:1,md:1,children:(0,ib.jsx)(fb,{children:(0,ib.jsxs)(vb,{lg:4,md:4,style:{height:.35*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ae>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ae/3600>=1?Math.floor(ae/3600):"00",":",59>=ae/60&&ae/60>=1?Math.floor(ae/60):"00",":",59>=ae%60?ae%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[j.length>0?(0,ib.jsx)("h2",{children:j[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]})]})})})]})]}):it?(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(oI,{children:(0,ib.jsx)(bI,{control:(0,ib.jsx)(jI,{checked:!it,onChange:function(){ot(!it)},name:"layout_changer"}),label:"Change to Horizontal Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:UI,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:Me&&Me.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:a,instruction:Me.steps[0]}].concat(f(e))})),Me.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",ae.toString()),console.log("Duration 4: ",ce.toString()),1===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),te(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_1_FBID)),2===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),ie(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_2_FBID)),3===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),se(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_3_FBID)),4===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),le(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Me));var e=Me.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(je))}Ee(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})})]})]}),(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ae>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ae/3600>=1?Math.floor(ae/3600):"00",":",59>=ae/60&&ae/60>=1?Math.floor(ae/60):"00",":",59>=ae%60?ae%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[j.length>0?(0,ib.jsx)("h2",{children:j[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})]})]})]})}),(0,ib.jsx)(kb,{lg:5,md:3,sm:3,style:{border:"solid",height:.8*window.innerHeight,margin:"auto"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):Me?Me.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",Me.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",Me.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",Me.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})})]})]}):(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(oI,{children:(0,ib.jsx)(bI,{control:(0,ib.jsx)(jI,{checked:it,onChange:function(){ot(!it)},name:"layout_changer"}),label:"Change to Square Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:UI,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:Me&&Me.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:a,instruction:Me.steps[0]}].concat(f(e))})),Me.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",ae.toString()),console.log("Duration 4: ",ce.toString()),1===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),te(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_1_FBID)),2===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),ie(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_2_FBID)),3===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),se(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_3_FBID)),4===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),le(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Me));var e=Me.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(je))}Ee(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(vb,{lg:1,md:1,sm:1,style:{border:"solid",height:.35*window.innerHeight,margin:"auto",marginBottom:"10px"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):Me?Me.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",Me.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",Me.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",Me.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})}),(0,ib.jsx)(vb,{lg:1,md:1,children:(0,ib.jsx)(fb,{children:(0,ib.jsxs)(vb,{lg:4,md:4,style:{height:.35*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ae>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ae/3600>=1?Math.floor(ae/3600):"00",":",59>=ae/60&&ae/60>=1?Math.floor(ae/60):"00",":",59>=ae%60?ae%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[j.length>0?(0,ib.jsx)("h2",{children:j[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]})]})})})]})]}):void 0},IK=(n.p,n.p,n.p+"static/media/chopping_board3.31fc193ddeb1e6186456.jpeg");var TK=function(){var e=(0,r.useRef)(null),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],o=l((0,r.useState)(null),2),a=o[0],s=o[1],u=l((0,r.useState)(null),2),c=u[0],h=u[1],d=l((0,r.useState)(!1),2),p=d[0],v=d[1],g=l((0,r.useState)(0),2),m=g[0],y=g[1],k=l((0,r.useState)(0),2),b=k[0],w=k[1],_=l((0,r.useState)(4),2),x=_[0],S=(_[1],l((0,r.useState)(null),2)),E=(S[0],S[1]),I=l((0,r.useState)([]),2),T=I[0],C=I[1],A=l((0,r.useState)([]),2),N=A[0],R=A[1],P=l((0,r.useState)([]),2),D=P[0],O=P[1],L=l((0,r.useState)([]),2),j=L[0],F=L[1],M=l((0,r.useState)(null),2),U=M[0],V=M[1],B=l((0,r.useState)(null),2),K=B[0],q=B[1],z=l((0,r.useState)(null),2),W=z[0],H=z[1],G=l((0,r.useState)(null),2),Q=G[0],Y=G[1],X=l((0,r.useState)(null),2),J=X[0],$=X[1],Z=l((0,r.useState)(0),2),ee=Z[0],te=Z[1],ne=l((0,r.useState)(0),2),re=ne[0],ie=ne[1],oe=l((0,r.useState)(0),2),ae=oe[0],se=oe[1],ue=l((0,r.useState)(0),2),ce=ue[0],le=ue[1],he=l((0,r.useState)(!1),2),fe=he[0],de=he[1],pe=l((0,r.useState)(!1),2),ve=pe[0],ge=pe[1],me=l((0,r.useState)(!1),2),ye=me[0],ke=me[1],be=l((0,r.useState)(!1),2),we=be[0],_e=be[1],xe=l((0,r.useState)(!1),2),Se=xe[0],Ee=xe[1],Ie=l((0,r.useState)(0),2),Te=Ie[0],Ce=Ie[1],Ae=SK(J).background_colour_1,Ne=SK(J).background_colour_2,Re=SK(J).background_colour_3,Pe=SK(J).background_colour_4,De=l((0,r.useState)([]),2),Oe=(De[0],De[1]),Le=l((0,r.useState)(null),2),je=Le[0],Fe=Le[1],Me=SK(J).toDos,Ue=l((0,r.useState)(0),2),Ve=(Ue[0],Ue[1]),Be=l((0,r.useState)(0),2),Ke=Be[0],qe=Be[1],ze=l((0,r.useState)([]),2),We=ze[0],He=ze[1],Ge=l((0,r.useState)(-1),2),Qe=Ge[0],Ye=Ge[1],Xe=l((0,r.useState)(!1),2),Je=Xe[0],$e=Xe[1],Ze=l((0,r.useState)(null),2),et=Ze[0],tt=Ze[1],nt={1:{1:"#FF9F33",2:"#FEC76D",3:"#FEC76D",4:"#FEC76D"},2:{1:"#FEC76D",2:"#FF9F33",3:"#FEC76D",4:"#FEC76D"},3:{1:"#FEC76D",2:"#FEC76D",3:"#FF9F33",4:"#FEC76D"},4:{1:"#FEC76D",2:"#FEC76D",3:"#FEC76D",4:"#FF9F33"}},rt=l((0,r.useState)(!0),2),it=rt[0],ot=rt[1],at=l((0,r.useState)(!1),2),st=at[0],ut=at[1];function ct(e,t,n){console.log("======================================="),console.log("TIMER FUNCTION RUNNING"),console.log("======================================="),console.log(typeof e,typeof t,typeof recipe_number),setTimeout((function(){console.log("==========================================="),console.log("TIMER DONE, ABOUT TO RERUN BACKGROUND FUNC"),console.log("==========================================="),function(e,t,n){new Promise(function(){var t=Pt(Nt().mark((function t(r,i){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?Zk.collection("upcoming-recipes").doc(n).get().then((function(t){var i=t.data().info,o=0;if(console.log("recipe number at background type: ",typeof recipe_number),console.log("recipe ID is: ",n),console.log("chosen recipe is: ",n),console.log("recipe steps info at background: ",JSON.stringify(i)),console.log("step is, ",e.toString()),void 0!==t.data()&&void 0!==i){for(;o<i.length;o++)if(i[o]["step-info"]["step-dependency"].includes(e)){console.log("step is: ",e);var a=i[o]["step-info"]["step-dependency"].indexOf(e);console.log("index is: ",a.toString()),a>-1&&(console.log("removed dependency"),i[o]["step-info"]["step-dependency"].splice(a,1))}o===i.length&&Zk.collection("upcoming-recipes").doc(n).update({info:i}).then((function(){r()}))}})):r();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(e,0,n)}),1e3*t*60),console.log("timer created for recipe",n,"of",(60*t).toString()," seconds")}return(0,r.useEffect)((function(){window.innerWidth<700&&window.alert("Please use this app on a tablet to avoid design breakages")}),[]),(0,r.useEffect)((function(){Me&&"steps"in Me&&(0===Me.steps.length&&(qe(0),Ve(0)),Me.steps.length>0&&0===Ke&&"STOVE-SECONDARY"===a&&(e.current.play(),qe(Ke+1)))}),[Me]),(0,r.useEffect)((function(){Se&&Ee(!1),console.log("I re-rendered"),console.log("to do steps: ",Me),p?(console.log("running stage complete"),"LOAD"===a?(s("RETRIEVAL"),v(!1),y(1),w(1)):"RETRIEVAL"===a?(s("PREP"),v(!1),y(1),w(1)):"PREP"===a?(s("QUEUE_NEXT_STEP"),v(!1),y(1),w(1)):"QUEUE_NEXT_STEP"===a?(s("OVEN"),v(!1),y(1),w(1)):"OVEN"===a?(s("BASE"),v(!1),y(1),w(1)):"BASE"===a?(s("PRE-HEAT"),v(!1),y(1),w(1)):"PRE-HEAT"===a?(s("STOVE-PRELIM"),v(!1),y(1),w(1)):"STOVE-PRELIM"===a?(s("STOVE-SECONDARY"),v(!1),y(1),w(1)):"STOVE-SECONDARY"===a&&(s("PACKAGE"),v(!1),y(1),w(1))):(console.log("program running"),console.log("stage is: "+a),console.log("instruction stage is: "+m),"LOAD"===a?(console.log("running load func"),Je||($e(!0),new Promise(function(){var e=Pt(Nt().mark((function e(t,n){var r,i,o,a,s,u,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk.collection("to-do-steps").add({steps:[]}).then((function(e){console.log("To do steps Document written with ID: ",e.id),s=e.id,$(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes1 Document written with ID: ",e.id),u=e.id,V(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes2 Document written with ID: ",e.id),c=e.id,q(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes3 Document written with ID: ",e.id),l=e.id,H(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes4 Document written with ID: ",e.id),h=e.id,Y(e.id)})).then((function(){Zk.collection("to-do-steps").doc(s).update({upcoming_recipe_1_FBID:u,upcoming_recipe_2_FBID:c,upcoming_recipe_3_FBID:l,upcoming_recipe_4_FBID:h})}))}))}))}))})).then((function(){Zk.collection("recipes").doc("1").get().then((function(e){r=e.data()})).then((function(){Zk.collection("recipes").doc("2").get().then((function(e){i=e.data()})).then((function(){Zk.collection("recipes").doc("3").get().then((function(e){o=e.data()})).then((function(){Zk.collection("recipes").doc("4").get().then((function(e){a=e.data()})).then((function(){r&&i&&o&&a&&(tt({1:r,2:i,3:o,4:a}),Oe([U,K,W,Q]),v(!0),t())}))}))}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))):"RETRIEVAL"===a?(i(!1),console.log("program chosen: ingredientRetrieval"),console.log(Q),console.log("starting ingredient retrieval"),console.log("recipe cycle number: ",b.toString()),m<=et[b]["retrieval-steps"].length?(console.log("recipe: ",et[b].name),console.log("instruction stage: ",m.toString()),console.log("instruction: ",et[b]["retrieval-steps"][m-1].instruction),E(et[b].name),h(et[b]["retrieval-steps"][m-1].instruction),Fe(et[b]["retrieval-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"PREP"===a?(console.log("program chosen: prep"),console.log("starting prep"),m<=et[b]["prep-steps"].length?(console.log("recipe: ",et[b].name),E(et[b].name),h(et[b]["prep-steps"][m-1].instruction),Fe(et[b]["prep-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"QUEUE_NEXT_STEP"===a?s("OVEN"):"OVEN"===a?(console.log("program chosen: oven"),console.log("starting oven"),m-2>=0&&et[b]["oven-steps"].length>=m-2&&0!==et[b]["oven-steps"].length&&"duration"in et[b]["oven-steps"][m-2]&&ct(et[b]["oven-steps"][m-2]["step-number"],et[b]["oven-steps"][m-2].duration,Me["upcoming_recipe_".concat(b,"_FBID")]),m<=et[b]["oven-steps"].length?(console.log("recipe: ",et[b].name),E(et[b].name),h(et[b]["oven-steps"][m-1].instruction),Fe(et[b]["oven-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"BASE"===a?(console.log("program chosen: base"),i(!1),console.log("starting base"),m-2>=0&&et[b]["base-steps"].length>=m-2&&0!==et[b]["base-steps"].length&&"duration"in et[b]["base-steps"][m-2]&&ct(et[b]["base-steps"][m-2]["step-number"],et[b]["base-steps"][m-2].duration,Me["upcoming_recipe_".concat(b,"_FBID")]),m<=et[b]["base-steps"].length?(console.log("recipe: ",et[b].name),E(et[b].name),h(et[b]["base-steps"][m-1].instruction),Fe(et[b]["base-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"STOVE-PRELIM"===a?(console.log("program chosen: stove-prelim"),function(){h(null);for(var e=1;e<=Object.keys(et).length;e++){for(var t=0,n=[];t<et[e]["stove-steps"].length;t++)n.push({"recipe-number":et[e]["recipe-number"],"recipe-name":et[e].name,"step-info":et[e]["stove-steps"][t]});1===e?(C(n),Zk.collection("upcoming-recipes").doc(U).set({to_do_steps_instance_FBID:J,info:n})):2===e?(R(n),Zk.collection("upcoming-recipes").doc(K).set({to_do_steps_instance_FBID:J,info:n})):3===e?(O(n),Zk.collection("upcoming-recipes").doc(W).set({to_do_steps_instance_FBID:J,info:n})):4===e&&(F(n),Zk.collection("upcoming-recipes").doc(Q).set({to_do_steps_instance_FBID:J,info:n}))}e===Object.keys(et).length+1&&(Ce(Te+1),s("STOVE-SECONDARY"))}()):"STOVE-SECONDARY"===a&&console.log("program chosen: stove-secondary"))}),[Se,p,a,m,b,Me,Qe]),(0,r.useEffect)((function(){ee>0&&!fe&&function(){var e=ee;console.log("timer func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 1: ",ee.toString()),console.log("setting to now be ",(ee-1).toString()),de(!0),te((function(e){return e-1})),(e-=1)<=0)return te(0),de(!1),clearInterval(t)}),1e3)}()}),[ee]),(0,r.useEffect)((function(){re>0&&!ve&&function(){var e=re;console.log("timer2 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 2: ",re.toString()),console.log("setting to now be ",(re-1).toString()),ge(!0),ie((function(e){return e-1})),(e-=1)<=0)return ie(0),ge(!1),clearInterval(t)}),1e3)}()}),[re]),(0,r.useEffect)((function(){ae>0&&!ye&&function(){var e=ae;console.log("timer3 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 3: ",ae.toString()),console.log("setting to now be ",(ae-1).toString()),ke(!0),se((function(e){return e-1})),(e-=1)<=0)return se(0),ke(!1),clearInterval(t)}),1e3)}()}),[ae]),(0,r.useEffect)((function(){ce>0&&!we&&function(){var e=ce;console.log("timer4 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 4: ",ce.toString()),console.log("setting to now be ",(ce-1).toString()),_e(!0),le((function(e){return e-1})),(e-=1)<=0)return le(0),_e(!1),clearInterval(t)}),1e3)}()}),[ce]),null===a?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:"Please read then press Start button to begin"})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h5",{children:"This model is built on the premise that ALL the ingredients required for ALL of the meals that will be cooked, will already be chopped/grated/sliced/prepared and stored in labelled small storage cases, stored in large walk-in fridges in an industrial kitchen."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"This is done so that the chef can monitor all hobs at the same time, without having to divert their attention to chop and prepare ingredients. With this model the chef will only have to pick up the prepared ingredients and place them into the pot/pan in which the meal is being cooked on the hob - a quick step where the chef's attention is not diverted so that he/she can continue monitoring and cooking the other meals."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"Since you will be using this model at home, and won't have pre-cut and pre-prepared ingredients sitting in labelled and easily accessible storage, you will have to prepare these ingredients yourself and keep them separate (whilst keeping track of which ingredients they are and which meals they are for!)."})]})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:0===m&&0===b&&(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){s("REQUIREMENTS"),i(!0),y(m+1),w(b+1),Ee(!0)},children:" Start"})})})]}):"REQUIREMENTS"===a?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Requirements: "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"You will need: "}),(0,ib.jsxs)(fb,{children:[(0,ib.jsx)(YI,{children:"Small item organiser / 4 large plates (i)"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(YI,{children:"2 Woks/Frying Pans"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(YI,{children:"2 Pots"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(YI,{children:"4 induction hobs"})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){s("LOAD"),i(!0),y(m+1),w(b+1),Ee(!0)},children:"Next"})]}):"PRE-HEAT"===a?(0,ib.jsx)(fb,{children:(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Pre-Heating "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:["1. Set all stoves to low-medium heat","2. Set oven to low-medium heat"].map((function(e,t){return(0,ib.jsxs)("div",{children:[(0,ib.jsx)(YI,{children:(0,ib.jsxs)("h3",{children:[" ",e," "]},t)}),(0,ib.jsx)("br",{})]})}))}),(0,ib.jsx)(kb,{children:(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){s("STOVE-PRELIM"),y(m+1),w(b+1),Ee(!0)},children:"Next"})})]})]})}):"LOAD"===a||"RETRIEVAL"===a||"PREP"===a||"OVEN"===a||"BASE"===a?n?(0,ib.jsx)("div",{style:{display:"flex",alignItems:"center","justify-content":"center"},children:(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)($I,{animation:"border"}),(0,ib.jsx)("h2",{children:"Loading Steps..."})]})}):(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h1",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:m>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){Qe>=0?Ye(Qe-1):(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),y(m+1),He((function(e){return[{stage:a,instruction:c}].concat(f(e))})),Ee(!0))},children:"Next"})]})})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(fb,{style:{margin:"0 auto"},children:("RETRIEVAL"===a||"PREP"===a||"OVEN"===a||"BASE"===a)&&(0,ib.jsxs)(vb,{style:{height:"100%"},children:[(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][1],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[1].name]}),1===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:IK,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][2],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[2].name]}),2===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:IK,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][3],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[3].name]}),3===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:IK,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][4],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[4].name]}),4===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:IK,alt:"mixing bowl"})]})]})})})]}):"STOVE-SECONDARY"===a||"STOVE-PRELIM"===a?window.innerWidth<700?(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)($E,{variant:"info",onClick:function(){ut(!st)},"aria-label":"info",children:"Orientation Info"}),(0,ib.jsxs)(sC,{show:st,onClose:function(){ut(!1)},children:[(0,ib.jsx)(sC.Header,{children:"Orientation Help"}),(0,ib.jsxs)(sC.Body,{children:[(0,ib.jsxs)("h5",{children:["Set orientation of device to horizontal for ",(0,ib.jsx)("strong",{children:"horizontal"})," stove layout "]}),(0,ib.jsxs)("h5",{children:["Set orientation of device to vertical for ",(0,ib.jsx)("strong",{children:"square"})," stove layout "]})]})]}),(0,ib.jsx)("audio",{ref:e,src:UI,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:Me&&Me.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:a,instruction:Me.steps[0]}].concat(f(e))})),Me.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",ae.toString()),console.log("Duration 4: ",ce.toString()),1===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),te(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_1_FBID)),2===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),ie(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_2_FBID)),3===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),se(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_3_FBID)),4===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),le(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Me));var e=Me.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(je))}Ee(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(vb,{lg:1,md:1,sm:1,style:{border:"solid",height:.35*window.innerHeight,margin:"auto",marginBottom:"10px"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):Me?Me.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",Me.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",Me.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",Me.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})}),(0,ib.jsx)(vb,{lg:1,md:1,children:(0,ib.jsx)(fb,{children:(0,ib.jsxs)(vb,{lg:4,md:4,style:{height:.35*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ae>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ae/3600>=1?Math.floor(ae/3600):"00",":",59>=ae/60&&ae/60>=1?Math.floor(ae/60):"00",":",59>=ae%60?ae%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[j.length>0?(0,ib.jsx)("h2",{children:j[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]})]})})})]})]}):it?(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(oI,{children:(0,ib.jsx)(bI,{control:(0,ib.jsx)(jI,{checked:!it,onChange:function(){ot(!it)},name:"layout_changer"}),label:"Change to Horizontal Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:UI,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:Me&&Me.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:a,instruction:Me.steps[0]}].concat(f(e))})),Me.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",ae.toString()),console.log("Duration 4: ",ce.toString()),1===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),te(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_1_FBID)),2===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),ie(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_2_FBID)),3===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),se(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_3_FBID)),4===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),le(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Me));var e=Me.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(je))}Ee(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})})]})]}),(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ae>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ae/3600>=1?Math.floor(ae/3600):"00",":",59>=ae/60&&ae/60>=1?Math.floor(ae/60):"00",":",59>=ae%60?ae%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[j.length>0?(0,ib.jsx)("h2",{children:j[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:MI,alt:"black stove"})]})]})]})}),(0,ib.jsx)(kb,{lg:5,md:3,sm:3,style:{border:"solid",height:.8*window.innerHeight,margin:"auto"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):Me?Me.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",Me.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",Me.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",Me.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})})]})]}):(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(oI,{children:(0,ib.jsx)(bI,{control:(0,ib.jsx)(jI,{checked:it,onChange:function(){ot(!it)},name:"layout_changer"}),label:"Change to Square Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:UI,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",a]})}),(0,ib.jsx)(kb,{children:Me&&Me.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)($E,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:a,instruction:Me.steps[0]}].concat(f(e))})),Me.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",ae.toString()),console.log("Duration 4: ",ce.toString()),1===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),te(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_1_FBID)),2===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),ie(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_2_FBID)),3===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),se(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_3_FBID)),4===Me.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Me.steps[0]["step-info"].duration.toString()),le(60*Me.steps[0]["step-info"].duration),ct(Me.steps[0]["step-info"]["step-number"],Me.steps[0]["step-info"].duration,Me.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Me));var e=Me.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(je))}Ee(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(vb,{lg:1,md:1,sm:1,style:{border:"solid",height:.35*window.innerHeight,margin:"auto",marginBottom:"10px"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):Me?Me.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",Me.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",Me.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",Me.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})}),(0,ib.jsx)(vb,{lg:1,md:1,children:(0,ib.jsx)(fb,{children:(0,ib.jsxs)(vb,{lg:4,md:4,style:{height:.35*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ae>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ae/3600>=1?Math.floor(ae/3600):"00",":",59>=ae/60&&ae/60>=1?Math.floor(ae/60):"00",":",59>=ae%60?ae%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[j.length>0?(0,ib.jsx)("h2",{children:j[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:MI,alt:"black stove"})]})]})})})]})]}):void 0};var CK=function(){return(0,r.useEffect)((function(){})),(0,ib.jsx)("div",{className:"App",children:(0,ib.jsx)(De,{children:(0,ib.jsxs)(Te,{children:[(0,ib.jsx)(Ee,{path:"/",element:(0,ib.jsx)(bb,{})}),(0,ib.jsx)(Ee,{path:"/demo",element:(0,ib.jsx)(EK,{})}),(0,ib.jsx)(Ee,{path:"/actual",element:(0,ib.jsx)(TK,{})})]})})})},AK=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))},NK=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function RK(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.createRoot(document.getElementById("root")).render((0,ib.jsx)(r.StrictMode,{children:(0,ib.jsx)(CK,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");NK?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):RK(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):RK(t,e)}))}}(),AK()}()}();
//# sourceMappingURL=main.80dad820.js.map