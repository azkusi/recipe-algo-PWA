/*! For license information please see main.8a637076.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),g=0;g<o.length;++g){var m=o[g];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var y=f(n,m);try{c(t,m,y)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){J(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ie(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ke(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ze(i),e;if(o===r)return ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,It,Et=!1,Tt=[],Ct=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Pt.forEach(Ut),Rt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Kt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,zt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(zt){var i=Yt(e,t,n,r);if(null===i)zr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&zr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),gn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return Sn}var En=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){jr(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Ir(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Ar=Ir("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Er:case Tr:case Cr:u=mn;break;case Ar:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ke(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Xn;else if(zn(s))if(Jn)g=or;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(y=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Kn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),y?k.data=y:null!==(y=Bn(n))&&(k.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Re(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Re(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Re(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,gi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ii(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ai=Si(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(Ai),Ii(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ei(Ci,e),Ei(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(Ci),Ei(Ci,e)):Ii(Ai),Ei(Ai,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function Ki(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,Ki),i}finally{kt=t,Vi=!1}}return null}var qi=[],zi=0,Wi=null,Hi=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){qi[zi++]=Hi,qi[zi++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--zi],qi[zi]=null,Hi=qi[--zi],qi[zi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function _a(e){var t=ma.current;Ii(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ka(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Ri(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,g=null;null!==h&&v<s.length;v++){h.index>v?(g=h,h=null):g=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=g}if(v===s.length)return n(i,h),ia&&$i(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&$i(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(g=p(h,i,v,s[v],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),ia&&$i(i,v),c}function g(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,g),null===h?l=k:h.sibling=k,h=k,v=m}if(y.done)return n(i,v),ia&&$i(i,g),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,g),null===h?l=y:h.sibling=y,h=y);return ia&&$i(i,g),l}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&$i(i,g),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Oc(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,u)).return=r,r=a}return s(r);case R:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return g(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),$a={},Za=Si($a),eo=Si($a),to=Si($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ei(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,go=null,mo=null,yo=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=go=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==go&&null!==go.next,po=0,mo=go=vo=null,yo=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===go){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Ko(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function zo(e,t){return Ko(2048,8,e,t)}function Wo(e,t){return Ko(4,2,e,t)}function Ho(e,t){return Ko(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ko(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ia,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ia,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Au.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:zo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return $o(To(),go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:zo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:$o(t,go.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zu||(zu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Io(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Is(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Du,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Du,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Du,Ru),Ru|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Du,Ru),Ru|=r;return ws(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Io(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Cs(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)qs(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Pi(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&za(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Na||Ka(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ga(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ia(u):u=Pi(t,u=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&za(t,o,r,u),Na=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||Ka(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),zs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Ds,Os,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):js(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nc(r,e,i,-1))}return vc(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),(t=js(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ks(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ri(t.type)&&Di(),Hs(t),null;case 3:return r=t.stateNode,io(),Ii(Ai),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Rs(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ge(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ii(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ou&&(Ou=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&Kr(t.stateNode.containerInfo),Hs(t),null;case 10:return _a(t.type._context),Hs(t),null;case 19:if(Ii(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Ku&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*Je()-o.renderingStartTime>Ku&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ai),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Kt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(g){Sc(e,e.return,g)}try{nu(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ge(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Je())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,vu(t,e),Xs=l):vu(t,e),mu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for($s=e,h=e.child;null!==h;){for(f=$s=h;null!==$s;){switch(p=(d=$s).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,$s=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var i=$s,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=o,(Xs=u)&&!c)for($s=i;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,$s=u):_u(i);for(;null!==a;)$s=a,ku(a,t,n),a=a.sibling;$s=i,Ys=s,Xs=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$s=a):bu(e)}}function bu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ga(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Kt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&iu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function _u(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var xu,Su=Math.ceil,Iu=b.ReactCurrentDispatcher,Eu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Cu=0,Au=null,Nu=null,Pu=0,Ru=0,Du=Si(0),Ou=0,Lu=null,Mu=0,Fu=0,ju=0,Uu=null,Vu=null,Bu=0,Ku=1/0,qu=null,zu=!1,Wu=null,Hu=null,Gu=!1,Qu=null,Yu=0,Xu=0,Ju=null,$u=-1,Zu=0;function ec(){return 0!==(6&Cu)?Je():-1!==$u?$u:$u=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));mt(e,n,r),0!==(2&Cu)&&e===Au||(e===Au&&(0===(2&Cu)&&(Fu|=n),4===Ou&&sc(e,Pu)),rc(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(Ku=Je()+500,Ui&&Ki()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Au?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===(6&Cu)&&Ki()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($u=-1,Zu=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===Au?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cu;Cu|=2;var o=pc();for(Au===e&&Pu===t||(qu=null,Ku=Je()+500,fc(e,t));;)try{yc();break}catch(u){dc(e,u)}wa(),Iu.current=o,Cu=i,null!==Nu?t=0:(Au=null,Pu=0,t=Ou)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vu,qu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bu+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,qu),t);break}wc(e,Vu,qu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,qu),r);break}wc(e,Vu,qu);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vu,Vu=n,null!==t&&oc(t)),e}function oc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~ju,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Cu))throw Error(a(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,qu),rc(e,Je()),null}function cc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Ku=Je()+500,Ui&&Ki())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Cu)&&_c();var t=Cu;Cu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Cu=t))&&Ki()}}function hc(){Ru=Du.current,Ii(Du)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ii(Ai),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Nu=e=Dc(e.current,null),Pu=Ru=t,Ou=0,Lu=null,ju=Fu=Mu=0,Vu=Uu=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=Nu;try{if(wa(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,mo=go=vo=null,ko=!1,bo=0,Eu.current=null,null===n||null===n.return){Ou=1,Lu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}if(0===(1&t)){gs(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Ou&&(Ou=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pc(){var e=Iu.current;return Iu.current=os,null===e?os:e}function vc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Au||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Au,Pu)}function gc(e,t){var n=Cu;Cu|=2;var r=pc();for(Au===e&&Pu===t||(qu=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cu=n,Iu.current=r,null!==Nu)throw Error(a(261));return Au=null,Pu=0,Ou}function mc(){for(;null!==Nu;)kc(Nu)}function yc(){for(;null!==Nu&&!Ye();)kc(Nu)}function kc(e){var t=xu(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?bc(e):Nu=t,Eu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ru)))return void(Nu=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Ou=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Ou&&(Ou=5)}function wc(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Nu=Au=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Cu;Cu|=4,Eu.current=null,function(e,t){if(ei=zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=tu,tu=!1}(e,n),gu(n,e),pr(ti),zt=!!ei,ti=ei=null,e.current=n,yu(n,e,i),Xe(),Cu=u,kt=s,Tu.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Yu=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(zu)throw zu=!1,e=Wu,Wu=null,e;0!==(1&Yu)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Ki()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function _c(){if(null!==Qu){var e=bt(Yu),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,$s=f;else for(;null!==$s;){var d=(h=$s).sibling,p=h.return;if(au(h),h===l){$s=null;break}if(null!==d){d.return=p,$s=d;break}$s=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var k=e.current;for($s=k;null!==$s;){var b=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,$s=b;else e:for(s=k;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){Sc(u,u.return,_)}if(u===s){$s=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,$s=w;break e}$s=u.return}}if(Cu=i,Ki(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Pu&n)===n&&(4===Ou||3===Ou&&(130023424&Pu)===Pu&&500>Je()-Bu?fc(e,0):ju|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Aa(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Ac(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:s=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case C:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Kc(e){if(!e)return Ti;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=Kc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ei(so,1&so.current),null!==(e=zs(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ks(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,n)}return zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ga(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ga(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=zs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ia(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ga(r=t.type,t.pendingProps),xs(e,t,r,i=ga(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ga(r,i),qs(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Wa(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Ks(e,t,n);case 22:return Is(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Kr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Kr(8===e.nodeType?e.parentNode:e),lc((function(){zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){zc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&Cu)&&(Ku=Je()+500,Ki()))}break;case 13:lc((function(){var t=Aa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Aa(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},St=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Kr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Kr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=k.prototype=new y;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=A(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(g=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,g&&(g=!1,y(E),E=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,I=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(S=!1,I=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function D(e){I=e,S||(S=!0,x())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(g?(y(E),E=-1):g=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".c3d17fa1.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="recipe-algo:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkrecipe_algo=self.webpackChunkrecipe_algo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return it},SDK_VERSION:function(){return Nn},_DEFAULT_ENTRY_NAME:function(){return mn},_addComponent:function(){return wn},_addOrOverwriteComponent:function(){return _n},_apps:function(){return kn},_clearComponents:function(){return En},_components:function(){return bn},_getProvider:function(){return Sn},_registerComponent:function(){return xn},_removeServiceInstance:function(){return In},deleteApp:function(){return On},getApp:function(){return Rn},getApps:function(){return Dn},initializeApp:function(){return Pn},onLog:function(){return Fn},registerVersion:function(){return Mn},setLogLevel:function(){return jn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||u(e,t)||c()}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function x(e){var t=k();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function S(e,t,n){return S=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},S.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},I(e)}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var T,C="popstate";function A(e){return{usr:e.state,key:e.key}}function N(e,t,n,r){return void 0===n&&(n=null),E({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?R(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function R(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,h=t.Pop,f=null;function d(){h=t.Pop,f&&f({action:h,location:p.location})}var p={get action(){return h},get location(){return e(s,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(C,d),f=e,function(){s.removeEventListener(C,d),f=null}},createHref:function(e){return n(s,e)},push:function(e,n){h=t.Push;var i=N(p.location,e,n);r&&r(i,e);var a=A(i),o=p.createHref(i);try{l.pushState(a,"",o)}catch(TO){s.location.assign(o)}c&&f&&f({action:h,location:i})},replace:function(e,n){h=t.Replace;var i=N(p.location,e,n);r&&r(i,e);var a=A(i),o=p.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:i})},go:function(e){return l.go(e)}};return p}function O(e,t,n){void 0===n&&(n="/");var r=B(("string"===typeof t?R(t):t).pathname||"/",n);if(null==r)return null;var i=L(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=U(i[o],r);return a}function L(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(K(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=W([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(K(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),L(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));var M=/^:\w+$/,F=function(e){return"*"===e};function j(e,t){var n=e.split("/"),r=n.length;return n.some(F)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!F(e)})).reduce((function(e,t){return e+(M.test(t)?3:""===t?1:10)}),r)}function U(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=V({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:W([i,l.pathname]),pathnameBase:H(W([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=W([i,l.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(TO){return q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+TO+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function K(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function z(e,t,n,r){void 0===r&&(r=!1);var i,a="string"===typeof e?R(e):E({},e),o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;a.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?R(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:G(a),hash:Q(s)}}(a,i),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var W=function(e){return e.join("/").replace(/\/\/+/g,"/")},H=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},G=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Q=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Y=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(I(Error));var X=v((function e(t,n,r){d(this,e),this.status=t,this.statusText=n||"",this.data=r}));function J(e){return e instanceof X}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}var Z="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ee=r.useState,te=r.useEffect,ne=r.useLayoutEffect,re=r.useDebugValue;function ie(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Z(n,r)}catch(TO){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var ae=r.createContext(null);var oe=r.createContext(null);var se=r.createContext(null);var ue=r.createContext(null);var ce=r.createContext(null);var le=r.createContext(null);var he=r.createContext({outlet:null,matches:[]});var fe=r.createContext(null);function de(){return null!=r.useContext(le)}function pe(){return de()||K(!1),r.useContext(le).location}function ve(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function ge(){de()||K(!1);var e=r.useContext(ce),t=e.basename,n=e.navigator,i=r.useContext(he).matches,a=pe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var u=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=z(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:W([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return u}function me(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(he).matches,a=pe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return z(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function ye(){var e=function(){var e,t=r.useContext(fe),n=xe(ke.UseRouteError),i=r.useContext(he),a=i.matches[i.matches.length-1];if(t)return t;return i||K(!1),!a.route.id&&K(!1),null==(e=n.errors)?void 0:e[a.route.id]}(),t=J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:o},"errorElement")," props on\xa0",r.createElement("code",{style:o},"<Route>")))}var ke,be=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return v(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(fe.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function we(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ae);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),r.createElement(he.Provider,{value:t},i)}function _e(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||K(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(ye,null):null,l=function(){return r.createElement(we,{match:o,routeContext:{outlet:e,matches:t.concat(i.slice(0,s+1))}},u?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===s)?r.createElement(be,{location:n.location,component:c,error:u,children:l()}):l()}),null)}function xe(e){var t=r.useContext(se);return t||K(!1),t}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ke||(ke={}));var Se;function Ie(e){K(!1)}function Ee(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;de()&&K(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=R(s));var v=s,g=v.pathname,m=void 0===g?"/":g,y=v.search,k=void 0===y?"":y,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,S=v.key,I=void 0===S?"default":S,E=r.useMemo((function(){var e=B(m,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:I}}),[d,m,k,w,x,I]);return null==E?null:r.createElement(ce.Provider,{value:p},r.createElement(le.Provider,{children:o,value:{location:E,navigationType:c}}))}function Te(e){var n=e.children,i=e.location,a=r.useContext(oe);return function(e,n){de()||K(!1);var i,a=r.useContext(se),o=r.useContext(he).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,pe());if(n){var h,f="string"===typeof n?R(n):n;"/"===c||(null==(h=f.pathname)?void 0:h.startsWith(c))||K(!1),i=f}else i=l;var d=i.pathname||"/",p=O(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=_e(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:W([c,e.pathname]),pathnameBase:"/"===e.pathnameBase?c:W([c,e.pathnameBase])})})),o,a||void 0);return n?r.createElement(le.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},v):v}(a&&!n?a.router.routes:Ae(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Se||(Se={}));var Ce=new Promise((function(){}));r.Component;function Ae(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Ie&&K(!1);var a=[].concat(f(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=Ae(e.props.children,a)),n.push(o)}else n.push.apply(n,Ae(e.props.children,t))})),n}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function De(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),D((function(e,t){var n=e.location;return N("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:P(t)}),null,t)));var s=o.current,u=l(r.useState({action:s.action,location:s.location}),2),c=u[0],h=u[1];return r.useLayoutEffect((function(){return s.listen(h)}),[s]),r.createElement(Ee,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:s})}var Oe=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,h=Pe(e,Re),f=function(e,t){var n=(void 0===t?{}:t).relative;de()||K(!1);var i=r.useContext(ce),a=i.basename,o=i.navigator,s=me(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:W([a,c])),o.createHref({pathname:h,search:l,hash:u})}(c,{relative:i}),d=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=ge(),l=pe(),h=me(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:P(l)===P(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,h,a,o,i,e,s,u])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return r.createElement("a",Ne({},h,{href:f,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:u}))}));function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var Fe=!1,je=!1,Ue="${JSCORE_VERSION}",Ve=function(e,t){if(!e)throw Be(t)},Be=function(e){return new Error("Firebase Database ("+Ue+") INTERNAL ASSERT FAILED: "+e)},Ke=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ke(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ze=function(e){var t=Ke(e);return qe.encodeByteArray(t,!0)},We=function(e){return ze(e).replace(/\./g,"")},He=function(e){try{return qe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ge(e[n],t[n]));return e}var Qe=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ye(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(a)),""].join(".")}function Xe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function $e(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ze(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function et(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function tt(){var e=Xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nt(){return!0===Fe||!0===je}function rt(){return"object"===typeof indexedDB}var it=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),at.prototype.create),a}return v(n)}(I(Error)),at=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ot(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new it(n,a,t);return o}}]),e}();function ot(e,t){return e.replace(st,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var st=/\{\$([^}]+)}/g;function ut(e){return JSON.parse(e)}function ct(e){return JSON.stringify(e)}var lt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ut(He(a[0])||""),n=ut(He(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function dt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function vt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(gt(s)&&gt(u)){if(!vt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function gt(e){return null!==e&&"object"===typeof e}function mt(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function yt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function kt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var bt=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return v(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function wt(e,t){var n=new _t(e,t);return n.subscribe.bind(n)}var _t=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Me(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=xt),void 0===r.error&&(r.error=xt),void 0===r.complete&&(r.complete=xt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function xt(){}var St=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function It(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Et(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(It(e,t)+"must be a valid function.")}function Tt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(It(e,t)+"must be a valid context object.")}var Ct=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function At(e){return e&&e._delegate?e._delegate:e}function Nt(){Nt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(I([])));g&&g!==t&&n.call(g,i)&&(p=g);var m=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==b(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Pt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(TO){return void n(TO)}s.done?t(u):Promise.resolve(u).then(r,i)}function Rt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Pt(a,r,i,o,s,"next",e)}function s(e){Pt(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Dt=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ot="[DEFAULT]",Lt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Qe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ot})}catch(u){}var t,n=Me(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Me(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Mt(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.component?this.component.multipleInstances?e:Ot:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function Mt(e){return e===Ot?void 0:e}var Ft,jt,Ut=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Lt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Vt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jt||(jt={}));var Bt={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},Kt=jt.INFO,qt=(Le(Ft={},jt.DEBUG,"log"),Le(Ft,jt.VERBOSE,"log"),Le(Ft,jt.INFO,"info"),Le(Ft,jt.WARN,"warn"),Le(Ft,jt.ERROR,"error"),Ft),zt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=qt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Wt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Kt,this._logHandler=zt,this._userLogHandler=null,Vt.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in jt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Bt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.DEBUG].concat(t)),this._logHandler.apply(this,[this,jt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,jt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.INFO].concat(t)),this._logHandler.apply(this,[this,jt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.WARN].concat(t)),this._logHandler.apply(this,[this,jt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.ERROR].concat(t)),this._logHandler.apply(this,[this,jt.ERROR].concat(t))}}]),e}();function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt,Yt;var Xt=new WeakMap,Jt=new WeakMap,$t=new WeakMap,Zt=new WeakMap,en=new WeakMap;var tn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Jt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function nn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Yt||(Yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(on(this),n),an(Xt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return an(e.apply(on(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[on(this),t].concat(r));return $t.set(a,t.sort?t.sort():[t]),an(a)}}function rn(e){return"function"===typeof e?nn(e):(e instanceof IDBTransaction&&function(e){if(!Jt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Jt.set(e,t)}}(e),t=e,(Qt||(Qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,tn):e);var t}function an(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(an(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Xt.set(t,e)})).catch((function(){})),en.set(t,e),t}(e);if(Zt.has(e))return Zt.get(e);var t=rn(e);return t!==e&&(Zt.set(e,t),en.set(t,e)),t}var on=function(e){return en.get(e)};var sn,un,cn=["get","getKey","getAll","getAllKeys","count"],ln=["put","add","delete","clear"],hn=new Map;function fn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(hn.get(t))return hn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ln.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||cn.includes(n))){var a=function(){var e=Rt(Nt().mark((function e(t){var a,o,s,u,c,l,h=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return hn.set(t,a),a}}}tn=function(e){return Gt(Gt({},e),{},{get:function(t,n,r){return fn(t,n)||e.get(t,n,r)},has:function(t,n){return!!fn(t,n)||e.has(t,n)}})}(tn);var dn=function(){function e(t){d(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var pn="@firebase/app",vn="0.7.32",gn=new Wt("@firebase/app"),mn="[DEFAULT]",yn=(Le(sn={},pn,"fire-core"),Le(sn,"@firebase/app-compat","fire-core-compat"),Le(sn,"@firebase/analytics","fire-analytics"),Le(sn,"@firebase/analytics-compat","fire-analytics-compat"),Le(sn,"@firebase/app-check","fire-app-check"),Le(sn,"@firebase/app-check-compat","fire-app-check-compat"),Le(sn,"@firebase/auth","fire-auth"),Le(sn,"@firebase/auth-compat","fire-auth-compat"),Le(sn,"@firebase/database","fire-rtdb"),Le(sn,"@firebase/database-compat","fire-rtdb-compat"),Le(sn,"@firebase/functions","fire-fn"),Le(sn,"@firebase/functions-compat","fire-fn-compat"),Le(sn,"@firebase/installations","fire-iid"),Le(sn,"@firebase/installations-compat","fire-iid-compat"),Le(sn,"@firebase/messaging","fire-fcm"),Le(sn,"@firebase/messaging-compat","fire-fcm-compat"),Le(sn,"@firebase/performance","fire-perf"),Le(sn,"@firebase/performance-compat","fire-perf-compat"),Le(sn,"@firebase/remote-config","fire-rc"),Le(sn,"@firebase/remote-config-compat","fire-rc-compat"),Le(sn,"@firebase/storage","fire-gcs"),Le(sn,"@firebase/storage-compat","fire-gcs-compat"),Le(sn,"@firebase/firestore","fire-fst"),Le(sn,"@firebase/firestore-compat","fire-fst-compat"),Le(sn,"fire-js","fire-js"),Le(sn,"firebase","fire-js-all"),sn),kn=new Map,bn=new Map;function wn(e,t){try{e.container.addComponent(t)}catch(n){gn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _n(e,t){e.container.addOrOverwriteComponent(t)}function xn(e){var t=e.name;if(bn.has(t))return gn.debug("There were multiple attempts to register component ".concat(t,".")),!1;bn.set(t,e);var n,r=Me(kn.values());try{for(r.s();!(n=r.n()).done;){wn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Sn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function In(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn;Sn(e,t).clearInstance(n)}function En(){bn.clear()}var Tn=(Le(un={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(un,"bad-app-name","Illegal App name: '{$appName}"),Le(un,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Le(un,"app-deleted","Firebase App named '{$appName}' already deleted"),Le(un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Le(un,"invalid-log-argument","First argument to `onLog` must be null or a function."),Le(un,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),un),Cn=new at("app","Firebase",Tn),An=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dt("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}]),e}(),Nn="9.9.4";function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:mn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Cn.create("bad-app-name",{appName:String(i)});var a=kn.get(i);if(a){if(vt(e,a.options)&&vt(r,a.config))return a;throw Cn.create("duplicate-app",{appName:i})}var o,s=new Ut(i),u=Me(bn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new An(e,r,s);return kn.set(i,l),l}function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=kn.get(e);if(!t)throw Cn.create("no-app",{appName:e});return t}function Dn(){return Array.from(kn.values())}function On(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!kn.has(n)){e.next=6;break}return kn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mn(e,t,n){var r,i=null!==(r=yn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void gn.warn(s.join(" "))}xn(new Dt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Fn(e,t){if(null!==e&&"function"!==typeof e)throw Cn.create("invalid-log-argument");!function(e,t){var n,r=Me(Vt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Bt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:jt[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function jn(e){var t;t=e,Vt.forEach((function(e){e.setLogLevel(t)}))}var Un="firebase-heartbeat-store",Vn=null;function Bn(){return Vn||(Vn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=an(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(an(s.result),e.oldVersion,e.newVersion,an(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Un)}}).catch((function(e){throw Cn.create("idb-open",{originalErrorMessage:e.message})}))),Vn}function Kn(e){return qn.apply(this,arguments)}function qn(){return qn=Rt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn();case 3:return r=e.sent,e.abrupt("return",r.transaction(Un).objectStore(Un).get(Hn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof it?gn.warn(e.t0.message):(i=Cn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),gn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),qn.apply(this,arguments)}function zn(e,t){return Wn.apply(this,arguments)}function Wn(){return Wn=Rt(Nt().mark((function e(t,n){var r,i,a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn();case 3:return i=e.sent,a=i.transaction(Un,"readwrite"),o=a.objectStore(Un),e.next=8,o.put(n,Hn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof it?gn.warn(e.t0.message):(s=Cn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),gn.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Wn.apply(this,arguments)}function Hn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Gn=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new $n(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Qn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Qn(),n=Yn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=We(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qn(){return(new Date).toISOString().substring(0,10)}function Yn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Me(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Zn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Zn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xn,Jn,$n=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(TO){t(TO)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Kn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Zn(e){return We(JSON.stringify({version:2,heartbeats:e})).length}Xn="",xn(new Dt("platform-logger",(function(e){return new dn(e)}),"PRIVATE")),xn(new Dt("heartbeat",(function(e){return new Gn(e)}),"PRIVATE")),Mn(pn,vn,Xn),Mn(pn,vn,"esm2017"),Mn("fire-js","");var er=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,wn(t,new Dt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),On(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){wn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){_n(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),tr=(Le(Jn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(Jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Jn),nr=new at("app-compat","Firebase",tr);var rr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Pn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ht(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Mn,setLogLevel:jn,onLog:Fn,apps:null,SDK_VERSION:Nn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(xn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw nr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ge(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ht(n,e=e||mn))throw nr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(er);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ge(n,e)},createSubscribe:wt,ErrorFactory:at,deepExtend:Ge}),n}(),ir=new Wt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ir.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ar=self.firebase.SDK_VERSION;ar&&ar.indexOf("LITE")>=0&&ir.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var or=rr;!function(e){Mn("@firebase/app-compat","0.1.33",e)}();function sr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function ur(){return ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=sr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ur.apply(this,arguments)}or.registerVersion("firebase","9.9.4","app-compat");var cr,lr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},hr={},fr=fr||{},dr=lr||self;function pr(){}function vr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var mr="closure_uid_"+(1e9*Math.random()>>>0),yr=0;function kr(e,t,n){return e.call.apply(e.bind,arguments)}function br(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wr(e,t,n){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kr:br).apply(null,arguments)}function _r(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function xr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Sr(){this.s=this.s,this.o=this.o}var Ir={};Sr.prototype.s=!1,Sr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,mr)&&e[mr]||(e[mr]=++yr)}(this);delete Ir[e]}},Sr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Er=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Tr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Cr(e){return Array.prototype.concat.apply([],arguments)}function Ar(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nr(e){return/^[\s\xa0]*$/.test(e)}var Pr,Rr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Dr(e,t){return-1!=e.indexOf(t)}function Or(e,t){return e<t?-1:e>t?1:0}e:{var Lr=dr.navigator;if(Lr){var Mr=Lr.userAgent;if(Mr){Pr=Mr;break e}}Pr=""}function Fr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function jr(e){var t={};for(var n in e)t[n]=e[n];return t}var Ur="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ur.length;a++)n=Ur[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Br(e){return Br[" "](e),e}Br[" "]=pr;var Kr,qr=Dr(Pr,"Opera"),zr=Dr(Pr,"Trident")||Dr(Pr,"MSIE"),Wr=Dr(Pr,"Edge"),Hr=Wr||zr,Gr=Dr(Pr,"Gecko")&&!(Dr(Pr.toLowerCase(),"webkit")&&!Dr(Pr,"Edge"))&&!(Dr(Pr,"Trident")||Dr(Pr,"MSIE"))&&!Dr(Pr,"Edge"),Qr=Dr(Pr.toLowerCase(),"webkit")&&!Dr(Pr,"Edge");function Yr(){var e=dr.document;return e?e.documentMode:void 0}e:{var Xr="",Jr=function(){var e=Pr;return Gr?/rv:([^\);]+)(\)|;)/.exec(e):Wr?/Edge\/([\d\.]+)/.exec(e):zr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Qr?/WebKit\/(\S+)/.exec(e):qr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Jr&&(Xr=Jr?Jr[1]:""),zr){var $r=Yr();if(null!=$r&&$r>parseFloat(Xr)){Kr=String($r);break e}}Kr=Xr}var Zr,ei={};function ti(){return function(e){var t=ei;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Rr(String(Kr)).split("."),n=Rr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Or(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Or(0==a[2].length,0==o[2].length)||Or(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(dr.document&&zr){var ni=Yr();Zr=ni||(parseInt(Kr,10)||void 0)}else Zr=void 0;var ri=Zr,ii=function(){if(!dr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{dr.addEventListener("test",pr,t),dr.removeEventListener("test",pr,t)}catch(n){}return e}();function ai(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function oi(e,t){if(ai.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Gr){e:{try{Br(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:si[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&oi.Z.h.call(this)}}ai.prototype.h=function(){this.defaultPrevented=!0},xr(oi,ai);var si={2:"touch",3:"pen",4:"mouse"};oi.prototype.h=function(){oi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ui="closure_listenable_"+(1e6*Math.random()|0),ci=0;function li(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ci,this.ca=this.fa=!1}function hi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fi(e){this.src=e,this.g={},this.h=0}function di(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Er(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(hi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}fi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=pi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new li(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var vi="closure_lm_"+(1e6*Math.random()|0),gi={};function mi(e,t,n,r,i){if(r&&r.once)return ki(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)mi(e,t[a],n,r,i);return null}return n=Ei(n),e&&e[ui]?e.N(t,n,gr(r)?!!r.capture:!!r,i):yi(e,t,n,!1,r,i)}function yi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gr(i)?!!i.capture:!!i,s=Si(e);if(s||(e[vi]=s=new fi(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ii||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_i(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ki(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ki(e,t[a],n,r,i);return null}return n=Ei(n),e&&e[ui]?e.O(t,n,gr(r)?!!r.capture:!!r,i):yi(e,t,n,!0,r,i)}function bi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)bi(e,t[a],n,r,i);else r=gr(r)?!!r.capture:!!r,n=Ei(n),e&&e[ui]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=pi(a=e.g[t],n,r,i))&&(hi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Si(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pi(t,n,r,i)),(n=-1<e?t[e]:null)&&wi(n))}function wi(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ui])di(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_i(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Si(t))?(di(n,e),0==n.h&&(n.src=null,t[vi]=null)):hi(e)}}}function _i(e){return e in gi?gi[e]:gi[e]="on"+e}function xi(e,t){if(e.ca)e=!0;else{t=new oi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&wi(e),e=n.call(r,t)}return e}function Si(e){return(e=e[vi])instanceof fi?e:null}var Ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ei(e){return"function"===typeof e?e:(e[Ii]||(e[Ii]=function(t){return e.handleEvent(t)}),e[Ii])}function Ti(){Sr.call(this),this.i=new fi(this),this.P=this,this.I=null}function Ci(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ai(t,e);else if(t instanceof ai)t.target=t.target||e;else{var i=t;Vr(t=new ai(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ai(o,r,!0,t)&&i}if(i=Ai(o=t.g=e,r,!0,t)&&i,i=Ai(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ai(o=t.g=n[a],r,!1,t)&&i}function Ai(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&di(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}xr(Ti,Sr),Ti.prototype[ui]=!0,Ti.prototype.removeEventListener=function(e,t,n,r){bi(this,e,t,n,r)},Ti.prototype.M=function(){if(Ti.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hi(n[r]);delete t.g[e],t.h--}}this.I=null},Ti.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ti.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ni=dr.JSON.stringify;function Pi(){var e=Ui,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ri,Di=function(){function e(){d(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=Oi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Oi=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Li}),(function(e){return e.reset()})),Li=function(){function e(){d(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Mi(e){dr.setTimeout((function(){throw e}),0)}function Fi(e,t){Ri||function(){var e=dr.Promise.resolve(void 0);Ri=function(){e.then(Vi)}}(),ji||(Ri(),ji=!0),Ui.add(e,t)}var ji=!1,Ui=new Di;function Vi(){for(var e;e=Pi();){try{e.h.call(e.g)}catch(n){Mi(n)}var t=Oi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ji=!1}function Bi(e,t){Ti.call(this),this.h=e||1,this.g=t||dr,this.j=wr(this.kb,this),this.l=Date.now()}function Ki(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function qi(e,t,n){if("function"===typeof e)n&&(e=wr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wr(e.handleEvent,e)}return 2147483647<Number(t)?-1:dr.setTimeout(e,t||0)}function zi(e){e.g=qi((function(){e.g=null,e.i&&(e.i=!1,zi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}xr(Bi,Ti),(cr=Bi.prototype).da=!1,cr.S=null,cr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ci(this,"tick"),this.da&&(Ki(this),this.start()))}},cr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},cr.M=function(){Bi.Z.M.call(this),Ki(this),delete this.g};var Wi=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:zi(this)}},{key:"M",value:function(){ur(y(n.prototype),"M",this).call(this),this.g&&(dr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Sr);function Hi(e){Sr.call(this),this.h=e,this.g={}}xr(Hi,Sr);var Gi=[];function Qi(e,t,n,r){Array.isArray(n)||(n&&(Gi[0]=n.toString()),n=Gi);for(var i=0;i<n.length;i++){var a=mi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Yi(e){Fr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&wi(e)}),e),e.g={}}function Xi(){this.g=!0}function Ji(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ni(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Hi.prototype.M=function(){Hi.Z.M.call(this),Yi(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xi.prototype.Aa=function(){this.g=!1},Xi.prototype.info=function(){};var $i={},Zi=null;function ea(){return Zi=Zi||new Ti}function ta(e){ai.call(this,$i.Ma,e)}function na(e){var t=ea();Ci(t,new ta(t,e))}function ra(e,t){ai.call(this,$i.STAT_EVENT,e),this.stat=t}function ia(e){var t=ea();Ci(t,new ra(t,e))}function aa(e,t){ai.call(this,$i.Na,e),this.size=t}function oa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return dr.setTimeout((function(){e()}),t)}$i.Ma="serverreachability",xr(ta,ai),$i.STAT_EVENT="statevent",xr(ra,ai),$i.Na="timingevent",xr(aa,ai);var sa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ua={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ca(){}function la(e){return e.h||(e.h=e.i())}function ha(){}ca.prototype.h=null;var fa,da={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pa(){ai.call(this,"d")}function va(){ai.call(this,"c")}function ga(){}function ma(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Hi(this),this.P=ka,e=Hr?125:void 0,this.W=new Bi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ya}function ya(){this.i=null,this.g="",this.h=!1}xr(pa,ai),xr(va,ai),xr(ga,ca),ga.prototype.g=function(){return new XMLHttpRequest},ga.prototype.i=function(){return{}},fa=new ga;var ka=45e3,ba={},wa={};function _a(e,t,n){e.K=1,e.v=Wa(Ua(t)),e.s=n,e.U=!0,xa(e,null)}function xa(e,t){e.F=Date.now(),Ta(e),e.A=Ua(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),io(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ya,e.g=ss(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Wi(wr(e.Ia,e,e.g),e.O)),Qi(e.V,e.g,"readystatechange",e.gb),t=e.H?jr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),na(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Sa(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ia(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ea(e,n))==wa){4==t&&(e.o=4,ia(14),i=!1),Ji(e.j,e.m,null,"[Incomplete Response]");break}if(r==ba){e.o=4,ia(15),Ji(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ji(e.j,e.m,r,null),Ra(e,r)}Sa(e)&&r!=wa&&r!=ba&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ia(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zo(t),t.L=!0,ia(11))):(Ji(e.j,e.m,n,"[Invalid Chunked Response]"),Pa(e),Na(e))}function Ea(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?wa:(n=Number(t.substring(n,r)),isNaN(n)?ba:(r+=1)+n>t.length?wa:(t=t.substr(r,n),e.C=r+n,t))}function Ta(e){e.Y=Date.now()+e.P,Ca(e,e.P)}function Ca(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=oa(wr(e.eb,e),t)}function Aa(e){e.B&&(dr.clearTimeout(e.B),e.B=null)}function Na(e){0==e.l.G||e.I||ns(e.l,e)}function Pa(e){Aa(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ki(e.W),Yi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ra(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||fo(n.i,e)))if(n.I=e.N,!e.J&&fo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ts(n),zo(n)}$o(n),ia(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=oa(wr(n.ab,n),6e3));if(1>=ho(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else is(n,11)}else if((e.J||n.g==e)&&ts(n),!Nr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Dr(l,"spdy")||Dr(l,"quic")||Dr(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(po(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,za(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=os(r,r.H?r.la:null,r.W),d.J){vo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Aa(p),Ta(p)),r.g=d}else Jo(r);0<n.l.length&&Go(n)}else"stop"!=a[0]&&"close"!=a[0]||is(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?is(n,7):qo(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}na(4)}catch(a){}}function Da(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(vr(e)||"string"===typeof e)Tr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(vr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(vr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Oa(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Oa)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function La(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ma(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ma(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ma(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(cr=ma.prototype).setTimeout=function(e){this.P=e},cr.gb=function(e){e=e.target;var t=this.L;t&&3==jo(e)?t.l():this.Ia(e)},cr.Ia=function(e){try{if(e==this.g)e:{var t=jo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Hr||this.g&&(this.h.h||this.g.ga()||Uo(this.g)))){this.I||4!=t||7==n||na(8==n||0>=r?3:2),Aa(this);var i=this.g.ba();this.N=i;t:if(Sa(this)){var a=Uo(this.g);e="";var o=a.length,s=4==jo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pa(this),Na(this);var u="";break t}this.h.i=new dr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nr(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,ia(12),Pa(this),Na(this);break e}Ji(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ra(this,i)}this.U?(Ia(this,t,u),Hr&&this.i&&3==t&&(Qi(this.V,this.W,"tick",this.fb),this.W.start())):(Ji(this.j,this.m,u,null),Ra(this,u)),4==t&&Pa(this),this.i&&!this.I&&(4==t?ns(this.l,this):(this.i=!1,Ta(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ia(12)):(this.o=0,ia(13)),Pa(this),Na(this)}}}catch(t){}},cr.fb=function(){if(this.g){var e=jo(this.g),t=this.g.ga();this.C<t.length&&(Aa(this),Ia(this,e,t),this.i&&4!=e&&Ta(this))}},cr.cancel=function(){this.I=!0,Pa(this)},cr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(na(3),ia(17)),Pa(this),this.o=2,Na(this)):Ca(this,this.Y-e)},(cr=Oa.prototype).R=function(){La(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},cr.T=function(){return La(this),this.g.concat()},cr.get=function(e,t){return Ma(this.h,e)?this.h[e]:t},cr.set=function(e,t){Ma(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},cr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Fa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ja(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ja){this.g=void 0!==t?t:e.g,Va(this,e.j),this.s=e.s,Ba(this,e.i),Ka(this,e.m),this.l=e.l,t=e.h;var n=new eo;n.i=t.i,t.g&&(n.g=new Oa(t.g),n.h=t.h),qa(this,n),this.o=e.o}else e&&(n=String(e).match(Fa))?(this.g=!!t,Va(this,n[1]||"",!0),this.s=Ha(n[2]||""),Ba(this,n[3]||"",!0),Ka(this,n[4]),this.l=Ha(n[5]||"",!0),qa(this,n[6]||"",!0),this.o=Ha(n[7]||"")):(this.g=!!t,this.h=new eo(null,this.g))}function Ua(e){return new ja(e)}function Va(e,t,n){e.j=n?Ha(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ba(e,t,n){e.i=n?Ha(t,!0):t}function Ka(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function qa(e,t,n){t instanceof eo?(e.h=t,function(e,t){t&&!e.j&&(to(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(no(this,t),io(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ga(t,$a)),e.h=new eo(t,e.g))}function za(e,t,n){e.h.set(t,n)}function Wa(e){return za(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ha(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ga(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Qa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Qa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ja.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ga(t,Ya,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ga(t,Ya,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ga(n,"/"==n.charAt(0)?Ja:Xa,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ga(n,Za)),e.join("")};var Ya=/[#\/\?@]/g,Xa=/[#\?:]/g,Ja=/[#\?]/g,$a=/[#\?@]/g,Za=/#/g;function eo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function to(e){e.g||(e.g=new Oa,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function no(e,t){to(e),t=ao(e,t),Ma(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ma((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&La(e)))}function ro(e,t){return to(e),t=ao(e,t),Ma(e.g.h,t)}function io(e,t,n){no(e,t),0<n.length&&(e.i=null,e.g.set(ao(e,t),Ar(n)),e.h+=n.length)}function ao(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(cr=eo.prototype).add=function(e,t){to(this),this.i=null,e=ao(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},cr.forEach=function(e,t){to(this),this.g.forEach((function(n,r){Tr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},cr.T=function(){to(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},cr.R=function(e){to(this);var t=[];if("string"===typeof e)ro(this,e)&&(t=Cr(t,this.g.get(ao(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Cr(t,e[n])}return t},cr.set=function(e,t){return to(this),this.i=null,ro(this,e=ao(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},cr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},cr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var oo=v((function e(t,n){d(this,e),this.h=t,this.g=n}));function so(e){this.l=e||co,dr.PerformanceNavigationTiming?e=0<(e=dr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(dr.g&&dr.g.Ea&&dr.g.Ea()&&dr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var uo,co=10;function lo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ho(e){return e.h?1:e.g?e.g.size:0}function fo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function po(e,t){e.g?e.g.add(t):e.h=t}function vo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function go(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Me(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ar(e.i)}function mo(){}function yo(){this.g=new mo}function ko(e,t,n){var r=n||"";try{Da(e,(function(e,n){var i=e;gr(e)&&(i=Ni(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function wo(e){this.l=e.$b||null,this.j=e.ib||!1}function _o(e,t){Ti.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=xo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}so.prototype.cancel=function(){if(this.i=go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Me(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},mo.prototype.stringify=function(e){return dr.JSON.stringify(e,void 0)},mo.prototype.parse=function(e){return dr.JSON.parse(e,void 0)},xr(wo,ca),wo.prototype.g=function(){return new _o(this.l,this.j)},wo.prototype.i=(uo={},function(){return uo}),xr(_o,Ti);var xo=0;function So(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Io(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Eo(e)}function Eo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(cr=_o.prototype).open=function(e,t){if(this.readyState!=xo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Eo(this)},cr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||dr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},cr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Io(this)),this.readyState=xo},cr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof dr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;So(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},cr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Io(this):Eo(this),3==this.readyState&&So(this)}},cr.Ua=function(e){this.g&&(this.response=this.responseText=e,Io(this))},cr.Ta=function(e){this.g&&(this.response=e,Io(this))},cr.ha=function(){this.g&&Io(this)},cr.setRequestHeader=function(e,t){this.v.append(e,t)},cr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},cr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var To=dr.JSON.parse;function Co(e){Ti.call(this),this.headers=new Oa,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ao,this.K=this.L=!1}xr(Co,Ti);var Ao="",No=/^https?$/i,Po=["POST","PUT"];function Ro(e){return"content-type"==e.toLowerCase()}function Do(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Oo(e),Mo(e)}function Oo(e){e.D||(e.D=!0,Ci(e,"complete"),Ci(e,"error"))}function Lo(e){if(e.h&&"undefined"!=typeof fr&&(!e.C[1]||4!=jo(e)||2!=e.ba()))if(e.v&&4==jo(e))qi(e.Fa,0,e);else if(Ci(e,"readystatechange"),4==jo(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Fa)[1]||null;if(!a&&dr.self&&dr.self.location){var o=dr.self.location.protocol;a=o.substr(0,o.length-1)}i=!No.test(a?a.toLowerCase():"")}t=i}if(t)Ci(e,"complete"),Ci(e,"success");else{e.m=6;try{var s=2<jo(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Oo(e)}}finally{Mo(e)}}}function Mo(e,t){if(e.g){Fo(e);var n=e.g,r=e.C[0]?pr:null;e.g=null,e.C=null,t||Ci(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Fo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(dr.clearTimeout(e.A),e.A=null)}function jo(e){return e.g?e.g.readyState:0}function Uo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ao:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Fr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):za(e,t,n))}function Bo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ko(e){this.za=0,this.l=[],this.h=new Xi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bo("baseRetryDelayMs",5e3,e),this.$a=Bo("retryDelaySeedMs",1e4,e),this.Ya=Bo("forwardChannelMaxRetries",2,e),this.ra=Bo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new so(e&&e.concurrentRequestLimit),this.Ca=new yo,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function qo(e){if(Wo(e),3==e.G){var t=e.V++,n=Ua(e.F);za(n,"SID",e.J),za(n,"RID",t),za(n,"TYPE","terminate"),Yo(e,n),(t=new ma(e,e.h,t,void 0)).K=2,t.v=Wa(Ua(n)),n=!1,dr.navigator&&dr.navigator.sendBeacon&&(n=dr.navigator.sendBeacon(t.v.toString(),"")),!n&&dr.Image&&((new Image).src=t.v,n=!0),n||(t.g=ss(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ta(t)}as(e)}function zo(e){e.g&&(Zo(e),e.g.cancel(),e.g=null)}function Wo(e){zo(e),e.u&&(dr.clearTimeout(e.u),e.u=null),ts(e),e.i.cancel(),e.m&&("number"===typeof e.m&&dr.clearTimeout(e.m),e.m=null)}function Ho(e,t){e.l.push(new oo(e.Za++,t)),3==e.G&&Go(e)}function Go(e){lo(e.i)||e.m||(e.m=!0,Fi(e.Ha,e),e.C=0)}function Qo(e,t){var n;n=t?t.m:e.V++;var r=Ua(e.F);za(r,"SID",e.J),za(r,"RID",n),za(r,"AID",e.U),Yo(e,r),e.o&&e.s&&Vo(r,e.o,e.s),n=new ma(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Xo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),po(e.i,n),_a(n,r,t)}function Yo(e,t){e.j&&Da({},(function(e,n){za(t,n,e)}))}function Xo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?wr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{ko(l,o,"req"+c+"_")}catch(Ls){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Jo(e){e.g||e.u||(e.Y=1,Fi(e.Ga,e),e.A=0)}function $o(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=oa(wr(e.Ga,e),rs(e,e.A)),e.A++,!0)}function Zo(e){null!=e.B&&(dr.clearTimeout(e.B),e.B=null)}function es(e){e.g=new ma(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ua(e.oa);za(t,"RID","rpc"),za(t,"SID",e.J),za(t,"CI",e.N?"0":"1"),za(t,"AID",e.U),Yo(e,t),za(t,"TYPE","xmlhttp"),e.o&&e.s&&Vo(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Wa(Ua(t)),n.s=null,n.U=!0,xa(n,e)}function ts(e){null!=e.v&&(dr.clearTimeout(e.v),e.v=null)}function ns(e,t){var n=null;if(e.g==t){ts(e),Zo(e),e.g=null;var r=2}else{if(!fo(e.i,t))return;n=t.D,vo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ci(r=ea(),new aa(r,n,t,i)),Go(e)}else Jo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ho(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=oa(wr(e.Ha,e,t),rs(e,e.C)),e.C++,!0))}(e,t)||2==r&&$o(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:is(e,5);break;case 4:is(e,10);break;case 3:is(e,6);break;default:is(e,2)}}function rs(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function is(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=wr(e.jb,e);n||(n=new ja("//www.google.com/images/cleardot.gif"),dr.location&&"http"==dr.location.protocol||Va(n,"https"),Wa(n)),function(e,t){var n=new Xi;if(dr.Image){var r=new Image;r.onload=_r(bo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_r(bo,n,r,"TestLoadImage: error",!1,t),r.onabort=_r(bo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_r(bo,n,r,"TestLoadImage: timeout",!1,t),dr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ia(2);e.G=0,e.j&&e.j.va(t),as(e),Wo(e)}function as(e){e.G=0,e.I=-1,e.j&&(0==go(e.i).length&&0==e.l.length||(e.i.i.length=0,Ar(e.l),e.l.length=0),e.j.ua())}function os(e,t,n){var r=function(e){return e instanceof ja?Ua(e):new ja(e,void 0)}(n);if(""!=r.i)t&&Ba(r,t+"."+r.i),Ka(r,r.m);else{var i=dr.location;r=function(e,t,n,r){var i=new ja(null,void 0);return e&&Va(i,e),t&&Ba(i,t),n&&Ka(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Fr(e.aa,(function(e,t){za(r,t,e)})),t=e.D,n=e.sa,t&&n&&za(r,t,n),za(r,"VER",e.ma),Yo(e,r),r}function ss(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Co(new wo({ib:!0})):new Co(e.qa)).L=e.H,t}function us(){}function cs(){if(zr&&!(10<=Number(ri)))throw Error("Environmental error: no available transport.")}function ls(e,t){Ti.call(this),this.g=new Ko(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Nr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Nr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ds(this)}function hs(e){pa.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fs(){va.call(this),this.status=1}function ds(e){this.g=e}(cr=Co.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fa.g(),this.C=this.u?la(this.u):la(fa),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Do(this,a)}e=n||"";var i=new Oa(this.headers);r&&Da(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Ro,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=dr.FormData&&e instanceof dr.FormData,!(0<=Er(Po,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fo(this),0<this.B&&((this.K=function(e){return zr&&ti()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=qi(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Do(this,a)}},cr.pa=function(){"undefined"!=typeof fr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ci(this,"timeout"),this.abort(8))},cr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ci(this,"complete"),Ci(this,"abort"),Mo(this))},cr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mo(this,!0)),Co.Z.M.call(this)},cr.Fa=function(){this.s||(this.F||this.v||this.l?Lo(this):this.cb())},cr.cb=function(){Lo(this)},cr.ba=function(){try{return 2<jo(this)?this.g.status:-1}catch(uo){return-1}},cr.ga=function(){try{return this.g?this.g.responseText:""}catch(uo){return""}},cr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),To(t)}},cr.Da=function(){return this.m},cr.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(cr=Ko.prototype).ma=8,cr.G=1,cr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},cr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ma(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Vr(n=jr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Xo(this,t,r),za(i=Ua(this.F),"RID",e),za(i,"CVER",22),this.D&&za(i,"X-HTTP-Session-Id",this.D),Yo(this,i),this.o&&n&&Vo(i,this.o,n),po(this.i,t),this.Ra&&za(i,"TYPE","init"),this.ja?(za(i,"$req",r),za(i,"SID","null"),t.$=!0,_a(t,i,null)):_a(t,i,r),this.G=2}}else 3==this.G&&(e?Qo(this,e):0==this.l.length||lo(this.i)||Qo(this))},cr.Ga=function(){if(this.u=null,es(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=oa(wr(this.bb,this),e)}},cr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ia(10),zo(this),es(this))},cr.ab=function(){null!=this.v&&(this.v=null,zo(this),$o(this),ia(19))},cr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ia(2)):(this.h.info("Failed to ping google.com"),ia(1))},(cr=us.prototype).xa=function(){},cr.wa=function(){},cr.va=function(){},cr.ua=function(){},cr.Oa=function(){},cs.prototype.g=function(e,t){return new ls(e,t)},xr(ls,Ti),ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Fi(wr(e.hb,e,t))),ia(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=os(e,null,e.W),Go(e)},ls.prototype.close=function(){qo(this.g)},ls.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ho(this.g,t)}else this.v?((t={}).__data__=Ni(e),Ho(this.g,t)):Ho(this.g,e)},ls.prototype.M=function(){this.g.j=null,delete this.j,qo(this.g),delete this.g,ls.Z.M.call(this)},xr(hs,pa),xr(fs,va),xr(ds,us),ds.prototype.xa=function(){Ci(this.g,"a")},ds.prototype.wa=function(e){Ci(this.g,new hs(e))},ds.prototype.va=function(e){Ci(this.g,new fs(e))},ds.prototype.ua=function(){Ci(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,ua.COMPLETE="complete",ha.EventType=da,da.OPEN="a",da.CLOSE="b",da.ERROR="c",da.MESSAGE="d",Ti.prototype.listen=Ti.prototype.N,Co.prototype.listenOnce=Co.prototype.O,Co.prototype.getLastError=Co.prototype.La,Co.prototype.getLastErrorCode=Co.prototype.Da,Co.prototype.getStatus=Co.prototype.ba,Co.prototype.getResponseJson=Co.prototype.Qa,Co.prototype.getResponseText=Co.prototype.ga,Co.prototype.send=Co.prototype.ea;var ps=hr.createWebChannelTransport=function(){return new cs},vs=hr.getStatEventTarget=function(){return ea()},gs=hr.ErrorCode=sa,ms=hr.EventType=ua,ys=hr.Event=$i,ks=hr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},bs=hr.FetchXmlHttpFactory=wo,ws=hr.WebChannel=ha,_s=hr.XhrIo=Co,xs="@firebase/firestore",Ss=function(){function e(t){d(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");var Is="9.9.4",Es=new Wt("@firebase/firestore");function Ts(){return Es.logLevel}function Cs(e){if(Es.logLevel<=jt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ps);Es.debug.apply(Es,["Firestore (".concat(Is,"): ").concat(e)].concat(f(i)))}}function As(e){if(Es.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ps);Es.error.apply(Es,["Firestore (".concat(Is,"): ").concat(e)].concat(f(i)))}}function Ns(e){if(Es.logLevel<=jt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ps);Es.warn.apply(Es,["Firestore (".concat(Is,"): ").concat(e)].concat(f(i)))}}function Ps(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Is,") INTERNAL ASSERTION FAILED: ")+e;throw As(t),new Error(t)}function Ds(e,t){e||Rs()}function Os(e,t){return e}var Ls={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ms=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(it),Fs=v((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),js=v((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Us=function(){function e(){d(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ss.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Vs=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bs=function(){function e(t){d(this,e),this.t=t,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Fs;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Fs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Cs("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Cs("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fs)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Cs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ds("string"==typeof n.accessToken),new js(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ds(null===e||"string"==typeof e),new Ss(e)}}]),e}(),Ks=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.p=new Map}return v(e,[{key:"I",value:function(){return this.g?this.g():(Ds(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),qs=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new Ks(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ss.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),zs=v((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ws=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Cs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Cs("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Cs("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Cs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ds("string"==typeof t.token),e.A=t.token,new zs(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Hs(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Gs=function(){function e(){d(this,e)}return v(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Hs(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Qs(e,t){return e<t?-1:e>t?1:0}function Ys(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Xs(e){return e+"\0"}var Js=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Qs(this.nanoseconds,e.nanoseconds):Qs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$s=function(){function e(t){d(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Js(0,0))}},{key:"max",value:function(){return new e(new Js(253402300799,999999999))}}]),e}(),Zs=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Rs(),void 0===r?r=t.length-n:r>t.length-n&&Rs(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),eu=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,f(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zs),tu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nu=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Ms(Ls.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ms(Ls.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Ms(Ls.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zs),ru=function(){function e(t){d(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===eu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(eu.fromString(t))}},{key:"fromName",value:function(t){return new e(eu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(eu.emptyPath())}},{key:"comparator",value:function(e,t){return eu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new eu(t.slice()))}}]),e}(),iu=v((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function au(e){return e.fields.find((function(e){return 2===e.kind}))}function ou(e){return e.fields.filter((function(e){return 2!==e.kind}))}iu.UNKNOWN_ID=-1;var su=v((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var uu=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,hu.min())}}]),e}();function cu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$s.fromTimestamp(1e9===r?new Js(n+1,0):new Js(n,r));return new hu(i,ru.empty(),t)}function lu(e){return new hu(e.readTime,e.key,-1)}var hu=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e($s.min(),ru.empty(),-1)}},{key:"max",value:function(){return new e($s.max(),ru.empty(),-1)}}]),e}();function fu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ru.comparator(e.documentKey,t.documentKey))?n:Qs(e.largestBatchId,t.largestBatchId)}var du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pu=function(){function e(){d(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function vu(e){return gu.apply(this,arguments)}function gu(){return gu=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ls.FAILED_PRECONDITION&&t.message===du){e.next=2;break}throw t;case 2:Cs("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}var mu=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Rs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Me(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),yu=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Fs,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new wu(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Eu(e.target.error);r.P.reject(new wu(t,n))}}return v(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Cs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new xu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new wu(n,t)}}}]),e}(),ku=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Xe())&&As("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"F",value:function(){var e=Rt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Cs("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new wu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ms(Ls.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ms(Ls.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new wu(t,n))},i.onupgradeneeded=function(e){Cs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Cs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Rt(Nt().mark((function e(t,n,r,i){var a,o,s,u,c,l=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Nt().mark((function e(){var n,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=yu.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),mu.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&o<3,Cs("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Cs("SimpleDb","Removing database:",e),Su(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!rt())return!1;if(e.N())return!0;var t=Xe(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),bu=function(){function e(t){d(this,e),this.U=t,this.q=!1,this.K=null}return v(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Su(this.U.delete())}}]),e}(),wu=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Ls.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(Ms);function _u(e){return"IndexedDbTransactionError"===e.name}var xu=function(){function e(t){d(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Cs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Cs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Su(n)}},{key:"add",value:function(e){return Cs("SimpleDb","ADD",this.store.name,e,e),Su(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Su(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Cs("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Cs("SimpleDb","DELETE",this.store.name,e),Su(this.store.delete(e))}},{key:"count",value:function(){return Cs("SimpleDb","COUNT",this.store.name),Su(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new mu((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new mu((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Cs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new mu((function(n,r){t.onerror=function(e){var t=Eu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new mu((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new bu(i),o=t(i.primaryKey,i.value,a);if(o instanceof mu){var s=o.catch((function(e){return a.done(),mu.reject(e)}));n.push(s)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return mu.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Su(e){return new mu((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Eu(e.target.error);n(t)}}))}var Iu=!1;function Eu(e){var t=ku.D(Xe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ms("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Iu||(Iu=!0,setTimeout((function(){throw r}),0)),r}}return e}var Tu=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return v(e,[{key:"start",value:function(){this.nt(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Cs("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Cs,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!_u(e.t4)){e.next=17;break}Cs("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,vu(e.t4);case 19:return e.next=21,t.nt(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Cu=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return v(e,[{key:"st",value:function(){var e=Rt(Nt().mark((function e(){var t,n=this,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return mu.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Cs("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Cs("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=lu(t);fu(r,n)>0&&(n=r)})),new hu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Au=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function Nu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ru(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Au.at=-1;var Du=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Lu.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Lu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Lu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ou(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ou(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ou(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ou(this.root,e,this.comparator,!0)}}]),e}(),Ou=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Lu=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Rs();if(this.right.isRed())throw Rs();var e=this.left.check();if(e!==this.right.check())throw Rs();return e+(this.isRed()?0:1)}}]),e}();Lu.EMPTY=null,Lu.RED=!0,Lu.BLACK=!1,Lu.EMPTY=new(function(){function e(){d(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw Rs()}},{key:"value",get:function(){throw Rs()}},{key:"color",get:function(){throw Rs()}},{key:"left",get:function(){throw Rs()}},{key:"right",get:function(){throw Rs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Lu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Mu=function(){function e(t){d(this,e),this.comparator=t,this.data=new Du(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fu=function(){function e(t){d(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ju(e){return e.hasNext()?e.getNext():void 0}var Uu=function(){function e(t){d(this,e),this.fields=t,t.sort(nu.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new Mu(nu.comparator),i=Me(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=Me(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Me(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ys(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Vu=function(e){function t(e){d(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Vu.EMPTY_BYTE_STRING=new Vu("");var Bu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(e){if(Ds(!!e),"string"==typeof e){var t=0,n=Bu.exec(e);if(Ds(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qu(e.seconds),nanos:qu(e.nanos)}}function qu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zu(e){return"string"==typeof e?Vu.fromBase64String(e):Vu.fromUint8Array(e)}function Wu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hu(e){var t=e.mapValue.fields.__previous_value__;return Wu(t)?Hu(t):t}function Gu(e){var t=Ku(e.mapValue.fields.__local_write_time__.timestampValue);return new Js(t.seconds,t.nanos)}var Qu=v((function e(t,n,r,i,a,o,s,u){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Yu=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Xu(e){return null==e}function Ju(e){return 0===e&&1/e==-1/0}function $u(e){return"number"==typeof e&&Number.isInteger(e)&&!Ju(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Zu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ec={nullValue:"NULL_VALUE"};function tc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wu(e)?4:vc(e)?9007199254740991:10:Rs()}function nc(e,t){if(e===t)return!0;var n=tc(e);if(n!==tc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gu(e).isEqual(Gu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ku(e.timestampValue),r=Ku(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zu(e.bytesValue).isEqual(zu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qu(e.geoPointValue.latitude)===qu(t.geoPointValue.latitude)&&qu(e.geoPointValue.longitude)===qu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qu(e.integerValue)===qu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qu(e.doubleValue),r=qu(t.doubleValue);return n===r?Ju(n)===Ju(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ys(e.arrayValue.values||[],t.arrayValue.values||[],nc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Nu(n)!==Nu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nc(n[i],r[i])))return!1;return!0}(e,t);default:return Rs()}}function rc(e,t){return void 0!==(e.values||[]).find((function(e){return nc(e,t)}))}function ic(e,t){if(e===t)return 0;var n=tc(e),r=tc(t);if(n!==r)return Qs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qu(e.integerValue||e.doubleValue),r=qu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ac(e.timestampValue,t.timestampValue);case 4:return ac(Gu(e),Gu(t));case 5:return Qs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zu(e),r=zu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Qs(n[i],r[i]);if(0!==a)return a}return Qs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Qs(qu(e.latitude),qu(t.latitude));return 0!==n?n:Qs(qu(e.longitude),qu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ic(n[i],r[i]);if(a)return a}return Qs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Zu.mapValue&&t===Zu.mapValue)return 0;if(e===Zu.mapValue)return 1;if(t===Zu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Qs(r[o],a[o]);if(0!==s)return s;var u=ic(n[r[o]],i[a[o]]);if(0!==u)return u}return Qs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Rs()}}function ac(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qs(e,t);var n=Ku(e),r=Ku(t),i=Qs(n.seconds,r.seconds);return 0!==i?i:Qs(n.nanos,r.nanos)}function oc(e){return sc(e)}function sc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ku(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ru.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Me(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=sc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Me(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(sc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Rs();var t,n}function uc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cc(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function hc(e){return!!e&&"nullValue"in e}function fc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dc(e){return!!e&&"mapValue"in e}function pc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Pu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function vc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function gc(e){return"nullValue"in e?ec:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?uc(Yu.empty(),ru.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Rs()}function mc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?uc(Yu.empty(),ru.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Zu:Rs()}function yc(e,t){var n=ic(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kc(e,t){var n=ic(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var bc=function(){function e(t){d(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}},{key:"setAll",value:function(e){var t=this,n=nu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=pc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return nc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Pu(t,(function(t,n){return e[t]=n}));var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(pc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function wc(e){var t=[];return Pu(e.fields,(function(e,n){var r=new nu([e]);if(dc(n)){var i=wc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Me(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Uu(t)}var _c=function(){function e(t,n,r,i,a,o){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$s.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$s.min(),$s.min(),bc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,$s.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$s.min(),bc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$s.min(),bc.empty(),2)}}]),e}(),xc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ht=null}));function Sc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new xc(e,t,n,r,i,a,o)}function Ic(e){var t=Os(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+oc(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Xu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return oc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return oc(e)})).join(",")),t.ht=n}return t.ht}function Ec(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Kc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!nc(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zc(e.startAt,t.startAt)&&zc(e.endAt,t.endAt)}function Tc(e){return ru.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Cc(e,t){return e.filters.filter((function(e){return e instanceof Pc&&e.field.isEqual(t)}))}function Ac(e,t,n){var r,i=ec,a=!0,o=Me(Cc(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=ec,c=!0;switch(s.op){case"<":case"<=":u=gc(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=ec}yc({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];yc({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Nc(e,t,n){var r,i=Zu,a=!0,o=Me(Cc(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Zu,c=!0;switch(s.op){case">=":case">":u=mc(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=Zu}kc({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];kc({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Pc=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ic(t,this.value)):null!==t&&tc(this.value)===tc(t)&&this.ft(ic(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rs()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Rc(e,t,r):"array-contains"===t?new Mc(e,r):"in"===t?new Fc(e,r):"not-in"===t?new jc(e,r):"array-contains-any"===t?new Uc(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Dc(e,n):new Oc(e,n)}}]),n}(function(){return v((function e(){d(this,e)}))}()),Rc=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=ru.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=ru.comparator(e.key,this.key);return this.ft(t)}}]),n}(Pc),Dc=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Lc("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Pc),Oc=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Lc("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Pc);function Lc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ru.fromName(e.referenceValue)}))}var Mc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return lc(t)&&rc(t.arrayValue,this.value)}}]),n}(Pc),Fc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&rc(this.value.arrayValue,t)}}]),n}(Pc),jc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!rc(this.value.arrayValue,t)}}]),n}(Pc),Uc=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return rc(t.value.arrayValue,e)}))}}]),n}(Pc),Vc=v((function e(t,n){d(this,e),this.position=t,this.inclusive=n})),Bc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Kc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function qc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ru.comparator(ru.fromName(o.referenceValue),n.key):ic(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function zc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!nc(e.position[n],t.position[n]))return!1;return!0}var Wc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this._t=null,this.wt=null,this.startAt,this.endAt}));function Hc(e,t,n,r,i,a,o,s){return new Wc(e,t,n,r,i,a,o,s)}function Gc(e){return new Wc(e)}function Qc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Xc(e){var t,n=Me(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Jc(e){return null!==e.collectionGroup}function $c(e){var t=Os(e);if(null===t._t){t._t=[];var n=Xc(t),r=Yc(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Bc(n)),t._t.push(new Bc(nu.keyField(),"asc"));else{var i,a=!1,o=Me(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t._t.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Bc(nu.keyField(),u))}}}return t._t}function Zc(e){var t=Os(e);if(!t.wt)if("F"===t.limitType)t.wt=Sc(t.path,t.collectionGroup,$c(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Me($c(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Bc(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Vc(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Vc(t.startAt.position,t.startAt.inclusive):null;t.wt=Sc(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.wt}function el(e,t,n){return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function tl(e,t){return Ec(Zc(e),Zc(t))&&e.limitType===t.limitType}function nl(e){return"".concat(Ic(Zc(e)),"|lt:").concat(e.limitType)}function rl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(oc(t.value));var t})).join(", "),"]")),Xu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return oc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return oc(e)})).join(",")),"Target(".concat(t,")")}(Zc(e)),"; limitType=").concat(e.limitType,")")}function il(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ru.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Me(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Me(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=qc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$c(e),t))&&!(e.endAt&&!function(e,t,n){var r=qc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$c(e),t))}(e,t)}function al(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ol(e){return function(t,n){var r,i=!1,a=Me($c(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=sl(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function sl(e,t,n){var r=e.field.isKeyField()?ru.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ic(r,i):Rs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Rs()}}function ul(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(t)?"-0":t}}function cl(e){return{integerValue:""+e}}function ll(e,t){return $u(t)?cl(t):ul(e,t)}var hl=v((function e(){d(this,e),this._=void 0}));function fl(e,t,n){return e instanceof vl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gl?ml(e,t):e instanceof yl?kl(e,t):function(e,t){var n=pl(e,t),r=wl(n)+wl(e.yt);return cc(n)&&cc(e.yt)?cl(r):ul(e.It,r)}(e,t)}function dl(e,t,n){return e instanceof gl?ml(e,t):e instanceof yl?kl(e,t):n}function pl(e,t){return e instanceof bl?cc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var vl=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(hl),gl=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(hl);function ml(e,t){var n,r=_l(t),i=Me(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return nc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var yl=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(hl);function kl(e,t){var n,r=_l(t),i=Me(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!nc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var bl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).It=e,i.yt=r,i}return v(n)}(hl);function wl(e){return qu(e.integerValue||e.doubleValue)}function _l(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var xl=v((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Sl=v((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Il=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function El(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Tl=v((function e(){d(this,e)}));function Cl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vl(e.key,Il.none()):new Dl(e.key,e.data,Il.none());var n,r=e.data,i=bc.empty(),a=new Mu(nu.comparator),o=Me(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Ol(e.key,i,new Uu(a.toArray()),Il.none())}function Al(e,t,n){e instanceof Dl?function(e,t,n){var r=e.value.clone(),i=Ml(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ol?function(e,t,n){if(El(e.precondition,t)){var r=Ml(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ll(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nl(e,t,n,r){return e instanceof Dl?function(e,t,n,r){if(!El(e.precondition,t))return n;var i=e.value.clone(),a=Fl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ol?function(e,t,n,r){if(!El(e.precondition,t))return n;var i=Fl(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ll(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return El(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Pl(e,t){var n,r=null,i=Me(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=pl(a.transform,o||null);null!=s&&(null===r&&(r=bc.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Rl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ys(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gl&&t instanceof gl||e instanceof yl&&t instanceof yl?Ys(e.elements,t.elements,nc):e instanceof bl&&t instanceof bl?nc(e.yt,t.yt):e instanceof vl&&t instanceof vl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Dl=function(e){m(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Tl),Ol=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Tl);function Ll(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ml(e,t,n){var r=new Map;Ds(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,dl(o,s,n[i]))}return r}function Fl(e,t,n){var r,i=new Map,a=Me(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,fl(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var jl,Ul,Vl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Tl),Bl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Tl),Kl=v((function e(t){d(this,e),this.count=t}));function ql(e){switch(e){default:return Rs();case Ls.CANCELLED:case Ls.UNKNOWN:case Ls.DEADLINE_EXCEEDED:case Ls.RESOURCE_EXHAUSTED:case Ls.INTERNAL:case Ls.UNAVAILABLE:case Ls.UNAUTHENTICATED:return!1;case Ls.INVALID_ARGUMENT:case Ls.NOT_FOUND:case Ls.ALREADY_EXISTS:case Ls.PERMISSION_DENIED:case Ls.FAILED_PRECONDITION:case Ls.ABORTED:case Ls.OUT_OF_RANGE:case Ls.UNIMPLEMENTED:case Ls.DATA_LOSS:return!0}}function zl(e){if(void 0===e)return As("GRPC error has no .code"),Ls.UNKNOWN;switch(e){case jl.OK:return Ls.OK;case jl.CANCELLED:return Ls.CANCELLED;case jl.UNKNOWN:return Ls.UNKNOWN;case jl.DEADLINE_EXCEEDED:return Ls.DEADLINE_EXCEEDED;case jl.RESOURCE_EXHAUSTED:return Ls.RESOURCE_EXHAUSTED;case jl.INTERNAL:return Ls.INTERNAL;case jl.UNAVAILABLE:return Ls.UNAVAILABLE;case jl.UNAUTHENTICATED:return Ls.UNAUTHENTICATED;case jl.INVALID_ARGUMENT:return Ls.INVALID_ARGUMENT;case jl.NOT_FOUND:return Ls.NOT_FOUND;case jl.ALREADY_EXISTS:return Ls.ALREADY_EXISTS;case jl.PERMISSION_DENIED:return Ls.PERMISSION_DENIED;case jl.FAILED_PRECONDITION:return Ls.FAILED_PRECONDITION;case jl.ABORTED:return Ls.ABORTED;case jl.OUT_OF_RANGE:return Ls.OUT_OF_RANGE;case jl.UNIMPLEMENTED:return Ls.UNIMPLEMENTED;case jl.DATA_LOSS:return Ls.DATA_LOSS;default:return Rs()}}(Ul=jl||(jl={}))[Ul.OK=0]="OK",Ul[Ul.CANCELLED=1]="CANCELLED",Ul[Ul.UNKNOWN=2]="UNKNOWN",Ul[Ul.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ul[Ul.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ul[Ul.NOT_FOUND=5]="NOT_FOUND",Ul[Ul.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ul[Ul.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ul[Ul.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ul[Ul.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ul[Ul.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ul[Ul.ABORTED=10]="ABORTED",Ul[Ul.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ul[Ul.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ul[Ul.INTERNAL=13]="INTERNAL",Ul[Ul.UNAVAILABLE=14]="UNAVAILABLE",Ul[Ul.DATA_LOSS=15]="DATA_LOSS";var Wl=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Pu(this.inner,(function(t,n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ru(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Hl=new Du(ru.comparator);function Gl(){return Hl}var Ql=new Du(ru.comparator);function Yl(){for(var e=Ql,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Xl(e){var t=Ql;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Jl(){return Zl()}function $l(){return Zl()}function Zl(){return new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var eh=new Du(ru.comparator),th=new Mu(ru.comparator);function nh(){for(var e=th,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var rh=new Mu(Qs);function ih(){return rh}var ah=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,oh.createSynthesizedTargetChangeForCurrentChange(t,n)),new e($s.min(),r,ih(),Gl(),nh())}}]),e}(),oh=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Vu.EMPTY_BYTE_STRING,n,nh(),nh(),nh())}}]),e}(),sh=v((function e(t,n,r,i){d(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),uh=v((function e(t,n){d(this,e),this.targetId=t,this.At=n})),ch=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),lh=function(){function e(){d(this,e),this.Rt=0,this.bt=dh(),this.Pt=Vu.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return v(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=nh(),t=nh(),n=nh();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Rs()}})),new oh(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=dh()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Mt",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Ot",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),hh=function(){function e(t){d(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Gl(),this.qt=fh(),this.Kt=new Mu(Qs)}return v(e,[{key:"Gt",value:function(e){var t,n=Me(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(s){n.e(s)}finally{n.f()}var i,a=Me(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Rs()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Tc(i))if(0===n){var a=new ru(i.path);this.jt(t,a,_c.newNoDocument(a,$s.min()))}else Ds(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Tc(a.target)){var o=new ru(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,_c.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=nh();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new ah(e,n,this.Kt,this.Ut,r);return this.Ut=Gl(),this.qt=fh(),this.Kt=new Mu(Qs),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.zt(e).Ot()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new lh,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Mu(Qs),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||Cs("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new lh),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function fh(){return new Du(ru.comparator)}function dh(){return new Du(ru.comparator)}var ph={asc:"ASCENDING",desc:"DESCENDING"},vh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gh=v((function e(t,n){d(this,e),this.databaseId=t,this.gt=n}));function mh(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yh(e,t){return e.gt?t.toBase64():t.toUint8Array()}function kh(e,t){return mh(e,t.toTimestamp())}function bh(e){return Ds(!!e),$s.fromTimestamp(function(e){var t=Ku(e);return new Js(t.seconds,t.nanos)}(e))}function wh(e,t){return function(e){return new eu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _h(e){var t=eu.fromString(e);return Ds(Wh(t)),t}function xh(e,t){return wh(e.databaseId,t.path)}function Sh(e,t){var n=_h(t);if(n.get(1)!==e.databaseId.projectId)throw new Ms(Ls.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ms(Ls.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ru(Ch(n))}function Ih(e,t){return wh(e.databaseId,t)}function Eh(e){var t=_h(e);return 4===t.length?eu.emptyPath():Ch(t)}function Th(e){return new eu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ch(e){return Ds(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ah(e,t,n){return{name:xh(e,t),fields:n.value.mapValue.fields}}function Nh(e,t,n){var r=Sh(e,t.name),i=bh(t.updateTime),a=new bc({mapValue:{fields:t.fields}}),o=_c.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ph(e,t){return"found"in t?function(e,t){Ds(!!t.found),t.found.name,t.found.updateTime;var n=Sh(e,t.found.name),r=bh(t.found.updateTime),i=new bc({mapValue:{fields:t.found.fields}});return _c.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ds(!!t.missing),Ds(!!t.readTime);var n=Sh(e,t.missing),r=bh(t.readTime);return _c.newNoDocument(n,r)}(e,t):Rs()}function Rh(e,t){var n;if(t instanceof Dl)n={update:Ah(e,t.key,t.value)};else if(t instanceof Vl)n={delete:xh(e,t.key)};else if(t instanceof Ol)n={update:Ah(e,t.key,t.data),updateMask:zh(t.fieldMask)};else{if(!(t instanceof Bl))return Rs();n={verify:xh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof vl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bl)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Rs()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Rs()}(e,t.precondition)),n}function Dh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Il.updateTime(bh(e.updateTime)):void 0!==e.exists?Il.exists(e.exists):Il.none()}(t.currentDocument):Il.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ds("REQUEST_TIME"===t.setToServerValue),n=new vl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new gl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new yl(i)}else"increment"in t?n=new bl(e,t.increment):Rs();var a=nu.fromServerFormat(t.fieldPath);return new xl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Sh(e,t.update.name),a=new bc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Uu(t.map((function(e){return nu.fromServerFormat(e)})))}(t.updateMask);return new Ol(i,a,o,n,r)}return new Dl(i,a,n,r)}if(t.delete){var s=Sh(e,t.delete);return new Vl(s,n)}if(t.verify){var u=Sh(e,t.verify);return new Bl(u,n)}return Rs()}function Oh(e,t){return{documents:[Ih(e,t.path)]}}function Lh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ih(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ih(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(fc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NAN"}};if(hc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NOT_NAN"}};if(hc(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vh(e.field),op:Uh(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Vh(e.field),direction:jh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.gt||Xu(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Mh(e){var t=Eh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ds(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Fh(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Bc(Bh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Xu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Vc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Vc(n,t)}(n.endAt)),Hc(t,i,s,o,u,"F",c,l)}function Fh(e){return e?void 0!==e.unaryFilter?[qh(e)]:void 0!==e.fieldFilter?[Kh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Fh(e)})).reduce((function(e,t){return e.concat(t)})):Rs():[]}function jh(e){return ph[e]}function Uh(e){return vh[e]}function Vh(e){return{fieldPath:e.canonicalString()}}function Bh(e){return nu.fromServerFormat(e.fieldPath)}function Kh(e){return Pc.create(Bh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rs()}}(e.fieldFilter.op),e.fieldFilter.value)}function qh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Bh(e.unaryFilter.field);return Pc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Bh(e.unaryFilter.field);return Pc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bh(e.unaryFilter.field);return Pc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bh(e.unaryFilter.field);return Pc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Rs()}}function zh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Wh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Hh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Qh(t)),t=Gh(e.get(n),t);return Qh(t)}function Gh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Qh(e){return e+"\x01\x01"}function Yh(e){var t=e.length;if(Ds(t>=2),2===t)return Ds("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),eu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Rs(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Rs()}a=o+2}return new eu(r)}var Xh=["userId","batchId"];function Jh(e,t){return[e,Hh(t)]}function $h(e,t,n){return[e,Hh(t),n]}var Zh={},ef=["prefixPath","collectionGroup","readTime","documentId"],tf=["prefixPath","collectionGroup","documentId"],nf=["collectionGroup","readTime","prefixPath","documentId"],rf=["canonicalId","targetId"],af=["targetId","path"],of=["path","targetId"],sf=["collectionId","parent"],uf=["indexId","uid"],cf=["uid","sequenceNumber"],lf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hf=["indexId","uid","orderedDocumentKey"],ff=["userId","collectionPath","documentId"],df=["userId","collectionPath","largestBatchId"],pf=["userId","collectionGroup","largestBatchId"],vf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),gf=[].concat(f(vf),["documentOverlays"]),mf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yf=mf,kf=[].concat(yf,["indexConfiguration","indexState","indexEntries"]),bf=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return v(n)}(pu);function wf(e,t){var n=Os(e);return ku.O(n.ie,t)}var _f=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Al(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Me(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Nl(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=Me(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Nl(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=$l();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Cl(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument($s.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),nh())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(function(e,t){return Rl(e,t)}))&&Ys(this.baseMutations,e.baseMutations,(function(e,t){return Rl(e,t)}))}}]),e}(),xf=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){Ds(t.mutations.length===r.length);for(var i=eh,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Sf=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),If=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$s.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$s.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vu.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ef=v((function e(t){d(this,e),this.re=t}));function Tf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:xh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:mh(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Af(t.version)};else{if(!t.isUnknownDocument())return Rs();r.unknownDocument={path:n.path.toArray(),version:Af(t.version)}}return r}function Cf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Af(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Nf(e){var t=new Js(e.seconds,e.nanoseconds);return $s.fromTimestamp(t)}function Pf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Dh(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Dh(e.re,t)})),s=Js.fromMillis(t.localWriteTimeMs);return new _f(t.batchId,s,n,o)}function Rf(e){var t,n,r=Nf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Nf(e.lastLimboFreeSnapshotVersion):$s.min();return void 0!==e.query.documents?(Ds(1===(n=e.query).documents.length),t=Zc(Gc(Eh(n.documents[0])))):t=function(e){return Zc(Mh(e))}(e.query),new If(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Vu.fromBase64String(e.resumeToken))}function Df(e,t){var n,r=Af(t.snapshotVersion),i=Af(t.lastLimboFreeSnapshotVersion);n=Tc(t.target)?Oh(e.re,t.target):Lh(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ic(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Of(e){var t=Mh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?el(t,t.limit,"L"):t}function Lf(e,t){return new Sf(t.largestBatchId,Dh(e.re,t.overlayMutation))}function Mf(e,t){var n=t.path.lastSegment();return[e,Hh(t.path.popLast()),n]}function Ff(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Af(r.readTime),documentKey:Hh(r.documentKey.path),largestBatchId:r.largestBatchId}}var jf=function(){function e(){d(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return Uf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Nf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Uf(e).put({bundleId:(n=t).id,createTime:Af(bh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Vf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Of(t.bundledQuery),readTime:Nf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Vf(e).put(function(e){return{name:e.name,readTime:Af(bh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Uf(e){return wf(e,"bundles")}function Vf(e){return wf(e,"namedQueries")}var Bf=function(){function e(t,n){d(this,e),this.It=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kf(e).get(Mf(this.userId,t)).next((function(e){return e?Lf(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jl();return mu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Sf(t,a);i.push(r.ue(e,o))})),mu.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Hh(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Kf(e).Y("collectionPathOverlayIndex",i))})),mu.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Jl(),a=Hh(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kf(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Lf(r.It,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Jl(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kf(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Lf(a.It,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return Kf(e).put(function(e,t,n){var r=l(Mf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Rh(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kf(e){return wf(e,"documentOverlays")}var qf=function(){function e(){d(this,e)}return v(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(qu(e.integerValue));else if("doubleValue"in e){var n=qu(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Ju(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(zu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?vc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Rs()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),ru.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function zf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Wf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=zf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}qf.Te=new qf;var Hf=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=Wf(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=Wf(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Me(0),this.Me(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Gf=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Qf=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Oe()}}]),e}(),Yf=function(){function e(){d(this,e),this.Be=new Hf,this.Le=new Gf(this.Be),this.Ue=new Qf(this.Be)}return v(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),Xf=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Jf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=$f(e.arrayValue,t.arrayValue))?n:0!==(n=$f(e.directionalValue,t.directionalValue))?n:ru.comparator(e.documentKey,t.documentKey)}function $f(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Zf=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Me(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return v(e,[{key:"We",value:function(e){var t=au(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=ou(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Me(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),ed=function(){function e(){d(this,e),this.Ye=new td}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),mu.resolve()}},{key:"getCollectionParents",value:function(e,t){return mu.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return mu.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return mu.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return mu.resolve(null)}},{key:"getIndexType",value:function(e,t){return mu.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return mu.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return mu.resolve(null)}},{key:"getMinOffset",value:function(e,t){return mu.resolve(hu.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return mu.resolve(hu.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return mu.resolve()}},{key:"updateIndexEntries",value:function(e,t){return mu.resolve()}}]),e}(),td=function(){function e(){d(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Mu(eu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Mu(eu.comparator)).toArray()}}]),e}(),nd=new Uint8Array(0),rd=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Xe=new td,this.Ze=new Wl((function(e){return Ic(e)}),(function(e,t){return Ec(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Hh(i)};return id(e).put(a)}return mu.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Xs(t),""],!1,!0);return id(e).W(r).next((function(e){var r,i=Me(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Yh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=od(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=sd(e);return a.next((function(e){o.put(Ff(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=od(e),r=sd(e),i=ad(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ad(e),i=!0,a=new Map;return mu.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=nh(),o=[];return mu.forEach(a,(function(i,a){var s;Cs("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ic(t)));var u=function(e,t){var n=au(t);if(void 0===n)return null;var r,i=Me(Cc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Me(ou(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Me(Cc(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Me(ou(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Ac(e,o.fieldPath,e.startAt):Nc(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Vc(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=Me(ou(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Nc(e,o.fieldPath,e.endAt):Ac(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Vc(r,i)}(a,i),f=n.nn(i,a,l),d=n.nn(i,a,h),p=n.sn(i,a,c),v=n.rn(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return mu.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=ru.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return mu.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(u){var h=t?s.on(t[u/c]):nd,d=s.un(e,h,n[u%c],r),p=s.cn(e,h,i[u%c],a),v=o.map((function(t){return s.un(e,h,t,!0)}));l.push.apply(l,f(s.createRange(d,p,v)))},d=0;d<u;++d)h(d);return l}},{key:"un",value:function(e,t,n,r){var i=new Xf(e,ru.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new Xf(e,ru.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Zf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return mu.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Mu(nu.comparator),r=!1,i=Me(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=Me(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Yf,i=Me(ou(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.qe(a.kind);qf.Te.ce(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Yf;return qf.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Yf;return qf.Te.ce(uc(this.databaseId,t),n.qe(function(e){var t=ou(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Yf);var i,a=0,o=Me(ou(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=Me(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.ln(t,u.fieldPath)&&lc(c))r=this.fn(r,u,c);else{var f=h.qe(u.kind);qf.Te.ce(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=f(e),a=[],o=Me(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=Me(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new Yf;h.seed(l.$e()),qf.Te.ce(u,h.qe(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Pc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=od(e),i=sd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return mu.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new uu(t.sequenceNumber,new hu(Nf(t.readTime),new ru(Yh(t.documentKey)),t.largestBatchId)):uu.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new su(nu.fromServerFormat(n),r)}));return new iu(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qs(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=od(e),a=sd(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return mu.forEach(t,(function(t){return a.put(Ff(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return mu.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?mu.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),mu.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?mu.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return ad(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return ad(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=ad(e),i=new Mu(Jf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new Xf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Mu(Jf),r=this.an(t,e);if(null==r)return n;var i=au(t);if(null!=i){var a=e.data.field(i.fieldPath);if(lc(a)){var o,s=Me(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Xf(t.indexId,e.key,this.on(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Xf(t.indexId,e.key,nd,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;Cs("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=ju(a),u=ju(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=ju(o)):l?(i(s),s=ju(a)):(s=ju(a),u=ju(o))}}(r,i,Jf,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),mu.waitFor(o)}},{key:"_n",value:function(e){var t=1;return sd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Jf(e,t)})).filter((function(e,t,n){return!t||0!==Jf(e,n[t-1])}));var r=[];r.push(e);var i,a=Me(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Jf(o,e),u=Jf(o,t);if(0===s)r[0]=e.Ke();else if(s>0&&u<0)r.push(o),r.push(o.Ke());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,nd,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,nd,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ud)}},{key:"getMinOffset",value:function(e,t){var n=this;return mu.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Rs()}))})).next(ud)}}]),e}();function id(e){return wf(e,"collectionParents")}function ad(e){return wf(e,"indexEntries")}function od(e){return wf(e,"indexConfiguration")}function sd(e){return wf(e,"indexState")}function ud(e){Ds(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;fu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hu(t.readTime,t.documentKey,n)}var cd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ld=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function hd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Ds(1===s)})));var c,l=[],h=Me(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=$h(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return mu.waitFor(a).next((function(){return l}))}function fd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Rs();t=e.noDocument}return JSON.stringify(t).length}ld.DEFAULT_COLLECTION_PERCENTILE=10,ld.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ld.DEFAULT=new ld(41943040,ld.DEFAULT_COLLECTION_PERCENTILE,ld.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ld.DISABLED=new ld(-1,0,0);var dd=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vd(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=gd(e),o=vd(e);return o.add({}).next((function(s){Ds("number"==typeof s);var u,c=new _f(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Rh(e.re,t)})),i=n.mutations.map((function(t){return Rh(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),h=[],f=new Mu((function(e,t){return Qs(e.canonicalString(),t.canonicalString())})),d=Me(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=$h(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Zh))}}catch(g){d.e(g)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[s]=c.keys()})),mu.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return vd(e).get(t).next((function(e){return e?(Ds(e.userId===n.userId),Pf(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?mu.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return vd(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ds(t.batchId>=r),a=Pf(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vd(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Pf(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Jh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return gd(e).Z({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],h=s[2],f=Yh(c);if(u===n.userId&&t.path.isEqual(f))return vd(e).get(h).next((function(e){if(!e)throw Rs();Ds(e.userId===n.userId),a.push(Pf(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mu(Qs),i=[];return t.forEach((function(t){var a=Jh(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=gd(e).Z({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],h=Yh(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(s)})),mu.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Jh(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Mu(Qs);return gd(e).Z({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],h=o[2],f=Yh(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):a.done()})).next((function(){return n.En(e,s)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(vd(e).get(t).next((function(e){if(null===e)throw Rs();Ds(e.userId===n.userId),r.push(Pf(n.It,e))})))})),mu.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return hd(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),mu.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return mu.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return gd(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Yh(e[1]);i.push(a)}else r.done()})).next((function(){Ds(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return pd(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return md(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Ds(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function pd(e,t,n){var r=Jh(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return gd(e).Z({range:a,X:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function vd(e){return wf(e,"mutations")}function gd(e){return wf(e,"documentMutations")}function md(e){return wf(e,"mutationQueues")}var yd=function(){function e(t){d(this,e),this.bn=t}return v(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),kd=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.It=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new yd(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return $s.fromTimestamp(new Js(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return bd(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Ds(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return bd(e).Z((function(o,s){var u=Rf(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return mu.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return bd(e).Z((function(e,n){var r=Rf(n);t(r)}))}},{key:"Vn",value:function(e){return wd(e).get("targetGlobalKey").next((function(e){return Ds(null!==e),e}))}},{key:"Sn",value:function(e,t){return wd(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return bd(e).put(Df(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ic(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bd(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Rf(n);Ec(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=_d(e);return t.forEach((function(t){var o=Hh(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),mu.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=_d(e);return mu.forEach(t,(function(t){var a=Hh(t.path);return mu.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=_d(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_d(e),i=nh();return r.Z({range:n,X:!0},(function(e,t,n){var r=Yh(e[1]),a=new ru(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Hh(t.path),r=IDBKeyRange.bound([n],[Xs(n)],!1,!0),i=0;return _d(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return bd(e).get(t).next((function(e){return e?Rf(e):null}))}}]),e}();function bd(e){return wf(e,"targets")}function wd(e){return wf(e,"targetGlobal")}function _d(e){return wf(e,"targetDocuments")}function xd(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=Qs(r,o);return 0===u?Qs(i,s):u}var Sd=function(){function e(t){d(this,e),this.xn=t,this.buffer=new Mu(xd),this.Nn=0}return v(e,[{key:"kn",value:function(){return++this.Nn}},{key:"Mn",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();xd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Id=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return v(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"Fn",value:function(e){var t=this;Cs("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!_u(e.t0)){e.next=12;break}Cs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,vu(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Ed=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return mu.resolve(Au.at);var r=new Sd(t);return this.$n.forEachTarget(e,(function(e){return r.Mn(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.Mn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Cs("LruGarbageCollector","Garbage collection skipped; disabled"),mu.resolve(cd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Cs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),cd):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Cs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ts()<=jt.DEBUG&&Cs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),mu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Td=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ed(e,t)}(this,n)}return v(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Cd(e,n)}},{key:"removeReference",value:function(e,t,n){return Cd(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Cd(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return md(e).tt((function(r){return pd(e,r,t).next((function(e){return e&&(n=!0),mu.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,s){if(s<=t){var u=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,$s.min()),_d(e).delete([0,Hh(o.path)])}))}));i.push(u)}})).next((function(){return mu.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Cd(e,t)}},{key:"Kn",value:function(e,t){var n,r=_d(e),i=Au.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Au.at&&t(new ru(Yh(n)),i),i=u,n=s):i=Au.at})).next((function(){i!==Au.at&&t(new ru(Yh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Cd(e,t){return _d(e).put(function(e,t){return{targetId:0,path:Hh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ad=function(){function e(){d(this,e),this.changes=new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,_c.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?mu.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Nd=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Od(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Od(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Cf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=_c.newInvalidDocument(t);return Od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ld(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:_c.newInvalidDocument(t)};return Od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ld(t))},(function(e,i){r={document:n.jn(t,i),size:fd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Gl();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Gl(),i=new Du(ru.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,fd(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return mu.resolve();var r=new Mu(Fd);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ld(r.first()),Ld(r.last())),a=r.getIterator(),o=a.getNext();return Od(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ru.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Fd(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Ld(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Cf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Od(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Gl(),i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(ru.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Gl(),o=Md(t,n),s=Md(t,hu.max());return Od(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.jn(ru.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Rd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Dd(e).get("remoteDocumentGlobalKey").next((function(e){return Ds(!!e),e}))}},{key:"Qn",value:function(e,t){return Dd(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Nh(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ru.fromSegments(t.noDocument.path),i=Nf(t.noDocument.readTime);n=_c.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Rs();var a=ru.fromSegments(t.unknownDocument.path),o=Nf(t.unknownDocument.version);n=_c.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Js(e[0],e[1]);return $s.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual($s.min()))return n}return _c.newInvalidDocument(e)}}]),e}();function Pd(e){return new Nd(e)}var Rd=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Mu((function(e,t){return Qs(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=Tf(t.Yn.It,o);i=i.add(a.path.popLast());var c=fd(u);r+=c-s.size,n.push(t.Yn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=Tf(t.Yn.It,o.convertToNoDocument($s.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),mu.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Ad);function Dd(e){return wf(e,"remoteDocumentGlobal")}function Od(e){return wf(e,"remoteDocumentsV14")}function Ld(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Md(e,t){var n=t.documentKey.path.toArray();return[e,Cf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Fd(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Qs(n[a],r[a]))return i;return(i=Qs(n.length,r.length))||((i=Qs(n[n.length-2],r[r.length-2]))||Qs(n[n.length-1],r[r.length-1]))}var jd=v((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Ud=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Nl(r.mutation,e,Uu.empty(),Js.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,nh()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nh(),i=Jl();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Yl();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Jl();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,nh())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Gl(),a=Zl(),o=Zl();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ol)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Nl(o.mutation,t,o.mutation.getFieldMask(),Js.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new jd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Zl(),i=new Du((function(e,t){return e-t})),a=nh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Me(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Uu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||nh()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=$l();c.forEach((function(e){if(!a.has(e)){var n=Cl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return mu.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ru.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):mu.resolve(Jl()),s=-1,u=a;return o.next((function(t){return mu.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?mu.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,nh())})).next((function(e){return{batchId:s,changes:Xl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ru(t)).next((function(e){var t=Yl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Yl();return this.indexManager.getCollectionParents(e,i).next((function(o){return mu.forEach(o,(function(o){var s=function(e,t){return new Wc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,_c.newInvalidDocument(n)))}));var n=Yl();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Nl(a.mutation,i,Uu.empty(),Js.now()),il(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):mu.resolve(_c.newInvalidDocument(t))}}]),e}(),Vd=function(){function e(t){d(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return mu.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:bh(n.createTime)}),mu.resolve()}},{key:"getNamedQuery",value:function(e,t){return mu.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Of(e.bundledQuery),readTime:bh(e.readTime)}}(t)),mu.resolve()}}]),e}(),Bd=function(){function e(){d(this,e),this.overlays=new Du(ru.comparator),this.es=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return mu.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jl();return mu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),mu.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),mu.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Jl(),i=t.length+1,a=new ru(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return mu.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Du((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Jl(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Jl(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return mu.resolve(u)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Sf(t,n));var a=this.es.get(t);void 0===a&&(a=nh(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Kd=function(){function e(){d(this,e),this.ns=new Mu(qd.ss),this.rs=new Mu(qd.os)}return v(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new qd(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new qd(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new ru(new eu([])),r=new qd(n,e),i=new qd(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new ru(new eu([])),n=new qd(t,e),r=new qd(t,e+1),i=nh();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new qd(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),qd=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return v(e,null,[{key:"ss",value:function(e,t){return ru.comparator(e.key,t.key)||Qs(e._s,t._s)}},{key:"os",value:function(e,t){return Qs(e._s,t._s)||ru.comparator(e.key,t.key)}}]),e}(),zd=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Mu(qd.ss)}return v(e,[{key:"checkEmpty",value:function(e){return mu.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new _f(i,t,n,r);this.mutationQueue.push(a);var o,s=Me(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gs=this.gs.add(new qd(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return mu.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return mu.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return mu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return mu.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return mu.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new qd(t,0),i=new qd(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),mu.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mu(Qs);return t.forEach((function(e){var t=new qd(e,0),i=new qd(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),mu.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ru.isDocumentKey(i)||(i=i.child(""));var a=new qd(new ru(i),0),o=new Mu(Qs);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),mu.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ds(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return mu.forEach(t.mutations,(function(i){var a=new qd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new qd(t,0),r=this.gs.firstAfterOrEqual(n);return mu.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,mu.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Wd=function(){function e(t){d(this,e),this.Es=t,this.docs=new Du(ru.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return mu.resolve(n?n.document.mutableCopy():_c.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():_c.newInvalidDocument(e))})),mu.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Gl(),i=new ru(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||fu(lu(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return mu.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Rs()}},{key:"As",value:function(e,t){return mu.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Hd(this)}},{key:"getSize",value:function(e){return mu.resolve(this.size)}}]),e}(),Hd=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),mu.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Ad),Gd=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new Wl((function(e){return Ic(e)}),Ec),this.lastRemoteSnapshotVersion=$s.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Kd,this.targetCount=0,this.vs=yd.Pn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),mu.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return mu.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return mu.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),mu.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),mu.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new yd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,mu.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),mu.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,mu.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),mu.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return mu.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return mu.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),mu.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),mu.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),mu.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return mu.resolve(n)}},{key:"containsKey",value:function(e,t){return mu.resolve(this.Ps.containsKey(t))}}]),e}(),Qd=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new Au(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Gd(this),this.indexManager=new ed,this.remoteDocumentCache=new Wd((function(e){return r.referenceDelegate.xs(e)})),this.It=new Ef(n),this.Ns=new Vd(this.It)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Bd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new zd(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Cs("MemoryPersistence","Starting transaction:",e);var i=new Yd(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Ms(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return mu.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Yd=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(pu),Xd=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new Kd,this.$s=null}return v(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Rs()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),mu.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),mu.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),mu.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Ms",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mu.forEach(this.Ls,(function(r){var i=ru.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,$s.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return mu.or([function(){return mu.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Jd=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new yu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xh,{unique:!0}),e.createObjectStore("documentMutations")}(e),$d(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=mu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),$d(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$s.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return mu.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ff});t.createIndex("collectionPathOverlayIndex",df,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",pf,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ef});t.createIndex("documentKeyIndex",tf),t.createIndex("collectionGroupIndex",nf)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:uf}).createIndex("sequenceNumberIndex",cf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:lf}).createIndex("documentKeyIndex",hf,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=fd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return mu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return mu.forEach(r,(function(r){Ds(r.userId===n.userId);var i=Pf(t.It,r);return hd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new eu(n),o=function(e){return[0,Hh(e)]}(a);r.push(t.get(o).next((function(n){return n?mu.resolve():function(n){return t.put({targetId:0,path:Hh(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return mu.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:sf});var n=t.store("collectionParents"),r=new td,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Hh(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new eu(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Yh(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Rf(r),a=Df(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ru(eu.fromString(i.document.name).popFirst(5)):i.noDocument?ru.fromSegments(i.noDocument.path):i.unknownDocument?ru.fromSegments(i.unknownDocument.path):Rs()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return mu.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Pd(this.It),a=new Qd(Xd.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:nh();Pf(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),mu.forEach(r,(function(e,r){var o=new Ss(r),s=Bf.oe(n.It,o),u=a.getIndexManager(o),c=dd.oe(o,n.It,u,a.referenceDelegate);return new Ud(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new bf(t,Au.at),e).next()}))}))}}]),e}();function $d(e){e.createObjectStore("targetDocuments",{keyPath:af}).createIndex("documentTargetsIndex",of,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rf,{unique:!0}),e.createObjectStore("targetGlobal")}var Zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ep=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=s,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Ms(Ls.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Td(this,i),this.ii=n+"main",this.It=new Ef(u),this.ri=new ku(this.ii,this.Xs,new Jd(this.It)),this.Cs=new kd(this.referenceDelegate,this.It),this.remoteDocumentCache=Pd(this.It),this.Ns=new jf,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&As("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ms(Ls.FAILED_PRECONDITION,Zd);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Au(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Rt(Nt().mark((function n(r){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Rt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return np(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(_u(t))return Cs("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Cs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return tp(e).get("owner").next((function(e){return mu.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return np(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i,a=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=wf(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return mu.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Me(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?mu.resolve(!0):tp(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Ms(Ls.FAILED_PRECONDITION,Zd);return!1}}return!(!t.networkEnabled||!t.inForeground)||np(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Cs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Rt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new bf(e,Au.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return np(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return dd.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new rd(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Bf.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Cs("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.Xs)?kf:14===i?yf:13===i?mf:12===i?gf:11===i?vf:void Rs();return this.ri.runTransaction(e,o,s,(function(i){return a=new bf(i,r.Ss?r.Ss.next():Au.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw As("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Ms(Ls.FAILED_PRECONDITION,du);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return tp(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ms(Ls.FAILED_PRECONDITION,Zd)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tp(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=tp(e);return n.get("owner").next((function(e){return t.mi(e)?(Cs("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):mu.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(As("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Cs("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return As("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(xr){As("Failed to set zombie client id.",xr)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(xr){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return ku.C()}}]),e}();function tp(e){return wf(e,"owner")}function np(e){return wf(e,"clientMetadata")}function rp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ip=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return v(e,null,[{key:"Ci",value:function(t,n){var r,i=nh(),a=nh(),o=Me(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ap=function(){function e(){d(this,e),this.xi=!1}return v(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Mi(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Qc(t))return mu.resolve(null);var r=Zc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=el(t,null,"F"),r=Zc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=nh.apply(void 0,f(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,el(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Mi",value:function(e,t,n,r){var i=this;return Qc(t)||r.isEqual($s.min())?this.Oi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Oi(e,t):(Ts()<=jt.DEBUG&&Cs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rl(t)),i.Bi(e,o,t,cu(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Mu(ol(e));return t.forEach((function(t,r){il(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Ts()<=jt.DEBUG&&Cs("QueryEngine","Using full collection scan to execute query:",rl(t)),this.Ni.getDocumentsMatchingQuery(e,t,hu.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),op=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Du(Qs),this.qi=new Wl((function(e){return Ic(e)}),Ec),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return v(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ud(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function sp(e,t,n,r){return new op(e,t,n,r)}function up(e,t){return cp.apply(this,arguments)}function cp(){return cp=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=nh(),u=Me(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=Me(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=Me(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var g,m=Me(v.mutations);try{for(m.s();!(g=m.n()).done;){var y=g.value;s=s.add(y.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function lp(e,t){var n=Os(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=mu.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ds(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=nh(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function hp(e){var t=Os(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function fp(e,t){var n=Os(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Vu.EMPTY_BYTE_STRING,$s.min()).withLastLimboFreeSnapshotVersion($s.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var s=Gl(),u=nh();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(dp(e,a,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual($s.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return mu.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ui=i,e}))}function dp(e,t,n){var r=nh(),i=nh();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gl();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual($s.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Cs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function pp(e,t){var n=Os(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function vp(e,t){var n=Os(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,mu.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new If(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function gp(e,t,n){return mp.apply(this,arguments)}function mp(){return mp=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Os(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_u(e.t1)){e.next=12;break}throw e.t1;case 12:Cs("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),mp.apply(this,arguments)}function yp(e,t,n){var r=Os(e),i=$s.min(),a=nh();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Os(e),i=r.qi.get(n);return void 0!==i?mu.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Zc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:$s.min(),n?a:nh())})).next((function(e){return wp(r,al(t),e),{documents:e,Hi:a}}))}))}function kp(e,t){var n=Os(e),r=Os(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function bp(e,t){var n=Os(e),r=n.Ki.get(t)||$s.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,cu(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return wp(n,t,e),e}))}function wp(e,t,n){var r=$s.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function _p(e,t,n,r){return xp.apply(this,arguments)}function xp(){return xp=Rt(Nt().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Os(t),o=nh(),s=Gl(),u=Me(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Ji(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,vp(a,function(e){return Zc(Gc(eu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return dp(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Sp(e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=Rt(Nt().mark((function e(t,n){var r,i,a,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:nh(),e.next=3,vp(t,Zc(Of(n.bundledQuery)));case 3:return i=e.sent,a=Os(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=bh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Vu.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Ep(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Tp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Cp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ap=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ms(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(As("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Np=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ms(i.error.code,i.error.message))),a?new e(t,i.state,r):(As("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Pp=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ih(),o=0;i&&o<r.activeTargetIds.length;++o)i=$u(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(As("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Rp=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(As("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Dp=function(){function e(){d(this,e),this.activeTargetIds=ih()}return v(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Op=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Du(Qs),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Ep(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Dp),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return v(e,[{key:"start",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Me(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ep(this.persistenceKey,i)))&&(o=Pp.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(s=this.storage.getItem(this.wr))&&(u=this.yr(s))&&this.pr(u),c=Me(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.rr(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Cp(this.persistenceKey,e));if(n){var r=Np.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Cp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Cs("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Cs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Cs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Cs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void As("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Rt(Nt().mark((function e(){var r,i,a,o,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(s));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}u=function(e){var t=Au.at;if(null!=e)try{var n=JSON.parse(e);Ds("number"==typeof n),t=n}catch(e){As("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Au.at&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Mr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Ap(this.currentUser,e,t,n),i=Tp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Tp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Cp(this.persistenceKey,e),i=new Np(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Pp.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ap.Zi(new Ss(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Np.Zi(r,t)}},{key:"yr",value:function(e){return Rp.Zi(e)}},{key:"Mr",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Cs("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Br(o,s).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=ih();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Lp=function(){function e(){d(this,e),this.Lr=new Dp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Dp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Mp=function(){function e(){d(this,e)}return v(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Fp=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return v(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Cs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Me(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Cs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Me(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),jp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Up=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return v(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Vp=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"lo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new _s;o.listenOnce(ms.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case gs.NO_ERROR:var t=o.getResponseJson();Cs("Connection","XHR received:",JSON.stringify(t)),i(t);break;case gs.TIMEOUT:Cs("Connection",'RPC "'+e+'" timed out'),a(new Ms(Ls.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:var n=o.getStatus();if(Cs("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ls).indexOf(t)>=0?t:Ls.UNKNOWN}(r.status);a(new Ms(s,r.message))}else a(new Ms(Ls.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ms(Ls.UNAVAILABLE,"Connection failed."));break;default:Rs()}}finally{Cs("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"_o",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ps(),a=vs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new bs({})),this.ho(o.initMessageHeaders,t,n),Je()||et()||Xe().indexOf("Electron/")>=0||tt()||Xe().indexOf("MSAppHost/")>=0||Ze()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Cs("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new Up({Hr:function(e){l?Cs("Connection","Not sending because WebChannel is closed:",e):(c||(Cs("Connection","Opening WebChannel transport."),u.open(),c=!0),Cs("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,ws.EventType.OPEN,(function(){l||Cs("Connection","WebChannel transport opened.")})),f(u,ws.EventType.CLOSE,(function(){l||(l=!0,Cs("Connection","WebChannel transport closed"),h.io())})),f(u,ws.EventType.ERROR,(function(e){l||(l=!0,Ns("Connection","WebChannel transport errored:",e),h.io(new Ms(Ls.UNAVAILABLE,"The operation could not be completed")))})),f(u,ws.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ds(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Cs("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=jl[e];if(void 0!==t)return zl(t)}(a),s=i.message;void 0===o&&(o=Ls.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new Ms(o,s)),u.close()}else Cs("Connection","WebChannel received:",n),h.ro(n)}})),f(a,ys.STAT_EVENT,(function(e){e.stat===ks.PROXY?Cs("Connection","Detected buffering proxy"):e.stat===ks.NOPROXY&&Cs("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ao(e,t);Cs("RestConnection","Sending: ",a,n);var o={};return this.ho(o,r,i),this.lo(e,a,o,n).then((function(e){return Cs("RestConnection","Received: ",e),e}),(function(t){throw Ns("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Is,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=jp[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Bp(){return"undefined"!=typeof window?window:null}function Kp(){return"undefined"!=typeof document?document:null}function qp(e){return new gh(e,!0)}var zp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Cs("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}},{key:"bo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Wp=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.Hs=t,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zp(t,n)}return v(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ls.RESOURCE_EXHAUSTED?(As(n.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===Ls.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Ms(Ls.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.xo.Ao(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Cs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Cs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Hp=function(e){m(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).It=o,u}return v(n,[{key:"jo",value:function(e,t){return this.Vo._o("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Rs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Ds(void 0===t||"string"==typeof t),Vu.fromBase64String(t||"")):(Ds(void 0===t||t instanceof Uint8Array),Vu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Ls.UNKNOWN:zl(e.code);return new Ms(t,e.message||"")}(o);n=new ch(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Sh(e,u.document.name),l=bh(u.document.updateTime),h=new bc({mapValue:{fields:u.document.fields}}),f=_c.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new sh(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var g=Sh(e,v.document),m=v.readTime?bh(v.readTime):$s.min(),y=_c.newNoDocument(g,m),k=v.removedTargetIds||[];n=new sh([],k,y.key,y)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Sh(e,b.document),_=b.removedTargetIds||[];n=new sh([],_,w,null)}else{if(!("filter"in t))return Rs();t.filter;var x=t.filter;x.targetId;var S=x.count||0,I=new Kl(S),E=x.targetId;n=new uh(E,I)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return $s.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$s.min():t.readTime?bh(t.readTime):$s.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Th(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Tc(r)?{documents:Oh(e,r)}:{query:Lh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=yh(e,t.resumeToken):t.snapshotVersion.compareTo($s.min())>0&&(n.readTime=mh(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Rs()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Th(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(Wp),Gp=function(e){m(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).It=o,u.Jo=!1,u}return v(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,ur(y(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.Vo._o("Write",e,t)}},{key:"onMessage",value:function(e){if(Ds(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Ds(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?bh(e.updateTime):bh(t);return n.isEqual($s.min())&&(n=bh(t)),new Sl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=bh(e.commitTime);return this.listener.Zo(n,t)}return Ds(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Th(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Rh(t.It,e)}))};this.Bo(n)}}]),n}(Wp),Qp=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Vo=i,o.It=a,o.nu=!1,o}return v(n,[{key:"su",value:function(){if(this.nu)throw new Ms(Ls.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.Vo.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ls.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ms(Ls.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.Vo.fo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ls.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ms(Ls.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return v((function e(){d(this,e)}))}()),Yp=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return v(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(As(t),this.ou=!1):Cs("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Xp=v((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=sv(o),!e.t0){e.next=5;break}return Cs("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Os(t))._u.add(4),e.next=4,Zp(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Jp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Yp(r,i)}));function Jp(e){return $p.apply(this,arguments)}function $p(){return $p=Rt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sv(t)){e.next=18;break}n=Me(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),$p.apply(this,arguments)}function Zp(e){return ev.apply(this,arguments)}function ev(){return ev=Rt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Me(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ev.apply(this,arguments)}function tv(e,t){var n=Os(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),ov(n)?av(n):Mv(n).ko()&&rv(n,t))}function nv(e,t){var n=Os(e),r=Mv(n);n.du.delete(t),r.ko()&&iv(n,t),0===n.du.size&&(r.ko()?r.Fo():sv(n)&&n.gu.set("Unknown"))}function rv(e,t){e.yu.Ot(t.targetId),Mv(e).zo(t)}function iv(e,t){e.yu.Ot(t),Mv(e).Ho(t)}function av(e){e.yu=new hh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),Mv(e).start(),e.gu.uu()}function ov(e){return sv(e)&&!Mv(e).No()&&e.du.size>0}function sv(e){return 0===Os(e)._u.size}function uv(e){e.yu=void 0}function cv(e){return lv.apply(this,arguments)}function lv(){return lv=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){rv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function hv(e,t){return fv.apply(this,arguments)}function fv(){return fv=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uv(t),ov(t)?(t.gu.hu(n),av(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function dv(e,t,n){return pv.apply(this,arguments)}function pv(){return pv=Rt(Nt().mark((function e(t,n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof ch&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Me(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Cs("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,vv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof sh?t.yu.Gt(n):n instanceof uh?t.yu.Yt(n):t.yu.Wt(n),r.isEqual($s.min())){e.next=29;break}return e.prev=14,e.next=17,hp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Vu.EMPTY_BYTE_STRING,n.snapshotVersion)),iv(e,t);var r=new If(n.target,t,1,n.sequenceNumber);rv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Cs("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,vv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),pv.apply(this,arguments)}function vv(e,t,n){return gv.apply(this,arguments)}function gv(){return gv=Rt(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_u(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Zp(t);case 5:t.gu.set("Offline"),r||(r=function(){return hp(t.localStore)}),t.asyncQueue.enqueueRetryable(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Jp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),gv.apply(this,arguments)}function mv(e,t){return t().catch((function(n){return vv(e,n,t)}))}function yv(e){return kv.apply(this,arguments)}function kv(){return kv=Rt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Os(t),r=Fv(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!bv(n)){e.next=19;break}return e.prev=3,e.next=6,pp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,wv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,vv(n,e.t0);case 17:e.next=2;break;case 19:_v(n)&&xv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),kv.apply(this,arguments)}function bv(e){return sv(e)&&e.fu.length<10}function wv(e,t){e.fu.push(t);var n=Fv(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function _v(e){return sv(e)&&!Fv(e).No()&&e.fu.length>0}function xv(e){Fv(e).start()}function Sv(e){return Iv.apply(this,arguments)}function Iv(){return Iv=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fv(t).eu();case 1:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Ev(e){return Tv.apply(this,arguments)}function Tv(){return Tv=Rt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fv(t),r=Me(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Cv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=xf.from(i,n,r),e.next=3,mv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,yv(t);case 5:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Nv(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Fv(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ql(i=n.code)||i===Ls.ABORTED){e.next=7;break}return r=t.fu.shift(),Fv(t).Oo(),e.next=5,mv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,yv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:_v(t)&&xv(t);case 5:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Rv(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Os(t)).asyncQueue.verifyOperationInProgress(),Cs("RemoteStore","RemoteStore received new credentials"),i=sv(r),r._u.add(3),e.next=6,Zp(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Jp(r);case 12:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Ov(e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Jp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Zp(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Mv(e){return e.pu||(e.pu=function(e,t,n){var r=Os(e);return r.su(),new Hp(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:cv.bind(null,e),Zr:hv.bind(null,e),Wo:dv.bind(null,e)}),e.wu.push(function(){var t=Rt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Oo(),ov(e)?av(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:uv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Fv(e){return e.Iu||(e.Iu=function(e,t,n){var r=Os(e);return r.su(),new Gp(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Sv.bind(null,e),Zr:Nv.bind(null,e),tu:Ev.bind(null,e),Zo:Cv.bind(null,e)}),e.wu.push(function(){var t=Rt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Oo(),t.next=4,yv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Cs("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var jv=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ms(Ls.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Uv(e,t){if(As("AsyncQueue","".concat(t,": ").concat(e)),_u(e))return new Ms(Ls.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Vv=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||ru.comparator(e.key,n.key)}:function(e,t){return ru.comparator(e.key,t.key)},this.keyedMap=Yl(),this.sortedSet=new Du(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Bv=function(){function e(){d(this,e),this.Tu=new Du(ru.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Rs():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Kv=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Vv.emptySet(n),a,r,i,!0,!1)}}]),e}(),qv=v((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),zv=v((function e(){d(this,e),this.queries=new Wl((function(e){return nl(e)}),tl),this.onlineState="Unknown",this.Ru=new Set}));function Wv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=Rt(Nt().mark((function e(t,n){var r,i,a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new qv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Uv(e.t0,"Initialization of query '".concat(rl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Jv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Hv.apply(this,arguments)}function Gv(e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=Rt(Nt().mark((function e(t,n){var r,i,a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(e,t){var n,r=Os(e),i=!1,a=Me(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=Me(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&Jv(r)}function Xv(e,t,n){var r=Os(e),i=r.queries.get(t);if(i){var a,o=Me(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Jv(e){e.Ru.forEach((function(e){e.next()}))}var $v=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Me(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Kv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}]),e}(),Zv=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return v(e,[{key:"ku",value:function(){return"metadata"in this.payload}}]),e}(),eg=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"Ji",value:function(e){return Sh(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Nh(this.It,e.document,!1):_c.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return bh(e)}}]),e}(),tg=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ng(t)}return v(e,[{key:"Ou",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=eu.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Fu",value:function(e){var t,n=new Map,r=new eg(this.It),i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Ji(a.metadata.name),u=Me(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||nh()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_p(this.localStore,new eg(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.Fu(this.documents),r=Me(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Sp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ng(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var rg=v((function e(t){d(this,e),this.key=t})),ig=v((function e(t){d(this,e),this.key=t})),ag=function(){function e(t,n){d(this,e),this.query=t,this.Lu=n,this.Uu=null,this.current=!1,this.qu=nh(),this.mutatedKeys=nh(),this.Ku=ol(t),this.Gu=new Vv(this.Ku)}return v(e,[{key:"Qu",get:function(){return this.Lu}},{key:"ju",value:function(e,t){var n=this,r=t?t.Wu:new Bv,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=il(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.zu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Ku(h,u)>0||c&&n.Ku(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,Wu:r,$i:s,mutatedKeys:a}}},{key:"zu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.Wu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rs()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],s=0===this.qu.size&&this.current?1:0,u=s!==this.Uu;return this.Uu=s,0!==a.length||u?{snapshot:new Kv(this.query,e.Gu,i,a,e.mutatedKeys,0===s,u,!1),Yu:o}:{Yu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Bv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}},{key:"Xu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.qu;this.qu=nh(),this.Gu.forEach((function(t){e.Xu(t.key)&&(e.qu=e.qu.add(t.key))}));var n=[];return t.forEach((function(t){e.qu.has(t)||n.push(new ig(t))})),this.qu.forEach((function(e){t.has(e)||n.push(new rg(e))})),n}},{key:"Zu",value:function(e){this.Lu=e.Hi,this.qu=nh();var t=this.ju(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Kv.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}]),e}(),og=v((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),sg=v((function e(t){d(this,e),this.key=t,this.ec=!1})),ug=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Wl((function(e){return nl(e)}),tl),this.ic=new Map,this.rc=new Set,this.oc=new Du(ru.comparator),this.uc=new Map,this.cc=new Kd,this.ac={},this.hc=new Map,this.lc=yd.vn(),this.onlineState="Unknown",this.fc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function cg(e,t){return lg.apply(this,arguments)}function lg(){return lg=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nm(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,vp(r.localStore,Zc(n));case 8:return s=e.sent,r.isPrimaryClient&&tv(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,hg(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),lg.apply(this,arguments)}function hg(e,t,n,r){return fg.apply(this,arguments)}function fg(){return fg=Rt(Nt().mark((function e(t,n,r,i){var a,o,s,u,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=Rt(Nt().mark((function e(t,n,r,i){var a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ju(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,yp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ju(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Rg(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,yp(t.localStore,n,!0);case 3:return a=e.sent,o=new ag(n,a.Hi),s=o.ju(a.documents),u=oh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Rg(t,r,c.Yu),l=new og(n,r,o),e.abrupt("return",(t.sc.set(n,l),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),fg.apply(this,arguments)}function dg(e,t){return pg.apply(this,arguments)}function pg(){return pg=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Os(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!tl(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,gp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),nv(r.remoteStore,i.targetId),Ng(r,i.targetId)})).catch(vu);case 9:e.next=14;break;case 11:return Ng(r,i.targetId),e.next=14,gp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),pg.apply(this,arguments)}function vg(e,t,n){return gg.apply(this,arguments)}function gg(){return gg=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Os(e),a=Js.now(),o=t.reduce((function(e,t){return e.add(t.key)}),nh());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Gl(),u=nh();return i.Gi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=Me(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Pl(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Ol(c.key,l,wc(l.value.mapValue),Il.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Xl(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Du(Qs)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Lg(i,a.changes);case 9:return e.next=11,yv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Uv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),gg.apply(this,arguments)}function mg(e,t){return yg.apply(this,arguments)}function yg(){return yg=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.prev=1,e.next=4,fp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Ds(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Ds(n.ec):e.removedDocuments.size>0&&(Ds(n.ec),n.ec=!1))})),e.next=8,Lg(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,vu(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),yg.apply(this,arguments)}function kg(e,t,n){var r=Os(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Os(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Me(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Jv(n)}(r.eventManager,t),i.length&&r.nc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bg(e,t,n){return wg.apply(this,arguments)}function wg(){return wg=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Os(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Du(ru.comparator)).insert(o,_c.newNoDocument(o,$s.min())),u=nh().add(o),c=new ah($s.min(),new Map,new Mu(Qs),s,u),e.next=9,mg(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),Og(i),e.next=16;break;case 14:return e.next=16,gp(i.localStore,n,!1).then((function(){return Ng(i,n,r)})).catch(vu);case 16:case"end":return e.stop()}}),e)}))),wg.apply(this,arguments)}function _g(e,t){return xg.apply(this,arguments)}function xg(){return xg=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),i=n.batch.batchId,e.prev=1,e.next=4,lp(r.localStore,n);case 4:return a=e.sent,Ag(r,i,null),Cg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Lg(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),xg.apply(this,arguments)}function Sg(e,t,n){return Ig.apply(this,arguments)}function Ig(){return Ig=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Os(t),e.prev=1,e.next=4,function(e,t){var n=Os(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ds(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ag(i,n,r),Cg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Lg(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ig.apply(this,arguments)}function Eg(e,t){return Tg.apply(this,arguments)}function Tg(){return Tg=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sv((r=Os(t)).remoteStore)||Cs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Os(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Uv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Tg.apply(this,arguments)}function Cg(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function Ag(e,t,n){var r=Os(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function Ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Me(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc._c(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.ls(t).forEach((function(t){e.cc.containsKey(t)||Pg(e,t)}))}function Pg(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(nv(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Og(e))}function Rg(e,t,n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof rg?(e.cc.addReference(a.key,t),Dg(e,a)):a instanceof ig?(Cs("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||Pg(e,a.key)):Rs()}}catch(o){i.e(o)}finally{i.f()}}function Dg(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Cs("SyncEngine","New document in limbo: "+n),e.rc.add(r),Og(e))}function Og(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new ru(eu.fromString(t)),r=e.lc.next();e.uc.set(r,new sg(n)),e.oc=e.oc.insert(n,r),tv(e.remoteStore,new If(Zc(Gc(n.path)),r,2,Au.at))}}function Lg(e,t,n){return Mg.apply(this,arguments)}function Mg(){return Mg=Rt(Nt().mark((function e(t,n,r){var i,a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Os(t),a=[],o=[],s=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){s.push(i.dc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ip.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.nc.Wo(a),e.next=9,function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return mu.forEach(n,(function(t){return mu.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return mu.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_u(e.t0)){e.next=10;break}throw e.t0;case 10:Cs("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Me(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Fg(e,t){return jg.apply(this,arguments)}function jg(){return jg=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Os(t)).currentUser.isEqual(n)){e.next=11;break}return Cs("SyncEngine","User change. New user:",n.toKey()),e.next=5,up(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Ms(Ls.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Lg(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function Ug(e,t){var n=Os(e),r=n.uc.get(t);if(r&&r.ec)return nh().add(r.key);var i=nh(),a=n.ic.get(t);if(!a)return i;var o,s=Me(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.sc.get(u);i=i.unionWith(c.view.Qu)}}catch(l){s.e(l)}finally{s.f()}return i}function Vg(e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.next=3,yp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Zu(i),e.abrupt("return",(r.isPrimaryClient&&Rg(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),Bg.apply(this,arguments)}function Kg(e,t){return qg.apply(this,arguments)}function qg(){return qg=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),e.abrupt("return",bp(r.localStore,n).then((function(e){return Lg(r,e)})));case 2:case"end":return e.stop()}}),e)}))),qg.apply(this,arguments)}function zg(e,t,n,r){return Wg.apply(this,arguments)}function Wg(){return Wg=Rt(Nt().mark((function e(t,n,r,i){var a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Os(t),e.next=3,function(e,t){var n=Os(e),r=Os(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):mu.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,yv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ag(a,n,i||null),Cg(a,n),function(e,t){Os(Os(e).mutationQueue).An(t)}(a.localStore,n)):Rs();case 11:return e.next=13,Lg(a,o);case 13:e.next=16;break;case 15:Cs("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Wg.apply(this,arguments)}function Hg(e,t){return Gg.apply(this,arguments)}function Gg(){return Gg=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nm(r=Os(t)),rm(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Qg(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Ov(r.remoteStore,!0);case 9:o=Me(a);try{for(o.s();!(s=o.n()).done;)u=s.value,tv(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ng(r,t),gp(r.localStore,t,!0)})),nv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Qg(r,c);case 21:return function(e){var t=Os(e);t.uc.forEach((function(e,n){nv(t.remoteStore,n)})),t.cc.fs(),t.uc=new Map,t.oc=new Du(ru.comparator)}(r),r.fc=!1,e.next=25,Ov(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Gg.apply(this,arguments)}function Qg(e,t,n){return Yg.apply(this,arguments)}function Yg(){return Yg=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,g,m;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Os(t),a=[],o=[],s=Me(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ic.get(c))||0===h.length){e.next=34;break}return e.next=11,vp(i.localStore,Zc(h[0]));case 11:l=e.sent,f=Me(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.sc.get(p),e.next=20,Vg(i,v);case 20:(g=e.sent).snapshot&&o.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,kp(i.localStore,c);case 36:return m=e.sent,e.next=39,vp(i.localStore,m);case 39:return l=e.sent,e.next=42,hg(i,Xg(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Yg.apply(this,arguments)}function Xg(e){return Hc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Jg(e){var t=Os(e);return Os(Os(t.localStore).persistence).vi()}function $g(e,t,n,r){return Zg.apply(this,arguments)}function Zg(){return Zg=Rt(Nt().mark((function e(t,n,r,i){var a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Os(t)).fc){e.next=3;break}return e.abrupt("return",void Cs("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,bp(a.localStore,al(o[0]));case 10:return s=e.sent,u=ah.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Lg(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,gp(a.localStore,n,!0);case 17:return Ng(a,n,i),e.abrupt("break",20);case 19:Rs();case 20:case"end":return e.stop()}}),e)}))),Zg.apply(this,arguments)}function em(e,t,n){return tm.apply(this,arguments)}function tm(){return tm=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=nm(t)).fc){e.next=45;break}a=Me(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ic.has(s)){e.next=10;break}return Cs("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,kp(i.localStore,s);case 12:return u=e.sent,e.next=15,vp(i.localStore,u);case 15:return c=e.sent,e.next=18,hg(i,Xg(u),c.targetId,!1);case 18:tv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Me(r),e.prev=30,f=Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,gp(i.localStore,t,!1).then((function(){nv(i.remoteStore,t),Ng(i,t)})).catch(vu);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),tm.apply(this,arguments)}function nm(e){var t=Os(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ug.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bg.bind(null,t),t.nc.Wo=Yv.bind(null,t.eventManager),t.nc._c=Xv.bind(null,t.eventManager),t}function rm(e){var t=Os(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_g.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sg.bind(null,t),t}function im(e,t,n){var r=Os(e);(function(){var e=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Os(e),r=bh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ng(i)),a=new tg(i,t.localStore,n.It),e.next=15,n.wc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Ou(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.wc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,Lg(t,u.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Os(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.$u));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ns("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var am=function(){function e(){d(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=qp(t.databaseInfo.databaseId),this.sharedClientState=this.mc(t),this.persistence=this.gc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.yc(t),this.gcScheduler=this.Ic(t,this.localStore),this.indexBackfillerScheduler=this.Tc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e,t){return null}},{key:"Tc",value:function(e,t){return null}},{key:"yc",value:function(e){return sp(this.persistence,new ap,e.initialUser,this.It)}},{key:"gc",value:function(e){return new Qd(Xd.Bs,this.It)}},{key:"mc",value:function(e){return new Lp}},{key:"terminate",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),om=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ec=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return v(n,[{key:"initialize",value:function(){var e=Rt(Nt().mark((function e(t){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ec.initialize(this,t);case 4:return e.next=6,rm(this.Ec.syncEngine);case 6:return e.next=8,yv(this.Ec.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"yc",value:function(e){return sp(this.persistence,new ap,e.initialUser,this.It)}},{key:"Ic",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Id(n,e.asyncQueue,t)}},{key:"Tc",value:function(e,t){var n=new Cu(t,this.persistence);return new Tu(e.asyncQueue,n)}},{key:"gc",value:function(e){var t=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ld.withCacheSize(this.cacheSizeBytes):ld.DEFAULT;return new ep(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Bp(),Kp(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"mc",value:function(e){return new Lp}}]),n}(am),sm=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ec=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=Rt(Nt().mark((function e(t){var r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ec.syncEngine,e.t0=this.sharedClientState instanceof Op,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:zg.bind(null,r),$r:$g.bind(null,r),Br:em.bind(null,r),vi:Jg.bind(null,r),Or:Kg.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hg(i.Ec.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e){var t=Bp();if(!Op.C(t))throw new Ms(Ls.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Op(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(om),um=function(){function e(){d(this,e)}return v(e,[{key:"initialize",value:function(){var e=Rt(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return kg(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fg.bind(null,this.syncEngine),e.next=12,Ov(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new zv}},{key:"createDatastore",value:function(e){var t,n=qp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Vp(t));return function(e,t,n,r){return new Qp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return kg(o.syncEngine,e,0)},a=Fp.C()?new Fp:new Mp,new Xp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new ug(e,t,n,r,i,a);return o&&(s.fc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Os(t),Cs("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Zp(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function cm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Rt(Nt().mark((function r(){var i;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var lm=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.Ac(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ac(this.observer.error,e):As("Uncaught Error in snapshot listener:",e)}},{key:"Rc",value:function(){this.muted=!0}},{key:"Ac",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),hm=function(){function e(t,n){var r=this;d(this,e),this.bc=t,this.It=n,this.metadata=new Fs,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then((function(e){e&&e.ku()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.bc.cancel()}},{key:"getMetadata",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wc",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Pc.decode(t),r=Number(n),isNaN(r)&&this.Sc("length string (".concat(n,") is not valid number")),e.next=9,this.Dc(r);case 9:return i=e.sent,e.abrupt("return",new Zv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Vc",value:function(){var e=Rt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Cc()<0)){e.next=7;break}return e.next=3,this.xc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Cc())<0&&this.Sc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.xc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Sc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Pc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Sc",value:function(e){throw this.bc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"xc",value:function(){var e=Rt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),fm=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=Rt(Nt().mark((function e(t){var n,r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ms(Ls.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),i=Th(r.It)+"/documents",a={documents:n.map((function(e){return xh(r.It,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Ph(r.It,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Ds(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Vl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Rt(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ru.fromPath(t);n.mutations.push(new Bl(r,n.precondition(r)))})),e.next=7,function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(t),i=Th(r.It)+"/documents",a={writes:n.map((function(e){return Rh(r.It,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Rs();t=$s.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ms(Ls.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($s.min())?Il.exists(!1):Il.updateTime(t):Il.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($s.min()))throw new Ms(Ls.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Il.updateTime(t)}return Il.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),dm=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new zp(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.Nc-=1,this.kc()}},{key:"kc",value:function(){var e=this;this.xo.Ao(Rt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new fm(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Oc(t)}))}))})).catch((function(t){e.Oc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Oc",value:function(e){var t=this;this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget((function(){return t.kc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Fc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ql(t)}return!1}}]),e}(),pm=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ss.UNAUTHENTICATED,this.clientId=Gs.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Cs("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ms(Ls.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Rt(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Uv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function vm(e,t){return gm.apply(this,arguments)}function gm(){return gm=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Cs("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,up(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,km(t);case 3:return r=e.sent,Cs("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Rv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Rv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function km(e){return bm.apply(this,arguments)}function bm(){return bm=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Cs("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,vm(t,new am);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),bm.apply(this,arguments)}function wm(e){return _m.apply(this,arguments)}function _m(){return _m=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Cs("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,mm(t,new um);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),_m.apply(this,arguments)}function xm(e){return km(e).then((function(e){return e.persistence}))}function Sm(e){return km(e).then((function(e){return e.localStore}))}function Im(e){return wm(e).then((function(e){return e.remoteStore}))}function Em(e){return wm(e).then((function(e){return e.syncEngine}))}function Tm(e){return Cm.apply(this,arguments)}function Cm(){return Cm=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=cg.bind(null,n.syncEngine),r.onUnlisten=dg.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Am(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new lm({next:function(a){t.enqueueAndForget((function(){return Gv(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Ms(Ls.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Ms(Ls.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new $v(Gc(n.path),a,{includeMetadataChanges:!0,Nu:!0});return Wv(e,o)},i.next=3,Tm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Nm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new lm({next:function(n){t.enqueueAndForget((function(){return Gv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ms(Ls.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new $v(n,a,{includeMetadataChanges:!0,Nu:!0});return Wv(e,o)},i.next=3,Tm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Pm=new Map;function Rm(e,t,n){if(!n)throw new Ms(Ls.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Dm(e,t,n,r){if(!0===t&&!0===r)throw new Ms(Ls.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Om(e){if(!ru.isDocumentKey(e))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lm(e){if(ru.isDocumentKey(e))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Mm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Rs()}function Fm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ms(Ls.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mm(e);throw new Ms(Ls.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function jm(e,t){if(t<=0)throw new Ms(Ls.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Um=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ms(Ls.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ms(Ls.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Dm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Vm=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new Ms(Ls.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ms(Ls.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Us;switch(e.type){case"gapi":var t=e.client;return new qs(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ms(Ls.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Pm.get(e);t&&(Cs("ComponentProvider","Removing Datastore"),Pm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Bm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Fm(e,Vm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Ss.MOCK_USER;else{o=Ye(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Ms(Ls.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ss(u)}e._authCredentials=new Vs(new js(o,s))}}var Km=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new zm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),qm=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),zm=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Gc(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Km(this.firestore,null,new ru(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(qm);function Wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),Rm("collection","path",t),e instanceof Vm){var a=eu.fromString.apply(eu,[t].concat(r));return Lm(a),new zm(e,null,a)}if(!(e instanceof Km||e instanceof zm))throw new Ms(Ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(eu.fromString.apply(eu,[t].concat(r)));return Lm(o),new zm(e.firestore,null,o)}function Hm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),1===arguments.length&&(t=Gs.R()),Rm("doc","path",t),e instanceof Vm){var a=eu.fromString.apply(eu,[t].concat(r));return Om(a),new Km(e,null,new ru(a))}if(!(e instanceof Km||e instanceof zm))throw new Ms(Ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(eu.fromString.apply(eu,[t].concat(r)));return Om(o),new Km(e.firestore,e instanceof zm?e.converter:null,new ru(o))}function Gm(e,t){return e=At(e),t=At(t),(e instanceof Km||e instanceof zm)&&(t instanceof Km||t instanceof zm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qm(e,t){return e=At(e),t=At(t),e instanceof qm&&t instanceof qm&&e.firestore===t.firestore&&tl(e._query,t._query)&&e.converter===t.converter}var Ym=function(){function e(){var t=this;d(this,e),this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new zp(this,"async_queue_retry"),this.jc=function(){var e=Kp();e&&Cs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.bo()};var n=Kp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.jc)}return v(e,[{key:"isShuttingDown",get:function(){return this.Lc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Wc(),this.zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;var t=Kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Wc(),this.Lc)return new Promise((function(){}));var n=new Fs;return this.zc((function(){return t.Lc&&t.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Bc.push(e),t.Hc()}))}},{key:"Hc",value:function(){var e=Rt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Bc.length){e.next=14;break}return e.prev=1,e.next=4,this.Bc[0]();case 4:this.Bc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_u(e.t0)){e.next=12;break}throw e.t0;case 12:Cs("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Bc.length>0&&this.xo.Ao((function(){return t.Hc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"zc",value:function(e){var t=this,n=this.$c.then((function(){return t.Kc=!0,e().catch((function(e){t.qc=e,t.Kc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw As("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Kc=!1,e}))}));return this.$c=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);var i=jv.createAndSchedule(this,e,t,n,(function(e){return r.Jc(e)}));return this.Uc.push(i),i}},{key:"Wc",value:function(){this.qc&&Rs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Yc",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$c,e.next=3,t;case 3:if(t!==this.$c){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xc",value:function(e){var t,n=Me(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Zc",value:function(e){var t=this;return this.Yc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Me(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Yc()}))}},{key:"ta",value:function(e){this.Qc.push(e)}},{key:"Jc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function Xm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Me(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Jm=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),$m=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Ym,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||ey(this),this._firestoreClient.terminate()}}]),n}(Vm);function Zm(e){return e._firestoreClient||ey(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ey(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Qu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function ty(e,t,n){var r=new Fs;return e.asyncQueue.enqueue(Rt(Nt().mark((function i(){var a;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,vm(e,n);case 3:return i.next=5,mm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ls.FAILED_PRECONDITION||e.code===Ls.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Ns("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ny(e){return function(e){return e.asyncQueue.enqueue(Rt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xm(e);case 2:return n=t.sent,t.next=5,Im(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Os(e);return t._u.delete(0),Jp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Zm(e=Fm(e,$m)))}function ry(e){return function(e){return e.asyncQueue.enqueue(Rt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xm(e);case 2:return n=t.sent,t.next=5,Im(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Os(t))._u.add(0),e.next=4,Zp(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Zm(e=Fm(e,$m)))}function iy(e,t){var n=Zm(e=Fm(e,$m)),r=new Jm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new hm(e,t)}(function(e,t){if(e instanceof Uint8Array)return cm(e,t);if(e instanceof ArrayBuffer)return cm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,qp(t));e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=im,t.next=3,Em(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ay(e,t){return function(e,t){return e.asyncQueue.enqueue(Rt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Os(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,Sm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Zm(e=Fm(e,$m)),t).then((function(t){return t?new qm(e,null,t.query):null}))}function oy(e){if(e._initialized||e._terminated)throw new Ms(Ls.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sy=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nu(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var uy=function(){function e(t){d(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Vu.fromBase64String(t))}catch(t){throw new Ms(Ls.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Vu.fromUint8Array(t))}}]),e}(),cy=v((function e(t){d(this,e),this._methodName=t})),ly=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Ms(Ls.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ms(Ls.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Qs(this._lat,e._lat)||Qs(this._long,e._long)}}]),e}(),hy=/^__.*__$/,fy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ol(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}]),e}(),dy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new Ol(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function py(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rs()}}var vy=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"na",get:function(){return this.settings.na}},{key:"sa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.oa(e),r}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.ea(),r}},{key:"ca",value:function(e){return this.sa({path:void 0,ra:!0})}},{key:"aa",value:function(e){return Ly(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ea",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.oa(this.path.get(e))}},{key:"oa",value:function(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(py(this.na)&&hy.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}]),e}(),gy=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||qp(t)}return v(e,[{key:"fa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new vy({na:e,methodName:t,la:n,path:nu.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function my(e){var t=e._freezeSettings(),n=qp(e._databaseId);return new gy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.fa(a.merge||a.mergeFields?2:0,t,n,i);Py("Data must be an object, but it was:",o,r);var s,u,c=Ay(r,o);if(a.merge)s=new Uu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=Me(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=Ry(t,d,n);if(!o.contains(p))throw new Ms(Ls.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));My(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new Uu(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new fy(new bc(c),s,u)}var ky=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.na)throw 1===e.na?e.aa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.aa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(cy);function by(e,t,n){return new vy({na:3,la:t.settings.la,methodName:e._methodName,ra:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var wy=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new xl(e.path,new vl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(cy),_y=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).da=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=by(this,e,!0),n=this.da.map((function(e){return Cy(e,t)})),r=new gl(n);return new xl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy),xy=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).da=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=by(this,e,!0),n=this.da.map((function(e){return Cy(e,t)})),r=new yl(n);return new xl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy),Sy=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new bl(e.It,ll(e.It,this._a));return new xl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy);function Iy(e,t,n,r){var i=e.fa(1,t,n);Py("Data must be an object, but it was:",i,r);var a=[],o=bc.empty();Pu(r,(function(e,r){var s=Oy(t,e,n);r=At(r);var u=i.ua(s);if(r instanceof ky)a.push(s);else{var c=Cy(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Uu(a);return new dy(o,s,i.fieldTransforms)}function Ey(e,t,n,r,i,a){var o=e.fa(1,t,n),s=[Ry(t,r,n)],u=[i];if(a.length%2!=0)throw new Ms(Ls.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Ry(t,a[c])),u.push(a[c+1]);for(var l=[],h=bc.empty(),f=s.length-1;f>=0;--f)if(!My(l,s[f])){var d=s[f],p=u[f];p=At(p);var v=o.ua(d);if(p instanceof ky)l.push(d);else{var g=Cy(p,v);null!=g&&(l.push(d),h.set(d,g))}}var m=new Uu(l);return new dy(h,m,o.fieldTransforms)}function Ty(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cy(n,e.fa(r?4:3,t))}function Cy(e,t){if(Ny(e=At(e)))return Py("Unsupported field value:",t,e),Ay(e,t);if(e instanceof cy)return function(e,t){if(!py(t.na))throw t.aa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.aa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Me(e);try{for(a.s();!(n=a.n()).done;){var o=Cy(n.value,t.ca(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=At(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ll(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Js.fromDate(e);return{timestampValue:mh(t.It,n)}}if(e instanceof Js){var r=new Js(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mh(t.It,r)}}if(e instanceof ly)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uy)return{bytesValue:yh(t.It,e._byteString)};if(e instanceof Km){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.aa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:wh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.aa("Unsupported field value: ".concat(Mm(e)))}(e,t)}function Ay(e,t){var n={};return Ru(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pu(e,(function(e,r){var i=Cy(r,t.ia(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ny(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Js||e instanceof ly||e instanceof uy||e instanceof Km||e instanceof cy)}function Py(e,t,n){if(!Ny(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Mm(n);throw"an object"===r?t.aa(e+" a custom object"):t.aa(e+" "+r)}}function Ry(e,t,n){if((t=At(t))instanceof sy)return t._internalPath;if("string"==typeof t)return Oy(e,t);throw Ly("Field path arguments must be of type string or ",e,!1,void 0,n)}var Dy=new RegExp("[~\\*/\\[\\]]");function Oy(e,t,n){if(t.search(Dy)>=0)throw Ly("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(sy,f(t.split(".")))._internalPath}catch(r){throw Ly("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ly(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Ms(Ls.INVALID_ARGUMENT,s+e+u)}function My(e,t){return e.some((function(e){return e.isEqual(t)}))}var Fy=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Km(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),jy=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return ur(y(n.prototype),"data",this).call(this)}}]),n}(Fy);function Uy(e,t){return"string"==typeof t?Oy(e,t):t instanceof sy?t._internalPath:t._delegate._internalPath}var Vy=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),By=function(e){m(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return v(n,[{key:"exists",value:function(){return ur(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Fy),Ky=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ur(y(n.prototype),"data",this).call(this,e)}}]),n}(By),qy=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vy(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ky(n._firestore,n._userDataWriter,r.key,r,new Vy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ms(Ls.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:zy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function zy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rs()}}function Wy(e,t){return e instanceof By&&t instanceof By?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof qy&&t instanceof qy&&e._firestore===t._firestore&&Qm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Hy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ms(Ls.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gy=v((function e(){d(this,e)}));function Qy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Yy=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).wa=e,a.ma=r,a.ga=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=my(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){ok(o,a);var u,c=[],l=Me(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(ak(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=ak(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||ok(o,a),s=Ty(n,"where",o,"in"===a||"not-in"===a);var f=Pc.create(i,a,s);return function(e,t){if(t.dt()){var n=Xc(e);if(null!==n&&!n.isEqual(t.field))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Yc(e);null!==r&&sk(e,t.field,r)}var i=function(e,t){var n,r=Me(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new qm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Gy);var Xy=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).wa=e,i.ya=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bc(t,n);return function(e,t){if(null===Yc(e)){var n=Xc(e);null!==n&&sk(e,n,t.field)}}(e,r),r}(e._query,this.wa,this.ya);return new qm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Wc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Gy);var Jy=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.pa=r,a.Ia=i,a}return v(n,[{key:"_apply",value:function(e){return new qm(e.firestore,e.converter,el(e._query,this.pa,this.Ia))}}]),n}(Gy);var $y=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return v(n,[{key:"_apply",value:function(e){var t=ik(e,this.type,this.Ta,this.Ea);return new qm(e.firestore,e.converter,function(e,t){return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Gy);function Zy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $y("startAt",t,!0)}function ek(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $y("startAfter",t,!1)}var tk=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return v(n,[{key:"_apply",value:function(e){var t=ik(e,this.type,this.Ta,this.Ea);return new qm(e.firestore,e.converter,function(e,t){return new Wc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Gy);function nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tk("endBefore",t,!1)}function rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tk("endAt",t,!0)}function ik(e,t,n,r){if(n[0]=At(n[0]),n[0]instanceof Fy)return function(e,t,n,r,i){if(!r)throw new Ms(Ls.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=Me($c(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(uc(t,r.key));else{var c=r.data.field(u.field);if(Wu(c))throw new Ms(Ls.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Vc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=my(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ms(Ls.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Jc(e)&&-1!==c.indexOf("/"))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(eu.fromString(c));if(!ru.isDocumentKey(l))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new ru(l);s.push(uc(t,h))}else{var f=Ty(n,r,c);s.push(f)}}return new Vc(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ak(e,t,n){if("string"==typeof(n=At(n))){if(""===n)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jc(t)&&-1!==n.indexOf("/"))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(eu.fromString(n));if(!ru.isDocumentKey(r))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return uc(e,new ru(r))}if(n instanceof Km)return uc(e,n._key);throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Mm(n),"."))}function ok(e,t){if(!Array.isArray(e)||0===e.length)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function sk(e,t,n){if(!n.isEqual(t))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var uk={maxAttempts:5},ck=function(){function e(){d(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rs()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Pu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ly(qu(e.latitude),qu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Hu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ku(e);return new Js(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=eu.fromString(e);Ds(Wh(n));var r=new Yu(n.get(1),n.get(3)),i=new ru(n.popFirst(5));return r.isEqual(t)||As("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function lk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var hk=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new uy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Km(this.firestore,null,t)}}]),n}(ck),fk=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=my(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dk(e,this._firestore),i=lk(r.converter,t,n),a=yy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Il.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=At(t))||t instanceof sy?Ey(this._dataReader,"WriteBatch.update",i._key,t,n,o):Iy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Il.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dk(e,this._firestore);return this._mutations=this._mutations.concat(new Vl(t._key,Il.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ms(Ls.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dk(e,t){if((e=At(e)).firestore!==t)throw new Ms(Ls.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pk=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new uy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Km(this.firestore,null,t)}}]),n}(ck);function vk(e){e=Fm(e,Km);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Os(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ms(Ls.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Uv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Sm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new By(t,r,e._key,n,new Vy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function gk(e){e=Fm(e,qm);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yp(t,n,!0);case 3:i=e.sent,a=new ag(n,i.Hi),o=a.ju(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Uv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Sm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new qy(t,r,e,n)}))}function mk(e,t,n){e=Fm(e,Km);var r=Fm(e.firestore,$m),i=lk(e.converter,t,n);return wk(r,[yy(my(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Il.none())])}function yk(e,t,n){e=Fm(e,Km);for(var r=Fm(e.firestore,$m),i=my(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return wk(r,[("string"==typeof(t=At(t))||t instanceof sy?Ey(i,"updateDoc",e._key,t,n,o):Iy(i,"updateDoc",e._key,t)).toMutation(e._key,Il.exists(!0))])}function kk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=At(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Xm(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Xm(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Km)l=Fm(e.firestore,$m),h=Gc(e._key.path),c={next:function(t){n[u]&&n[u](_k(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Fm(e,qm);l=Fm(p.firestore,$m),h=p._query;var v=new pk(l);c={next:function(e){n[u]&&n[u](new qy(l,v,p,e))},error:n[u+1],complete:n[u+2]},Hy(e._query)}return function(e,t,n,r){var i=new lm(r),a=new $v(t,i,n);return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Wv,t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Rc(),e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gv,t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Zm(l),h,f,c)}function bk(e,t){return function(e,t){var n=new lm(t);return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Os(e).Ru.add(t),t.next()},t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Rc(),e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Os(e).Ru.delete(t)},t.next=3,Tm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Zm(e=Fm(e,$m)),Xm(t)?t:{next:t})}function wk(e,t){return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=vg,r.next=3,Em(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Zm(e),t)}function _k(e,t,n){var r=n.docs.get(t._key),i=new pk(e);return new By(e,i,t._key,r,new Vy(n.hasPendingWrites,n.fromCache),t.converter)}var xk=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=dk(e,this._firestore),i=new pk(this._firestore);return ur(y(n.prototype),"get",this).call(this,e).then((function(e){return new By(t._firestore,i,r._key,e._document,new Vy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=my(t)}return v(e,[{key:"get",value:function(e){var t=this,n=dk(e,this._firestore),r=new hk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Rs();var i=e[0];if(i.isFoundDocument())return new Fy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fy(t._firestore,r,n._key,null,n.converter);throw Rs()}))}},{key:"set",value:function(e,t,n){var r=dk(e,this._firestore),i=lk(r.converter,t,n),a=yy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=At(t))||t instanceof sy?Ey(this._dataReader,"Transaction.update",i._key,t,n,o):Iy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Sk(e,t,n){e=Fm(e,$m);var r=Object.assign(Object.assign({},uk),n);return function(e){if(e.maxAttempts<1)throw new Ms(Ls.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function i(){var a;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return wm(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new dm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Zm(e),(function(n){return t(new xk(e,n))}),r)}function Ik(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _y("arrayUnion",t)}function Ek(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Is=e}(Nn),xn(new Dt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new $m(new Bs(e.getProvider("auth-internal")),new Ws(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ms(Ls.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Mn(xs,"3.4.15",e),Mn(xs,"3.4.15","esm2017")}();function Tk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ms("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ck(){if("undefined"===typeof Uint8Array)throw new Ms("unimplemented","Uint8Arrays are not available in this environment.")}function Ak(){if("undefined"==typeof atob)throw new Ms("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Nk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return Ak(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ck(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Ak(),new e(uy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ck(),new e(uy.fromUint8Array(t))}}]),e}();function Pk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Me(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Rk=function(){function e(){d(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){oy(e=Fm(e,$m));var n=Zm(e),r=e._freezeSettings(),i=new um;return ty(n,i,new om(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){oy(e=Fm(e,$m));var t=Zm(e),n=e._freezeSettings(),r=new um;return ty(t,r,new sm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ms(Ls.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Fs;return e._queue.enqueueAndForgetEvenWhileRestricted(Rt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ku.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ku.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Dk=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Yu||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ny(this._delegate)}},{key:"disableNetwork",value:function(){return ry(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Dm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Fs;return e.asyncQueue.enqueueAndForget(Rt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Eg,n.next=3,Em(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Zm(e=Fm(e,$m)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return bk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ms("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Gk(this,Wm(this._delegate,e))}catch(t){throw Uk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new jk(this,Hm(this._delegate,e))}catch(t){throw Uk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new zk(this,function(e,t){if(e=Fm(e,Vm),Rm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new qm(e,null,function(e){return new Wc(eu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Uk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Sk(this._delegate,(function(n){return e(new Lk(t,n))}))}},{key:"batch",value:function(){var e=this;return Zm(this._delegate),new Mk(new fk(this._delegate,(function(t){return wk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return iy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ay(this._delegate,e).then((function(e){return e?new zk(t,e):null}))}}]),e}(),Ok=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new Nk(new uy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return jk.forKey(t,this.firestore,null)}}]),n}(ck);var Lk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Ok(t)}return v(e,[{key:"get",value:function(e){var t=this,n=Qk(e);return this._delegate.get(n).then((function(e){return new Kk(t._firestore,new By(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Qk(e);return n?(Tk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Qk(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Qk(e);return this._delegate.delete(t),this}}]),e}(),Mk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=Qk(e);return n?(Tk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Qk(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Qk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Fk=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new Ky(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Ok(t),n),i.set(n,a)),a}}]),e}();Fk.INSTANCES=new WeakMap;var jk=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ok(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Gk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Gk(this.firestore,Wm(this._delegate,e))}catch(t){throw Uk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=At(e))instanceof Km&&Gm(this._delegate,e)}},{key:"set",value:function(e,t){t=Tk("DocumentReference.set",t);try{return t?mk(this._delegate,e,t):mk(this._delegate,e)}catch(n){throw Uk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?yk(this._delegate,e):yk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Uk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return wk(Fm(e.firestore,$m),[new Vl(e._key,Il.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vk(n),a=Bk(n,(function(t){return new Kk(e.firestore,new By(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return kk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fm(e,Km);var t=Fm(e.firestore,$m);return Am(Zm(t),e._key,{source:"server"}).then((function(n){return _k(t,e,n)}))}(this._delegate):function(e){e=Fm(e,Km);var t=Fm(e.firestore,$m);return Am(Zm(t),e._key).then((function(n){return _k(t,e,n)}))}(this._delegate),t.then((function(e){return new Kk(n.firestore,new By(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Fk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ms("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Km(n._delegate,r,new ru(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Km(n._delegate,r,t))}}]),e}();function Uk(e,t,n){return e.message=e.message.replace(t,n),e}function Vk(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Pk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Bk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Pk(e[0])?e[0]:Pk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Kk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new jk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Wy(this._delegate,e._delegate)}}]),e}(),qk=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Rs()}(void 0!==t),t}}]),n}(Kk),zk=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ok(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Qy(this._delegate,function(e,t,n){var r=t,i=Uy("where",e);return new Yy(i,r,n)}(t,n,r)))}catch(i){throw Uk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Qy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Uy("orderBy",e);return new Xy(n,t)}(t,n)))}catch(r){throw Uk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Qy(this._delegate,function(e){return jm("limit",e),new Jy("limit",e,"F")}(t)))}catch(n){throw Uk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Qy(this._delegate,function(e){return jm("limitToLast",e),new Jy("limitToLast",e,"L")}(t)))}catch(n){throw Uk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Qy(this._delegate,Zy.apply(void 0,arguments)))}catch(t){throw Uk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Qy(this._delegate,ek.apply(void 0,arguments)))}catch(t){throw Uk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Qy(this._delegate,nk.apply(void 0,arguments)))}catch(t){throw Uk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Qy(this._delegate,rk.apply(void 0,arguments)))}catch(t){throw Uk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Qm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?gk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fm(e,qm);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return Nm(n,e._query,{source:"server"}).then((function(n){return new qy(t,r,e,n)}))}(this._delegate):function(e){e=Fm(e,qm);var t=Fm(e.firestore,$m),n=Zm(t),r=new pk(t);return Hy(e._query),Nm(n,e._query).then((function(n){return new qy(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Hk(n.firestore,new qy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Vk(n),a=Bk(n,(function(t){return new Hk(e.firestore,new qy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return kk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Fk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Wk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new qk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Hk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new zk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new qk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Wk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new qk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Wy(this._delegate,e._delegate)}}]),e}(),Gk=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new jk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new jk(this.firestore,void 0===e?Hm(this._delegate):Hm(this._delegate,e))}catch(t){throw Uk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Fm(e.firestore,$m),r=Hm(e),i=lk(e.converter,t);return wk(n,[yy(my(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Il.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new jk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Gm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Fk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(zk);function Qk(e){return Fm(e,Km)}var Yk,Xk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(sy,n)}return v(e,[{key:"isEqual",value:function(e){return(e=At(e))instanceof sy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(nu.keyField().canonicalString())}}]),e}(),Jk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new wy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ky("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Ik.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Ek.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Sy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),$k={Firestore:Dk,GeoPoint:ly,Timestamp:Js,Blob:Nk,Transaction:Lk,WriteBatch:Mk,DocumentReference:jk,DocumentSnapshot:Kk,Query:zk,QueryDocumentSnapshot:qk,QuerySnapshot:Hk,CollectionReference:Gk,FieldPath:Xk,FieldValue:Jk,setLogLevel:function(e){!function(e){Es.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Dt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},$k)))})(Yk=or,(function(e,t){return new Dk(e,t,new Rk)})),Yk.registerVersion("@firebase/firestore-compat","0.1.24");var Zk=or.initializeApp({apiKey:"AIzaSyDt_KICb8jM4LODy7lLJZ9y5PZeRni3UZ0",authDomain:"mealeasy-7c600.firebaseapp.com",databaseURL:"https://mealeasy-7c600-default-rtdb.europe-west1.firebasedatabase.app",projectId:"mealeasy-7c600",storageBucket:"mealeasy-7c600.appspot.com",messagingSenderId:"277026662201",appId:"1:277026662201:web:fd8b2f11746087fc816ae8",measurementId:"G-6XKQKQRG0L"}).firestore();function eb(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function tb(e,t){if(null==e)return{};var n,r,i=eb(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var nb=n(694),rb=n.n(nb),ib=n(184),ab=["xxl","xl","lg","md","sm","xs"],ob=r.createContext({prefixes:{},breakpoints:ab,minBreakpoint:"xs"});ob.Consumer,ob.Provider;function sb(e,t){var n=(0,r.useContext)(ob).prefixes;return e||n[t]||t}function ub(){return(0,r.useContext)(ob).breakpoints}function cb(){return(0,r.useContext)(ob).minBreakpoint}var lb=["bsPrefix","fluid","as","className"],hb=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,o=e.className,s=tb(e,lb),u=sb(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,ib.jsx)(a,Gt(Gt({ref:t},s),{},{className:rb()(o,r?"".concat(u).concat(c):u)}))}));hb.displayName="Container",hb.defaultProps={fluid:!1};var fb=hb,db=["bsPrefix","className","as"],pb=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"div":i,o=tb(e,db),s=sb(n,"row"),u=ub(),c=cb(),l="".concat(s,"-cols"),h=[];return u.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r=e!==c?"-".concat(e):"";null!=t&&h.push("".concat(l).concat(r,"-").concat(t))})),(0,ib.jsx)(a,Gt(Gt({ref:t},o),{},{className:rb().apply(void 0,[r,s].concat(h))}))}));pb.displayName="Row";var vb=pb,gb=["as","bsPrefix","className"],mb=["className"];var yb=r.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=tb(e,gb);n=sb(n,"col");var a=ub(),o=cb(),s=[],u=[];return a.forEach((function(e){var t,r,a,c=i[e];delete i[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,a=c.order):t=c;var l=e!==o?"-".concat(e):"";t&&s.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=a&&u.push("order".concat(l,"-").concat(a)),null!=r&&u.push("offset".concat(l,"-").concat(r))})),[Gt(Gt({},i),{},{className:rb().apply(void 0,[r].concat(s,u))}),{as:t,bsPrefix:n,spans:s}]}(e),r=l(n,2),i=r[0],a=i.className,o=tb(i,mb),s=r[1],u=s.as,c=void 0===u?"div":u,h=s.bsPrefix,f=s.spans;return(0,ib.jsx)(c,Gt(Gt({},o),{},{ref:t,className:rb()(a,!f.length&&h)}))}));yb.displayName="Col";var kb=yb;var bb=function(){return(0,r.useEffect)((function(){})),(0,ib.jsxs)(fb,{className:"home-page",style:{height:"100vh"},children:[(0,ib.jsx)(vb,{children:(0,ib.jsx)("div",{style:{margin:"auto"},children:(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Chef Easy"})})}),(0,ib.jsxs)(vb,{xl:2,lg:2,md:2,sm:2,xs:2,style:{height:"100%"},children:[(0,ib.jsx)(Oe,{to:"/demo",children:(0,ib.jsx)(kb,{style:{height:"90%",backgroundColor:"#FEC76D"},children:(0,ib.jsx)("div",{style:{textAlign:"center"},children:(0,ib.jsx)("h1",{style:{color:"white",textAlign:"center"},children:"Demo"})})})}),(0,ib.jsx)(Oe,{style:{},to:"/actual",children:(0,ib.jsx)(kb,{style:{height:"90%",backgroundColor:"#FF9F33"},children:(0,ib.jsx)("div",{children:(0,ib.jsx)("h1",{style:{color:"white"},children:"Actual"})})})})]})]})};function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wb.apply(this,arguments)}function _b(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=_b(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var xb=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=_b(e))&&(r&&(r+=" "),r+=t);return r};function Sb(e,t){var n=wb({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}function Ib(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}function Eb(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Tb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Cb(e){if(e.type)return e;if("#"===e.charAt(0))return Cb(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(Eb(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(Eb(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function Ab(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Nb(e){var t="hsl"===(e=Cb(e)).type||"hsla"===e.type?Cb(function(e){var t=(e=Cb(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Ab({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Pb(e,t){return e=Cb(e),t=Tb(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Ab(e)}function Rb(e,t){if(e=Cb(e),t=Tb(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Ab(e)}function Db(e,t){if(e=Cb(e),t=Tb(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ab(e)}var Ob=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Lb=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Mb=Ob((function(e){return Lb.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var Fb=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),jb=Math.abs,Ub=String.fromCharCode,Vb=Object.assign;function Bb(e){return e.trim()}function Kb(e,t,n){return e.replace(t,n)}function qb(e,t){return e.indexOf(t)}function zb(e,t){return 0|e.charCodeAt(t)}function Wb(e,t,n){return e.slice(t,n)}function Hb(e){return e.length}function Gb(e){return e.length}function Qb(e,t){return t.push(e),e}var Yb=1,Xb=1,Jb=0,$b=0,Zb=0,ew="";function tw(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:Yb,column:Xb,length:o,return:""}}function nw(e,t){return Vb(tw("",null,null,"",null,null,0),e,{length:-e.length},t)}function rw(){return Zb=$b>0?zb(ew,--$b):0,Xb--,10===Zb&&(Xb=1,Yb--),Zb}function iw(){return Zb=$b<Jb?zb(ew,$b++):0,Xb++,10===Zb&&(Xb=1,Yb++),Zb}function aw(){return zb(ew,$b)}function ow(){return $b}function sw(e,t){return Wb(ew,e,t)}function uw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cw(e){return Yb=Xb=1,Jb=Hb(ew=e),$b=0,[]}function lw(e){return ew="",e}function hw(e){return Bb(sw($b-1,pw(91===e?e+2:40===e?e+1:e)))}function fw(e){for(;(Zb=aw())&&Zb<33;)iw();return uw(e)>2||uw(Zb)>3?"":" "}function dw(e,t){for(;--t&&iw()&&!(Zb<48||Zb>102||Zb>57&&Zb<65||Zb>70&&Zb<97););return sw(e,ow()+(t<6&&32==aw()&&32==iw()))}function pw(e){for(;iw();)switch(Zb){case e:return $b;case 34:case 39:34!==e&&39!==e&&pw(Zb);break;case 40:41===e&&pw(e);break;case 92:iw()}return $b}function vw(e,t){for(;iw()&&e+Zb!==57&&(e+Zb!==84||47!==aw()););return"/*"+sw(t,$b-1)+"*"+Ub(47===e?e:iw())}function gw(e){for(;!uw(aw());)iw();return sw(e,$b)}var mw="-ms-",yw="-moz-",kw="-webkit-",bw="comm",ww="rule",_w="decl",xw="@keyframes";function Sw(e,t){for(var n="",r=Gb(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Iw(e,t,n,r){switch(e.type){case"@import":case _w:return e.return=e.return||e.value;case bw:return"";case xw:return e.return=e.value+"{"+Sw(e.children,r)+"}";case ww:e.value=e.props.join(",")}return Hb(n=Sw(e.children,r))?e.return=e.value+"{"+n+"}":""}function Ew(e,t){switch(function(e,t){return(((t<<2^zb(e,0))<<2^zb(e,1))<<2^zb(e,2))<<2^zb(e,3)}(e,t)){case 5103:return kw+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kw+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return kw+e+yw+e+mw+e+e;case 6828:case 4268:return kw+e+mw+e+e;case 6165:return kw+e+mw+"flex-"+e+e;case 5187:return kw+e+Kb(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return kw+e+mw+"flex-item-"+Kb(e,/flex-|-self/,"")+e;case 4675:return kw+e+mw+"flex-line-pack"+Kb(e,/align-content|flex-|-self/,"")+e;case 5548:return kw+e+mw+Kb(e,"shrink","negative")+e;case 5292:return kw+e+mw+Kb(e,"basis","preferred-size")+e;case 6060:return kw+"box-"+Kb(e,"-grow","")+kw+e+mw+Kb(e,"grow","positive")+e;case 4554:return kw+Kb(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return Kb(Kb(Kb(e,/(zoom-|grab)/,kw+"$1"),/(image-set)/,kw+"$1"),e,"")+e;case 5495:case 3959:return Kb(e,/(image-set\([^]*)/,kw+"$1$`$1");case 4968:return Kb(Kb(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+kw+e+e;case 4095:case 3583:case 4068:case 2532:return Kb(e,/(.+)-inline(.+)/,kw+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hb(e)-1-t>6)switch(zb(e,t+1)){case 109:if(45!==zb(e,t+4))break;case 102:return Kb(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+yw+(108==zb(e,t+3)?"$3":"$2-$3"))+e;case 115:return~qb(e,"stretch")?Ew(Kb(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==zb(e,t+1))break;case 6444:switch(zb(e,Hb(e)-3-(~qb(e,"!important")&&10))){case 107:return Kb(e,":",":"+kw)+e;case 101:return Kb(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+kw+(45===zb(e,14)?"inline-":"")+"box$3$1"+kw+"$2$3$1"+mw+"$2box$3")+e}break;case 5936:switch(zb(e,t+11)){case 114:return kw+e+mw+Kb(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return kw+e+mw+Kb(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return kw+e+mw+Kb(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return kw+e+mw+e+e}return e}function Tw(e){return function(t){t.root||(t=t.return)&&e(t)}}function Cw(e){return lw(Aw("",null,null,null,[""],e=cw(e),0,[0],e))}function Aw(e,t,n,r,i,a,o,s,u){for(var c=0,l=0,h=o,f=0,d=0,p=0,v=1,g=1,m=1,y=0,k="",b=i,w=a,_=r,x=k;g;)switch(p=y,y=iw()){case 40:if(108!=p&&58==x.charCodeAt(h-1)){-1!=qb(x+=Kb(hw(y),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:x+=hw(y);break;case 9:case 10:case 13:case 32:x+=fw(p);break;case 92:x+=dw(ow()-1,7);continue;case 47:switch(aw()){case 42:case 47:Qb(Pw(vw(iw(),ow()),t,n),u);break;default:x+="/"}break;case 123*v:s[c++]=Hb(x)*m;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+l:d>0&&Hb(x)-h&&Qb(d>32?Rw(x+";",r,n,h-1):Rw(Kb(x," ","")+";",r,n,h-2),u);break;case 59:x+=";";default:if(Qb(_=Nw(x,t,n,c,l,i,s,k,b=[],w=[],h),a),123===y)if(0===l)Aw(x,t,_,_,b,a,h,s,w);else switch(f){case 100:case 109:case 115:Aw(e,_,_,r&&Qb(Nw(e,_,_,0,0,i,s,k,i,b=[],h),w),i,w,h,s,r?b:w);break;default:Aw(x,_,_,_,[""],w,0,s,w)}}c=l=d=0,v=m=1,k=x="",h=o;break;case 58:h=1+Hb(x),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==rw())continue;switch(x+=Ub(y),y*v){case 38:m=l>0?1:(x+="\f",-1);break;case 44:s[c++]=(Hb(x)-1)*m,m=1;break;case 64:45===aw()&&(x+=hw(iw())),f=aw(),l=h=Hb(k=x+=gw(ow())),y++;break;case 45:45===p&&2==Hb(x)&&(v=0)}}return a}function Nw(e,t,n,r,i,a,o,s,u,c,l){for(var h=i-1,f=0===i?a:[""],d=Gb(f),p=0,v=0,g=0;p<r;++p)for(var m=0,y=Wb(e,h+1,h=jb(v=o[p])),k=e;m<d;++m)(k=Bb(v>0?f[m]+" "+y:Kb(y,/&\f/g,f[m])))&&(u[g++]=k);return tw(e,t,n,0===i?ww:s,u,c,l)}function Pw(e,t,n){return tw(e,t,n,bw,Ub(Zb),Wb(e,2,-2),0)}function Rw(e,t,n,r){return tw(e,t,n,_w,Wb(e,0,r),Wb(e,r+1,-1),r)}var Dw=function(e,t,n){for(var r=0,i=0;r=i,i=aw(),38===r&&12===i&&(t[n]=1),!uw(i);)iw();return sw(e,$b)},Ow=function(e,t){return lw(function(e,t){var n=-1,r=44;do{switch(uw(r)){case 0:38===r&&12===aw()&&(t[n]=1),e[n]+=Dw($b-1,t,n);break;case 2:e[n]+=hw(r);break;case 4:if(44===r){e[++n]=58===aw()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Ub(r)}}while(r=iw());return e}(cw(e),t))},Lw=new WeakMap,Mw=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Lw.get(n))&&!r){Lw.set(e,!0);for(var i=[],a=Ow(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},Fw=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},jw=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case _w:e.return=Ew(e.value,e.length);break;case xw:return Sw([nw(e,{value:Kb(e.value,"@","@"+kw)})],r);case ww:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sw([nw(e,{props:[Kb(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Sw([nw(e,{props:[Kb(t,/:(plac\w+)/,":-webkit-input-$1")]}),nw(e,{props:[Kb(t,/:(plac\w+)/,":-moz-$1")]}),nw(e,{props:[Kb(t,/:(plac\w+)/,mw+"input-$1")]})],r)}return""}))}}],Uw=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||jw;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u=[Mw,Fw];var c,l=[Iw,Tw((function(e){c.insert(e)}))],h=function(e){var t=Gb(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}(u.concat(r,l));a=function(e,t,n,r){c=n,Sw(Cw(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new Fb({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return f.sheet.hydrate(s),f};var Vw=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Bw={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Kw=/[A-Z]|^ms/g,qw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zw=function(e){return 45===e.charCodeAt(1)},Ww=function(e){return null!=e&&"boolean"!==typeof e},Hw=Ob((function(e){return zw(e)?e:e.replace(Kw,"-$&").toLowerCase()})),Gw=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(qw,(function(e,t,n){return Yw={name:t,styles:n,next:Yw},t}))}return 1===Bw[e]||zw(e)||"number"!==typeof t||0===t?t:t+"px"};function Qw(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Yw={name:n.name,styles:n.styles,next:Yw},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Yw={name:r.name,styles:r.styles,next:Yw},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Qw(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Ww(o)&&(r+=Hw(a)+":"+Gw(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=Qw(e,t,o);switch(a){case"animation":case"animationName":r+=Hw(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)Ww(o[u])&&(r+=Hw(a)+":"+Gw(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Yw,a=n(e);return Yw=i,Qw(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Yw,Xw=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Jw=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Yw=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=Qw(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=Qw(n,t,e[o]),r&&(i+=a[o]);Xw.lastIndex=0;for(var s,u="";null!==(s=Xw.exec(i));)u+="-"+s[1];return{name:Vw(i)+u,styles:i,next:Yw}},$w=!!i.useInsertionEffect&&i.useInsertionEffect,Zw=$w||function(e){return e()},e_=($w||r.useLayoutEffect,(0,r.createContext)("undefined"!==typeof HTMLElement?Uw({key:"css"}):null));e_.Provider;var t_=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(e_);return e(t,i,n)}))},n_=(0,r.createContext)({});function r_(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i_=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},a_=Mb,o_=function(e){return"theme"!==e},s_=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?a_:o_},u_=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},c_=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;i_(t,n,r);Zw((function(){return function(e,t,n){i_(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)}));return null},l_=function e(t,n){var i,a,o=t.__emotion_real===t,s=o&&t.__emotion_base||t;void 0!==n&&(i=n.label,a=n.target);var u=u_(t,n,o),c=u||s_(s),l=!c("as");return function(){var h=arguments,f=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var d=h.length,p=1;p<d;p++)f.push(h[p],h[0][p])}var v=t_((function(e,t,n){var i=l&&e.as||s,o="",h=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=(0,r.useContext)(n_)}"string"===typeof e.className?o=r_(t.registered,h,e.className):null!=e.className&&(o=e.className+" ");var v=Jw(f.concat(h),t.registered,d);o+=t.key+"-"+v.name,void 0!==a&&(o+=" "+a);var g=l&&void 0===u?s_(i):c,m={};for(var y in e)l&&"as"===y||g(y)&&(m[y]=e[y]);return m.className=o,m.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c_,{cache:t,serialized:v,isStringTag:"string"===typeof i}),(0,r.createElement)(i,m))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=t.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=f,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,r){return e(t,wb({},n,r,{shouldForwardProp:u_(v,r,!0)})).apply(void 0,f)},v}},h_=l_.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){h_[e]=h_(e)}));var f_=h_;function d_(e,t){return f_(e,t)}var p_=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function v_(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function g_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?wb({},e):e;return v_(e)&&v_(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(v_(t[i])&&i in e&&v_(e[i])?r[i]=g_(e[i],t[i],n):r[i]=t[i])})),r}var m_=["values","unit","step"];function y_(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=eb(e,m_),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return wb({},e,Le({},t.key,t.val))}),{})}(n),c=Object.keys(u);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function f(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(i,")")}return wb({keys:c,values:u,up:l,down:h,between:f,only:function(e){return c.indexOf(e)+1<c.length?f(e,c[c.indexOf(e)+1]):l(e)},not:function(e){var t=c.indexOf(e);return 0===t?l(c[1]):t===c.length-1?h(c[t]):f(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}var k_={borderRadius:4},b_={xs:0,sm:600,md:900,lg:1200,xl:1536},w_={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(b_[e],"px)")}};function __(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||w_;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||w_;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||b_).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function x_(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function S_(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function I_(e){if("string"!==typeof e)throw new Error(Eb(7));return e.charAt(0).toUpperCase()+e.slice(1)}function E_(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function T_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:E_(e,n)||i,t&&(r=t(r)),r}var C_=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=E_(e.theme,i)||{};return __(e,n,(function(e){var n=T_(o,a,e);return e===n&&"string"===typeof e&&(n=T_(o,a,"".concat(t).concat("default"===e?"":I_(e)),e)),!1===r?n:Le({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var A_=function(e,t){return t?g_(e,t,{clone:!1}):e};var N_={m:"margin",p:"padding"},P_={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},R_={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},D_=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!R_[e])return[e];e=R_[e]}var t=l(e.split(""),2),n=t[0],r=t[1],i=N_[n],a=P_[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),O_=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],L_=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],M_=[].concat(O_,L_);function F_(e,t,n,r){var i,a=null!=(i=E_(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function j_(e){return F_(e,"spacing",8)}function U_(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function V_(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=U_(t,n),e}),{})}}(D_(n),r);return __(e,e[n],i)}function B_(e,t){var n=j_(e.theme);return Object.keys(e).map((function(r){return V_(e,t,r,n)})).reduce(A_,{})}function K_(e){return B_(e,O_)}function q_(e){return B_(e,L_)}function z_(e){return B_(e,M_)}K_.propTypes={},K_.filterProps=O_,q_.propTypes={},q_.filterProps=L_,z_.propTypes={},z_.filterProps=M_;var W_=z_;function H_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=j_({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var G_=["breakpoints","palette","spacing","shape"];var Q_=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,s=void 0===o?{}:o,u=eb(e,G_),c=y_(n),l=H_(a),h=g_({breakpoints:c,direction:"ltr",components:{},palette:wb({mode:"light"},i),spacing:l,shape:wb({},k_,s)},u),f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return h=d.reduce((function(e,t){return g_(e,t)}),h)},Y_=["variant"];function X_(e){return 0===e.length}function J_(e){var t=e.variant,n=eb(e,Y_),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?X_(r)?e[t]:I_(e[t]):"".concat(X_(r)?t:I_(t)).concat(I_(e[t].toString()))})),r}var $_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?A_(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function Z_(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var ex=C_({prop:"border",themeKey:"borders",transform:Z_}),tx=C_({prop:"borderTop",themeKey:"borders",transform:Z_}),nx=C_({prop:"borderRight",themeKey:"borders",transform:Z_}),rx=C_({prop:"borderBottom",themeKey:"borders",transform:Z_}),ix=C_({prop:"borderLeft",themeKey:"borders",transform:Z_}),ax=C_({prop:"borderColor",themeKey:"palette"}),ox=C_({prop:"borderTopColor",themeKey:"palette"}),sx=C_({prop:"borderRightColor",themeKey:"palette"}),ux=C_({prop:"borderBottomColor",themeKey:"palette"}),cx=C_({prop:"borderLeftColor",themeKey:"palette"}),lx=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=F_(e.theme,"shape.borderRadius",4);return __(e,e.borderRadius,(function(e){return{borderRadius:U_(t,e)}}))}return null};lx.propTypes={},lx.filterProps=["borderRadius"];var hx=$_(ex,tx,nx,rx,ix,ax,ox,sx,ux,cx,lx),fx=$_(C_({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),C_({prop:"display"}),C_({prop:"overflow"}),C_({prop:"textOverflow"}),C_({prop:"visibility"}),C_({prop:"whiteSpace"})),dx=$_(C_({prop:"flexBasis"}),C_({prop:"flexDirection"}),C_({prop:"flexWrap"}),C_({prop:"justifyContent"}),C_({prop:"alignItems"}),C_({prop:"alignContent"}),C_({prop:"order"}),C_({prop:"flex"}),C_({prop:"flexGrow"}),C_({prop:"flexShrink"}),C_({prop:"alignSelf"}),C_({prop:"justifyItems"}),C_({prop:"justifySelf"})),px=function(e){if(void 0!==e.gap&&null!==e.gap){var t=F_(e.theme,"spacing",8);return __(e,e.gap,(function(e){return{gap:U_(t,e)}}))}return null};px.propTypes={},px.filterProps=["gap"];var vx=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=F_(e.theme,"spacing",8);return __(e,e.columnGap,(function(e){return{columnGap:U_(t,e)}}))}return null};vx.propTypes={},vx.filterProps=["columnGap"];var gx=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=F_(e.theme,"spacing",8);return __(e,e.rowGap,(function(e){return{rowGap:U_(t,e)}}))}return null};gx.propTypes={},gx.filterProps=["rowGap"];var mx=$_(px,vx,gx,C_({prop:"gridColumn"}),C_({prop:"gridRow"}),C_({prop:"gridAutoFlow"}),C_({prop:"gridAutoColumns"}),C_({prop:"gridAutoRows"}),C_({prop:"gridTemplateColumns"}),C_({prop:"gridTemplateRows"}),C_({prop:"gridTemplateAreas"}),C_({prop:"gridArea"})),yx=$_(C_({prop:"position"}),C_({prop:"zIndex",themeKey:"zIndex"}),C_({prop:"top"}),C_({prop:"right"}),C_({prop:"bottom"}),C_({prop:"left"})),kx=$_(C_({prop:"color",themeKey:"palette"}),C_({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),C_({prop:"backgroundColor",themeKey:"palette"})),bx=C_({prop:"boxShadow",themeKey:"shadows"});function wx(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var _x=C_({prop:"width",transform:wx}),xx=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return __(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||b_[t]||wx(t)}}))}return null};xx.filterProps=["maxWidth"];var Sx=C_({prop:"minWidth",transform:wx}),Ix=C_({prop:"height",transform:wx}),Ex=C_({prop:"maxHeight",transform:wx}),Tx=C_({prop:"minHeight",transform:wx}),Cx=(C_({prop:"size",cssProperty:"width",transform:wx}),C_({prop:"size",cssProperty:"height",transform:wx}),$_(_x,xx,Sx,Ix,Ex,Tx,C_({prop:"boxSizing"}))),Ax=C_({prop:"fontFamily",themeKey:"typography"}),Nx=C_({prop:"fontSize",themeKey:"typography"}),Px=C_({prop:"fontStyle",themeKey:"typography"}),Rx=C_({prop:"fontWeight",themeKey:"typography"}),Dx=C_({prop:"letterSpacing"}),Ox=C_({prop:"textTransform"}),Lx=C_({prop:"lineHeight"}),Mx=C_({prop:"textAlign"}),Fx=$_(C_({prop:"typography",cssProperty:!1,themeKey:"typography"}),Ax,Nx,Px,Rx,Dx,Lx,Mx,Ox),jx={borders:hx.filterProps,display:fx.filterProps,flexbox:dx.filterProps,grid:mx.filterProps,positions:yx.filterProps,palette:kx.filterProps,shadows:bx.filterProps,sizing:Cx.filterProps,spacing:W_.filterProps,typography:Fx.filterProps},Ux={borders:hx,display:fx,flexbox:dx,grid:mx,positions:yx,palette:kx,shadows:bx,sizing:Cx,spacing:W_,typography:Fx},Vx=Object.keys(jx).reduce((function(e,t){return jx[t].forEach((function(n){e[n]=Ux[t]})),e}),{});function Bx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function Kx(e,t){return"function"===typeof e?e(t):e}var qx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ux,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var i,a=(Le(i={},e,n),Le(i,"theme",r),i),o=t[e];return o?o(a):Le({},e,n)}function r(e){var i=e||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;function u(e){var i=e;if("function"===typeof e)i=e(s);else if("object"!==typeof e)return e;if(!i)return null;var a=x_(s.breakpoints),o=Object.keys(a),u=a;return Object.keys(i).forEach((function(e){var a=Kx(i[e],s);if(null!==a&&void 0!==a)if("object"===typeof a)if(t[e])u=A_(u,n(e,a,s));else{var o=__({theme:s},a,(function(t){return Le({},e,t)}));Bx(o,a)?u[e]=r({sx:a,theme:s}):u=A_(u,o)}else u=A_(u,n(e,a,s))})),S_(o,u)}return Array.isArray(a)?a.map(u):u(a)}return r}();qx.filterProps=["sx"];var zx=qx,Wx=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Hx=["theme"],Gx=["theme"];function Qx(e){return 0===Object.keys(e).length}function Yx(e){return"string"===typeof e&&e.charCodeAt(0)>96}var Xx=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},Jx=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=J_(e.props);r[t]=e.style})),r},$x=function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[J_(n.props)])})),u};function Zx(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var eS=Q_();function tS(e,t){var n;return wb({toolbar:(n={minHeight:56},Le(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),Le(n,e.up("sm"),{minHeight:64}),n)},t)}var nS={black:"#000",white:"#fff"},rS={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},iS={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},aS={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},oS={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},sS={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},uS={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cS={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},lS=["mode","contrastThreshold","tonalOffset"],hS={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:nS.white,default:nS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},fS={text:{primary:nS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:nS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dS(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Db(e.main,i):"dark"===t&&(e.dark=Rb(e.main,a)))}function pS(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,s=eb(e,lS),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:sS[200],light:sS[50],dark:sS[400]}:{main:sS[700],light:sS[400],dark:sS[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:iS[200],light:iS[50],dark:iS[400]}:{main:iS[500],light:iS[300],dark:iS[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:aS[500],light:aS[300],dark:aS[700]}:{main:aS[700],light:aS[400],dark:aS[800]}}(n),h=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:uS[400],light:uS[300],dark:uS[700]}:{main:uS[700],light:uS[500],dark:uS[900]}}(n),f=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:cS[400],light:cS[300],dark:cS[700]}:{main:cS[800],light:cS[500],dark:cS[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oS[400],light:oS[300],dark:oS[700]}:{main:"#ed6c02",light:oS[500],dark:oS[900]}}(n);function p(e){var t=function(e,t){var n=Nb(e),r=Nb(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,fS.text.primary)>=i?fS.text.primary:hS.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,s=void 0===a?300:a,u=e.darkShade,c=void 0===u?700:u;if(!(t=wb({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(Eb(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(Eb(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return dS(t,"light",s,o),dS(t,"dark",c,o),t.contrastText||(t.contrastText=p(t.main)),t},g={dark:fS,light:hS};return g_(wb({common:wb({},nS),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:l,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:f,name:"success"}),grey:rS,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:o},g[n]),s)}var vS=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var gS={textTransform:"uppercase"},mS='"Roboto", "Helvetica", "Arial", sans-serif';function yS(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?mS:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,h=n.fontWeightMedium,f=void 0===h?500:h,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,g=void 0===v?16:v,m=n.allVariants,y=n.pxToRem,k=eb(n,vS);var b=o/14,w=y||function(e){return"".concat(e/g*b,"rem")},_=function(e,t,n,r,a){return wb({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===mS?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,m);var o},x={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(l,48,1.167,0),h4:_(l,34,1.235,.25),h5:_(l,24,1.334,0),h6:_(f,20,1.6,.15),subtitle1:_(l,16,1.75,.15),subtitle2:_(f,14,1.57,.1),body1:_(l,16,1.5,.15),body2:_(l,14,1.43,.15),button:_(f,14,1.75,.4,gS),caption:_(l,12,1.66,.4),overline:_(l,12,2.66,1,gS)};return g_(wb({htmlFontSize:g,pxToRem:w,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:f,fontWeightBold:p},x),k,{clone:!1})}function kS(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var bS=["none",kS(0,2,1,-1,0,1,1,0,0,1,3,0),kS(0,3,1,-2,0,2,2,0,0,1,5,0),kS(0,3,3,-2,0,3,4,0,0,1,8,0),kS(0,2,4,-1,0,4,5,0,0,1,10,0),kS(0,3,5,-1,0,5,8,0,0,1,14,0),kS(0,3,5,-1,0,6,10,0,0,1,18,0),kS(0,4,5,-2,0,7,10,1,0,2,16,1),kS(0,5,5,-3,0,8,10,1,0,3,14,2),kS(0,5,6,-3,0,9,12,1,0,3,16,2),kS(0,6,6,-3,0,10,14,1,0,4,18,3),kS(0,6,7,-4,0,11,15,1,0,4,20,3),kS(0,7,8,-4,0,12,17,2,0,5,22,4),kS(0,7,8,-4,0,13,19,2,0,5,24,4),kS(0,7,9,-4,0,14,21,2,0,5,26,4),kS(0,8,9,-5,0,15,22,2,0,6,28,5),kS(0,8,10,-5,0,16,24,2,0,6,30,5),kS(0,8,11,-5,0,17,26,2,0,6,32,5),kS(0,9,11,-5,0,18,28,2,0,7,34,6),kS(0,9,12,-6,0,19,29,2,0,7,36,6),kS(0,10,13,-6,0,20,31,3,0,8,38,7),kS(0,10,13,-6,0,21,33,3,0,8,40,7),kS(0,10,14,-6,0,22,35,3,0,8,42,7),kS(0,11,14,-7,0,23,36,3,0,9,44,8),kS(0,11,15,-7,0,24,38,3,0,9,46,8)],wS=["duration","easing","delay"],_S={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},xS={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function SS(e){return"".concat(Math.round(e),"ms")}function IS(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function ES(e){var t=wb({},_S,e.easing),n=wb({},xS,e.duration);return wb({getAutoHeightDuration:IS,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,c=void 0===u?0:u;eb(r,wS);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:SS(a)," ").concat(s," ").concat("string"===typeof c?c:SS(c))})).join(",")}},e,{easing:t,duration:n})}var TS={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},CS=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function AS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,s=e.typography,u=void 0===s?{}:s,c=eb(e,CS);if(e.vars)throw new Error(Eb(18));var l=pS(i),h=Q_(e),f=g_(h,{mixins:tS(h.breakpoints,n),palette:l,shadows:bS.slice(),typography:yS(l,u),transitions:ES(o),zIndex:wb({},TS)});f=g_(f,c);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return f=p.reduce((function(e,t){return g_(e,t)}),f)}var NS=AS(),PS=function(e){return Zx(e)&&"classes"!==e},RS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?eS:t,r=e.rootShouldForwardProp,i=void 0===r?Zx:r,a=e.slotShouldForwardProp,o=void 0===a?Zx:a,s=e.styleFunctionSx,u=void 0===s?zx:s,c=function(e){var t=Qx(e.theme)?n:e.theme;return u(wb({},e,{theme:t}))};return c.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p_(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r,a=t.name,s=t.slot,u=t.skipVariantsResolver,h=t.skipSx,d=t.overridesResolver,p=eb(t,Wx),v=void 0!==u?u:s&&"Root"!==s||!1,g=h||!1;var m=Zx;"Root"===s?m=i:s?m=o:Yx(e)&&(m=void 0);var y=d_(e,wb({shouldForwardProp:m,label:r},p)),k=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=eb(t,Hx);return e(wb({theme:Qx(r)?n:r},i))}:e})):[],s=e;a&&d&&o.push((function(e){var t=Qx(e.theme)?n:e.theme,r=Xx(a,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=l(n,2),a=r[0],o=r[1];i[a]="function"===typeof o?o(wb({},e,{theme:t})):o})),d(e,i)}return null})),a&&!v&&o.push((function(e){var t=Qx(e.theme)?n:e.theme;return $x(e,Jx(a,t),t,a)})),g||o.push(c);var u=o.length-r.length;if(Array.isArray(e)&&u>0){var h=new Array(u).fill("");(s=[].concat(f(e),f(h))).raw=[].concat(f(e.raw),f(h))}else"function"===typeof e&&e.__emotion_real!==e&&(s=function(t){var r=t.theme,i=eb(t,Gx);return e(wb({theme:Qx(r)?n:r},i))});var p=y.apply(void 0,[s].concat(f(o)));return p};return y.withConfig&&(k.withConfig=y.withConfig),k}}({defaultTheme:NS,rootShouldForwardProp:PS}),DS=RS;var OS=r.createContext(null);function LS(){return r.useContext(OS)}function MS(e){return 0===Object.keys(e).length}var FS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=LS();return!t||MS(t)?e:t},jS=Q_();var US=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jS;return FS(e)};function VS(e){var t=e.props,n=e.name,r=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Sb(t.components[n].defaultProps,r):r}({theme:US(r),name:n,props:t});return i}function BS(e){return VS({props:e.props,name:e.name,defaultTheme:NS})}function KS(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var qS=function(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){KS(e,n),KS(t,n)}}),[e,t])},zS="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var WS,HS=function(e){var t=r.useRef(e);return zS((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])},GS=!0,QS=!1,YS={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function XS(e){e.metaKey||e.altKey||e.ctrlKey||(GS=!0)}function JS(){GS=!1}function $S(){"hidden"===this.visibilityState&&QS&&(GS=!0)}function ZS(e){var t=e.target;try{return t.matches(":focus-visible")}catch(TO){}return GS||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!YS[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var eI=function(){var e=r.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",XS,!0),t.addEventListener("mousedown",JS,!0),t.addEventListener("pointerdown",JS,!0),t.addEventListener("touchstart",JS,!0),t.addEventListener("visibilitychange",$S,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!ZS(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(QS=!0,window.clearTimeout(WS),WS=window.setTimeout((function(){QS=!1}),100),t.current=!1,!0)},ref:e}};function tI(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var nI=r.createContext(null);function rI(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function iI(e,t,n){return null!=n[t]?n[t]:e.props[t]}function aI(e,t,n){var i=rI(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(t,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,r.isValidElement)(s)){var u=o in t,c=o in i,l=t[o],h=(0,r.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,r.isValidElement)(l)&&(a[o]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:iI(s,"exit",e),enter:iI(s,"enter",e)})):a[o]=(0,r.cloneElement)(s,{in:!1}):a[o]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:iI(s,"exit",e),enter:iI(s,"enter",e)})}})),a}var oI=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},sI=function(e){var t,n;function i(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(w(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=i.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,t){var n,i,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,i=o,rI(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:iI(e,"appear",n),enter:iI(e,"enter",n),exit:iI(e,"exit",n)})}))):aI(e,a,o),firstRender:!1}},a.handleExited=function(e,t){var n=rI(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=wb({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=eb(e,["component","childFactory"]),a=this.state.contextValue,o=oI(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(nI.Provider,{value:a},o):r.createElement(nI.Provider,{value:a},r.createElement(t,i,o))},i}(r.Component);sI.propTypes={},sI.defaultProps={component:"div",childFactory:function(e){return e}};var uI=sI;n(110);function cI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jw(t)}var lI=function(){var e=cI.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var hI=function(e){var t=e.className,n=e.classes,i=e.pulsate,a=void 0!==i&&i,o=e.rippleX,s=e.rippleY,u=e.rippleSize,c=e.in,h=e.onExited,f=e.timeout,d=l(r.useState(!1),2),p=d[0],v=d[1],g=xb(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),m={width:u,height:u,top:-u/2+s,left:-u/2+o},y=xb(n.child,p&&n.childLeaving,a&&n.childPulsate);return c||p||v(!0),r.useEffect((function(){if(!c&&null!=h){var e=setTimeout(h,f);return function(){clearTimeout(e)}}}),[h,c,f]),(0,ib.jsx)("span",{className:g,style:m,children:(0,ib.jsx)("span",{className:y})})},fI=function(e){return e},dI=function(){var e=fI;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=fI}}}(),pI={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function vI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=pI[t];return r?"".concat(n,"-").concat(r):"".concat(dI.generate(e),"-").concat(t)}function gI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=vI(e,t,n)})),r}var mI,yI,kI,bI,wI,_I,xI,SI,II=gI("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),EI=["center","classes","className"],TI=lI(wI||(wI=mI||(mI=tI(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),CI=lI(_I||(_I=yI||(yI=tI(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),AI=lI(xI||(xI=kI||(kI=tI(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),NI=DS("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),PI=DS(hI,{name:"MuiTouchRipple",slot:"Ripple"})(SI||(SI=bI||(bI=tI(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),II.rippleVisible,TI,550,(function(e){return e.theme.transitions.easing.easeInOut}),II.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),II.child,II.childLeaving,CI,550,(function(e){return e.theme.transitions.easing.easeInOut}),II.childPulsate,AI,(function(e){return e.theme.transitions.easing.easeInOut})),RI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiTouchRipple"}),i=n.center,a=void 0!==i&&i,o=n.classes,s=void 0===o?{}:o,u=n.className,c=eb(n,EI),h=l(r.useState([]),2),d=h[0],p=h[1],v=r.useRef(0),g=r.useRef(null);r.useEffect((function(){g.current&&(g.current(),g.current=null)}),[d]);var m=r.useRef(!1),y=r.useRef(null),k=r.useRef(null),b=r.useRef(null);r.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var w=r.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;p((function(e){return[].concat(f(e),[(0,ib.jsx)(PI,{classes:{ripple:xb(s.ripple,II.ripple),rippleVisible:xb(s.rippleVisible,II.rippleVisible),ripplePulsate:xb(s.ripplePulsate,II.ripplePulsate),child:xb(s.child,II.child),childLeaving:xb(s.childLeaving,II.childLeaving),childPulsate:xb(s.childPulsate,II.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},v.current)])})),v.current+=1,g.current=a}),[s]),_=r.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&m.current)m.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(m.current=!0);var l,h,f,d=c?null:b.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),h=Math.round(p.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,g=v.clientX,_=v.clientY;l=Math.round(g-p.left),h=Math.round(_-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var x=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,S=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(x,2)+Math.pow(S,2))}null!=e&&e.touches?null===k.current&&(k.current=function(){w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})},y.current=setTimeout((function(){k.current&&(k.current(),k.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[a,w]),x=r.useCallback((function(){_({},{pulsate:!0})}),[_]),S=r.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&k.current)return k.current(),k.current=null,void(y.current=setTimeout((function(){S(e,t)})));k.current=null,p((function(e){return e.length>0?e.slice(1):e})),g.current=t}),[]);return r.useImperativeHandle(t,(function(){return{pulsate:x,start:_,stop:S}}),[x,_,S]),(0,ib.jsx)(NI,wb({className:xb(II.root,s.root,u),ref:b},c,{children:(0,ib.jsx)(uI,{component:null,exit:!0,children:d})}))})),DI=RI;function OI(e){return vI("MuiButtonBase",e)}var LI,MI=gI("MuiButtonBase",["root","disabled","focusVisible"]),FI=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],jI=DS("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Le(LI={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(MI.disabled),{pointerEvents:"none",cursor:"default"}),Le(LI,"@media print",{colorAdjust:"exact"}),LI)),UI=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiButtonBase"}),i=n.action,a=n.centerRipple,o=void 0!==a&&a,s=n.children,u=n.className,c=n.component,h=void 0===c?"button":c,f=n.disabled,d=void 0!==f&&f,p=n.disableRipple,v=void 0!==p&&p,g=n.disableTouchRipple,m=void 0!==g&&g,y=n.focusRipple,k=void 0!==y&&y,b=n.LinkComponent,w=void 0===b?"a":b,_=n.onBlur,x=n.onClick,S=n.onContextMenu,I=n.onDragLeave,E=n.onFocus,T=n.onFocusVisible,C=n.onKeyDown,A=n.onKeyUp,N=n.onMouseDown,P=n.onMouseLeave,R=n.onMouseUp,D=n.onTouchEnd,O=n.onTouchMove,L=n.onTouchStart,M=n.tabIndex,F=void 0===M?0:M,j=n.TouchRippleProps,U=n.touchRippleRef,V=n.type,B=eb(n,FI),K=r.useRef(null),q=r.useRef(null),z=qS(q,U),W=eI(),H=W.isFocusVisibleRef,G=W.onFocus,Q=W.onBlur,Y=W.ref,X=l(r.useState(!1),2),J=X[0],$=X[1];d&&J&&$(!1),r.useImperativeHandle(i,(function(){return{focusVisible:function(){$(!0),K.current.focus()}}}),[]);var Z=l(r.useState(!1),2),ee=Z[0],te=Z[1];r.useEffect((function(){te(!0)}),[]);var ne=ee&&!v&&!d;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return HS((function(r){return t&&t(r),!n&&q.current&&q.current[e](r),!0}))}r.useEffect((function(){J&&k&&!v&&ee&&q.current.pulsate()}),[v,k,J,ee]);var ie=re("start",N),ae=re("stop",S),oe=re("stop",I),se=re("stop",R),ue=re("stop",(function(e){J&&e.preventDefault(),P&&P(e)})),ce=re("start",L),le=re("stop",D),he=re("stop",O),fe=re("stop",(function(e){Q(e),!1===H.current&&$(!1),_&&_(e)}),!1),de=HS((function(e){K.current||(K.current=e.currentTarget),G(e),!0===H.current&&($(!0),T&&T(e)),E&&E(e)})),pe=function(){var e=K.current;return h&&"button"!==h&&!("A"===e.tagName&&e.href)},ve=r.useRef(!1),ge=HS((function(e){k&&!ve.current&&J&&q.current&&" "===e.key&&(ve.current=!0,q.current.stop(e,(function(){q.current.start(e)}))),e.target===e.currentTarget&&pe()&&" "===e.key&&e.preventDefault(),C&&C(e),e.target===e.currentTarget&&pe()&&"Enter"===e.key&&!d&&(e.preventDefault(),x&&x(e))})),me=HS((function(e){k&&" "===e.key&&q.current&&J&&!e.defaultPrevented&&(ve.current=!1,q.current.stop(e,(function(){q.current.pulsate(e)}))),A&&A(e),x&&e.target===e.currentTarget&&pe()&&" "===e.key&&!e.defaultPrevented&&x(e)})),ye=h;"button"===ye&&(B.href||B.to)&&(ye=w);var ke={};"button"===ye?(ke.type=void 0===V?"button":V,ke.disabled=d):(B.href||B.to||(ke.role="button"),d&&(ke["aria-disabled"]=d));var be=qS(Y,K),we=qS(t,be);var _e=wb({},n,{centerRipple:o,component:h,disabled:d,disableRipple:v,disableTouchRipple:m,focusRipple:k,tabIndex:F,focusVisible:J}),xe=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=Ib({root:["root",t&&"disabled",n&&"focusVisible"]},OI,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(_e);return(0,ib.jsxs)(jI,wb({as:ye,className:xb(xe.root,u),ownerState:_e,onBlur:fe,onClick:x,onContextMenu:ae,onFocus:de,onKeyDown:ge,onKeyUp:me,onMouseDown:ie,onMouseLeave:ue,onMouseUp:se,onDragLeave:oe,onTouchEnd:le,onTouchMove:he,onTouchStart:ce,ref:we,tabIndex:d?-1:F,type:V},ke,B,{children:[s,ne?(0,ib.jsx)(DI,wb({ref:z,center:o},j)):null]}))})),VI=UI,BI=I_;function KI(e){return vI("MuiButton",e)}var qI=gI("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var zI=r.createContext({}),WI=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],HI=function(e){return wb({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},GI=DS(VI,{shouldForwardProp:function(e){return PS(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(BI(n.color))],t["size".concat(BI(n.size))],t["".concat(n.variant,"Size").concat(BI(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,a=e.ownerState;return wb({},i.typography.button,(Le(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":wb({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Pb(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===a.variant&&"inherit"!==a.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Pb(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===a.variant&&"inherit"!==a.color&&{border:"1px solid ".concat((i.vars||i).palette[a.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Pb(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===a.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===a.variant&&"inherit"!==a.color&&{backgroundColor:(i.vars||i).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[a.color].main}}),"&:active":wb({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[8]})},"&.".concat(qI.focusVisible),wb({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[6]})),Le(t,"&.".concat(qI.disabled),wb({color:(i.vars||i).palette.action.disabled},"outlined"===a.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"outlined"===a.variant&&"secondary"===a.color&&{border:"1px solid ".concat((i.vars||i).palette.action.disabled)},"contained"===a.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===a.variant&&{padding:"6px 8px"},"text"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main},"outlined"===a.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[a.color].mainChannel," / 0.5)"):"1px solid ".concat(Pb(i.palette[a.color].main,.5))},"contained"===a.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].contrastText,backgroundColor:(i.vars||i).palette[a.color].main},"inherit"===a.color&&{color:"inherit",borderColor:"currentColor"},"small"===a.size&&"text"===a.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"text"===a.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"outlined"===a.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"outlined"===a.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"contained"===a.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"contained"===a.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(Le(t={boxShadow:"none","&:hover":{boxShadow:"none"}},"&.".concat(qI.focusVisible),{boxShadow:"none"}),Le(t,"&:active",{boxShadow:"none"}),Le(t,"&.".concat(qI.disabled),{boxShadow:"none"}),t)})),QI=DS("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat(BI(n.size))]]}})((function(e){var t=e.ownerState;return wb({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},HI(t))})),YI=DS("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat(BI(n.size))]]}})((function(e){var t=e.ownerState;return wb({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},HI(t))})),XI=r.forwardRef((function(e,t){var n=r.useContext(zI),i=BS({props:Sb(n,e),name:"MuiButton"}),a=i.children,o=i.color,s=void 0===o?"primary":o,u=i.component,c=void 0===u?"button":u,l=i.className,h=i.disabled,f=void 0!==h&&h,d=i.disableElevation,p=void 0!==d&&d,v=i.disableFocusRipple,g=void 0!==v&&v,m=i.endIcon,y=i.focusVisibleClassName,k=i.fullWidth,b=void 0!==k&&k,w=i.size,_=void 0===w?"medium":w,x=i.startIcon,S=i.type,I=i.variant,E=void 0===I?"text":I,T=eb(i,WI),C=wb({},i,{color:s,component:c,disabled:f,disableElevation:p,disableFocusRipple:g,fullWidth:b,size:_,type:S,variant:E}),A=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,o=e.classes;return wb({},o,Ib({root:["root",a,"".concat(a).concat(BI(t)),"size".concat(BI(i)),"".concat(a,"Size").concat(BI(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(BI(i))],endIcon:["endIcon","iconSize".concat(BI(i))]},KI,o))}(C),N=x&&(0,ib.jsx)(QI,{className:A.startIcon,ownerState:C,children:x}),P=m&&(0,ib.jsx)(YI,{className:A.endIcon,ownerState:C,children:m});return(0,ib.jsxs)(GI,wb({ownerState:C,className:xb(n.className,A.root,l),component:c,disabled:f,focusRipple:!g,focusVisibleClassName:xb(A.focusVisible,y),ref:t,type:S},T,{classes:A,children:[N,a,P]}))})),JI=XI;function $I(e){return vI("MuiFormGroup",e)}gI("MuiFormGroup",["root","row","error"]);var ZI=r.createContext();function eE(){return r.useContext(ZI)}function tE(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var nE=["className","row"],rE=DS("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.row&&t.row]}})((function(e){return wb({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.ownerState.row&&{flexDirection:"row"})})),iE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiFormGroup"}),r=n.className,i=n.row,a=void 0!==i&&i,o=eb(n,nE),s=wb({},n,{row:a,error:tE({props:n,muiFormControl:eE(),states:["error"]}).error}),u=function(e){var t=e.classes;return Ib({root:["root",e.row&&"row",e.error&&"error"]},$I,t)}(s);return(0,ib.jsx)(rE,wb({className:xb(u.root,r),ownerState:s,ref:t},o))})),aE=["sx"];function oE(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){Vx[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}(eb(e,aE)),i=r.systemProps,a=r.otherProps;return t=Array.isArray(n)?[i].concat(f(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return v_(e)?wb({},i,e):i}:wb({},i,n),wb({},a,{sx:t})}function sE(e){return vI("MuiTypography",e)}gI("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var uE=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],cE=DS("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(BI(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return wb({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),lE={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},hE={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},fE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiTypography"}),r=function(e){return hE[e]||e}(n.color),i=oE(wb({},n,{color:r})),a=i.align,o=void 0===a?"inherit":a,s=i.className,u=i.component,c=i.gutterBottom,l=void 0!==c&&c,h=i.noWrap,f=void 0!==h&&h,d=i.paragraph,p=void 0!==d&&d,v=i.variant,g=void 0===v?"body1":v,m=i.variantMapping,y=void 0===m?lE:m,k=eb(i,uE),b=wb({},i,{align:o,color:r,className:s,component:u,gutterBottom:l,noWrap:f,paragraph:p,variant:g,variantMapping:y}),w=u||(p?"p":y[g]||lE[g])||"span",_=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,a=e.variant,o=e.classes;return Ib({root:["root",a,"inherit"!==e.align&&"align".concat(BI(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},sE,o)}(b);return(0,ib.jsx)(cE,wb({as:w,ref:t,ownerState:b,className:xb(_.root,s)},k))})),dE=fE;function pE(e){return vI("MuiFormControlLabel",e)}var vE=gI("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),gE=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],mE=DS("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[Le({},"& .".concat(vE.label),t.label),t.root,t["labelPlacement".concat(BI(n.labelPlacement))]]}})((function(e){var t=e.theme,n=e.ownerState;return wb(Le({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(vE.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},Le({},"& .".concat(vE.label),Le({},"&.".concat(vE.disabled),{color:(t.vars||t).palette.text.disabled})))})),yE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiFormControlLabel"}),i=n.className,a=n.componentsProps,o=void 0===a?{}:a,s=n.control,u=n.disabled,c=n.disableTypography,l=n.label,h=n.labelPlacement,f=void 0===h?"end":h,d=eb(n,gE),p=eE(),v=u;"undefined"===typeof v&&"undefined"!==typeof s.props.disabled&&(v=s.props.disabled),"undefined"===typeof v&&p&&(v=p.disabled);var g={disabled:v};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof s.props[e]&&"undefined"!==typeof n[e]&&(g[e]=n[e])}));var m=tE({props:n,muiFormControl:p,states:["error"]}),y=wb({},n,{disabled:v,labelPlacement:f,error:m.error}),k=function(e){var t=e.classes,n=e.disabled,r=e.labelPlacement,i=e.error;return Ib({root:["root",n&&"disabled","labelPlacement".concat(BI(r)),i&&"error"],label:["label",n&&"disabled"]},pE,t)}(y),b=l;return null==b||b.type===dE||c||(b=(0,ib.jsx)(dE,wb({component:"span",className:k.label},o.typography,{children:b}))),(0,ib.jsxs)(mE,wb({className:xb(k.root,i),ownerState:y,ref:t},d,{children:[r.cloneElement(s,g),b]}))})),kE=yE;var bE=function(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),a=l(r.useState(n),2),o=a[0],s=a[1];return[i?t:o,r.useCallback((function(e){i||s(e)}),[])]};function wE(e){return vI("PrivateSwitchBase",e)}gI("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var _E=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],xE=DS(VI)((function(e){var t=e.ownerState;return wb({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),SE=DS("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),IE=r.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,i=e.checkedIcon,a=e.className,o=e.defaultChecked,s=e.disabled,u=e.disableFocusRipple,c=void 0!==u&&u,h=e.edge,f=void 0!==h&&h,d=e.icon,p=e.id,v=e.inputProps,g=e.inputRef,m=e.name,y=e.onBlur,k=e.onChange,b=e.onFocus,w=e.readOnly,_=e.required,x=e.tabIndex,S=e.type,I=e.value,E=eb(e,_E),T=l(bE({controlled:r,default:Boolean(o),name:"SwitchBase",state:"checked"}),2),C=T[0],A=T[1],N=eE(),P=s;N&&"undefined"===typeof P&&(P=N.disabled);var R="checkbox"===S||"radio"===S,D=wb({},e,{checked:C,disabled:P,disableFocusRipple:c,edge:f}),O=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge;return Ib({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(BI(i))],input:["input"]},wE,t)}(D);return(0,ib.jsxs)(xE,wb({component:"span",className:xb(O.root,a),centerRipple:!0,focusRipple:!c,disabled:P,tabIndex:null,role:void 0,onFocus:function(e){b&&b(e),N&&N.onFocus&&N.onFocus(e)},onBlur:function(e){y&&y(e),N&&N.onBlur&&N.onBlur(e)},ownerState:D,ref:t},E,{children:[(0,ib.jsx)(SE,wb({autoFocus:n,checked:r,defaultChecked:o,className:O.input,disabled:P,id:R&&p,name:m,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;A(t),k&&k(e,t)}},readOnly:w,ref:g,required:_,ownerState:D,tabIndex:x,type:S},"checkbox"===S&&void 0===I?{}:{value:I},v)),C?i:d]}))})),EE=IE;function TE(e){return vI("MuiSwitch",e)}var CE=gI("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),AE=["className","color","edge","size","sx"],NE=DS("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat(BI(n.edge))],t["size".concat(BI(n.size))]]}})((function(e){var t,n=e.ownerState;return wb({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(Le(t={width:40,height:24,padding:7},"& .".concat(CE.thumb),{width:16,height:16}),Le(t,"& .".concat(CE.switchBase),Le({padding:4},"&.".concat(CE.checked),{transform:"translateX(16px)"})),t))})),PE=DS(EE,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,Le({},"& .".concat(CE.input),t.input),"default"!==n.color&&t["color".concat(BI(n.color))]]}})((function(e){var t,n=e.theme;return Le(t={position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:"".concat("light"===n.palette.mode?n.palette.common.white:n.palette.grey[300]),transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},"&.".concat(CE.checked),{transform:"translateX(20px)"}),Le(t,"&.".concat(CE.disabled),{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:"".concat("light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600])}),Le(t,"&.".concat(CE.checked," + .").concat(CE.track),{opacity:.5}),Le(t,"&.".concat(CE.disabled," + .").concat(CE.track),{opacity:n.vars?n.vars.opacity.switchTrackDisabled:"".concat("light"===n.palette.mode?.12:.2)}),Le(t,"& .".concat(CE.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return wb({"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Pb(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(Le(t={},"&.".concat(CE.checked),Le({color:(n.vars||n).palette[r.color].main,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[r.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Pb(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(CE.disabled),{color:n.vars?n.vars.palette.Switch["".concat(r.color,"DisabledColor")]:"".concat("light"===n.palette.mode?Db(n.palette[r.color].main,.62):Rb(n.palette[r.color].main,.55))})),Le(t,"&.".concat(CE.checked," + .").concat(CE.track),{backgroundColor:(n.vars||n).palette[r.color].main}),t))})),RE=DS("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),DE=DS("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),OE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiSwitch"}),r=n.className,i=n.color,a=void 0===i?"primary":i,o=n.edge,s=void 0!==o&&o,u=n.size,c=void 0===u?"medium":u,l=n.sx,h=eb(n,AE),f=wb({},n,{color:a,edge:s,size:c}),d=function(e){var t=e.classes,n=e.edge,r=e.size,i=e.color,a=e.checked,o=e.disabled;return wb({},t,Ib({root:["root",n&&"edge".concat(BI(n)),"size".concat(BI(r))],switchBase:["switchBase","color".concat(BI(i)),a&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},TE,t))}(f),p=(0,ib.jsx)(DE,{className:d.thumb,ownerState:f});return(0,ib.jsxs)(NE,{className:xb(d.root,r),sx:l,ownerState:f,children:[(0,ib.jsx)(PE,wb({type:"checkbox",icon:p,checkedIcon:p,ref:t,ownerState:f},h,{classes:wb({},d,{root:d.switchBase})})),(0,ib.jsx)(RE,{className:d.track,ownerState:f})]})})),LE=OE,ME="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCMRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAV+gAwAEAAAAAQAAAV8AAAAA/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/AABEIAV8BXwMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2wBDAAICAgICAgMCAgMFAwMDBQYFBQUFBggGBgYGBggKCAgICAgICgoKCgoKCgoMDAwMDAwODg4ODg8PDw8PDw8PDw//2wBDAQICAgQEBAcEBAcQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/3QAEABb/2gAMAwEAAhEDEQA/AP38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKazKgyxCj3rMudc0i0z593GpHbOT+lAGrRXHT+OdCiyI3eUj+6h/mcVzt98UtLtB8sPPbe4X9Bk1PMh8rPU6K+e9R+Nn2cYggQn2Bb9SRXHXnxu8STcWkKxj3wP6f1o5w5T61or4qPxQ8bXsojk1BbcN02qPyyax5vGfiy4kMd3rVwuOysF/kKOYLH3U0saffcLj1NU31TTkzvuY1x6sK+KYry0kbdqOs3MgIz/rW/I816RpOq/CLTbFtQ1y+EcadXuJDt/HJouwsfQza9oy/evIh/wIVA3ijw8pw2oQg/74ryaPxZ8Er+0M0E1tNGB/CDmvkb4q/tKfs+eELx7BdNuprhM58mPcD9CXAok2gVj9DT4v8ADK9dSg/7+Cj/AIS7wx/0E4P+/gr81fDPi7UPiJo1v4k8FeAtXu9MuyRFOIo1RsHBwTJ2rpP7C+Ir4J8C3sYH9+W2XH5yVyPGxXU6VhJvofoQPFnhtuBqUH/fwVKPEvh9umowH/gYr85Na1DXPB+iX3iPxB4NvBY6bE007JLbOVRerbVlyce1eW6J+2N8A5HUahYX0QOOtvnH5Oa0pYiM/hZlVoyh8SP10XXdGf7t7Cf+BirKajYSHCXEbfRhXwJ4U/af/ZW1QpHLPLbSN086CQD9K+nfDWq/BvxlZi88O3Vvcxt3R2Vh+BINdKMro9nWWNvusD9DT68D8SaX4OsMva6lc2zjtHK2K8pu9bvrRy2leJrrA7MwP881LbQz7Sor4iT4k+ObA/u9b88DtJGD/LFaEPx08aWhxcJBcj2G0/1pc4WPs2ivlix/aGmAH9oafj1K4I/mK7XTvjl4fvQPNTyif7xK/wAxT50Fj3KiuIs/H2hXiB1cgHuMMP0rfg1/R7n/AFd0mfQnB/WmpILGxRUaTRSDMbhh7HNSUxBRRRQAUUUUAFFFFABRRRQB/9b9/KKKKACiiigApkjxxoXlYIo6knArmPEXie30NfKUeZcsMhPT3NeSX+tanrD5uZSR1Cg4UfhSbGkerah400exysbG4cdl6fma4u88b6zecWSLbRnv1P5n/CuMLW1uN88iqRz8xH9ax7vxV4etDi51GFD/ALTjNYyqGkYHTT3t9dfNeXTyH0B4rKmuEjztUD36n9ay4Nd0+/Utp1xHcj1Rw38qhumlIPTIrPmuacpV1q/kjjwHIdl3CvKdR1Jrht0n317+tei60m6O3nJ6pj8uK8y1GLbMQOmf51bZBV+1k4HXNOFyd+wKfY9qz+QuM4wcVKkqkgKwJHOKCRt48gOQcZ5FVbiaZ4llJ+YcVbvlJRT6VnKxkiKY5681dwKUk0p6ufXrXz58edUvrTwgHhY4SXueAQpIP6V75LvBPymvAvjtBLN4Fv2jX5oWVgT/ALQZD/OhsLaHFeH/ABXdxaV5bTERN15OM9ulfLnxM1aK41KZmAZmUgEsePoO9e2+G76e88PqfMUb40IzjoRng18y+P7a5iv3lMisfm74qWSz7H/ZZ8Ya7Z6dpOjQapKLSSWZfIDtsHORgZx+Nfdvi3ULlPC11MlyyOqD5sn1r4R/ZY0i7OhaTeJah18yZmdmwBnp0HXt1r7q8X2Etz4Su4IVDyso+UfWvzjM5r27SPvsDD9zFs+GfHfiDUp9A1q1e/aXdbuuzeeQwHBr4O8m+VsmJh7d/wAq+sPHTXFs/ieGeDatpBk8khRwO9fHUE26TfLKUxz619NkK92Vj57PX78bnd6TdX9u6Fgycfxcfzr7W/Z38R61b67ZRJLJskLhueCoQk96+EdM1K43bPNZo8dDzxX2T8B43udVtMcokU0hIOMfLt/ma+qobM+bqbo/Q3WteurmxjaSQklf6mvOnv5y3Dn86vXEZgsIYjI5IQH5jn73OPwzXPAPuPPWsTdm0l5cY+9mpTeS44OfrVJM7M0NJtI+Un6UpAi39rmI64x6Cp4ros3zEt9TWfLKEULtOTyfap4toHPU1AzqdM1m9sZVeCUpjsDXtfhzxRNqKCKTmXsOze31/nXz5BGSM969H8HRv/aFuB0Vwx+i/Mf0FNDPdLPU84eJ2iJ/usRXT2viTWLcjy7nzVHZxn9a8qs5XBJHcmumguBtANTzW2Lsj1S08cAEJqEBX/aWuts9a02+A8iYZPY8GvDo5c8/zp65Db4W2H9K0jUIcOx9B0V49pvirULBhFKfNQfwt/Q16VpWtWerJmBsOPvKeorRMzaNeiiimAUUUUAf/9f9/KKKKACmsdqlvQZp1IRkEHvQB8w6hqcl9qlzPOSXZ269gDgCuf8AE2uLoekrcsdokbaT05x612XxA8OT6DfNq8K/6BO2WYDiNz2b0B7Hp29K4XULOw8Q6XPo+oAtDOuCRwynsyn1FZyvYtHz5qvxPsmu0tbo+VFcsUWUE4Vu270rybxrPPFqRmEm+OQAjnjB/wDr1T+J3wy8ZeEmnuHgOp6Q/wB27gUnYQcqZkHKEdM/dPrXB6JriajpKaPfSf6RbEiIk8sh5AB9jnH1rmcLGil0Ow0vxNf6NOl5ZTNHIhzwf6V9D+GvjCLuOOHxBF5YYDEseSPqV/wr5M3YUg+laOlXbxNGTyBwfwNSmXE/QRbq01fRIbuxlE0XmFdw9xkfqK4TV7cBuuOP5Vm/DO+2PNpKti2vYhLGCcjzU5wPqMiuh1+IKc+h7+9bXvG5ElZnHeVHvYgcsBzSCMZ3IME8Zx2pnnqGXnPUcVNBKWbAFRzCcSaeMtACRzWdbQKdxbk81tShvIwx7Vm2wYuRwcg4rW5JmNbBhn1rzj4ieHJNc8G61Yqm9nt3KjuXQb1/Va9R/fEcDgVUutLuNTs7yyQlWmiZM46bgVz+tF9APgz4feGr660aK3jARYYwpAYAkKMdz7V5b8Z/DK6aYzwXOckYz06cYr7A+H/gfWdF1CXQ7qNWZGZDweeTgj2I6V5H+0n4Tl0oRiZiCpOM5xz+Fb1UrKxhBu9mfUX7KX7Q3hDQfhDpPhe88Kw3FzYtIruijDHP3iTnBNfVkfx9+HDW8smpeEp44VQvmNd2QAT7fhX4tfC/xhc+G/D8dtbsvErvyOTk16/rnx817T/DV6luwVmhdFLKDjeMccZ718hXhVU3GFrei/yPqqVSk6alO9/V/wCZZ8d/Fr4W+M/CPxkm0jRry3u9RW0XTjKwIhRZsybiPU+vbj3r880jZmwBn6V22neJb+30bX7LeGXU4kjkyOT84bP6VzVukhZSOCK9fAYVUk4o8bHYp1WpM3tCsGnmGEJJ4/Ov1P8A2b/hzdf2NJqs9vs84CJWIAO1fmY/TpX56+C7y7WaCE28Mh3DG5ACc+pXGfxNfsP8GdL1eDwNa3VwVt90bSBU5G1htXrnrjP0r3aatTZ5b+NGf4jszHK4RcKScD27Vx4gwS2K63XmvBPtZ92M9q52MzZw6g4rmOiwixZjPHSpIlyoPpUyZ2MxGDjp9aiwwz6VDYxJEHmetLbxdm61GXG6rcXUH2pDRpWsPIA7V6f4Vh8pLi5P/LOMqP8Aek4/lmuCsYyzfiK6HxZrc/hHwV9ptQBeXsn7skZAA+UN/Mihaagjotb8aeHvCVuZNWuQsu3csK8yMPYf4183+NPjzr+o3RtvDr/2dZ4yCP8AWn6nt9BXjWu6rcXdy81zM00rHLOxyTXIGRnJLnOeazSLkz23wl8QvGdzrUEbanPN5rDcGcnjv3r6g0f4kCB0s7/UA05APlkb3CnoTjkZr4d0jXrTwvZ3GtXQDz7THbx93dxyfoo6n6VD4MvfEWsa0kemwS6hq+qyFmWIFmESnn2VSe5wAAaOXsTfQ/UHTNah1aPKsGYcgjj866TTNRl0++iuYmwVPI9R3FeZeB/D1z4Z0cLqkwkvZQPM2nKRj+6D39z+XFd1pVpc6zqUVhZjJY7mbsqDqf8APeuiJLR9JRuJEWQdGAP50+mRoIo1jXooAH4U+tCAooooA//Q/fyiiigAooooAjmhiuIngnRZI3BVlYAqQeoIPBFeLa/8I9pe78HXQs3PP2WfL25PorD54/wyB6V7bRQ0CZ8W6tqOteEZhb+LdOl0zd8olOJbaT12zJx+DBT6ivLte+F/wv8AGx+3xW4069Y7hcWJEeWHIJQZQ8+1ffPjLTl1LQbmMrvMY3YPOcdf0r4p1jwrpYuHks0axlz9+3byzn6D5f0qHEpPueL63+z/AK7E7zeHr+DUIzz5cv7mT8Dyp/MV5Rqfgjxh4caRdX0i5gQEESbC8fv865X9a+p4h4s0xv8ARNSS7QdFuEwf++k/wrYtvHfiCxBXUdMdl7tA4kH5HBrB00a8x4t8I9f1b+27bSrazjvHZ02JLkYXPzYI5yK+tPija6St0lrpUITy4wJCuSC/fBPXFefW3jjwcb6O+uLWO0vIzlZHh8twf94Cuo/tvw1rSKi3KORnlZBnk55ojC10VKV7Hjv2Yb29jmtGCJBzXoTeEtPnYyW18QD2ZQR+YxVb/hDb6NiYriKQdskqf1FOMSHc5Ro/3fA5wapWkGLoAjhuK7NvDOsIOIA/+6ymqUWiapDcxvLZyBQeTtJ/lVpE3Ofis2MhjHUE/wA66nQtHZtQ2nnepAHv2qMWU8VzKzxMqj1U+teqeHrAPdRlVAPBq0I891n4Wz3ms2WsaYjLICN/bIz1yfQ8V8o/tXeB/Ey3kflWMstqkf3vLLAsfcDFfr5Z2kDWsJkjBYAN06HvXO+MNHtb2xd5oldcYIKgj8RWnN7trGfLrc/mQGj6np7CN7BkbJwCjKT+FJq3hPxRqViRHpNw0b9WAwMDnoa/a7xT4O8NrM7SabCSDn5eK84l8OeHGkANoQB0GcivNnh3e6R3xrRtZs/HOy+F3iu8VorXSrpy5HRcdK6ux+BHxKe4S3TQ7p92OQFI5981+yuh6NpdugjtLdUB9AMn9K9s8KeHLCaRWkgBA9RXVCEupzS5eh+V3wo/ZZ8bXOrWZ1ix+zwGRC4dgTsz82AB1A96/V6fwtD4e8MR2MEJjCKq7f7qoMKPyFe1aR4fs7MLP5Ko2OBjGPrVXxjYJcaTIwGNo5rrc7xsYKCTuj4O1m28y6bjvWDNaFDgcZOa9T1nTF85nwOpxXG3Vm2/CoT9KwaLOZji3GQDljyBVSRMMRXVW+k30khWK3lYkdkJ706bwj4juLkvb6bMynoduB+uKjlHc4TysSfT1rSgiPmYz1rsofhz4rlbc1skI9ZJVH6Ak10dl8M9QRg15ewRgf3dzn+QpWKMKwiWC0e5k+6gLHjJ49K82+LnjBb94rAwLDbw48rJ3OVAwOnAz14z9a+mYvDOl2lq9tPeE742jJAC8MMEjOecGuSuPB3wqtWSTUYI7xohgGeUv+gIpS1HHQ/P6eKS8d1t42lduFVQWYknsBk13Ph74L/EXxDte30eS0gbH727/cLjuQG+Y/gpr7Ys/EXhbR18nw3pioP+na3Cfm2B/Okm8S69eHMFslsp7yvvb/vleP1pJAzwrSP2WNKkvo9Q8baw92sSgLa2o8tAOpzI2WOT6AV9BaPZeD/BFqNJ8OWcOnrJgFIl3TSkdNxGXc+mc+1Zsdpfag4N9eyOD1WP92v6c/rX0X8LfCWn6VZvqyWqRzTfKrYy+3udxyefrWsYkNnF6L4N8WeI2Wa5gOj2R/jnGZ2H+zF/D9XOf9mvdNB8O6Z4dtfs2nodzcySMcySH1Y/yHQdhW7RVpCbCiiimIKKKKAP/9H9/KKKKACiiigAooooAayK6sjDKsCCPrXyB4y05tK1m6tP4Uc7fcHkfpX2DXh/xa0TeItWiX7w2OR6jpQB87Pgmq0ie1OnYxuRTkfeMispItFNoI5V2SKGHoRmsubQNKlO5rVM+qjB/Suh70bcioLuc6mixwjNpPPB/uStj8qtp/b0H+o1eU47SAN/hWuEzThEMilYLla31rxbA2DcRzAf3l25/HDV01l4svAQL5JE6ZMSo/6FkrGEftSNHzxzS1KR6RB4m0WRPn1B4yO0lq//ALI71KfFGlwgNDqMJPvHcIf/AEUa8w2Y7YxTtg7c0czFY9RX4lvYnCXgcDpsdyPyZBVe7+MUEiNFcyzMh6gAkGvMwgH0pQq+tHMw5TeufiP4JlH+lwsx/wBqI1kv46+GbHLWy/8AflqreUOaFixxilzvuHKjRg+Ifw8jYLbJhj0Aif8AwrorX4q6JZFWtfOjI5G2M1xojx06U7yx/dpc8u40o9j0ZvjoiLuMtyR0/wBUT/Ss65+NCXqlH+1yKexibB/SuMVcc4qYRggZGKalLuDsdPB42sLkg/Z1QHvIjg/kENbieItK2bmvoY/ZYJmP/ota89Majio3UY2+tNtk2OxuvGSoSLRpbgeqw7B/49ID+lc7N4r8STORbwxovq78/iAD/OqkcQ7dKeqgHGKSbG7ET6r4ql5kvEi9kTP88VUc6xOcXGpTMD2XC/yGa02U4wRzTPJY9qfoJIxzpNvL81wZJj/00dm/rViOwtIf9XEi/RRWkYuMZxSJGB15oYaEZRSOmatwQbuvQihFHXGMVKsgzsFXFEtnR6JYm9vreyhGWlYL+dfWdpbR2VtFaQjCRKFH4V4n8K9HM11LrEy/JANiZ7s3U/gK91FbozCiiigAooooAKKKKAP/0v38ooooAKKKKACiiigArG17S49Z0qewkAy6nafRu1bNJ3oA+EPEFjJYXclvMNrIxBHuK5mO6MZw3Q19I/F/wtkf2zbp8knEmOzetfLdyHgJU5bHr1qJFROoSVXGRU+UIxXM2d6mcE4+tbaSKw61kUXVx61MvtWepYcipFkI4NA7F/OD0pcjpVM3GOtSrMh4zQNE+AfoadtQ+gqNXTHWn7waBXGmNSeaQwrjNSgrSFh0osFysUToO1N8sd+KmDjcQV49acSpFQyyAADq3H1p+ARwTSgITgjNPAQdTipSARYsk1PsA75qISBelSb09atCAKO/NAQFhgZp4K96XzUHSmhDjtUYHBpobj5hzTPNUdetHmDORU3HYlJaThcjFN2Nu3MckdKZ5vYU1pW6A1SJsS49OaczBevFVGkABOfrWXc3agfK1MRoS3Y3bVrQ02J7mZVUZLEAD3NcpC7SONvc1778K/DZvb4ancL+5tuee79h/WtIomTPcvDOkro2i29ljDhdz/7zcmt+iitCQooooAKKKKACiiigD//T/fyiiigAooooAKKKKACjOKKKAKWoWFtqllLY3S7opQVIr4Y+IXhe68NarJbTKdhO6NuzKehr7wLbDz0rivHfg+08YaO9q+EuYwTDJ6H0PsaLAfnXcXTRNuHrW3YaqDtDGs/xJpN7omoT2F7GY5YiVZT7VzFvd+U22sGjRM9cjuN4GKlEvHPWuFsNVBG1jzXRxXiuOam5djbDxuOaAi5ypxVBJw9TBwfcUrgkXBMyttYZq0pJrL3N1B/CnpMyn5jikmOxq7jQSDx3qsJeAPWneb+NVzE2ZKajL+nFQNNj2qPzhUNlWLAbvRuyarC4U96XzVzn1qbjsWQxB608P2qmZOcilEpyM0XCxe3HFNyfSoPMPrURk9W/WnzCLffNP3Y5OKoCQZ65pGmHY0JgaBmUdxUL3SqC1Zc12EHJ5rBu9T64b8KbmHKa95qBI8sHC96xmuDI/wB7IrIe7LHg8Vd06Ce+nSOIFixAwKcbtkyZ6D4T0i51q/htbZCzO2OO3ua+3tA0eDQ9Lh0+EfcHzH1bua4L4Y+CF8Oact7eJ/pc4zyPug9q9XrpitDJsKKKKoQUUUUAFFFFABRRRQB//9T9/KKKKACiiigAooooAKTIpN1NoAa4zUAcxttbketWDyKhkTIxQB4r8X/h1F4o01tV05Auo269v+Wijsff0r4D1S0ntJXjkUo6Egg9iK/V4Dcpjb/9Yr5b+M/wyW6WTX9IixJyZUUdfcD1qZDTPi+DUHjbDHBFdPp2tYYKzfhXI6hAbaRo5F2kH8qzVuDGeTxWEomqke1W+oBhuJB+laUd6Gxg5ryGx1lo+N2RXT22qB8EmsmzTc9EE+Oaa8m8Y3c1y8d9kdaspeA47mpchqJuRTTRnnkVbFxmsBbrnAarHnAjOalSBo2WuBj0pguPU8VitNlsGkFwvI6VLqXDlNszDOeOKQXAz14rF+0L6809ZlfgnFLnZVjaNwG6c0x7pVxWUX/ut0qMz7Thhk03MRsecG5NM89B6VivfALkYrMl1RBwDRzjSOoe82ghSBms+XU0jyd1chc6u3ROtYs+oOTkNj8aaYrHU3WqmTODxWQ91ufJNc+boyHG7NaunWsl1IqRgsxOOK1jFsicrG1ZQtdOFxmvr/4RfDM2qx+INYj2twYo2GMf7R/pWX8JvhRGscWua6mQOY4z6+pr6hRQoCqMKvAArqhCxztk4wBgUtR5xTga0EOopBnvS0AFFFFABRRRQAUUUUAf/9X9/KKKKAEJxQfypaQ0AITSZpKKACiiigBDUZ5p7U2gCFhg1Su7dLiJo5BuVhgg1otUTDNAHwz8aPhHNH5+s6N8p5baB+hr4avPEiabevp2sKbWdTj5vuk/XtX7a6jp0F9E0M6hlbjBr4b+Of7M0PiSGfVdCTF0QTtAGDWMrotWZ8eRaojKJLeQMOowa3LHXWU7ZOK+YPF3hXx98Pb54o/MiCH7j52n6ZrlrP42ahpUgh121KY4LEcfmOKz0ZpsfetpriOAN9dDb6gjgc18V6X8aPDt2AfOMZPvkV6Bp3xN0yXBhvUYehODUOmWmfUqXUZbIb9auLcqP4v614HY/EDT5MB5l/MV01t4x06UZFwv51DgVc9YNznvURnz14rhI/ElnJ9yVSP94VN/bkBPDg/jWbgNM7UTgUovFAweK4dtehH8YP5VRn8RxjO1h+dLksO56G1/szg8VSl1RQOWrzWXxPEox5g/OsW48VQAHMgp8pNz0y51UY+9WJPqgIIBry+58YWsakyTqo9yK5XUPiZ4eswxnvUyOwOf5VSpicj2aXUVODmqxvMnk1813fxt015PI0iB7uU9MDArofClr8SPiJfR21nbSQxyH/Vxg9Pdq15UtzNyue722pWnnLArebMx4ROTX2P8Gfhrc3/l6zq8XlxggqhHWs74Mfs12vh+KHU/ES+dcEBtp7H3r7TsbG3soFggQKijAAraEWZNlq3gSCJYoxtVRgAVbXpUS1ItbkjqKKKAFyaX3pv0pw96AHUUh6UtABRRRQAUUUUAf//W/fyiiigAoxmiigBDmk206igCPFFPIzRigBlMPWpSKbgUAREZplTkelN20AVyKrSwq6kMMir+ymlPagDyLxp8JvCHjW2kh1iwjkZgRv2jIz718GfEn9hGzuoZJ/DM288ny3HX6V+pxiqMwA9azlTTKUmfzcePP2PvGnh6WSb+zZ4lUnDxA4z+FfO+pfDf4gaEzCKWUbf4ZVOfz4Nf1f3WjWl2pWaJZAeoIzXneu/BvwN4g3HUtIglZuCdgB/So9k1sylM/lla++I2l8SQmQDurH+Rpy/EfxjZ8T2s4x6c/wBa/ow1v9jr4XaozOlh5JbJIXgZryPV/wBgTwfdYaznMZycg8g/4VDhLsPnPwyT4zeIoPvCdP8AgLVdj+POux8edKv4NX6/3v8AwTptH3G31BMnpuTgVhzf8E32ZgYtRhwTzlOlS4vsVz+Z+Un/AA0FroAxPKf+AtTG+PviSXhHmb6If8K/V+D/AIJuAD99qMOc9kOMV0Vh/wAE5dIiINzqi57hYqfI+wc/mfj4fjD40u/9TDcNn/ZIpo8W/EvVDiGCRc92bH8q/cfR/wBgPwDZlTeXUtwe+FCd/wAa9W0L9j34S6MQw0v7Qw7ysW4+nShU5diXM/n5sPCvxL191SWZ13HGEUsefrXv/gT9kT4h+LJUkbT7mdGwd82UTnvzX73aJ8IPBOhBBp2kW8OzGMRrxivQrXSLW1G2GMKB2AFWqL6sTmfmj8K/2ErbSmhu/Fs0e1cEwxDP5mvvjwf8M/Cngq1S10SxSLb/ABYy3516MIgKl8vFaRppENkKRhQAvSpgMCnbadgVoIAMU4DnNGDT6ACilwaSgAFPwKMCloAKKKKACiiigAooooA//9f9/KKKKACiiigAooooAKKKKACkpaKAEIzTcU+g0AR0UuPypdvNADaKXBoIwaAEpCKdjjNAx3oAZtFJsFSAZpdtAEWwUeWtSY9aDjtQBF5anqKPKX0/GpcZpccc0AQ+UtLsFScUuOmKAI9tG2pMHFA4oAj204qBTyM0Ed6AG444pccdKcKKAEwKXAoooAKKKKACiiigAooooAKKKKACiiigD//Q/fyiiigAooooAKKKKACiiigAooooAKKKKAEHAoxS0UAJnse9GBS0nSgAwMU0jFOHrRigA6UmTnFKetLQAgPakI9KdSGgA6UYoFLQA3AHWlwe9LRQAYpMc0tFACc0tFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Z",FE=n.p+"static/media/Black_Circle.d90d1f69e27b26a272b3.jpeg",jE=n.p+"static/media/NewNotification.d2345dad38de196bf139.mp3";function UE(e){return vI("MuiPaper",e)}gI("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var VE=["className","component","elevation","square","variant"],BE=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},KE=DS("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return wb({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&wb({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat(Pb("#fff",BE(r.elevation)),", ").concat(Pb("#fff",BE(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),qE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiPaper"}),r=n.className,i=n.component,a=void 0===i?"div":i,o=n.elevation,s=void 0===o?1:o,u=n.square,c=void 0!==u&&u,l=n.variant,h=void 0===l?"elevation":l,f=eb(n,VE),d=wb({},n,{component:a,elevation:s,square:c,variant:h}),p=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes;return Ib({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},UE,i)}(d);return(0,ib.jsx)(KE,wb({as:a,ownerState:d,className:xb(p.root,r),ref:t},f))})),zE=qE;function WE(e){return vI("MuiCard",e)}gI("MuiCard",["root"]);var HE=["className","raised"],GE=DS(zE,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),QE=r.forwardRef((function(e,t){var n=BS({props:e,name:"MuiCard"}),r=n.className,i=n.raised,a=void 0!==i&&i,o=eb(n,HE),s=wb({},n,{raised:a}),u=function(e){return Ib({root:["root"]},WE,e.classes)}(s);return(0,ib.jsx)(GE,wb({className:xb(u.root,r),elevation:a?8:void 0,ref:t,ownerState:s},o))})),YE=["bsPrefix","variant","animation","size","as","className"],XE=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.animation,a=e.size,o=e.as,s=void 0===o?"div":o,u=e.className,c=tb(e,YE);n=sb(n,"spinner");var l="".concat(n,"-").concat(i);return(0,ib.jsx)(s,Gt(Gt({ref:t},c),{},{className:rb()(u,l,a&&"".concat(l,"-").concat(a),r&&"text-".concat(r))}))}));XE.displayName="Spinner";var JE=XE;function $E(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ZE;Object.create;var eT="facebook.com",tT="github.com",nT="google.com",rT="password",iT="twitter.com",aT="EMAIL_SIGNIN",oT="PASSWORD_RESET",sT="RECOVER_EMAIL",uT="REVERT_SECOND_FACTOR_ADDITION",cT="VERIFY_AND_CHANGE_EMAIL",lT="VERIFY_EMAIL";function hT(){return Le({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var fT=function(){var e;return Le(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Le(e,"argument-error",""),Le(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Le(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Le(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Le(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Le(e,"cordova-not-ready","Cordova framework is not ready."),Le(e,"cors-unsupported","This browser is not supported."),Le(e,"credential-already-in-use","This credential is already associated with a different user account."),Le(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Le(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Le(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Le(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Le(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Le(e,"email-already-in-use","The email address is already in use by another account."),Le(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Le(e,"expired-action-code","The action code has expired."),Le(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Le(e,"internal-error","An internal AuthError has occurred."),Le(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Le(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Le(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Le(e,"invalid-auth-event","An internal AuthError has occurred."),Le(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Le(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Le(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Le(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Le(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Le(e,"invalid-email","The email address is badly formatted."),Le(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Le(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Le(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Le(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Le(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Le(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Le(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Le(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Le(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Le(e,"wrong-password","The password is invalid or the user does not have a password."),Le(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Le(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Le(e,"invalid-provider-id","The specified provider ID is invalid."),Le(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Le(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Le(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Le(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Le(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Le(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Le(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Le(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Le(e,"missing-continue-uri","A continue URL must be provided in the request."),Le(e,"missing-iframe-start","An internal AuthError has occurred."),Le(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Le(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Le(e,"missing-multi-factor-info","No second factor identifier is provided."),Le(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Le(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Le(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Le(e,"app-deleted","This instance of FirebaseApp has been deleted."),Le(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Le(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Le(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Le(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Le(e,"no-auth-event","An internal AuthError has occurred."),Le(e,"no-such-provider","User was not linked to an account with the given provider."),Le(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Le(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Le(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Le(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Le(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Le(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Le(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Le(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Le(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Le(e,"rejected-credential","The request contains malformed or mismatching credentials."),Le(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Le(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Le(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Le(e,"timeout","The operation has timed out."),Le(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Le(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Le(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Le(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Le(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Le(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Le(e,"unverified-email","The operation requires a verified email."),Le(e,"user-cancelled","The user did not grant your application the permissions it requested."),Le(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Le(e,"user-disabled","The user account has been disabled by an administrator."),Le(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Le(e,"user-signed-out",""),Le(e,"weak-password","The password must be 6 characters long or more."),Le(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Le(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},dT=hT,pT=new at("auth","Firebase",hT()),vT=new Wt("@firebase/auth");function gT(e){if(vT.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vT.error.apply(vT,["Auth (".concat(Nn,"): ").concat(e)].concat(n))}}function mT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw wT.apply(void 0,[e].concat(n))}function yT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wT.apply(void 0,[e].concat(n))}function kT(e,t,n){var r=Object.assign(Object.assign({},dT()),Le({},t,n));return new at("auth","Firebase",r).create(t,{appName:e.name})}function bT(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&mT(e,"argument-error"),kT(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=f(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(f(o)))}return pT.create.apply(pT,[e].concat(n))}function _T(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw wT.apply(void 0,[t].concat(r))}}function xT(e){var t="INTERNAL ASSERTION FAILED: "+e;throw gT(t),new Error(t)}function ST(e,t){e||xT(t)}var IT=new Map;function ET(e){ST(e instanceof Function,"Expected a class definition");var t=IT.get(e);return t?(ST(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,IT.set(e,t),t)}function TT(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function CT(){return"http:"===AT()||"https:"===AT()}function AT(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var NT=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,ST(n>t,"Short delay should be less than long delay!"),this.isMobile=Je()||et()}return v(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(CT()||Ze()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function PT(e,t){ST(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var RT=function(){function e(){d(this,e)}return v(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void xT("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void xT("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void xT("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),DT=(Le(ZE={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Le(ZE,"MISSING_CUSTOM_TOKEN","internal-error"),Le(ZE,"INVALID_IDENTIFIER","invalid-email"),Le(ZE,"MISSING_CONTINUE_URI","internal-error"),Le(ZE,"INVALID_PASSWORD","wrong-password"),Le(ZE,"MISSING_PASSWORD","internal-error"),Le(ZE,"EMAIL_EXISTS","email-already-in-use"),Le(ZE,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Le(ZE,"INVALID_IDP_RESPONSE","invalid-credential"),Le(ZE,"INVALID_PENDING_TOKEN","invalid-credential"),Le(ZE,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Le(ZE,"MISSING_REQ_TYPE","internal-error"),Le(ZE,"EMAIL_NOT_FOUND","user-not-found"),Le(ZE,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Le(ZE,"EXPIRED_OOB_CODE","expired-action-code"),Le(ZE,"INVALID_OOB_CODE","invalid-action-code"),Le(ZE,"MISSING_OOB_CODE","internal-error"),Le(ZE,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Le(ZE,"INVALID_ID_TOKEN","invalid-user-token"),Le(ZE,"TOKEN_EXPIRED","user-token-expired"),Le(ZE,"USER_NOT_FOUND","user-token-expired"),Le(ZE,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Le(ZE,"INVALID_CODE","invalid-verification-code"),Le(ZE,"INVALID_SESSION_INFO","invalid-verification-id"),Le(ZE,"INVALID_TEMPORARY_PROOF","invalid-credential"),Le(ZE,"MISSING_SESSION_INFO","missing-verification-id"),Le(ZE,"SESSION_EXPIRED","code-expired"),Le(ZE,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Le(ZE,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Le(ZE,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Le(ZE,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Le(ZE,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Le(ZE,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Le(ZE,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Le(ZE,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Le(ZE,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Le(ZE,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Le(ZE,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ZE),OT=new NT(3e4,6e4);function LT(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function MT(e,t,n,r){return FT.apply(this,arguments)}function FT(){return FT=Rt(Nt().mark((function e(t,n,r,i){var a,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",jT(t,a,Rt(Nt().mark((function e(){var a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=mt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",RT.fetch()(KT(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),FT.apply(this,arguments)}function jT(e,t,n){return UT.apply(this,arguments)}function UT(){return UT=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u,c,h,f,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},DT),n),e.prev=2,a=new qT(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw zT(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw zT(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw zT(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw zT(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw kT(t,p,d);case 34:mT(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof it)){e.next=41;break}throw e.t0;case 41:mT(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),UT.apply(this,arguments)}function VT(e,t,n,r){return BT.apply(this,arguments)}function BT(){return BT=Rt(Nt().mark((function e(t,n,r,i){var a,o,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,MT(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&mT(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}function KT(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?PT(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var qT=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(yT(n.auth,"network-request-failed"))}),OT.get())}))}return v(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function zT(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=yT(e,t,r);return i.customData._tokenResponse=n,i}function WT(e,t){return HT.apply(this,arguments)}function HT(){return(HT=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GT(e,t){return QT.apply(this,arguments)}function QT(){return(QT=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YT(e,t){return XT.apply(this,arguments)}function XT(){return(XT=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JT(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function $T(){return $T=Rt(Nt().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=At(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,_T((a=eC(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:JT(ZT(a.auth_time)),issuedAtTime:JT(ZT(a.iat)),expirationTime:JT(ZT(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),$T.apply(this,arguments)}function ZT(e){return 1e3*Number(e)}function eC(e){var t,n=l(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return gT("JWT malformed, contained fewer than 3 sections"),null;try{var o=He(i);return o?JSON.parse(o):(gT("Failed to decode base64 JWT payload"),null)}catch(s){return gT("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function tC(e,t){return nC.apply(this,arguments)}function nC(){return nC=Rt(Nt().mark((function e(t,n){var r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof it&&rC(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),nC.apply(this,arguments)}function rC(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var iC=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return v(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),aC=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return v(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=JT(this.lastLoginAt),this.creationTime=JT(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function oC(e){return sC.apply(this,arguments)}function sC(){return sC=Rt(Nt().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,tC(t,YT(r,{idToken:i}));case 6:_T(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?lC(o.providerUserInfo):[],u=cC(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new aC(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),sC.apply(this,arguments)}function uC(){return(uC=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=At(t),e.next=3,oC(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cC(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(f(n),f(t))}function lC(e){return e.map((function(e){var t=e.providerId,n=$E(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function hC(e,t){return fC.apply(this,arguments)}function fC(){return(fC=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jT(t,{},Rt(Nt().mark((function e(){var r,i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=KT(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",RT.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dC=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return v(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){_T(e.idToken,"internal-error"),_T("undefined"!==typeof e.idToken,"internal-error"),_T("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=eC(e);return _T(t,"internal-error"),_T("undefined"!==typeof t.exp,"internal-error"),_T("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Rt(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],_T(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hC(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return xT("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(_T("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(_T("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(_T("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function pC(e,t){_T("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var vC=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$E(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?f(a.providerData):[],this.metadata=new aC(a.createdAt||void 0,a.lastLoginAt||void 0)}return v(e,[{key:"getIdToken",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tC(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(_T(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return $T.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return uC.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(_T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){_T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Rt(Nt().mark((function e(t){var n,r,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,oC(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,tC(this,WT(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,g=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;_T(k&&x,t,"internal-error");var S=dC.fromJSON(this.name,x);_T("string"===typeof k,t,"internal-error"),pC(h,t.name),pC(f,t.name),_T("boolean"===typeof b,t,"internal-error"),_T("boolean"===typeof w,t,"internal-error"),pC(d,t.name),pC(p,t.name),pC(v,t.name),pC(g,t.name),pC(m,t.name),pC(y,t.name);var I=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),g&&(I._redirectEventId=g),I}},{key:"_fromIdTokenResponse",value:function(){var t=Rt(Nt().mark((function t(n,r){var i,a,o,s=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new dC).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,oC(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),gC=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return v(e,[{key:"_isAvailable",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();gC.type="NONE";var mC=gC;function yC(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var kC=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=yC(this.userKey,a.apiKey,o),this.fullPersistenceKey=yC("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return v(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?vC._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Rt(Nt().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ET(mC),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ET(mC),s=yC(i,n.config.apiKey,n.name),u=null,c=Me(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=vC._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function bC(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(SC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(EC(t))return"Blackberry";if(TC(t))return"Webos";if(_C(t))return"Safari";if((t.includes("chrome/")||xC(t))&&!t.includes("edge/"))return"Chrome";if(IC(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function wC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/firefox\//i.test(e)}function _C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/crios\//i.test(e)}function SC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iemobile/i.test(e)}function IC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/android/i.test(e)}function EC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/blackberry/i.test(e)}function TC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/webos/i.test(e)}function CC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function AC(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return CC(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function NC(){return tt()&&10===document.documentMode}function PC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return CC(e)||IC(e)||TC(e)||EC(e)||/windows phone/i.test(e)||SC(e)}function RC(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=bC(Xe());break;case"Worker":t="".concat(bC(Xe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Nn,"/").concat(r)}var DC=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return v(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Rt(Nt().mark((function e(t){var n,r,i,a,o,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Me(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=Me(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),OC=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MC(this),this.idTokenSubscription=new MC(this),this.beforeStateQueue=new DC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pT,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return v(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ET(t)),this._initializationPromise=this.queue(Rt(Nt().mark((function r(){var i,a;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,kC.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Rt(Nt().mark((function e(t){var n,r,i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return _T(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oC(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?At(t):null)&&_T(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Rt(Nt().mark((function e(t){var n,r=this,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&_T(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Rt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ET(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new at("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return _T(n=t&&ET(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,kC.create(this,[ET(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Rt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return _T(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return _T(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RC(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function LC(e){return At(e)}var MC=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=wt((function(e){return n.observer=e}))}return v(e,[{key:"next",get:function(){return _T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function FC(e,t,n){var r=LC(e);_T(r._canInitEmulator,r,"emulator-config-failed"),_T(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=jC(t),o=function(e){var t=jC(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:UC(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:UC(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function jC(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function UC(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var VC=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return v(e,[{key:"toJSON",value:function(){return xT("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return xT("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return xT("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return xT("not implemented")}}]),e}();function BC(e,t){return KC.apply(this,arguments)}function KC(){return(KC=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:resetPassword",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qC(e,t){return zC.apply(this,arguments)}function zC(){return(zC=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WC(e,t){return HC.apply(this,arguments)}function HC(){return(HC=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:update",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GC(e,t){return QC.apply(this,arguments)}function QC(){return(QC=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithPassword",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YC(e,t){return XC.apply(this,arguments)}function XC(){return(XC=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:sendOobCode",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JC(e,t){return $C.apply(this,arguments)}function $C(){return($C=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZC(e,t){return eA.apply(this,arguments)}function eA(){return(eA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tA(e,t){return nA.apply(this,arguments)}function nA(){return(nA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rA(e,t){return iA.apply(this,arguments)}function iA(){return(iA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aA(e,t){return oA.apply(this,arguments)}function oA(){return(oA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithEmailLink",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sA(e,t){return uA.apply(this,arguments)}function uA(){return(uA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithEmailLink",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cA=function(e){m(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return v(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",GC(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",aA(t,{email:this._email,oobCode:this._password}));case 5:mT(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",qC(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",sA(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:mT(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(VC);function lA(e,t){return hA.apply(this,arguments)}function hA(){return(hA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithIdp",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fA=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return v(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return lA(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,lA(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,lA(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mT("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$E(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(VC);function dA(e,t){return pA.apply(this,arguments)}function pA(){return(pA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:sendVerificationCode",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vA(){return(vA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithPhoneNumber",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gA(){return(gA=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VT(t,"POST","/v1/accounts:signInWithPhoneNumber",LT(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw zT(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mA=Le({},"USER_NOT_FOUND","user-not-found");function yA(){return(yA=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithPhoneNumber",LT(t,r),mA));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kA=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return vA.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gA.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return yA.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(VC);var bA=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=yt(kt(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);_T(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return v(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=yt(kt(e)).link,n=t?yt(kt(t)).deep_link_id:null,r=yt(kt(e)).deep_link_id;return(r?yt(kt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var wA=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return v(e,null,[{key:"credential",value:function(e,t){return cA._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=bA.parseLink(t);return _T(n,"argument-error"),cA._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();wA.PROVIDER_ID="password",wA.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wA.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var _A=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return v(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),xA=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return v(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return f(this.scopes)}}]),n}(_A),SA=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return _T(e.idToken||e.accessToken,"argument-error"),fA._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return _T("providerId"in t&&"signInMethod"in t,"argument-error"),fA._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(xA),IA=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"facebook.com")}return v(n,null,[{key:"credential",value:function(e){return fA._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(xA);IA.FACEBOOK_SIGN_IN_METHOD="facebook.com",IA.PROVIDER_ID="facebook.com";var EA=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return v(n,null,[{key:"credential",value:function(e,t){return fA._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(xA);EA.GOOGLE_SIGN_IN_METHOD="google.com",EA.PROVIDER_ID="google.com";var TA=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"github.com")}return v(n,null,[{key:"credential",value:function(e){return fA._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(xA);TA.GITHUB_SIGN_IN_METHOD="github.com",TA.PROVIDER_ID="github.com";var CA=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return v(n,[{key:"_getIdTokenResponse",value:function(e){return lA(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,lA(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,lA(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(VC),AA=function(e){m(n,e);var t=x(n);function n(e){return d(this,n),_T(e.startsWith("saml."),"argument-error"),t.call(this,e)}return v(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=CA.fromJSON(e);return _T(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return CA._create(r,n)}catch(i){return null}}}]),n}(_A),NA=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"twitter.com")}return v(n,null,[{key:"credential",value:function(e,t){return fA._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(xA);function PA(e,t){return RA.apply(this,arguments)}function RA(){return(RA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signUp",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}NA.TWITTER_SIGN_IN_METHOD="twitter.com",NA.PROVIDER_ID="twitter.com";var DA=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return v(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Rt(Nt().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,vC._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=OA(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Rt(Nt().mark((function t(n,r,i){var a;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=OA(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function OA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function LA(){return LA=Rt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=LC(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new DA({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,PA(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,DA._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),LA.apply(this,arguments)}var MA=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(w(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return v(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(it);function FA(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw MA._fromErrorAndOperation(e,n,t,r);throw n}))}function jA(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function UA(e,t){return VA.apply(this,arguments)}function VA(){return VA=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,qA(!0,r,n);case 3:return e.t0=GT,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=jA(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),VA.apply(this,arguments)}function BA(e,t){return KA.apply(this,arguments)}function KA(){return KA=Rt(Nt().mark((function e(t,n){var r,i,a=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=tC,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",DA._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),KA.apply(this,arguments)}function qA(e,t,n){return zA.apply(this,arguments)}function zA(){return(zA=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oC(n);case 2:i=jA(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",_T(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WA(e,t){return HA.apply(this,arguments)}function HA(){return HA=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u,c,l=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,tC(t,FA(a,o,n,t),r);case 6:return _T((s=e.sent).idToken,a,"internal-error"),_T(u=eC(s.idToken),a,"internal-error"),c=u.sub,_T(t.uid===c,a,"user-mismatch"),e.abrupt("return",DA._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&mT(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),HA.apply(this,arguments)}function GA(e,t){return QA.apply(this,arguments)}function QA(){return QA=Rt(Nt().mark((function e(t,n){var r,i,a,o,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,FA(t,i,n);case 4:return a=e.sent,e.next=7,DA._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),QA.apply(this,arguments)}function YA(e,t){return XA.apply(this,arguments)}function XA(){return(XA=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",GA(LC(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JA(e,t){return $A.apply(this,arguments)}function $A(){return($A=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,qA(!1,r,n.providerId);case 3:return e.abrupt("return",BA(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZA(e,t){return eN.apply(this,arguments)}function eN(){return(eN=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WA(At(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tN(e,t){return nN.apply(this,arguments)}function nN(){return(nN=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(t,"POST","/v1/accounts:signInWithCustomToken",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rN(){return(rN=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=LC(t),e.next=3,tN(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,DA._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iN=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return v(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?aN._fromServerResponse(e,t):mT(e,"internal-error")}}]),e}(),aN=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return v(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(iN);function oN(e,t,n){var r;_T((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_T("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_T(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_T(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function sN(){return(sN=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),a={requestType:"PASSWORD_RESET",email:n},r&&oN(i,a,r),e.next=5,ZC(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uN(){return(uN=Rt(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BC(At(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cN(){return(cN=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WC(At(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lN(e,t){return hN.apply(this,arguments)}function hN(){return(hN=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,BC(r,{oobCode:n});case 3:i=e.sent,_T(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return _T(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:_T(i.mfaInfo,r,"internal-error");case 13:_T(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=iN._fromServerResponse(LC(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fN(){return(fN=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lN(At(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dN(e,t,n){return pN.apply(this,arguments)}function pN(){return(pN=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=LC(t),e.next=3,PA(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,DA._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vN(){return(vN=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),a={requestType:"EMAIL_SIGNIN",email:n},_T(r.handleCodeInApp,i,"argument-error"),r&&oN(i,a,r),e.next=6,tA(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gN(){return(gN=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),_T((a=wA.credentialWithLink(n,r||TT()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",YA(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mN(e,t){return yN.apply(this,arguments)}function yN(){return(yN=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:createAuthUri",LT(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kN(){return(kN=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CT()?TT():"http://localhost",i={identifier:n,continueUri:r},e.next=4,mN(At(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bN(){return(bN=Rt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&oN(r.auth,a,n),e.next=8,JC(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wN(){return(wN=Rt(Nt().mark((function e(t,n,r){var i,a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&oN(i.auth,o,r),e.next=8,rA(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _N(e,t){return xN.apply(this,arguments)}function xN(){return(xN=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MT(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SN(){return(SN=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=At(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,tC(a,_N(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IN(e,t,n){return EN.apply(this,arguments)}function EN(){return(EN=Rt(Nt().mark((function e(t,n,r){var i,a,o,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,tC(t,qC(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var TN=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),CN=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return v(n)}(TN),AN=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return v(n)}(TN),NN=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return v(n)}(CN),PN=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return v(n)}(TN),RN=function(e){m(n,e);var t=x(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return v(n)}(CN);function DN(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=eC(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new TN(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new AN(a,i);case"github.com":return new NN(a,i);case"google.com":return new PN(a,i);case"twitter.com":return new RN(a,i,e.screenName||null);case"custom":case"anonymous":return new TN(a,null);default:return new TN(a,r,i)}}(n)}var ON=function(){function e(t,n){d(this,e),this.type=t,this.credential=n}return v(e,[{key:"toJSON",value:function(){return{multiFactorSession:Le({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),LN=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return v(e,[{key:"resolveSignIn",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=LC(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return iN._fromServerResponse(r,e)}));_T(i.mfaPendingCredential,r,"internal-error");var o=ON._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Rt(Nt().mark((function e(t){var a,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,DA._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return _T(n.user,r,"internal-error"),e.abrupt("return",DA._forOperation(n.user,n.operationType,s));case 17:mT(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function MN(e,t){return MT(e,"POST","/v2/accounts/mfaEnrollment:start",LT(e,t))}var FN=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return iN._fromServerResponse(t.auth,e)})))}))}return v(e,[{key:"getSession",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ON,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,tC(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Rt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,tC(this.user,MT(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",LT(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),jN=new WeakMap;var UN="__sak",VN=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return v(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(UN,"1"),this.storage.removeItem(UN),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var BN=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Xe();return _C(e)||CC(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=PC(),e._shouldAllowMigration=!0,e}return v(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);NC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Rt(Nt().mark((function e(t,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Rt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(VN);BN.type="LOCAL";var KN=BN,qN=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return v(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(VN);qN.type="SESSION";var zN=qN;function WN(e){return Promise.all(e.map(function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var HN=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return v(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Rt(Nt().mark((function e(t){var n,r,i,a,o,s,u,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,WN(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function GN(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}HN.receivers=[];var QN=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return v(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=GN("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function YN(){return window}function XN(){return"undefined"!==typeof YN().WorkerGlobalScope&&"function"===typeof YN().importScripts}function JN(){return $N.apply(this,arguments)}function $N(){return($N=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ZN(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var eP="firebaseLocalStorageDb",tP="firebaseLocalStorage",nP="fbase_key",rP=function(){function e(t){d(this,e),this.request=t}return v(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function iP(e,t){return e.transaction([tP],t?"readwrite":"readonly").objectStore(tP)}function aP(){var e=indexedDB.deleteDatabase(eP);return new rP(e).toPromise()}function oP(){var e=indexedDB.open(eP,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(tP,{keyPath:nP})}catch(r){n(r)}})),e.addEventListener("success",Rt(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(tP)){n.next=12;break}return r.close(),n.next=5,aP();case 5:return n.t0=t,n.next=8,oP();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function sP(e,t,n){return uP.apply(this,arguments)}function uP(){return uP=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=iP(t,!0).put((Le(i={},nP,n),Le(i,"value",r),i)),e.abrupt("return",new rP(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),uP.apply(this,arguments)}function cP(e,t){return lP.apply(this,arguments)}function lP(){return lP=Rt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=iP(t,!1).get(n),e.next=3,new rP(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),lP.apply(this,arguments)}function hP(e,t){var n=iP(e,!0).delete(t);return new rP(n).toPromise()}var fP=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return v(e,[{key:"_openDb",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,oP();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XN()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Rt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=HN._getInstance(XN()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Rt(Nt().mark((function e(n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JN();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new QN(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ZN()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,oP();case 5:return t=e.sent,e.next=8,sP(t,UN,"1");case 8:return e.next=10,hP(t,UN);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Rt(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return sP(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return cP(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Rt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return hP(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=iP(e,!1).getAll();return new rP(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Me(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Rt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();fP.type="LOCAL";var dP=fP;function pP(e,t){return MT(e,"POST","/v2/accounts/mfaSignIn:start",LT(e,t))}function vP(e){return gP.apply(this,arguments)}function gP(){return(gP=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MT(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mP(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=yT("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function yP(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var kP=1e12,bP=function(){function e(t){d(this,e),this.auth=t,this.counter=kP,this._widgets=new Map}return v(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new wP(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||kP;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||kP;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||kP,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),wP=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;_T(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return v(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var _P=yP("rcb"),xP=new NT(3e4,6e4),SP="https://www.google.com/recaptcha/api.js?",IP=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=YN().grecaptcha)||void 0===t?void 0:t.render)}return v(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _T(EP(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(YN().grecaptcha):new Promise((function(r,i){var a=YN().setTimeout((function(){i(yT(e,"network-request-failed"))}),xP.get());YN()[_P]=function(){YN().clearTimeout(a),delete YN()[_P];var o=YN().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(yT(e,"internal-error"))},mP("".concat(SP,"?").concat(mt({onload:_P,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(yT(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=YN().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function EP(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var TP=function(){function e(){d(this,e)}return v(e,[{key:"load",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new bP(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),CP="recaptcha",AP={theme:"light",type:"image"},NP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},AP),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=CP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=LC(r),this.isInvisible="invisible"===this.parameters.size,_T("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;_T(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new TP:new IP,this.validateStartingState()}return v(e,[{key:"verify",value:function(){var e=Rt(Nt().mark((function e(){var t,n,r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){_T(!this.parameters.sitekey,this.auth,"argument-error"),_T(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_T("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=YN()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){_T(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Rt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _T(CT()&&!XN(),this.auth,"internal-error"),e.next=3,PP();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,vP(this.auth);case 8:_T(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return _T(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function PP(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var RP=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return v(e,[{key:"confirm",value:function(e){var t=kA._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function DP(){return(DP=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=LC(t),e.next=3,FP(i,n,At(r));case 3:return a=e.sent,e.abrupt("return",new RP(a,(function(e){return YA(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OP(e,t,n){return LP.apply(this,arguments)}function LP(){return(LP=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,qA(!1,i,"phone");case 3:return e.next=5,FP(i.auth,n,At(r));case 5:return a=e.sent,e.abrupt("return",new RP(a,(function(e){return JA(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MP(){return(MP=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,FP(i.auth,n,At(r));case 3:return a=e.sent,e.abrupt("return",new RP(a,(function(e){return ZA(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FP(e,t,n){return jP.apply(this,arguments)}function jP(){return jP=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,_T("string"===typeof a,t,"argument-error"),_T(r.type===CP,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return _T("enroll"===s.type,t,"internal-error"),e.next=13,MN(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return _T("signin"===s.type,t,"internal-error"),_T(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,pP(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,dA(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),jP.apply(this,arguments)}function UP(){return(UP=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BA(At(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var VP=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=LC(t)}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return FP(this.auth,e,At(t))}}],[{key:"credential",value:function(e,t){return kA._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?kA._fromTokenResponse(n,r):null}}]),e}();function BP(e,t){return t?ET(t):(_T(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}VP.PROVIDER_ID="phone",VP.PHONE_SIGN_IN_METHOD="phone";var KP=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return lA(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return lA(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return lA(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(VC);function qP(e){return GA(e.auth,new KP(e),e.bypassAuthState)}function zP(e){var t=e.auth,n=e.user;return _T(n,t,"internal-error"),WA(n,new KP(e),e.bypassAuthState)}function WP(e){return HP.apply(this,arguments)}function HP(){return(HP=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,_T(r=t.user,n,"internal-error"),e.abrupt("return",BA(r,new KP(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var GP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return v(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Rt(Nt().mark((function t(n,r){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Rt(Nt().mark((function e(t){var n,r,i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qP;case"linkViaPopup":case"linkViaRedirect":return WP;case"reauthViaPopup":case"reauthViaRedirect":return zP;default:mT(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ST(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ST(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),QP=new NT(2e3,1e4);function YP(e,t,n){return XP.apply(this,arguments)}function XP(){return(XP=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=LC(t),bT(t,n,_A),a=BP(i,r),o=new eR(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JP(){return(JP=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT((i=At(t)).auth,n,_A),a=BP(i.auth,r),o=new eR(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $P(e,t,n){return ZP.apply(this,arguments)}function ZP(){return(ZP=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT((i=At(t)).auth,n,_A),a=BP(i.auth,r),o=new eR(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eR=function(e){m(n,e);var t=x(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=w(s),s}return v(n,[{key:"executeNotNull",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return _T(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Rt(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ST(1===this.filter.length,"Popup operations only handle one event"),t=GN(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(yT(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(yT(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(yT(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,QP.get())}()}}]),n}(GP);eR.currentPopupAction=null;var tR=new Map,nR=function(e){m(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return v(n,[{key:"execute",value:function(){var e=Rt(Nt().mark((function e(){var t,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=tR.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,rR(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ur(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:tR.set(this.auth._key(),t);case 21:return this.bypassAuthState||tR.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Rt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ur(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ur(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(GP);function rR(e,t){return iR.apply(this,arguments)}function iR(){return(iR=Rt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cR(n),i=uR(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aR(e,t){return oR.apply(this,arguments)}function oR(){return(oR=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uR(t)._set(cR(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sR(e,t){tR.set(e._key(),t)}function uR(e){return ET(e._redirectPersistence)}function cR(e){return yC("pendingRedirect",e.config.apiKey,e.name)}function lR(e,t,n){return function(e,t,n){return hR.apply(this,arguments)}(e,t,n)}function hR(){return(hR=Rt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=LC(t),bT(t,n,_A),a=BP(i,r),e.next=5,aR(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fR(e,t,n){return function(e,t,n){return dR.apply(this,arguments)}(e,t,n)}function dR(){return(dR=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT((i=At(t)).auth,n,_A),a=BP(i.auth,r),e.next=5,aR(a,i.auth);case 5:return e.next=7,bR(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pR(e,t,n){return function(e,t,n){return vR.apply(this,arguments)}(e,t,n)}function vR(){return(vR=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT((i=At(t)).auth,n,_A),a=BP(i.auth,r),e.next=5,qA(!1,i,n.providerId);case 5:return e.next=7,aR(a,i.auth);case 7:return e.next=9,bR(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gR(e,t){return mR.apply(this,arguments)}function mR(){return(mR=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LC(t)._initializationPromise;case 2:return e.abrupt("return",yR(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yR(e,t){return kR.apply(this,arguments)}function kR(){return kR=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=LC(t),a=BP(i,n),o=new nR(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),kR.apply(this,arguments)}function bR(e){return wR.apply(this,arguments)}function wR(){return(wR=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GN("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _R=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return v(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SR(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!SR(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yT(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xR(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(xR(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function xR(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function SR(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function IR(e){return ER.apply(this,arguments)}function ER(){return ER=Rt(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",MT(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ER.apply(this,arguments)}var TR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CR=/^https?/;function AR(){return(AR=Rt(Nt().mark((function e(t){var n,r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,IR(t);case 4:n=e.sent,r=n.authorizedDomains,i=Me(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!NR(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:mT(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function NR(e){var t=TT(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!CR.test(r))return!1;if(TR.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var PR=new NT(3e4,6e4);function RR(){var e=YN().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=f(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var DR=null;function OR(e){return DR=DR||function(e){return new Promise((function(t,n){var r,i,a;function o(){RR(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){RR(),n(yT(e,"network-request-failed"))},timeout:PR.get()})}if(null===(i=null===(r=YN().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=YN().gapi)||void 0===a?void 0:a.load)){var s=yP("iframefcb");return YN()[s]=function(){gapi.load?o():n(yT(e,"network-request-failed"))},mP("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw DR=null,e}))}(e),DR}var LR=new NT(5e3,15e3),MR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jR(e){var t=e.config;_T(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?PT(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Nn},i=FR.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(mt(r).slice(1))}function UR(e){return VR.apply(this,arguments)}function VR(){return VR=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OR(t);case 2:return n=e.sent,_T(r=YN().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:jR(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MR,dontclear:!0},(function(e){return new Promise(function(){var n=Rt(Nt().mark((function n(r,i){var a,o,s;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){YN().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=yT(t,"network-request-failed"),o=YN().setTimeout((function(){i(a)}),LR.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),VR.apply(this,arguments)}var BR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KR="_blank",qR="http://localhost",zR=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return v(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function WR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},BR),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Xe().toLowerCase();n&&(s=xC(c)?KR:n),wC(c)&&(t=t||qR,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(AC(c)&&"_self"!==s)return HR(t||"",s),new zR(null);var f=window.open(t||"",s,h);_T(f,e,"popup-blocked");try{f.focus()}catch(d){}return new zR(f)}function HR(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var GR="__/auth/handler",QR="emulator/auth/handler";function YR(e,t,n,r,i,a){_T(e.config.authDomain,e,"auth-domain-config-required"),_T(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Nn,eventId:i};if(t instanceof _A){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",dt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof xA){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,g=Object.keys(p);v<g.length;v++){var m=g[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(GR);return PT(t,QR)}(e),"?").concat(mt(p).slice(1))}var XR="webStorageSupport",JR=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zN,this._completeRedirectFn=yR,this._overrideRedirectResult=sR}return v(e,[{key:"_openPopup",value:function(){var e=Rt(Nt().mark((function e(t,n,r,i){var a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ST(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=YR(t,n,r,TT(),i),e.abrupt("return",WR(t,o,GN()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Rt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=YR(t,n,r,TT(),i),YN().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ST(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UR(t);case 2:return n=e.sent,r=new _R(t),n.register("authEvent",(function(e){return _T(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(XR,{type:XR},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),mT(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return AR.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return PC()||_C()||CC()}}]),e}(),$R=JR,ZR=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return v(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return MT(e,"POST","/v2/accounts/mfaEnrollment:finalize",LT(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return MT(e,"POST","/v2/accounts/mfaSignIn:finalize",LT(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return v(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xT("unexpected MultiFactorSessionType")}}}]),e}()),eD=function(){function e(){d(this,e)}return v(e,null,[{key:"assertion",value:function(e){return ZR._fromCredential(e)}}]),e}();eD.FACTOR_ID="phone";var tD,nD="@firebase/auth",rD="0.20.6",iD=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return v(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){_T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function aD(){return window}tD="Browser",xn(new Dt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){_T(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),_T(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:tD,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RC(tD)},i=new OC(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ET);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),xn(new Dt("auth-internal",(function(e){return function(e){return new iD(e)}(LC(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(nD,rD,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(tD)),Mn(nD,rD,"esm2017");function oD(e,t,n){return sD.apply(this,arguments)}function sD(){return sD=Rt(Nt().mark((function e(t,n,r){var i,a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=aD(),o=a.BuildInfo,ST(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,dD(n.sessionId);case 4:return s=e.sent,u={},CC()?u.ibi=o.packageName:IC()?u.apn=o.packageName:mT(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",YR(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),sD.apply(this,arguments)}function uD(){return(uD=Rt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=aD(),r=n.BuildInfo,i={},CC()?i.iosBundleId=r.packageName:IC()?i.androidPackageName=r.packageName:mT(t,"operation-not-supported-in-this-environment"),e.next=5,IR(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cD(e){var t=aD().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function lD(e,t,n){return hD.apply(this,arguments)}function hD(){return hD=Rt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=aD(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(yT(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),IC()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),hD.apply(this,arguments)}function fD(e){var t,n,r,i,a,o,s,u,c,l,h=aD();_T("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_T("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_T("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_T("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_T("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function dD(e){return pD.apply(this,arguments)}function pD(){return(pD=Rt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vD(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vD(e){if(ST(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var gD=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return v(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ur(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R);function mD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:_D(),postBody:null,tenantId:e.tenantId,error:yT(e,"no-auth-event")}}function yD(e,t){return xD()._set(SD(e),t)}function kD(e){return bD.apply(this,arguments)}function bD(){return(bD=Rt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xD()._get(SD(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,xD()._remove(SD(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wD(e,t){var n,r,i=function(e){var t=ID(e),n=t.link?decodeURIComponent(t.link):void 0,r=ID(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ID(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ID(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?yT(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function _D(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function xD(){return ET(KN)}function SD(e){return yC("authEvent",e.config.apiKey,e.name)}function ID(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||h(t)||u(t)||c();r[0];return yt(r.slice(1).join("?"))}var ED=function(){function e(){d(this,e),this._redirectPersistence=zN,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yR,this._overrideRedirectResult=sR}return v(e,[{key:"_initialize",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new gD(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){mT(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Rt(Nt().mark((function e(t,n,r,i){var a,o,s,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fD(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),tR.clear(),e.next=10,this._originValidation(t);case 10:return o=mD(t,r,i),e.next=13,yD(t,o);case 13:return e.next=15,oD(t,o,n);case 15:return s=e.sent,e.next=18,cD(s);case 18:return u=e.sent,e.abrupt("return",lD(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return uD.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=aD(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Rt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,kD(e);case 2:t.onEvent(CD());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Rt(Nt().mark((function n(r){var i,a;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,kD(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=wD(i,r.url)),t.onEvent(a||CD());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");aD().handleOpenURL=function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),TD=ED;function CD(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yT("no-auth-event")}}function AD(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ND(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return!("file:"!==AD()&&"ionic:"!==AD()&&"capacitor:"!==AD()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function PD(){return tt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function RD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/Edge\/\d+/.test(e)}function DD(){try{var e=self.localStorage,t=GN();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return PD()||RD(e)}()||rt()}catch(n){return OD()&&rt()}return!1}function OD(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function LD(){return("http:"===AD()||"https:"===AD()||Ze()||ND())&&!(et()||$e())&&DD()&&!OD()}function MD(){return ND()&&"undefined"!==typeof document}function FD(){return jD.apply(this,arguments)}function jD(){return(jD=Rt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(MD()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var UD={LOCAL:"local",NONE:"none",SESSION:"session"},VD=_T,BD="persistence";function KD(e,t){VD(Object.values(UD).includes(t),e,"invalid-persistence-type"),et()?VD(t!==UD.SESSION,e,"unsupported-persistence-type"):$e()?VD(t===UD.NONE,e,"unsupported-persistence-type"):OD()?VD(t===UD.NONE||t===UD.LOCAL&&rt(),e,"unsupported-persistence-type"):VD(t===UD.NONE||DD(),e,"unsupported-persistence-type")}function qD(e){return zD.apply(this,arguments)}function zD(){return(zD=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=WD(),r=yC(BD,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WD(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var HD=_T,GD=function(){function e(){d(this,e),this.browserResolver=ET($R),this.cordovaResolver=ET(TD),this.underlyingResolver=null,this._redirectPersistence=zN,this._completeRedirectFn=yR,this._overrideRedirectResult=sR}return v(e,[{key:"_initialize",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Rt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Rt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return MD()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return HD(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,FD();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function QD(e){return e.unwrap()}function YD(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new eO(e,function(e,t){var n,r=At(e),i=t;return _T(t.customData.operationType,r,"argument-error"),_T(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),LN._fromError(r,i)}(e,t));else if(i){var a=XD(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function XD(e){var t=(e instanceof it?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof it)&&"temporaryProof"in t&&"phoneNumber"in t)return VP.credentialFromResult(e);var n,r=t.providerId;if(!r||r===rT)return null;switch(r){case nT:n=EA;break;case eT:n=IA;break;case tT:n=TA;break;case iT:n=NA;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?CA._create(r,s):fA._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new SA(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof it?n.credentialFromError(e):n.credentialFromResult(e)}function JD(e,t){return t.catch((function(t){throw t instanceof it&&YD(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,XD(t)),additionalUserInfo:DN(e),user:tO.getOrCreate(r)}}))}function $D(e,t){return ZD.apply(this,arguments)}function ZD(){return(ZD=Rt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return JD(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eO=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return v(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return JD(QD(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),tO=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=At(e);return jN.has(t)||jN.set(t,FN._fromUser(t)),jN.get(t)}(t)}return v(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JD(this.auth,JA(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$D(this.auth,OP(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JD(this.auth,$P(this._delegate,t,GD)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qD(LC(this.auth));case 2:return e.abrupt("return",pR(this._delegate,t,GD));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JD(this.auth,ZA(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return $D(this.auth,function(e,t,n){return MP.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return JD(this.auth,function(e,t,n){return JP.apply(this,arguments)}(this._delegate,e,GD))}},{key:"reauthenticateWithRedirect",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qD(LC(this.auth));case 2:return e.abrupt("return",fR(this._delegate,t,GD));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return bN.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UA(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return IN(At(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return IN(At(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return UP.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return SN.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return wN.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();tO.USER_MAP=new WeakMap;var nO=_T,rO=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;nO(r,"invalid-api-key",{appName:t.name}),nO(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?GD:void 0;this._delegate=n.initialize({options:{persistence:aO(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fT),this.linkUnderlyingAuth()}return v(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?tO.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){FC(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return cN.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return lN(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return uN.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Rt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JD(this._delegate,dN(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return kN.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=bA.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Rt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nO(LD(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,gR(this._delegate,GD);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",JD(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){LC(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=iO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=iO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return vN.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return sN.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Rt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:KD(this._delegate,t),e.t0=t,e.next=e.t0===UD.SESSION?4:e.t0===UD.LOCAL?6:e.t0===UD.NONE?11:13;break;case 4:return n=zN,e.abrupt("break",14);case 6:return e.next=8,ET(dP)._isAvailable();case 8:return r=e.sent,n=r?dP:KN,e.abrupt("break",14);case 11:return n=mC,e.abrupt("break",14);case 13:return e.abrupt("return",mT("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return JD(this._delegate,function(e){return LA.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return JD(this._delegate,YA(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return JD(this._delegate,function(e,t){return rN.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return JD(this._delegate,function(e,t,n){return YA(At(e),wA.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return JD(this._delegate,function(e,t,n){return gN.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return $D(this._delegate,function(e,t,n){return DP.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nO(LD(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",JD(this._delegate,YP(this._delegate,t,GD)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Rt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nO(LD(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,qD(this._delegate);case 3:return e.abrupt("return",lR(this._delegate,t,GD));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return fN.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function iO(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&tO.getOrCreate(e))},error:t,complete:n}}function aO(e,t){var n=function(e,t){var n=WD();if(!n)return[];var r=yC(BD,e,t);switch(n.getItem(r)){case UD.NONE:return[mC];case UD.LOCAL:return[dP,zN];case UD.SESSION:return[zN];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(dP)||n.push(dP),"undefined"!==typeof window)for(var r=0,i=[KN,zN];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(mC)||n.push(mC),n}rO.Persistence=UD;var oO=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new VP(QD(or.auth()))}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return VP.credential(e,t)}}]),e}();oO.PHONE_SIGN_IN_METHOD=VP.PHONE_SIGN_IN_METHOD,oO.PROVIDER_ID=VP.PROVIDER_ID;var sO=_T,uO=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:or.app();d(this,e),sO(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new NP(t,n,i.auth()),this.type=this._delegate.type}return v(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Dt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new rO(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:aT,PASSWORD_RESET:oT,RECOVER_EMAIL:sT,REVERT_SECOND_FACTOR_ADDITION:uT,VERIFY_AND_CHANGE_EMAIL:cT,VERIFY_EMAIL:lT}},EmailAuthProvider:wA,FacebookAuthProvider:IA,GithubAuthProvider:TA,GoogleAuthProvider:EA,OAuthProvider:SA,SAMLAuthProvider:AA,PhoneAuthProvider:oO,PhoneMultiFactorGenerator:eD,RecaptchaVerifier:uO,TwitterAuthProvider:NA,Auth:rO,AuthCredential:VC,Error:it}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.19")}(or);var cO="@firebase/database",lO="0.13.6",hO="";function fO(e){hO=e}var dO=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return v(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ut(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),pO=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return v(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ht(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),vO=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new dO(t)}}catch(n){}return new pO},gO=vO("localStorage"),mO=vO("sessionStorage"),yO=new Wt("@firebase/database"),kO=function(){var e=1;return function(){return e++}}(),bO=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ve(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new bt;n.update(t);var r=n.digest();return qe.encodeByteArray(r)},wO=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ct(r):r,t+=" "}return t},_O=null,xO=!0,SO=function(e,t){Ve(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(yO.logLevel=jt.VERBOSE,_O=yO.log.bind(yO),t&&mO.set("logging_enabled",!0)):"function"===typeof e?_O=e:(_O=null,mO.remove("logging_enabled"))},IO=function(){if(!0===xO&&(xO=!1,null===_O&&!0===mO.get("logging_enabled")&&SO(!0)),_O){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=wO.apply(null,t);_O(r)}},EO=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];IO.apply(void 0,[e].concat(n))}},TO=function(){var e="FIREBASE INTERNAL ERROR: "+wO.apply(void 0,arguments);yO.error(e)},CO=function(){var e="FIREBASE FATAL ERROR: ".concat(wO.apply(void 0,arguments));throw yO.error(e),new Error(e)},AO=function(){var e="FIREBASE WARNING: "+wO.apply(void 0,arguments);yO.warn(e)},NO=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},PO="[MIN_NAME]",RO="[MAX_NAME]",DO=function(e,t){if(e===t)return 0;if(e===PO||t===RO)return-1;if(t===PO||e===RO)return 1;var n=qO(e),r=qO(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},OO=function(e,t){return e===t?0:e<t?-1:1},LO=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ct(t))},MO=function e(t){if("object"!==typeof t||null===t)return ct(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ct(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},FO=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function jO(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var UO=function(e){Ve(!NO(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var VO=new RegExp("^-?(0*)\\d{1,10}$"),BO=-2147483648,KO=2147483647,qO=function(e){if(VO.test(e)){var t=Number(e);if(t>=BO&&t<=KO)return t}return null},zO=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw AO("Exception was thrown by user callback.",e),t}),Math.floor(0))}},WO=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},HO=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){AO('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),GO=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(IO("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',AO(e)}}]),e}(),QO=function(){function e(t){d(this,e),this.accessToken=t}return v(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();QO.OWNER="owner";var YO="5",XO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JO="websocket",$O="long_polling",ZO=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gO.get("host:"+t)||this._host}return v(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gO.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function eL(e,t,n){var r;if(Ve("string"===typeof t,"typeof type must == string"),Ve("object"===typeof n,"typeof params must == object"),t===JO)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$O)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return jO(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var tL=function(){function e(){d(this,e),this.counters_={}}return v(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ge(void 0,this.counters_)}}]),e}(),nL={},rL={};function iL(e){var t=e.toString();return nL[t]||(nL[t]=new tL),nL[t]}var aL=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return v(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&zO((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),oL="start",sL="close",uL=function(){function e(t,n,r,i,a,o,s){var u=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=EO(t),this.stats_=iL(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),eL(n,$O,e)}}return v(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new aL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new cL((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===oL)n.id=a,n.password=o;else{if(i!==sL)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=YO,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&XO.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=ze(t),r=FO(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!nt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!nt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),cL=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=kO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){IO("frame writing exception"),s.stack&&IO(s.stack),IO(s)}}}return v(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;nt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){IO("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||IO("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),lL=null;"undefined"!==typeof MozWebSocket?lL=MozWebSocket:"undefined"!==typeof WebSocket&&(lL=WebSocket);var hL=function(){function e(t,n,r,i,a,o,s){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=EO(this.connId),this.stats_=iL(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return v(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gO.set("previous_websocket_failure",!0);try{var r;if(nt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(YO,"/").concat(hO,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new lL(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){gO.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ut(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ve(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=FO(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=YO,!nt()&&"undefined"!==typeof location&&location.hostname&&XO.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),eL(e,JO,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==lL&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return gO.isInMemoryStorage||!0===gO.get("previous_websocket_failure")}}]),e}();hL.responsesRequiredToBeHealthy=2,hL.healthyTimeout=3e4;var fL=function(){function e(t){d(this,e),this.initTransports_(t)}return v(e,[{key:"initTransports_",value:function(t){var n=hL&&hL.isAvailable(),r=n&&!hL.previouslyFailed();if(t.webSocketOnly&&(n||AO("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hL];else{var i,a=this.transports_=[],o=Me(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[uL,hL]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();fL.globalTransportInitialized_=!1;var dL=function(){function e(t,n,r,i,a,o,s,u,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=EO("c:"+this.id+":"),this.transportManager_=new fL(n),this.log_("Connection created"),this.start_()}return v(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=WO((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=LO("t",e),n=LO("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=LO("t",e),n=LO("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=LO("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?TO("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TO("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),YO!==n&&AO("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),WO((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):WO((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gO.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),pL=function(){function e(){d(this,e)}return v(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),vL=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Ve(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return v(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=f(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ve(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),gL=function(e){m(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Je()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return v(n,[{key:"getInitialEvent",value:function(e){return Ve("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(vL),mL=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return v(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function yL(){return new mL("")}function kL(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function bL(e){return e.pieces_.length-e.pieceNum_}function wL(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new mL(e.pieces_,t)}function _L(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function SL(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new mL(t,0)}function IL(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof mL)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new mL(n,0)}function EL(e){return e.pieceNum_>=e.pieces_.length}function TL(e,t){var n=kL(e),r=kL(t);if(null===n)return t;if(n===r)return TL(wL(e),wL(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function CL(e,t){for(var n=xL(e,0),r=xL(t,0),i=0;i<n.length&&i<r.length;i++){var a=DO(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function AL(e,t){if(bL(e)!==bL(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function NL(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(bL(e)>bL(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var PL=v((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=xL(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ct(this.parts_[r]);RL(this)}));function RL(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+DL(e))}function DL(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var OL=function(e){m(n,e);var t=x(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return v(n,[{key:"getInitialEvent",value:function(e){return Ve("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(vL),LL=1e3,ML=function(e){m(n,e);var t=x(n);function n(e,r,i,a,o,s,u,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=EO("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=LL,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return OL.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&gL.getInstance().on("online",l.onOnline_,w(l)),l}return v(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ct(i)),Ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Qe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ve(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=lt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=lt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ct(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):TO("Unrecognized action received from server: "+ct(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=LL,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=LL,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=LL),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Rt(Nt().mark((function e(){var t,r,i,a,o,s,u,c,h,f,d,p,v,g,m=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){Ve(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],g=p[1],s?IO("getToken() completed but was canceled"):(IO("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=g&&g.token,u=new dL(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){AO(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&AO(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){IO("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){IO("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dt(this.interruptReasons_)&&(this.reconnectDelay_=LL,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return MO(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new mL(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){IO("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){IO("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Me(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Me(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+hO.replace(/\./g,"-")]=1,Je()?e["framework.cordova"]=1:et()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=gL.getInstance().currentlyOnline();return dt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ht(e,"w")){var n=ft(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();AO("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(pL);ML.nextPersistentConnectionId_=0,ML.nextConnectionId_=0;var FL,jL=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return v(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),UL=function(){function e(){d(this,e)}return v(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new jL(PO,e),r=new jL(PO,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return jL.MIN}}]),e}(),VL=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){return DO(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Be("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return jL.MIN}},{key:"maxPost",value:function(){return new jL(RO,FL)}},{key:"makePost",value:function(e,t){return Ve("string"===typeof e,"KeyIndex indexValue must always be a string."),new jL(e,FL)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return FL},set:function(e){FL=e}}]),n}(UL),BL=new VL,KL=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return v(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),qL=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:HL.EMPTY_NODE,this.right=null!=a?a:HL.EMPTY_NODE}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return HL.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return HL.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();qL.RED=!0,qL.BLACK=!1;var zL,WL=function(){function e(){d(this,e)}return v(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qL(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),HL=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,qL.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qL.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new KL(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new KL(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new KL(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new KL(this.root_,null,this.comparator_,!0,e)}}]),e}();function GL(e,t){return DO(e.name,t.name)}function QL(e,t){return DO(e,t)}HL.EMPTY_NODE=new WL;var YL,XL,JL,$L=function(e){return"number"===typeof e?"number:"+UO(e):"string:"+e},ZL=function(e){if(e.isLeafNode()){var t=e.val();Ve("string"===typeof t||"number"===typeof t||"object"===typeof t&&ht(t,".sv"),"Priority must be a string or number.")}else Ve(e===zL||e.isEmpty(),"priority of unexpected type.");Ve(e===zL||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},eM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ve(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ZL(this.priorityNode_)}return v(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return EL(t)?this:".priority"===kL(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=kL(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ve(".priority"!==r||1===bL(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(wL(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+$L(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?UO(this.value_):this.value_,this.lazyHash_=bO(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ve(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ve(i>=0,"Unknown leaf type: "+n),Ve(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return YL},set:function(e){YL=e}}]),e}();eM.VALUE_TYPE_ORDER=["object","boolean","number","string"];var tM,nM,rM=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?DO(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return jL.MIN}},{key:"maxPost",value:function(){return new jL(RO,new eM("[PRIORITY-POST]",JL))}},{key:"makePost",value:function(e,t){var n=XL(e);return new jL(t,new eM("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(UL),iM=new rM,aM=Math.log(2),oM=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/aM,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return v(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),sM=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new qL(o,a.node,qL.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new qL(o,a.node,qL.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new qL(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,qL.BLACK):(s(h,qL.BLACK),s(h,qL.RED))}return a}(new oM(e.length));return new HL(r||t,a)},uM={},cM=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return v(e,[{key:"get",value:function(e){var t=ft(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof HL?t:null}},{key:"hasIndex",value:function(e){return ht(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ve(t!==BL,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(jL.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?sM(i,t.getCompare()):uM;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=pt(this.indexes_,(function(e,i){var a=ft(r.indexSet_,i);if(Ve(a,"Missing index implementation for "+i),e===uM){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(jL.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),sM(o,a.getCompare())}return uM}var c=n.get(t.name),l=e;return c&&(l=l.remove(new jL(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(pt(this.indexes_,(function(e){if(e===uM)return e;var r=n.get(t.name);return r?e.remove(new jL(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ve(uM&&iM,"ChildrenNode.ts has not been loaded"),tM=tM||new e({".priority":uM},{".priority":iM})}}]),e}(),lM=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ZL(this.priorityNode_),this.children_.isEmpty()&&Ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return v(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||nM}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?nM:t}},{key:"getChild",value:function(e){var t=kL(e);return null===t?this:this.getImmediateChild(t).getChild(wL(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ve(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new jL(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?nM:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=kL(e);if(null===n)return t;Ve(".priority"!==kL(e)||1===bL(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(wL(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(iM,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+$L(this.getPriority().val())+":"),this.forEachChild(iM,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":bO(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new jL(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new jL(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new jL(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,jL.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,jL.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hM?-1:0}},{key:"withIndex",value:function(t){if(t===BL||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===BL||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(iM),r=t.getIterator(iM),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===BL?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return nM||(nM=new e(new HL(QL),null,cM.Default))}}]),e}();lM.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var hM=new(function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.call(this,new HL(QL),lM.EMPTY_NODE,cM.Default)}return v(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return lM.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(lM));Object.defineProperties(jL,{MIN:{value:new jL(PO,lM.EMPTY_NODE)},MAX:{value:new jL(RO,hM)}}),VL.__EMPTY_NODE=lM.EMPTY_NODE,eM.__childrenNodeConstructor=lM,zL=hM,function(e){JL=e}(hM);function fM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lM.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ve(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new eM(n,fM(t))}if(e instanceof Array){var r=lM.EMPTY_NODE;return jO(e,(function(t,n){if(ht(e,t)&&"."!==t.substring(0,1)){var i=fM(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(fM(t))}var i=[],a=!1,o=e;if(jO(o,(function(e,t){if("."!==e.substring(0,1)){var n=fM(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new jL(e,n)))}})),0===i.length)return lM.EMPTY_NODE;var s=sM(i,GL,(function(e){return e.name}),QL);if(a){var u=sM(i,iM.getCompare());return new lM(s,fM(t),new cM({".priority":u},{".priority":iM}))}return new lM(s,fM(t),cM.Default)}!function(e){XL=e}(fM);var dM=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Ve(!EL(e)&&".priority"!==kL(e),"Can't create PathIndex with empty path or .priority key"),r}return v(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?DO(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=fM(e),r=lM.EMPTY_NODE.updateChild(this.indexPath_,n);return new jL(t,r)}},{key:"maxPost",value:function(){var e=lM.EMPTY_NODE.updateChild(this.indexPath_,hM);return new jL(RO,e)}},{key:"toString",value:function(){return xL(this.indexPath_,0).join("/")}}]),n}(UL),pM=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?DO(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return jL.MIN}},{key:"maxPost",value:function(){return jL.MAX}},{key:"makePost",value:function(e,t){var n=fM(e);return new jL(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(UL),vM=new pM,gM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mM=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=gM.charAt(n%64),n=Math.floor(n/64);Ve(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=gM.charAt(t[r]);return Ve(20===o.length,"nextPushId: Length should be 20."),o}}(),yM=function(e){if("2147483647"===e)return"-";var t=qO(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return RO;var a=n[i],o=gM.charAt(gM.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},kM=function(e){if("-2147483648"===e)return PO;var t=qO(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=gM.charAt(gM.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function bM(e){return{type:"value",snapshotNode:e}}function wM(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _M(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xM(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var SM=function(){function e(t){d(this,e),this.index_=t}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(_M(t,o)):Ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(wM(t,n)):a.trackChildChange(xM(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(iM,(function(e,r){t.hasChild(e)||n.trackChildChange(_M(e,r))})),t.isLeafNode()||t.forEachChild(iM,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(xM(t,r,i))}else n.trackChildChange(wM(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?lM.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),IM=function(){function e(t){d(this,e),this.indexedFilter_=new SM(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return v(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new jL(t,n))||(n=lM.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=lM.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(lM.EMPTY_NODE);var i=this;return t.forEachChild(iM,(function(e,t){i.matches(new jL(e,t))||(r=r.updateImmediateChild(e,lM.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),EM=function(){function e(t){d(this,e),this.rangedFilter_=new IM(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new jL(t,n))||(n=lM.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=lM.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=lM.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(lM.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,lM.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ve(s.numChildren()===this.limit_,"");var u=new jL(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(xM(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(_M(t,h));var p=s.updateImmediateChild(t,lM.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(wM(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(_M(c.name,c.node)),i.trackChildChange(wM(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,lM.EMPTY_NODE)):e}}]),e}(),TM=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=iM}return v(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:PO}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:RO}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===iM}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function CM(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function AM(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function NM(e,t){var n=e.copy();return n.index_=t,n}function PM(e){var t,n={};return e.isDefault()||(e.index_===iM?t="$priority":e.index_===vM?t="$value":e.index_===BL?t="$key":(Ve(e.index_ instanceof dM,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ct(t),e.startSet_&&(n.startAt=ct(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+ct(e.indexStartName_))),e.endSet_&&(n.endAt=ct(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+ct(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function RM(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==iM&&(t.i=e.index_.toString()),t}var DM=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=EO("p:rest:"),o.listens_={},o}return v(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=PM(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ft(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=PM(e._queryParams),r=e._path.toString(),i=new Qe;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+mt(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ut(c.responseText)}catch(n){AO("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&AO("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(pL),OM=function(){function e(){d(this,e),this.rootNode_=lM.EMPTY_NODE}return v(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function LM(){return{value:null,children:new Map}}function MM(e,t,n){if(EL(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=kL(t);e.children.has(r)||e.children.set(r,LM()),MM(e.children.get(r),t=wL(t),n)}}function FM(e,t){if(EL(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(iM,(function(t,n){MM(e,new mL(t),n)})),FM(e,t)}if(e.children.size>0){var r=kL(t);if(t=wL(t),e.children.has(r))FM(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function jM(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){jM(r,new mL(t.toString()+"/"+e),n)}))}var UM,VM=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return v(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&jO(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),BM=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new VM(t);var r=1e4+2e4*Math.random();WO(this.reportStats_.bind(this),Math.floor(r))}return v(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;jO(t,(function(t,i){i>0&&ht(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),WO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function KM(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(UM||(UM={}));var qM,zM=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=UM.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return v(e,[{key:"operationForChild",value:function(t){if(EL(this.path)){if(null!=this.affectedTree.value)return Ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mL(t));return new e(yL(),n,this.revert)}return Ve(kL(this.path)===t,"operationForChild called for unrelated child."),new e(wL(this.path),this.affectedTree,this.revert)}}]),e}(),WM=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=UM.LISTEN_COMPLETE}return v(e,[{key:"operationForChild",value:function(t){return EL(this.path)?new e(this.source,yL()):new e(this.source,wL(this.path))}}]),e}(),HM=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=UM.OVERWRITE}return v(e,[{key:"operationForChild",value:function(t){return EL(this.path)?new e(this.source,yL(),this.snap.getImmediateChild(t)):new e(this.source,wL(this.path),this.snap)}}]),e}(),GM=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=UM.MERGE}return v(e,[{key:"operationForChild",value:function(t){if(EL(this.path)){var n=this.children.subtree(new mL(t));return n.isEmpty()?null:n.value?new HM(this.source,yL(),n.value):new e(this.source,yL(),n)}return Ve(kL(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,wL(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),QM=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return v(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(EL(e))return this.isFullyInitialized()&&!this.filtered_;var t=kL(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),YM=v((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function XM(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Be("Should only compare child_ events.");var r=new jL(t.childName,t.snapshotNode),i=new jL(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function JM(e,t){return{eventCache:e,serverCache:t}}function $M(e,t,n,r){return JM(new QM(t,n,r),e.serverCache)}function ZM(e,t,n,r){return JM(e.eventCache,new QM(t,n,r))}function eF(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tF(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var nF=function(){return qM||(qM=new HL(OO)),qM},rF=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nF();d(this,e),this.value=t,this.children=n}return v(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:yL(),value:this.value};if(EL(e))return null;var n=kL(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(wL(e),t);return null!=i?{path:IL(new mL(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(EL(t))return this;var n=kL(t),r=this.children.get(n);return null!==r?r.subtree(wL(t)):new e(null)}},{key:"set",value:function(t,n){if(EL(t))return new e(n,this.children);var r=kL(t),i=(this.children.get(r)||new e(null)).set(wL(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(EL(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=kL(t),r=this.children.get(n);if(r){var i,a=r.remove(wL(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(EL(e))return this.value;var t=kL(e),n=this.children.get(t);return n?n.get(wL(e)):null}},{key:"setTree",value:function(t,n){if(EL(t))return n;var r,i=kL(t),a=(this.children.get(i)||new e(null)).setTree(wL(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(yL(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(IL(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,yL(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(EL(e))return null;var i=kL(e),a=this.children.get(i);return a?a.findOnPath_(wL(e),IL(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,yL(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(EL(t))return this;this.value&&r(n,this.value);var i=kL(t),a=this.children.get(i);return a?a.foreachOnPath_(wL(t),IL(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(yL(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(IL(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return jO(t,(function(e,t){n=n.set(new mL(e),t)})),n}}]),e}(),iF=function(){function e(t){d(this,e),this.writeTree_=t}return v(e,null,[{key:"empty",value:function(){return new e(new rF(null))}}]),e}();function aF(e,t,n){if(EL(t))return new iF(new rF(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=TL(i,t);return a=a.updateChild(o,n),new iF(e.writeTree_.set(i,a))}var s=new rF(n),u=e.writeTree_.setTree(t,s);return new iF(u)}function oF(e,t,n){var r=e;return jO(n,(function(e,n){r=aF(r,IL(t,e),n)})),r}function sF(e,t){if(EL(t))return iF.empty();var n=e.writeTree_.setTree(t,new rF(null));return new iF(n)}function uF(e,t){return null!=cF(e,t)}function cF(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(TL(n.path,t)):null}function lF(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(iM,(function(e,n){t.push(new jL(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new jL(e,n.value))})),t}function hF(e,t){if(EL(t))return e;var n=cF(e,t);return new iF(null!=n?new rF(n):e.writeTree_.subtree(t))}function fF(e){return e.writeTree_.isEmpty()}function dF(e,t){return pF(yL(),e.writeTree_,t)}function pF(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ve(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=pF(IL(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(IL(e,".priority"),r)),n}function vF(e,t){return AF(t,e)}function gF(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function mF(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ve(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&yF(s,r.path)?i=!1:NL(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=bF(e.allWrites,kF,yL()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=sF(e.visibleWrites,r.path):jO(r.children,(function(t){e.visibleWrites=sF(e.visibleWrites,IL(r.path,t))}));return!0}return!1}function yF(e,t){if(e.snap)return NL(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&NL(IL(e.path,n),t))return!0;return!1}function kF(e){return e.visible}function bF(e,t,n){for(var r=iF.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)NL(n,o)?r=aF(r,s=TL(n,o),a.snap):NL(o,n)&&(s=TL(o,n),r=aF(r,yL(),a.snap.getChild(s)));else{if(!a.children)throw Be("WriteRecord should have .snap or .children");if(NL(n,o))r=oF(r,s=TL(n,o),a.children);else if(NL(o,n))if(EL(s=TL(o,n)))r=oF(r,yL(),a.children);else{var u=ft(a.children,kL(s));if(u){var c=u.getChild(wL(s));r=aF(r,yL(),c)}}}}}return r}function wF(e,t,n,r,i){if(r||i){var a=hF(e.visibleWrites,t);if(!i&&fF(a))return n;if(i||null!=n||uF(a,yL())){return dF(bF(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(NL(e.path,t)||NL(t,e.path))}),t),n||lM.EMPTY_NODE)}return null}var o=cF(e.visibleWrites,t);if(null!=o)return o;var s=hF(e.visibleWrites,t);return fF(s)?n:null!=n||uF(s,yL())?dF(s,n||lM.EMPTY_NODE):null}function _F(e,t,n,r){return wF(e.writeTree,e.treePath,t,n,r)}function xF(e,t){return function(e,t,n){var r=lM.EMPTY_NODE,i=cF(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(iM,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=hF(e.visibleWrites,t);return n.forEachChild(iM,(function(e,t){var n=dF(hF(a,new mL(e)),t);r=r.updateImmediateChild(e,n)})),lF(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return lF(hF(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function SF(e,t,n,r){return function(e,t,n,r,i){Ve(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=IL(t,n);if(uF(e.visibleWrites,a))return null;var o=hF(e.visibleWrites,a);return fF(o)?i.getChild(n):dF(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function IF(e,t){return function(e,t){return cF(e.visibleWrites,t)}(e.writeTree,IL(e.treePath,t))}function EF(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=hF(e.visibleWrites,t),c=cF(u,yL());if(null!=c)s=c;else{if(null==n)return[];s=dF(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function TF(e,t,n){return function(e,t,n,r){var i=IL(t,n),a=cF(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?dF(hF(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function CF(e,t){return AF(IL(e.treePath,t),e.writeTree)}function AF(e,t){return{treePath:e,writeTree:t}}var NF=function(){function e(){d(this,e),this.changeMap=new Map}return v(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ve("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ve(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,xM(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,_M(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,wM(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Be("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,xM(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),PF=new(function(){function e(){d(this,e)}return v(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),RF=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return v(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new QM(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TF(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tF(this.viewCache_),i=EF(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function DF(e,t,n,r,i){var a,o,s=new NF;if(n.type===UM.OVERWRITE){var u=n;u.source.fromUser?a=MF(e,t,u.path,u.snap,r,i,s):(Ve(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!EL(u.path),a=LF(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===UM.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=IL(n,r);FF(t,kL(c))&&(s=MF(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=IL(n,r);FF(t,kL(c))||(s=MF(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ve(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=UF(e,t,c.path,c.children,r,i,o,s))}else if(n.type===UM.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=IF(r,n))return t;var s,u=new RF(r,t,i),c=t.eventCache.getNode();if(EL(n)||".priority"===kL(n)){var l;if(t.serverCache.isFullyInitialized())l=_F(r,tF(t));else{var h=t.serverCache.getNode();Ve(h instanceof lM,"serverChildren would be complete if leaf node"),l=xF(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=kL(n),d=TF(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,wL(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,lM.EMPTY_NODE,wL(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=_F(r,tF(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=IF(r,yL()),$M(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=IF(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(EL(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return LF(e,t,n,u.getNode().getChild(n),i,a,s,o);if(EL(n)){var c=new rF(null);return u.getNode().forEachChild(BL,(function(e,t){c=c.set(new mL(e),t)})),UF(e,t,n,c,i,a,s,o)}return t}var l=new rF(null);return r.foreach((function(e,t){var r=IL(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),UF(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==UM.LISTEN_COMPLETE)throw Be("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ZM(t,a.getNode(),a.isFullyInitialized()||EL(n),a.isFiltered());return OF(e,o,n,r,PF,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=eF(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(bM(eF(t)))}}(t,a,h),{viewCache:a,changes:h}}function OF(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=IF(r,n))return t;if(EL(n))if(Ve(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=tF(t),l=xF(r,c instanceof lM?c:lM.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=_F(r,tF(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=kL(n);if(".priority"===f){Ve(1===bL(n),"Can't have a priority with additional path components");var d=u.getNode(),p=SF(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,g=wL(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=SF(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(g,m):u.getNode().getImmediateChild(f)}else v=TF(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,g,i,a):u.getNode()}}return $M(t,o,u.isFullyInitialized()||EL(n),e.filter.filtersNodes())}function LF(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(EL(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=kL(n);if(!c.isCompleteForPath(n)&&bL(n)>1)return t;var d=wL(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,PF,null)}var v=ZM(t,u,c.isFullyInitialized()||EL(n),l.filtersNodes());return OF(e,v,n,i,new RF(i,v,a),s)}function MF(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new RF(i,t,a);if(EL(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=$M(t,u,!0,e.filter.filtersNodes());else{var h=kL(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=$M(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=wL(n),p=c.getNode().getImmediateChild(h);if(EL(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===_L(d)&&v.getChild(SL(d)).isEmpty()?v:v.updateChild(d,r):lM.EMPTY_NODE}if(p.equals(f))s=t;else s=$M(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function FF(e,t){return e.eventCache.isCompleteForChild(t)}function jF(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function UF(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=EL(n)?r:new rF(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=jF(0,t.serverCache.getNode().getImmediateChild(n),r);c=LF(e,c,new mL(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=jF(0,t.serverCache.getNode().getImmediateChild(n),r);c=LF(e,c,new mL(n),h,i,a,o,s)}})),c}var VF,BF=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new SM(i.getIndex()),o=(r=i).loadsAllData()?new SM(r.getIndex()):r.hasLimit()?new EM(r):new IM(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(lM.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(lM.EMPTY_NODE,u.getNode(),null),h=new QM(c,s.isFullyInitialized(),a.filtersNodes()),f=new QM(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=JM(f,h),this.eventGenerator_=new YM(this.query_)}return v(e,[{key:"query",get:function(){return this.query_}}]),e}();function KF(e,t){var n=tF(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!EL(t)&&!n.getImmediateChild(kL(t)).isEmpty())?n.getChild(t):null}function qF(e){return 0===e.eventRegistrations_.length}function zF(e,t,n){var r=[];if(n){Ve(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function WF(e,t,n,r){t.type===UM.MERGE&&null!==t.source.queryId&&(Ve(tF(e.viewCache_),"We should always have a full cache before handling merges"),Ve(eF(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=DF(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ve(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ve(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ve(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,HF(e,s.changes,s.viewCache.eventCache.getNode(),null)}function HF(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),XM(e,i,"child_removed",t,r,n),XM(e,i,"child_added",t,r,n),XM(e,i,"child_moved",a,r,n),XM(e,i,"child_changed",t,r,n),XM(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var GF,QF=v((function e(){d(this,e),this.views=new Map}));function YF(e){return 0===e.views.size}function XF(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ve(null!=a,"SyncTree gave us an op for an invalid query."),WF(a,t,n,r)}var o,s=[],u=Me(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(WF(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function JF(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=_F(n,i?r:null),u=!1;s?u=!0:r instanceof lM?(s=xF(n,r),u=!1):(s=lM.EMPTY_NODE,u=!1);var c=JM(new QM(s,u,!1),new QM(r,i,!1));return new BF(t,c)}return o}function $F(e,t,n,r,i,a){var o=JF(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(iM,(function(e,t){r.push(wM(e,t))})),n.isFullyInitialized()&&r.push(bM(n.getNode())),HF(e,r,n.getNode(),t)}(o,n)}function ZF(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=ij(e);if("default"===i){var u,c=Me(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];o=o.concat(zF(d,n,r)),qF(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(zF(p,n,r)),qF(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!ij(e)&&a.push(new(Ve(VF,"Reference.ts has not been loaded"),VF)(t._repo,t._path)),{removed:a,events:o}}function ej(e){var t,n=[],r=Me(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function tj(e,t){var n,r=null,i=Me(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||KF(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function nj(e,t){if(t._queryParams.loadsAllData())return aj(e);var n=t._queryIdentifier;return e.views.get(n)}function rj(e,t){return null!=nj(e,t)}function ij(e){return null!=aj(e)}function aj(e){var t,n=Me(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var oj=1,sj=v((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new rF(null),this.pendingWriteTree_={visibleWrites:iF.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function uj(e,t,n,r,i){return function(e,t,n,r,i){Ve(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=aF(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?mj(e,new HM({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function cj(e,t,n,r){!function(e,t,n,r){Ve(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=oF(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=rF.fromObject(n);return mj(e,new GM({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function lj(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=gF(e.pendingWriteTree_,t),i=mF(e.pendingWriteTree_,t);if(i){var a=new rF(null);return null!=r.snap?a=a.set(yL(),!0):jO(r.children,(function(e){a=a.set(new mL(e),!0)})),mj(e,new zM(r.path,a,n))}return[]}function hj(e,t,n){return mj(e,new HM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function fj(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||rj(o,t))){var u=ZF(o,t,n,r);YF(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return ij(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=Ej(f),p=0;p<d.length;++p){var v=d[p],g=v.query,m=bj(e,v);e.listenProvider_.startListening(Tj(g),wj(e,g),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){var y=null;e.listenProvider_.stopListening(Tj(t),y)}else c.forEach((function(t){var n=e.queryToTagMap.get(_j(t));e.listenProvider_.stopListening(Tj(t),n)}))}Cj(e,c)}return s}function dj(e,t,n,r){var i=xj(e,r);if(null!=i){var a=Sj(i),o=a.path,s=a.queryId,u=TL(o,t);return Ij(e,o,new HM(KM(s),u,n))}return[]}function pj(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=TL(e,i);a=a||tj(t,n),o=o||ij(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||ij(u),a=a||tj(u,yL())):(u=new QF,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=lM.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=tj(t,yL());n&&(a=a.updateImmediateChild(e,n))}))}var l=rj(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=_j(t);Ve(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Aj();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=vF(e.pendingWriteTree_,i),p=$F(u,t,n,d,a,s);if(!l&&!o&&!r){var v=nj(u,t);p=p.concat(Nj(e,t,v))}return p}function vj(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=tj(n,TL(e,t));if(r)return r}));return wF(r,t,i,n,!0)}function gj(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=TL(e,n);r=r||tj(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||tj(i,yL()):(i=new QF,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new QM(r,!0,!1):null;return function(e){return eF(e.viewCache_)}(JF(i,t,vF(e.pendingWriteTree_,t._path),a?o.getNode():lM.EMPTY_NODE,a))}function mj(e,t){return yj(t,e.syncPointTree_,null,vF(e.pendingWriteTree_,yL()))}function yj(e,t,n,r){if(EL(e.path))return kj(e,t,n,r);var i=t.get(yL());null==n&&null!=i&&(n=tj(i,yL()));var a=[],o=kL(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=CF(r,o);a=a.concat(yj(s,u,c,l))}return i&&(a=a.concat(XF(i,e,r,n))),a}function kj(e,t,n,r){var i=t.get(yL());null==n&&null!=i&&(n=tj(i,yL()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=CF(r,t),u=e.operationForChild(t);u&&(a=a.concat(kj(u,i,o,s)))})),i&&(a=a.concat(XF(i,e,r,n))),a}function bj(e,t){var n=t.query,r=wj(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||lM.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=xj(e,n);if(r){var i=Sj(r),a=i.path,o=i.queryId,s=TL(a,t);return Ij(e,a,new WM(KM(o),s))}return[]}(e,n._path,r):function(e,t){return mj(e,new WM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return fj(e,n,null,i)}}}function wj(e,t){var n=_j(t);return e.queryToTagMap.get(n)}function _j(e){return e._path.toString()+"$"+e._queryIdentifier}function xj(e,t){return e.tagToQueryMap.get(t)}function Sj(e){var t=e.indexOf("$");return Ve(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mL(e.substr(0,t))}}function Ij(e,t,n){var r=e.syncPointTree_.get(t);return Ve(r,"Missing sync point for query tag that we're tracking"),XF(r,n,vF(e.pendingWriteTree_,t),null)}function Ej(e){return e.fold((function(e,t,n){if(t&&ij(t))return[aj(t)];var r=[];return t&&(r=ej(t)),jO(n,(function(e,t){r=r.concat(t)})),r}))}function Tj(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ve(GF,"Reference.ts has not been loaded"),GF)(e._repo,e._path):e}function Cj(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=_j(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function Aj(){return oj++}function Nj(e,t,n){var r=t._path,i=wj(e,t),a=bj(e,n),o=e.listenProvider_.startListening(Tj(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ve(!ij(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!EL(e)&&t&&ij(t))return[aj(t).query];var r=[];return t&&(r=r.concat(ej(t).map((function(e){return e.query})))),jO(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(Tj(l),wj(e,l))}return o}var Pj=function(){function e(t){d(this,e),this.node_=t}return v(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Rj=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return v(e,[{key:"getImmediateChild",value:function(t){var n=IL(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return vj(this.syncTree_,this.path_)}}]),e}(),Dj=function(e,t,n){return e&&"object"===typeof e?(Ve(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Oj(e[".sv"],t,n):"object"===typeof e[".sv"]?Lj(e[".sv"],t):void Ve(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Oj=function(e,t,n){if("timestamp"===e)return n.timestamp;Ve(!1,"Unexpected server value: "+e)},Lj=function(e,t,n){e.hasOwnProperty("increment")||Ve(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ve(!1,"Unexpected increment value: "+r);var i=t.node();if(Ve(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Mj=function(e,t,n,r){return jj(t,new Rj(n,e),r)},Fj=function(e,t,n){return jj(e,new Pj(t),n)};function jj(e,t,n){var r,i=e.getPriority().val(),a=Dj(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Dj(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new eM(s,fM(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new eM(a))),u.forEachChild(iM,(function(e,i){var a=jj(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Uj=v((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function Vj(e,t){for(var n=t instanceof mL?t:new mL(t),r=e,i=kL(n);null!==i;){var a=ft(r.node.children,i)||{children:{},childCount:0};r=new Uj(i,r,a),i=kL(n=wL(n))}return r}function Bj(e){return e.node.value}function Kj(e,t){e.node.value=t,Gj(e)}function qj(e){return e.node.childCount>0}function zj(e,t){jO(e.node.children,(function(n,r){t(new Uj(n,e,r))}))}function Wj(e,t,n,r){n&&!r&&t(e),zj(e,(function(e){Wj(e,t,!0,r)})),n&&r&&t(e)}function Hj(e){return new mL(null===e.parent?e.name:Hj(e.parent)+"/"+e.name)}function Gj(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Bj(e)&&!qj(e)}(n),i=ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Gj(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Gj(e))}(e.parent,e.name,e)}var Qj=/[\[\].#$\/\u0000-\u001F\u007F]/,Yj=/[\[\].#$\u0000-\u001F\u007F]/,Xj=10485760,Jj=function(e){return"string"===typeof e&&0!==e.length&&!Qj.test(e)},$j=function(e){return"string"===typeof e&&0!==e.length&&!Yj.test(e)},Zj=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!NO(e)||e&&"object"===typeof e&&ht(e,".sv")},eU=function(e,t,n,r){r&&void 0===t||tU(It(e,"value"),t,n)},tU=function e(t,n,r){var i=r instanceof mL?new PL(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+DL(i));if("function"===typeof n)throw new Error(t+"contains a function "+DL(i)+" with contents = "+n.toString());if(NO(n))throw new Error(t+"contains "+n.toString()+" "+DL(i));if("string"===typeof n&&n.length>Xj/3&&Ct(n)>Xj)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+DL(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(jO(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Jj(n)))throw new Error(t+" contains an invalid key ("+n+") "+DL(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Ct(u),RL(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ct(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+DL(i)+" in addition to actual children.")}},nU=function(e,t,n,r){if(!r||void 0!==t){var i=It(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];jO(t,(function(e,t){var r=new mL(e);if(tU(i,t,IL(n,r)),".priority"===_L(r)&&!Zj(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=xL(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Jj(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(CL);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&NL(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},rU=function(e,t,n){if(!n||void 0!==t){if(NO(t))throw new Error(It(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zj(t))throw new Error(It(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},iU=function(e,t,n,r){if((!r||void 0!==n)&&!Jj(n))throw new Error(It(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},aU=function(e,t,n,r){if((!r||void 0!==n)&&!$j(n))throw new Error(It(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oU=function(e,t){if(".info"===kL(t))throw new Error(e+" failed = Can't modify data under /.info/")},sU=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Jj(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),$j(e)}(n))throw new Error(It(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},uU=v((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function cU(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||AL(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function lU(e,t,n){cU(e,n),fU(e,(function(e){return AL(e,t)}))}function hU(e,t,n){cU(e,n),fU(e,(function(e){return NL(e,t)||NL(t,e)}))}function fU(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(dU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function dU(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();_O&&IO("event: "+n.toString()),zO(r)}}}var pU="repo_interrupt",vU=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=LM(),this.transactionQueueTree_=new Uj,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return v(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function gU(e,t,n){if(e.stats_=iL(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new DM(e.repoInfo_,(function(t,n,r,i){kU(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return bU(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ML(e.repoInfo_,t,(function(t,n,r,i){kU(e,t,n,r,i)}),(function(t){bU(e,t)}),(function(t){!function(e,t){jO(t,(function(t,n){wU(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return rL[n]||(rL[n]=t()),rL[n]}(e.repoInfo_,(function(){return new BM(e.stats_,e.server_)})),e.infoData_=new OM,e.infoSyncTree_=new sj({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=hj(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),wU(e,"connected",!1),e.serverSyncTree_=new sj({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);hU(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function mU(e){var t=e.infoData_.getNode(new mL(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yU(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:mU(e)})}function kU(e,t,n,r,i){e.dataUpdateCount++;var a=new mL(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=pt(n,(function(e){return fM(e)}));o=function(e,t,n,r){var i=xj(e,r);if(i){var a=Sj(i),o=a.path,s=a.queryId,u=TL(o,t),c=rF.fromObject(n);return Ij(e,o,new GM(KM(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=fM(n);o=dj(e.serverSyncTree_,a,u,i)}else if(r){var c=pt(n,(function(e){return fM(e)}));o=function(e,t,n){var r=rF.fromObject(n);return mj(e,new GM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=fM(n);o=hj(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=DU(e,a)),hU(e.eventQueue_,h,o)}function bU(e,t){wU(e,"connected",t),!1===t&&function(e){CU(e,"onDisconnectEvents");var t=yU(e),n=LM();jM(e.onDisconnect_,yL(),(function(r,i){var a=Mj(r,i,e.serverSyncTree_,t);MM(n,r,a)}));var r=[];jM(n,yL(),(function(t,n){r=r.concat(hj(e.serverSyncTree_,t,n));var i=jU(e,t);DU(e,i)})),e.onDisconnect_=LM(),hU(e.eventQueue_,yL(),r)}(e)}function wU(e,t,n){var r=new mL("/.info/"+t),i=fM(n);e.infoData_.updateSnapshot(r,i);var a=hj(e.infoSyncTree_,r,i);hU(e.eventQueue_,r,a)}function _U(e){return e.nextWriteId_++}function xU(e,t,n,r,i){CU(e,"set",{path:t.toString(),value:n,priority:r});var a=yU(e),o=fM(n,r),s=vj(e.serverSyncTree_,t),u=Fj(o,s,a),c=_U(e),l=uj(e.serverSyncTree_,t,u,c,!0);cU(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||AO("set at "+t+" failed: "+n);var o=lj(e.serverSyncTree_,c,!a);hU(e.eventQueue_,t,o),AU(e,i,n,r)}));var h=jU(e,t);DU(e,h),hU(e.eventQueue_,h,[])}function SU(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&FM(e.onDisconnect_,t),AU(e,n,r,i)}))}function IU(e,t,n,r){var i=fM(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&MM(e.onDisconnect_,t,i),AU(e,r,n,a)}))}function EU(e,t,n){var r;r=".info"===kL(t._path)?fj(e.infoSyncTree_,t,n):fj(e.serverSyncTree_,t,n),lU(e.eventQueue_,t._path,r)}function TU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(pU)}function CU(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];IO.apply(void 0,[t].concat(r))}function AU(e,t,n,r){t&&zO((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function NU(e,t,n){return vj(e.serverSyncTree_,t,n)||lM.EMPTY_NODE}function PU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||FU(e,t),Bj(t)){var n=LU(e,t);Ve(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&RU(e,Hj(t),n)}else qj(t)&&zj(t,(function(t){PU(e,t)}))}function RU(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=NU(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ve(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=TL(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){CU(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(lj(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);FU(e,Vj(e.transactionQueueTree_,t)),PU(e,e.transactionQueueTree_),hU(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)zO(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{AO("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}DU(e,t)}}),o)}function DU(e,t){var n=OU(e,t),r=Hj(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=TL(n,u.path),l=!1,h=void 0;if(Ve(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(lj(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(lj(e.serverSyncTree_,u.currentWriteId,!0));else{var f=NU(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){tU("transaction failed: Data returned ",d,u.path);var p=fM(d);"object"===typeof d&&null!=d&&ht(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,g=yU(e),m=Fj(p,f,g);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=_U(e),o.splice(o.indexOf(v),1),i=(i=i.concat(uj(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(lj(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(lj(e.serverSyncTree_,u.currentWriteId,!0))}hU(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);FU(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)zO(r[c]);PU(e,e.transactionQueueTree_)}(e,LU(e,n),r),r}function OU(e,t){var n,r=e.transactionQueueTree_;for(n=kL(t);null!==n&&void 0===Bj(r);)r=Vj(r,n),n=kL(t=wL(t));return r}function LU(e,t){var n=[];return MU(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function MU(e,t,n){var r=Bj(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);zj(t,(function(t){MU(e,t,n)}))}function FU(e,t){var n=Bj(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Kj(t,n.length>0?n:void 0)}zj(t,(function(t){FU(e,t)}))}function jU(e,t){var n=Hj(OU(e,t)),r=Vj(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){UU(e,t)})),UU(e,r),Wj(r,(function(t){UU(e,t)})),n}function UU(e,t){var n=Bj(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ve(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ve(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(lj(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Kj(t,void 0):n.length=a+1,hU(e.eventQueue_,Hj(t),i);for(var s=0;s<r.length;s++)zO(r[s])}}var VU=function(e,t){var n=BU(e),r=n.namespace;"firebase.com"===n.domain&&CO(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||CO("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&AO("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ZO(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new mL(n.pathString)}},BU=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Me(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):AO("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},KU=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return v(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ct(this.snapshot.exportVal())}}]),e}(),qU=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return v(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),zU=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return v(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),WU=function(){function e(t,n){d(this,e),this._repo=t,this._path=n}return v(e,[{key:"cancel",value:function(){var e=new Qe;return SU(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){oU("OnDisconnect.remove",this._path);var e=new Qe;return IU(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){oU("OnDisconnect.set",this._path),eU("OnDisconnect.set",e,this._path,!1);var t=new Qe;return IU(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){oU("OnDisconnect.setWithPriority",this._path),eU("OnDisconnect.setWithPriority",e,this._path,!1),rU("OnDisconnect.setWithPriority",t,!1);var n=new Qe;return function(e,t,n,r,i){var a=fM(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&MM(e.onDisconnect_,t,a),AU(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){oU("OnDisconnect.update",this._path),nU("OnDisconnect.update",e,this._path,!1);var t=new Qe;return function(e,t,n,r){if(dt(n))return IO("onDisconnect().update() called with empty data.  Don't do anything."),void AU(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&jO(n,(function(n,r){var i=fM(r);MM(e.onDisconnect_,IL(t,n),i)})),AU(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),HU=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return v(e,[{key:"key",get:function(){return EL(this._path)?null:_L(this._path)}},{key:"ref",get:function(){return new XU(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=RM(this._queryParams),t=MO(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return RM(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=At(t))instanceof e))return!1;var n=this._repo===t._repo,r=AL(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function GU(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function QU(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===BL){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==PO)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==RO)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===iM){if(null!=t&&!Zj(t)||null!=n&&!Zj(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ve(e.getIndex()instanceof dM||e.getIndex()===vM,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function YU(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var XU=function(e){m(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,r,new TM,!1)}return v(n,[{key:"parent",get:function(){var e=SL(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(HU),JU=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return v(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new mL(t),r=eV(this.ref,t);return new e(this._node.getChild(n),r,iM)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,eV(n.ref,r),iM))}))}},{key:"hasChild",value:function(e){var t=new mL(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function $U(e,t){return(e=At(e))._checkNotDeleted("ref"),void 0!==t?eV(e._root,t):e._root}function ZU(e,t){(e=At(e))._checkNotDeleted("refFromURL");var n=VU(t,e._repo.repoInfo_.nodeAdmin);sU("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||CO("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),$U(e,n.path.toString())}function eV(e,t){var n,r,i,a;return null===kL((e=At(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),aU(n,r,i,a)):aU("child","path",t,!1),new XU(e._repo,IL(e._path,t))}function tV(e,t){e=At(e),oU("push",e._path),eU("push",t,e._path,!0);var n,r=mU(e._repo),i=mM(r),a=eV(e,i),o=eV(e,i);return n=null!=t?rV(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function nV(e){return oU("remove",e._path),rV(e,null)}function rV(e,t){e=At(e),oU("set",e._path),eU("set",t,e._path,!1);var n=new Qe;return xU(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function iV(e,t){e=At(e),oU("setPriority",e._path),rU("setPriority",t,!1);var n=new Qe;return xU(e._repo,IL(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function aV(e,t,n){if(oU("setWithPriority",e._path),eU("setWithPriority",t,e._path,!1),rU("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Qe;return xU(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function oV(e,t){nU("update",t,e._path,!1);var n=new Qe;return function(e,t,n,r){CU(e,"update",{path:t.toString(),value:n});var i=!0,a=yU(e),o={};if(jO(n,(function(n,r){i=!1,o[n]=Mj(IL(t,n),fM(r),e.serverSyncTree_,a)})),i)IO("update() called with empty data.  Don't do anything."),AU(0,r,"ok",void 0);else{var s=_U(e),u=cj(e.serverSyncTree_,t,o,s);cU(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||AO("update at "+t+" failed: "+n);var o=lj(e.serverSyncTree_,s,!a),u=o.length>0?DU(e,t):t;hU(e.eventQueue_,u,o),AU(0,r,n,i)})),jO(n,(function(n){var r=jU(e,IL(t,n));DU(e,r)})),hU(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function sV(e){e=At(e);var t=new zU((function(){})),n=new uV(t);return function(e,t,n){var r=gj(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=fM(r).withIndex(t._queryParams.getIndex());if(pj(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=hj(e.serverSyncTree_,t._path,a);else{var o=wj(e.serverSyncTree_,t);i=dj(e.serverSyncTree_,t._path,a,o)}return hU(e.eventQueue_,t._path,i),fj(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return CU(e,"get for query "+ct(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new JU(t,new XU(e._repo,e._path),e._queryParams.getIndex())}))}var uV=function(){function e(t){d(this,e),this.callbackContext=t}return v(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new KU("value",this,new JU(e.snapshotNode,new XU(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new qU(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),cV=function(){function e(t,n){d(this,e),this.eventType=t,this.callbackContext=n}return v(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new qU(this,e,t):null}},{key:"createEvent",value:function(e,t){Ve(null!=e.childName,"Child events should have a childName.");var n=eV(new XU(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new KU(e.type,this,new JU(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function lV(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){EU(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new zU(n,a||void 0),c="value"===t?new uV(u):new cV(t,u);return function(e,t,n){var r;r=".info"===kL(t._path)?pj(e.infoSyncTree_,t,n):pj(e.serverSyncTree_,t,n),lU(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return EU(e._repo,e,c)}}function hV(e,t,n,r){return lV(e,"value",t,n,r)}function fV(e,t,n,r){return lV(e,"child_added",t,n,r)}function dV(e,t,n,r){return lV(e,"child_changed",t,n,r)}function pV(e,t,n,r){return lV(e,"child_moved",t,n,r)}function vV(e,t,n,r){return lV(e,"child_removed",t,n,r)}function gV(e,t,n){var r=null,i=n?new zU(n):null;"value"===t?r=new uV(i):t&&(r=new cV(t,i)),EU(e._repo,e,r)}var mV=v((function e(){d(this,e)})),yV=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){eU("endAt",this._value,e._path,!0);var t=AM(e._queryParams,this._value,this._key);if(YU(t),QU(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new HU(e._repo,e._path,t,e._orderByCalled)}}]),n}(mV);function kV(e,t){return iU("endAt","key",t,!0),new yV(e,t)}var bV=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){eU("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===BL?("string"===typeof t&&(t=kM(t)),r=AM(e,t,n)):r=AM(e,t,null==n?PO:kM(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(YU(t),QU(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new HU(e._repo,e._path,t,e._orderByCalled)}}]),n}(mV);function wV(e,t){return iU("endBefore","key",t,!0),new bV(e,t)}var _V=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){eU("startAt",this._value,e._path,!0);var t=CM(e._queryParams,this._value,this._key);if(YU(t),QU(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new HU(e._repo,e._path,t,e._orderByCalled)}}]),n}(mV);function xV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return iU("startAt","key",t,!0),new _V(e,t)}var SV=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){eU("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===BL?("string"===typeof t&&(t=yM(t)),r=CM(e,t,n)):r=CM(e,t,null==n?RO:yM(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(YU(t),QU(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new HU(e._repo,e._path,t,e._orderByCalled)}}]),n}(mV);function IV(e,t){return iU("startAfter","key",t,!0),new SV(e,t)}var EV=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return v(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new HU(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(mV);function TV(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new EV(e)}var CV=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return v(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new HU(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(mV);function AV(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new CV(e)}var NV=function(e){m(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._path=e,r}return v(n,[{key:"_apply",value:function(e){GU(e,"orderByChild");var t=new mL(this._path);if(EL(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new dM(t),r=NM(e._queryParams,n);return QU(r),new HU(e._repo,e._path,r,!0)}}]),n}(mV);function PV(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return aU("orderByChild","path",e,!1),new NV(e)}var RV=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){GU(e,"orderByKey");var t=NM(e._queryParams,BL);return QU(t),new HU(e._repo,e._path,t,!0)}}]),n}(mV);function DV(){return new RV}var OV=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){GU(e,"orderByPriority");var t=NM(e._queryParams,iM);return QU(t),new HU(e._repo,e._path,t,!0)}}]),n}(mV);function LV(){return new OV}var MV=function(e){m(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){GU(e,"orderByValue");var t=NM(e._queryParams,vM);return QU(t),new HU(e._repo,e._path,t,!0)}}]),n}(mV);function FV(){return new MV}var jV=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){if(eU("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yV(this._value,this._key)._apply(new _V(this._value,this._key)._apply(e))}}]),n}(mV);function UV(e,t){return iU("equalTo","key",t,!0),new jV(e,t)}function VV(e){for(var t=At(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){Ve(!VF,"__referenceConstructor has already been defined"),VF=e}(XU),function(e){Ve(!GF,"__referenceConstructor has already been defined"),GF=e}(XU);var BV={},KV=!1;function qV(e,t,n,r){e.repoInfo_=new ZO("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function zV(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||CO("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),IO("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=VU(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=VU(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new QO(QO.OWNER):new GO(e.name,e.options,t);sU("Invalid Firebase Database URL",s),EL(s.path)||CO("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=BV[t.name];i||(i={},BV[t.name]=i);var a=i[e.toURLString()];a&&CO("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new vU(e,KV,n,r),i[e.toURLString()]=a,a}(u,e,l,new HO(e.name,n));return new WV(h,e)}var WV=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return v(e,[{key:"_repo",get:function(){return this._instanceStarted||(gU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new XU(this._repo,yL())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=BV[t];n&&n[e.key]===e||CO("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),TU(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&CO("Cannot call "+e+" on a deleted database.")}}]),e}();function HV(){fL.IS_TRANSPORT_INITIALIZED&&AO("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function GV(){HV(),uL.forceDisallow()}function QV(){HV(),hL.forceDisallow(),uL.forceAllow()}function YV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=At(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&CO("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&CO('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new QO(QO.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Ye(r.mockUserToken,e.app.options.projectId);a=new QO(o)}qV(i,t,n,a)}function XV(e){(e=At(e))._checkNotDeleted("goOffline"),TU(e._repo)}function JV(e){var t;(e=At(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(pU)}function $V(e,t){SO(e,t)}var ZV={".sv":"timestamp"};var eB=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return v(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function tB(e,t,n){var r;if(e=At(e),oU("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Qe,o=hV(e,(function(){}));return function(e,t,n,r,i,a){CU(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:kO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=NU(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{tU("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=Vj(e.transactionQueueTree_,t),h=Bj(l)||[];h.push(o),Kj(l,h),"object"===typeof u&&null!==u&&ht(u,".priority")?(c=ft(u,".priority"),Ve(Zj(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(vj(e.serverSyncTree_,t)||lM.EMPTY_NODE).getPriority().val();var f=yU(e),d=fM(u,c),p=Fj(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=_U(e);var v=uj(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);hU(e.eventQueue_,t,v),PU(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new JU(r,new XU(e._repo,e._path),iM),a.resolve(new eB(n,i)))}),o,i),a.promise}ML.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ML.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){fO(Nn),xn(new Dt("database",(function(e,t){var n=t.instanceIdentifier;return zV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Mn(cO,lO,e),Mn(cO,lO,"esm2017")}();var nB=new Wt("@firebase/database-compat"),rB=function(e){var t="FIREBASE WARNING: "+e;nB.warn(t)},iB=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(It(e,t)+"must be a boolean.")},aB=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(It(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},oB=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"cancel",value:function(e){St("OnDisconnect.cancel",0,1,arguments.length),Et("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){St("OnDisconnect.remove",0,1,arguments.length),Et("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){St("OnDisconnect.set",1,2,arguments.length),Et("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){St("OnDisconnect.setWithPriority",2,3,arguments.length),Et("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(St("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,rB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Et("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),sB=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return v(e,[{key:"toJSON",value:function(){return St("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),uB=function(){function e(t,n){d(this,e),this._database=t,this._delegate=n}return v(e,[{key:"val",value:function(){return St("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return St("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return St("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return St("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return St("DataSnapshot.child",0,1,arguments.length),t=String(t),aU("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return St("DataSnapshot.hasChild",1,1,arguments.length),aU("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return St("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return St("DataSnapshot.forEach",1,1,arguments.length),Et("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return St("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return St("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return St("DataSnapshot.ref",0,0,arguments.length),new lB(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),cB=function(){function e(t,n){d(this,e),this.database=t,this._delegate=n}return v(e,[{key:"on",value:function(t,n,r,i){var a,o=this;St("Query.on",2,4,arguments.length),Et("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new uB(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return hV(this._delegate,u,c),n;case"child_added":return fV(this._delegate,u,c),n;case"child_removed":return vV(this._delegate,u,c),n;case"child_changed":return dV(this._delegate,u,c),n;case"child_moved":return pV(this._delegate,u,c),n;default:throw new Error(It("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(St("Query.off",0,3,arguments.length),aB("Query.off",e,!0),Et("Query.off","callback",t,!0),Tt("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,gV(this._delegate,e,r)}else gV(this._delegate,e)}},{key:"get",value:function(){var e=this;return sV(this._delegate).then((function(t){return new uB(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;St("Query.once",1,4,arguments.length),Et("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new Qe,u=function(e,t){var r=new uB(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":hV(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":fV(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":vV(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":dV(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":pV(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(It("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return St("Query.limitToFirst",1,1,arguments.length),new e(this.database,VV(this._delegate,TV(t)))}},{key:"limitToLast",value:function(t){return St("Query.limitToLast",1,1,arguments.length),new e(this.database,VV(this._delegate,AV(t)))}},{key:"orderByChild",value:function(t){return St("Query.orderByChild",1,1,arguments.length),new e(this.database,VV(this._delegate,PV(t)))}},{key:"orderByKey",value:function(){return St("Query.orderByKey",0,0,arguments.length),new e(this.database,VV(this._delegate,DV()))}},{key:"orderByPriority",value:function(){return St("Query.orderByPriority",0,0,arguments.length),new e(this.database,VV(this._delegate,LV()))}},{key:"orderByValue",value:function(){return St("Query.orderByValue",0,0,arguments.length),new e(this.database,VV(this._delegate,FV()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.startAt",0,2,arguments.length),new e(this.database,VV(this._delegate,xV(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.startAfter",0,2,arguments.length),new e(this.database,VV(this._delegate,IV(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.endAt",0,2,arguments.length),new e(this.database,VV(this._delegate,kV(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return St("Query.endBefore",0,2,arguments.length),new e(this.database,VV(this._delegate,wV(t,n)))}},{key:"equalTo",value:function(t,n){return St("Query.equalTo",1,2,arguments.length),new e(this.database,VV(this._delegate,UV(t,n)))}},{key:"toString",value:function(){return St("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return St("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(St("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new lB(this.database,new XU(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Et(e,"cancel",r.cancel,!0),r.context=n,Tt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(It(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),lB=function(e){m(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,new HU(r._repo,r._path,new TM,!1))).database=e,i._delegate=r,i}return v(n,[{key:"getKey",value:function(){return St("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return St("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,eV(this._delegate,e))}},{key:"getParent",value:function(){St("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return St("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){St("Reference.set",1,2,arguments.length),Et("Reference.set","onComplete",t,!0);var n=rV(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(St("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,rB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oU("Reference.update",this._delegate._path),Et("Reference.update","onComplete",t,!0);var i=oV(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){St("Reference.setWithPriority",2,3,arguments.length),Et("Reference.setWithPriority","onComplete",n,!0);var r=aV(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){St("Reference.remove",0,1,arguments.length),Et("Reference.remove","onComplete",e,!0);var t=nV(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;St("Reference.transaction",1,3,arguments.length),Et("Reference.transaction","transactionUpdate",e,!1),Et("Reference.transaction","onComplete",t,!0),iB("Reference.transaction","applyLocally",n,!0);var i=tB(this._delegate,e,{applyLocally:n}).then((function(e){return new sB(e.committed,new uB(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){St("Reference.setPriority",1,2,arguments.length),Et("Reference.setPriority","onComplete",t,!0);var n=iV(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;St("Reference.push",0,2,arguments.length),Et("Reference.push","onComplete",t,!0);var i=tV(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return oU("Reference.onDisconnect",this._delegate._path),new oB(new WU(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(cB),hB=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:GV,forceLongPolling:QV}}return v(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};YV(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(St("database.ref",0,1,arguments.length),e instanceof lB){var t=ZU(this._delegate,e.toString());return new lB(this,t)}var n=$U(this._delegate,e);return new lB(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";St(t,1,1,arguments.length);var n=ZU(this._delegate,e);return new lB(this,n)}},{key:"goOffline",value:function(){return St("database.goOffline",0,0,arguments.length),XV(this._delegate)}},{key:"goOnline",value:function(){return St("database.goOnline",0,0,arguments.length),JV(this._delegate)}}]),e}();hB.ServerValue={TIMESTAMP:ZV,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var fB=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;fO(r);var u=new Lt("auth-internal",new Ut("database-standalone"));return u.setComponent(new Dt("auth-internal",(function(){return i}),"PRIVATE")),{instance:new hB(zV(t,u,void 0,n,s),t),namespace:a}}}),dB=hB.ServerValue;!function(e){e.INTERNAL.registerComponent(new Dt("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new hB(i,r)}),"PUBLIC").setServiceProps({Reference:lB,Query:cB,Database:hB,DataSnapshot:uB,enableLogging:$V,INTERNAL:fB,ServerValue:dB}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.6")}(or);var pB=function(e){var t=l((0,r.useState)(null),2),n=t[0],i=t[1];console.log("useBackgroundFunc render ran again..."),console.log("instance is: ",e);var a=l((0,r.useState)("transparent"),2),o=a[0],s=a[1],u=l((0,r.useState)("transparent"),2),c=u[0],h=u[1],f=l((0,r.useState)("transparent"),2),d=f[0],p=f[1],v=l((0,r.useState)("transparent"),2),g=v[0],m=v[1];return(0,r.useEffect)((function(){if(e){console.log("instance is: ",e);var t=Zk.collection("to-do-steps").doc(e).onSnapshot(function(){var t=Rt(Nt().mark((function t(n){var r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.id!==e){t.next=3;break}return r=[],t.abrupt("return",new Promise((function(e,t){i(n.data()),console.log("got to usebckgrnd set"),"steps"in n.data()&&(r=n.data(),n.data().steps.length>0?(1===n.data().steps[0]["recipe-number"]&&(s("#ff5440"),h("transparent"),p("transparent"),m("transparent")),2===n.data().steps[0]["recipe-number"]&&(h("#ff5440"),s("transparent"),p("transparent"),m("transparent")),3===n.data().steps[0]["recipe-number"]&&(p("#ff5440"),s("transparent"),h("transparent"),m("transparent")),4===n.data().steps[0]["recipe-number"]&&(m("#ff5440"),s("transparent"),h("transparent"),p("transparent"))):(m("transparent"),s("transparent"),h("transparent"),p("transparent"))),e({to_do_steps:r,background_colour_1:o,background_colour_2:c,background_colour_3:d,background_colour_4:g})})).then((function(e){console.log("todos at background func: ",e)})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){console.log("document id passed, likely not defined"),console.log("error",e)}));return function(){return t()}}}),[e]),{toDos:n,background_colour_1:o,background_colour_2:c,background_colour_3:d,background_colour_4:g}};var vB=function(){var e=(0,r.useRef)(null),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(null),2),o=a[0],s=a[1],u=l((0,r.useState)(null),2),c=u[0],h=u[1],d=l((0,r.useState)(!1),2),p=d[0],v=d[1],g=l((0,r.useState)(0),2),m=g[0],y=g[1],k=l((0,r.useState)(0),2),b=k[0],w=k[1],_=l((0,r.useState)(4),2),x=_[0],S=(_[1],l((0,r.useState)(null),2)),I=(S[0],S[1]),E=l((0,r.useState)([]),2),T=E[0],C=E[1],A=l((0,r.useState)([]),2),N=A[0],P=A[1],R=l((0,r.useState)([]),2),D=R[0],O=R[1],L=l((0,r.useState)([]),2),M=L[0],F=L[1],j=l((0,r.useState)(null),2),U=j[0],V=j[1],B=l((0,r.useState)(null),2),K=B[0],q=B[1],z=l((0,r.useState)(null),2),W=z[0],H=z[1],G=l((0,r.useState)(null),2),Q=G[0],Y=G[1],X=l((0,r.useState)(null),2),J=X[0],$=X[1],Z=l((0,r.useState)(0),2),ee=Z[0],te=Z[1],ne=l((0,r.useState)(0),2),re=ne[0],ie=ne[1],ae=l((0,r.useState)(0),2),oe=ae[0],se=ae[1],ue=l((0,r.useState)(0),2),ce=ue[0],le=ue[1],he=l((0,r.useState)(!1),2),fe=he[0],de=he[1],pe=l((0,r.useState)(!1),2),ve=pe[0],ge=pe[1],me=l((0,r.useState)(!1),2),ye=me[0],ke=me[1],be=l((0,r.useState)(!1),2),we=be[0],_e=be[1],xe=l((0,r.useState)(!1),2),Se=xe[0],Ie=xe[1],Ee=l((0,r.useState)(0),2),Te=Ee[0],Ce=Ee[1],Ae=pB(J).background_colour_1,Ne=pB(J).background_colour_2,Pe=pB(J).background_colour_3,Re=pB(J).background_colour_4,De=l((0,r.useState)([]),2),Oe=(De[0],De[1]),Le=l((0,r.useState)(null),2),Me=Le[0],Fe=Le[1],je=pB(J).toDos,Ue=l((0,r.useState)(0),2),Ve=(Ue[0],Ue[1]),Be=l((0,r.useState)(0),2),Ke=Be[0],qe=Be[1],ze=l((0,r.useState)([]),2),We=ze[0],He=ze[1],Ge=l((0,r.useState)(-1),2),Qe=Ge[0],Ye=Ge[1],Xe=l((0,r.useState)(!1),2),Je=Xe[0],$e=Xe[1],Ze={1:{1:"#FF9F33",2:"#FEC76D",3:"#FEC76D",4:"#FEC76D"},2:{1:"#FEC76D",2:"#FF9F33",3:"#FEC76D",4:"#FEC76D"},3:{1:"#FEC76D",2:"#FEC76D",3:"#FF9F33",4:"#FEC76D"},4:{1:"#FEC76D",2:"#FEC76D",3:"#FEC76D",4:"#FF9F33"}},et=l((0,r.useState)(null),2),tt=et[0],nt=et[1],rt=l((0,r.useState)(!0),2),it=rt[0],at=rt[1];function ot(e,t,n){console.log("======================================="),console.log("TIMER FUNCTION RUNNING"),console.log("======================================="),console.log(typeof e,typeof t,typeof recipe_number),setTimeout((function(){console.log("==========================================="),console.log("TIMER DONE, ABOUT TO RERUN BACKGROUND FUNC"),console.log("==========================================="),function(e,t,n){new Promise(function(){var t=Rt(Nt().mark((function t(r,i){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?Zk.collection("upcoming-recipes").doc(n).get().then((function(t){var i=t.data().info,a=0;if(console.log("recipe number at background type: ",typeof recipe_number),console.log("recipe ID is: ",n),console.log("chosen recipe is: ",n),console.log("recipe steps info at background: ",JSON.stringify(i)),console.log("step is, ",e.toString()),void 0!==t.data()&&void 0!==i){for(;a<i.length;a++)if(i[a]["step-info"]["step-dependency"].includes(e)){console.log("step is: ",e);var o=i[a]["step-info"]["step-dependency"].indexOf(e);console.log("index is: ",o.toString()),o>-1&&(console.log("removed dependency"),i[a]["step-info"]["step-dependency"].splice(o,1))}a===i.length&&(console.log("recipe ".concat(n," deletion of step: ").concat(e)),Zk.collection("upcoming-recipes").doc(n).update({info:i}).then((function(){r()})))}})):r();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(e,0,n)}),1e3*t*60),console.log("timer created for recipe",n,"of",(60*t).toString()," seconds")}return(0,r.useEffect)((function(){window.innerWidth<700&&window.alert("Please use this app on a tablet to avoid design breakages")}),[]),(0,r.useEffect)((function(){je&&"steps"in je&&(0===je.steps.length&&(qe(0),Ve(0)),je.steps.length>0&&0===Ke&&"STOVE-SECONDARY"===o&&(e.current.play(),qe(Ke+1)))}),[je]),(0,r.useEffect)((function(){Se&&Ie(!1),console.log("I re-rendered"),console.log("to do steps: ",je),p?(console.log("running stage complete"),"LOAD"===o?(s("RETRIEVAL"),v(!1),y(1),w(1)):"RETRIEVAL"===o?(s("PREP"),v(!1),y(1),w(1)):"PREP"===o?(s("QUEUE_NEXT_STEP"),v(!1),y(1),w(1)):"QUEUE_NEXT_STEP"===o?(s("OVEN"),v(!1),y(1),w(1)):"OVEN"===o?(s("BASE"),v(!1),y(1),w(1)):"BASE"===o?(s("PRE-HEAT"),v(!1),y(1),w(1)):"PRE-HEAT"===o?(s("STOVE-PRELIM"),v(!1),y(1),w(1)):"STOVE-PRELIM"===o?(s("STOVE-SECONDARY"),v(!1),y(1),w(1)):"STOVE-SECONDARY"===o&&(s("PACKAGE"),v(!1),y(1),w(1))):(console.log("program running"),console.log("stage is: "+o),console.log("instruction stage is: "+m),"LOAD"===o?(console.log("running load func"),Je||($e(!0),new Promise(function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk.collection("to-do-steps").add({steps:[]}).then((function(e){console.log("Document written with ID: ",e.id),s=e.id,$(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),u=e.id,V(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),c=e.id,q(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),l=e.id,H(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Document written with ID: ",e.id),h=e.id,Y(e.id)})).then((function(){Zk.collection("to-do-steps").doc(s).update({upcoming_recipe_1_FBID:u,upcoming_recipe_2_FBID:c,upcoming_recipe_3_FBID:l,upcoming_recipe_4_FBID:h})}))}))}))}))})).then((function(){Zk.collection("recipes_test").doc("1").get().then((function(e){r=e.data()})).then((function(){Zk.collection("recipes_test").doc("2").get().then((function(e){i=e.data()})).then((function(){Zk.collection("recipes_test").doc("3").get().then((function(e){a=e.data()})).then((function(){Zk.collection("recipes_test").doc("4").get().then((function(e){o=e.data()})).then((function(){r&&i&&a&&o&&(nt({1:r,2:i,3:a,4:o}),Oe([u,c,l,h]),v(!0),t())}))}))}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))):"RETRIEVAL"===o?(i(!1),console.log("program chosen: ingredientRetrieval"),console.log("starting ingredient retrieval"),console.log("recipe cycle number: ",b.toString()),m<=tt[b]["retrieval-steps"].length?(console.log("recipe: ",tt[b].name),console.log("instruction stage: ",m.toString()),console.log("instruction: ",tt[b]["retrieval-steps"][m-1].instruction),I(tt[b].name),h(tt[b]["retrieval-steps"][m-1].instruction),Fe(tt[b]["retrieval-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"PREP"===o?(console.log("program chosen: prep"),console.log("starting prep"),m<=tt[b]["prep-steps"].length?(console.log("recipe: ",tt[b].name),I(tt[b].name),h(tt[b]["prep-steps"][m-1].instruction),Fe(tt[b]["prep-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"QUEUE_NEXT_STEP"===o?(function(){var e=setInterval((function(){console.log("queue next step interval ran again..."),console.log("todosteps: ",je);for(var t=1;t<=4;t++)1===t?Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_1_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:or.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_1_FBID).update({info:or.firestore.FieldValue.arrayRemove(e)})}))}()})):2===t?Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_2_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:or.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_2_FBID).update({info:or.firestore.FieldValue.arrayRemove(e)})}))}()})):3===t?Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_3_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:or.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_3_FBID).update({info:or.firestore.FieldValue.arrayRemove(e)})}))}()})):4===t&&Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_4_FBID).get().then((function(t){if("info"in t.data())if(0===t.data().info.length)clearInterval(e);else for(var n=0,r=t.data().info,i=t.data().to_do_steps_instance_FBID;n<r.length;n++)0===r[n]["step-info"]["step-dependency"].length&&function(){var e=r[n];console.log("recipe step: ",JSON.stringify(e)),Zk.collection("to-do-steps").doc(i).update({steps:or.firestore.FieldValue.arrayUnion(e)}).then((function(){Zk.collection("upcoming-recipes").doc(je.upcoming_recipe_4_FBID).update({info:or.firestore.FieldValue.arrayRemove(e)})}))}()}))}),5e3)}(),s("OVEN")):"OVEN"===o?(console.log("program chosen: oven"),console.log("starting oven"),m-2>=0&&tt[b]["oven-steps"].length>=m-2&&0!==tt[b]["oven-steps"].length&&"duration"in tt[b]["oven-steps"][m-2]&&ot(tt[b]["oven-steps"][m-2]["step-number"],tt[b]["oven-steps"][m-2].duration,je["upcoming_recipe_".concat(b,"_FBID")]),m<=tt[b]["oven-steps"].length?(console.log("recipe: ",tt[b].name),I(tt[b].name),h(tt[b]["oven-steps"][m-1].instruction),Fe(tt[b]["oven-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"BASE"===o?(console.log("program chosen: base"),i(!1),console.log("starting base"),m-2>=0&&tt[b]["base-steps"].length>=m-2&&0!==tt[b]["base-steps"].length&&"duration"in tt[b]["base-steps"][m-2]&&ot(tt[b]["base-steps"][m-2]["step-number"],tt[b]["base-steps"][m-2].duration,je["upcoming_recipe_".concat(b,"_FBID")]),m<=tt[b]["base-steps"].length?(console.log("recipe: ",tt[b].name),I(tt[b].name),h(tt[b]["base-steps"][m-1].instruction),Fe(tt[b]["base-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"STOVE-PRELIM"===o?(console.log("program chosen: stove-prelim"),function(){h(null);for(var e=1;e<=Object.keys(tt).length;e++){for(var t=0,n=[];t<tt[e]["stove-steps"].length;t++)n.push({"recipe-number":tt[e]["recipe-number"],"recipe-name":tt[e].name,"step-info":tt[e]["stove-steps"][t]});1===e?(C(n),console.log("recipe 1 write"),Zk.collection("upcoming-recipes").doc(U).set({to_do_steps_instance_FBID:J,info:n})):2===e?(P(n),console.log("recipe 2 write"),Zk.collection("upcoming-recipes").doc(K).set({to_do_steps_instance_FBID:J,info:n})):3===e?(O(n),console.log("recipe 3 write"),Zk.collection("upcoming-recipes").doc(W).set({to_do_steps_instance_FBID:J,info:n})):4===e&&(F(n),console.log("recipe 4 write"),Zk.collection("upcoming-recipes").doc(Q).set({to_do_steps_instance_FBID:J,info:n}))}e===Object.keys(tt).length+1&&(Ce(Te+1),s("STOVE-SECONDARY"))}()):"STOVE-SECONDARY"===o&&(console.log("program chosen: stove-secondary"),console.log("running stove func ")))}),[Se,p,o,m,b,je,Qe]),(0,r.useEffect)((function(){ee>0&&!fe&&function(){var e=ee;console.log("timer func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 1: ",ee.toString()),console.log("setting to now be ",(ee-1).toString()),de(!0),te((function(e){return e-1})),(e-=1)<=0)return te(0),de(!1),clearInterval(t)}),1e3)}()}),[ee]),(0,r.useEffect)((function(){re>0&&!ve&&function(){var e=re;console.log("timer2 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 2: ",re.toString()),console.log("setting to now be ",(re-1).toString()),ge(!0),ie((function(e){return e-1})),(e-=1)<=0)return ie(0),ge(!1),clearInterval(t)}),1e3)}()}),[re]),(0,r.useEffect)((function(){oe>0&&!ye&&function(){var e=oe;console.log("timer3 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 3: ",oe.toString()),console.log("setting to now be ",(oe-1).toString()),ke(!0),se((function(e){return e-1})),(e-=1)<=0)return se(0),ke(!1),clearInterval(t)}),1e3)}()}),[oe]),(0,r.useEffect)((function(){ce>0&&!we&&function(){var e=ce;console.log("timer4 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 4: ",ce.toString()),console.log("setting to now be ",(ce-1).toString()),_e(!0),le((function(e){return e-1})),(e-=1)<=0)return le(0),_e(!1),clearInterval(t)}),1e3)}()}),[ce]),null===o?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:"Please read then press Start button to begin"})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h5",{children:"This model is built on the premise that ALL the ingredients required for ALL of the meals that will be cooked, will already be chopped/grated/sliced/prepared and stored in labelled small storage cases, stored in large walk-in fridges in an industrial kitchen."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"This is done so that the chef can monitor all hobs at the same time, without having to divert their attention to chop and prepare ingredients. With this model the chef will only have to pick up the prepared ingredients and place them into the pot/pan in which the meal is being cooked on the hob - a quick step where the chef's attention is not diverted so that he/she can continue monitoring and cooking the other meals."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"Since you will be using this model at home, and won't have pre-cut and pre-prepared ingredients sitting in labelled and easily accessible storage, you will have to prepare these ingredients yourself and keep them separate (whilst keeping track of which ingredients they are and which meals they are for!)."})]})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:0===m&&0===b&&(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){s("REQUIREMENTS"),i(!0),y(m+1),w(b+1),Ie(!0)},children:" Start"})})})]}):"REQUIREMENTS"===o?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Requirements: "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"You will need: "}),(0,ib.jsxs)(fb,{children:[(0,ib.jsx)(QE,{children:"Small item organiser / 4 large plates (i)"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(QE,{children:"2 Woks/Frying Pans"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(QE,{children:"2 Pots"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(QE,{children:"4 induction hobs"})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){s("LOAD"),i(!0),y(m+1),w(b+1),Ie(!0)},children:"Next"})]}):"LOAD"===o||"RETRIEVAL"===o||"PREP"===o||"OVEN"===o||"BASE"===o?n?(0,ib.jsx)("div",{style:{display:"flex",alignItems:"center","justify-content":"center"},children:(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(JE,{animation:"border"}),(0,ib.jsx)("h2",{children:"Loading Steps..."})]})}):(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h1",{children:["Stage: ",o]})}),(0,ib.jsx)(kb,{children:m>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){Qe>=0?Ye(Qe-1):(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),y(m+1),He((function(e){return[{stage:o,instruction:c}].concat(f(e))})),Ie(!0))},children:"Next"})]})})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(fb,{style:{margin:"0 auto"},children:("RETRIEVAL"===o||"PREP"===o||"OVEN"===o||"BASE"===o)&&(0,ib.jsxs)(vb,{style:{height:"100%"},children:[(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][1],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[1].name]}),1===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:ME,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][2],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[2].name]}),2===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:ME,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][3],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[3].name]}),3===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:ME,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:Ze[b][4],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",tt[4].name]}),4===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:ME,alt:"mixing bowl"})]})]})})}),(0,ib.jsx)(vb,{children:Qe>=0&&We.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Previous Instruction:"}),(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})})]}):"PRE-HEAT"===o?(0,ib.jsx)(fb,{children:(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Pre-Heating "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:["1. Set all stoves to low-medium heat","2. Set oven to low-medium heat"].map((function(e,t){return(0,ib.jsxs)("div",{children:[(0,ib.jsx)(QE,{children:(0,ib.jsxs)("h3",{children:[" ",e," "]},t)}),(0,ib.jsx)("br",{})]})}))}),(0,ib.jsx)(kb,{children:(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){s("STOVE-PRELIM"),y(m+1),w(b+1),Ie(!0)},children:"Next"})})]})]})}):"STOVE-SECONDARY"===o||"STOVE-PRELIM"===o?it?(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(iE,{children:(0,ib.jsx)(kE,{control:(0,ib.jsx)(LE,{checked:!it,onChange:function(){at(!it)},name:"layout_changer"}),label:"Change to Horizontal Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:jE,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",o]})}),(0,ib.jsx)(kb,{children:je&&je.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:o,instruction:je.steps[0]}].concat(f(e))})),je.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",oe.toString()),console.log("Duration 4: ",ce.toString()),1===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),te(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_1_FBID)),2===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),ie(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_2_FBID)),3===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),se(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_3_FBID)),4===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),le(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(je));var e=je.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:or.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(Me))}Ie(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})})]})]}),(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),oe>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",oe/3600>=1?Math.floor(oe/3600):"00",":",59>=oe/60&&oe/60>=1?Math.floor(oe/60):"00",":",59>=oe%60?oe%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[M.length>0?(0,ib.jsx)("h2",{children:M[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})]})]})]})}),(0,ib.jsx)(kb,{lg:5,md:3,sm:3,style:{border:"solid",height:.8*window.innerHeight,margin:"auto"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):je?je.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",je.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",je.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",je.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})})]})]}):(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,ib.jsx)(iE,{children:(0,ib.jsx)(kE,{control:(0,ib.jsx)(LE,{checked:it,onChange:function(){at(!it)},name:"layout_changer"}),label:"Change to Square Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:jE,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",o]})}),(0,ib.jsx)(kb,{children:je&&je.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:o,instruction:je.steps[0]}].concat(f(e))})),je.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",oe.toString()),console.log("Duration 4: ",ce.toString()),1===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),te(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_1_FBID)),2===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),ie(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_2_FBID)),3===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),se(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_3_FBID)),4===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),le(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(je));var e=je.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:or.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(Me))}Ie(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(vb,{lg:1,md:1,sm:1,style:{border:"solid",height:.35*window.innerHeight,margin:"auto",marginBottom:"10px"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):je?je.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",je.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",je.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",je.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})}),(0,ib.jsx)(vb,{lg:1,md:1,children:(0,ib.jsx)(fb,{children:(0,ib.jsxs)(vb,{lg:4,md:4,style:{height:.35*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),oe>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",oe/3600>=1?Math.floor(oe/3600):"00",":",59>=oe/60&&oe/60>=1?Math.floor(oe/60):"00",":",59>=oe%60?oe%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[M.length>0?(0,ib.jsx)("h2",{children:M[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})]})]})})})]})]}):void 0},gB=(n.p,n.p,n.p+"static/media/chopping_board3.31fc193ddeb1e6186456.jpeg");var mB=function(){var e=(0,r.useRef)(null),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(null),2),o=a[0],s=a[1],u=l((0,r.useState)(null),2),c=u[0],h=u[1],d=l((0,r.useState)(!1),2),p=d[0],v=d[1],g=l((0,r.useState)(0),2),m=g[0],y=g[1],k=l((0,r.useState)(0),2),b=k[0],w=k[1],_=l((0,r.useState)(4),2),x=_[0],S=(_[1],l((0,r.useState)(null),2)),I=(S[0],S[1]),E=l((0,r.useState)([]),2),T=E[0],C=E[1],A=l((0,r.useState)([]),2),N=A[0],P=A[1],R=l((0,r.useState)([]),2),D=R[0],O=R[1],L=l((0,r.useState)([]),2),M=L[0],F=L[1],j=l((0,r.useState)(null),2),U=j[0],V=j[1],B=l((0,r.useState)(null),2),K=B[0],q=B[1],z=l((0,r.useState)(null),2),W=z[0],H=z[1],G=l((0,r.useState)(null),2),Q=G[0],Y=G[1],X=l((0,r.useState)(null),2),J=X[0],$=X[1],Z=l((0,r.useState)(0),2),ee=Z[0],te=Z[1],ne=l((0,r.useState)(0),2),re=ne[0],ie=ne[1],ae=l((0,r.useState)(0),2),oe=ae[0],se=ae[1],ue=l((0,r.useState)(0),2),ce=ue[0],le=ue[1],he=l((0,r.useState)(!1),2),fe=he[0],de=he[1],pe=l((0,r.useState)(!1),2),ve=pe[0],ge=pe[1],me=l((0,r.useState)(!1),2),ye=me[0],ke=me[1],be=l((0,r.useState)(!1),2),we=be[0],_e=be[1],xe=l((0,r.useState)(!1),2),Se=xe[0],Ie=xe[1],Ee=l((0,r.useState)(0),2),Te=Ee[0],Ce=Ee[1],Ae=pB(J).background_colour_1,Ne=pB(J).background_colour_2,Pe=pB(J).background_colour_3,Re=pB(J).background_colour_4,De=l((0,r.useState)([]),2),Oe=(De[0],De[1]),Le=l((0,r.useState)(null),2),Me=Le[0],Fe=Le[1],je=pB(J).toDos,Ue=l((0,r.useState)(0),2),Ve=(Ue[0],Ue[1]),Be=l((0,r.useState)(0),2),Ke=Be[0],qe=Be[1],ze=l((0,r.useState)([]),2),We=ze[0],He=ze[1],Ge=l((0,r.useState)(-1),2),Qe=Ge[0],Ye=Ge[1],Xe=l((0,r.useState)(!1),2),Je=Xe[0],$e=Xe[1],Ze=l((0,r.useState)(null),2),et=Ze[0],tt=Ze[1],nt={1:{1:"#FF9F33",2:"#FEC76D",3:"#FEC76D",4:"#FEC76D"},2:{1:"#FEC76D",2:"#FF9F33",3:"#FEC76D",4:"#FEC76D"},3:{1:"#FEC76D",2:"#FEC76D",3:"#FF9F33",4:"#FEC76D"},4:{1:"#FEC76D",2:"#FEC76D",3:"#FEC76D",4:"#FF9F33"}},rt=l((0,r.useState)(!0),2),it=rt[0],at=rt[1];function ot(e,t,n){console.log("======================================="),console.log("TIMER FUNCTION RUNNING"),console.log("======================================="),console.log(typeof e,typeof t,typeof recipe_number),setTimeout((function(){console.log("==========================================="),console.log("TIMER DONE, ABOUT TO RERUN BACKGROUND FUNC"),console.log("==========================================="),function(e,t,n){new Promise(function(){var t=Rt(Nt().mark((function t(r,i){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?Zk.collection("upcoming-recipes").doc(n).get().then((function(t){var i=t.data().info,a=0;if(console.log("recipe number at background type: ",typeof recipe_number),console.log("recipe ID is: ",n),console.log("chosen recipe is: ",n),console.log("recipe steps info at background: ",JSON.stringify(i)),console.log("step is, ",e.toString()),void 0!==t.data()&&void 0!==i){for(;a<i.length;a++)if(i[a]["step-info"]["step-dependency"].includes(e)){console.log("step is: ",e);var o=i[a]["step-info"]["step-dependency"].indexOf(e);console.log("index is: ",o.toString()),o>-1&&(console.log("removed dependency"),i[a]["step-info"]["step-dependency"].splice(o,1))}a===i.length&&Zk.collection("upcoming-recipes").doc(n).update({info:i}).then((function(){r()}))}})):r();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(e,0,n)}),1e3*t*60),console.log("timer created for recipe",n,"of",(60*t).toString()," seconds")}return(0,r.useEffect)((function(){window.innerWidth<700&&window.alert("Please use this app on a tablet to avoid design breakages")}),[]),(0,r.useEffect)((function(){je&&"steps"in je&&(0===je.steps.length&&(qe(0),Ve(0)),je.steps.length>0&&0===Ke&&"STOVE-SECONDARY"===o&&(e.current.play(),qe(Ke+1)))}),[je]),(0,r.useEffect)((function(){Se&&Ie(!1),console.log("I re-rendered"),console.log("to do steps: ",je),p?(console.log("running stage complete"),"LOAD"===o?(s("RETRIEVAL"),v(!1),y(1),w(1)):"RETRIEVAL"===o?(s("PREP"),v(!1),y(1),w(1)):"PREP"===o?(s("QUEUE_NEXT_STEP"),v(!1),y(1),w(1)):"QUEUE_NEXT_STEP"===o?(s("OVEN"),v(!1),y(1),w(1)):"OVEN"===o?(s("BASE"),v(!1),y(1),w(1)):"BASE"===o?(s("PRE-HEAT"),v(!1),y(1),w(1)):"PRE-HEAT"===o?(s("STOVE-PRELIM"),v(!1),y(1),w(1)):"STOVE-PRELIM"===o?(s("STOVE-SECONDARY"),v(!1),y(1),w(1)):"STOVE-SECONDARY"===o&&(s("PACKAGE"),v(!1),y(1),w(1))):(console.log("program running"),console.log("stage is: "+o),console.log("instruction stage is: "+m),"LOAD"===o?(console.log("running load func"),Je||($e(!0),new Promise(function(){var e=Rt(Nt().mark((function e(t,n){var r,i,a,o,s,u,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk.collection("to-do-steps").add({steps:[]}).then((function(e){console.log("To do steps Document written with ID: ",e.id),s=e.id,$(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes1 Document written with ID: ",e.id),u=e.id,V(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes2 Document written with ID: ",e.id),c=e.id,q(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes3 Document written with ID: ",e.id),l=e.id,H(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:s}).then((function(e){console.log("Upcoming recipes4 Document written with ID: ",e.id),h=e.id,Y(e.id)})).then((function(){Zk.collection("to-do-steps").doc(s).update({upcoming_recipe_1_FBID:u,upcoming_recipe_2_FBID:c,upcoming_recipe_3_FBID:l,upcoming_recipe_4_FBID:h})}))}))}))}))})).then((function(){Zk.collection("recipes").doc("1").get().then((function(e){r=e.data()})).then((function(){Zk.collection("recipes").doc("2").get().then((function(e){i=e.data()})).then((function(){Zk.collection("recipes").doc("3").get().then((function(e){a=e.data()})).then((function(){Zk.collection("recipes").doc("4").get().then((function(e){o=e.data()})).then((function(){r&&i&&a&&o&&(tt({1:r,2:i,3:a,4:o}),Oe([U,K,W,Q]),v(!0),t())}))}))}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))):"RETRIEVAL"===o?(i(!1),console.log("program chosen: ingredientRetrieval"),console.log(Q),console.log("starting ingredient retrieval"),console.log("recipe cycle number: ",b.toString()),m<=et[b]["retrieval-steps"].length?(console.log("recipe: ",et[b].name),console.log("instruction stage: ",m.toString()),console.log("instruction: ",et[b]["retrieval-steps"][m-1].instruction),I(et[b].name),h(et[b]["retrieval-steps"][m-1].instruction),Fe(et[b]["retrieval-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"PREP"===o?(console.log("program chosen: prep"),console.log("starting prep"),m<=et[b]["prep-steps"].length?(console.log("recipe: ",et[b].name),I(et[b].name),h(et[b]["prep-steps"][m-1].instruction),Fe(et[b]["prep-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"QUEUE_NEXT_STEP"===o?s("OVEN"):"OVEN"===o?(console.log("program chosen: oven"),console.log("starting oven"),m-2>=0&&et[b]["oven-steps"].length>=m-2&&0!==et[b]["oven-steps"].length&&"duration"in et[b]["oven-steps"][m-2]&&ot(et[b]["oven-steps"][m-2]["step-number"],et[b]["oven-steps"][m-2].duration,je["upcoming_recipe_".concat(b,"_FBID")]),m<=et[b]["oven-steps"].length?(console.log("recipe: ",et[b].name),I(et[b].name),h(et[b]["oven-steps"][m-1].instruction),Fe(et[b]["oven-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"BASE"===o?(console.log("program chosen: base"),i(!1),console.log("starting base"),m-2>=0&&et[b]["base-steps"].length>=m-2&&0!==et[b]["base-steps"].length&&"duration"in et[b]["base-steps"][m-2]&&ot(et[b]["base-steps"][m-2]["step-number"],et[b]["base-steps"][m-2].duration,je["upcoming_recipe_".concat(b,"_FBID")]),m<=et[b]["base-steps"].length?(console.log("recipe: ",et[b].name),I(et[b].name),h(et[b]["base-steps"][m-1].instruction),Fe(et[b]["base-steps"][m-1])):b<x?(w(b+1),y(1)):v(!0)):"STOVE-PRELIM"===o?(console.log("program chosen: stove-prelim"),function(){h(null);for(var e=1;e<=Object.keys(et).length;e++){for(var t=0,n=[];t<et[e]["stove-steps"].length;t++)n.push({"recipe-number":et[e]["recipe-number"],"recipe-name":et[e].name,"step-info":et[e]["stove-steps"][t]});1===e?(C(n),Zk.collection("upcoming-recipes").doc(U).set({to_do_steps_instance_FBID:J,info:n})):2===e?(P(n),Zk.collection("upcoming-recipes").doc(K).set({to_do_steps_instance_FBID:J,info:n})):3===e?(O(n),Zk.collection("upcoming-recipes").doc(W).set({to_do_steps_instance_FBID:J,info:n})):4===e&&(F(n),Zk.collection("upcoming-recipes").doc(Q).set({to_do_steps_instance_FBID:J,info:n}))}e===Object.keys(et).length+1&&(Ce(Te+1),s("STOVE-SECONDARY"))}()):"STOVE-SECONDARY"===o&&console.log("program chosen: stove-secondary"))}),[Se,p,o,m,b,je,Qe]),(0,r.useEffect)((function(){ee>0&&!fe&&function(){var e=ee;console.log("timer func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 1: ",ee.toString()),console.log("setting to now be ",(ee-1).toString()),de(!0),te((function(e){return e-1})),(e-=1)<=0)return te(0),de(!1),clearInterval(t)}),1e3)}()}),[ee]),(0,r.useEffect)((function(){re>0&&!ve&&function(){var e=re;console.log("timer2 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 2: ",re.toString()),console.log("setting to now be ",(re-1).toString()),ge(!0),ie((function(e){return e-1})),(e-=1)<=0)return ie(0),ge(!1),clearInterval(t)}),1e3)}()}),[re]),(0,r.useEffect)((function(){oe>0&&!ye&&function(){var e=oe;console.log("timer3 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 3: ",oe.toString()),console.log("setting to now be ",(oe-1).toString()),ke(!0),se((function(e){return e-1})),(e-=1)<=0)return se(0),ke(!1),clearInterval(t)}),1e3)}()}),[oe]),(0,r.useEffect)((function(){ce>0&&!we&&function(){var e=ce;console.log("timer4 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 4: ",ce.toString()),console.log("setting to now be ",(ce-1).toString()),_e(!0),le((function(e){return e-1})),(e-=1)<=0)return le(0),_e(!1),clearInterval(t)}),1e3)}()}),[ce]),null===o?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:"Please read then press Start button to begin"})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h5",{children:"This model is built on the premise that ALL the ingredients required for ALL of the meals that will be cooked, will already be chopped/grated/sliced/prepared and stored in labelled small storage cases, stored in large walk-in fridges in an industrial kitchen."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"This is done so that the chef can monitor all hobs at the same time, without having to divert their attention to chop and prepare ingredients. With this model the chef will only have to pick up the prepared ingredients and place them into the pot/pan in which the meal is being cooked on the hob - a quick step where the chef's attention is not diverted so that he/she can continue monitoring and cooking the other meals."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"Since you will be using this model at home, and won't have pre-cut and pre-prepared ingredients sitting in labelled and easily accessible storage, you will have to prepare these ingredients yourself and keep them separate (whilst keeping track of which ingredients they are and which meals they are for!)."})]})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(kb,{children:0===m&&0===b&&(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){s("REQUIREMENTS"),i(!0),y(m+1),w(b+1),Ie(!0)},children:" Start"})})})]}):"REQUIREMENTS"===o?(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Requirements: "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("h5",{children:"You will need: "}),(0,ib.jsxs)(fb,{children:[(0,ib.jsx)(QE,{children:"Small item organiser / 4 large plates (i)"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(QE,{children:"2 Woks/Frying Pans"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(QE,{children:"2 Pots"}),(0,ib.jsx)("br",{}),(0,ib.jsx)(QE,{children:"4 induction hobs"})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){s("LOAD"),i(!0),y(m+1),w(b+1),Ie(!0)},children:"Next"})]}):"PRE-HEAT"===o?(0,ib.jsx)(fb,{children:(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:(0,ib.jsx)(kb,{children:(0,ib.jsx)("h1",{children:" Pre-Heating "})})}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:["1. Set all stoves to low-medium heat","2. Set oven to low-medium heat"].map((function(e,t){return(0,ib.jsxs)("div",{children:[(0,ib.jsx)(QE,{children:(0,ib.jsxs)("h3",{children:[" ",e," "]},t)}),(0,ib.jsx)("br",{})]})}))}),(0,ib.jsx)(kb,{children:(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){s("STOVE-PRELIM"),y(m+1),w(b+1),Ie(!0)},children:"Next"})})]})]})}):"LOAD"===o||"RETRIEVAL"===o||"PREP"===o||"OVEN"===o||"BASE"===o?n?(0,ib.jsx)("div",{style:{display:"flex",alignItems:"center","justify-content":"center"},children:(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(JE,{animation:"border"}),(0,ib.jsx)("h2",{children:"Loading Steps..."})]})}):(0,ib.jsxs)("div",{style:{padding:"15px"},children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h1",{children:["Stage: ",o]})}),(0,ib.jsx)(kb,{children:m>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){Qe>=0?Ye(Qe-1):(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),y(m+1),He((function(e){return[{stage:o,instruction:c}].concat(f(e))})),Ie(!0))},children:"Next"})]})})]}),(0,ib.jsx)("br",{}),(0,ib.jsx)(vb,{children:(0,ib.jsx)(fb,{style:{margin:"0 auto"},children:("RETRIEVAL"===o||"PREP"===o||"OVEN"===o||"BASE"===o)&&(0,ib.jsxs)(vb,{style:{height:"100%"},children:[(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][1],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[1].name]}),1===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:gB,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][2],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[2].name]}),2===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:gB,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][3],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[3].name]}),3===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:gB,alt:"mixing bowl"})]}),(0,ib.jsxs)(kb,{style:{height:"100%",backgroundColor:nt[b][4],color:"white"},children:[(0,ib.jsxs)("h3",{children:["Meal: ",et[4].name]}),4===b&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)("br",{}),Qe<0&&(0,ib.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,ib.jsx)("img",{style:{width:.2*window.innerWidth},src:gB,alt:"mixing bowl"})]})]})})})]}):"STOVE-SECONDARY"===o||"STOVE-PRELIM"===o?it?(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(iE,{children:(0,ib.jsx)(kE,{control:(0,ib.jsx)(LE,{checked:!it,onChange:function(){at(!it)},name:"layout_changer"}),label:"Change to Horizontal Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:jE,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",o]})}),(0,ib.jsx)(kb,{children:je&&je.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:o,instruction:je.steps[0]}].concat(f(e))})),je.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",oe.toString()),console.log("Duration 4: ",ce.toString()),1===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),te(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_1_FBID)),2===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),ie(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_2_FBID)),3===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),se(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_3_FBID)),4===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),le(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(je));var e=je.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:or.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(Me))}Ie(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)(fb,{children:[(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})})]})]}),(0,ib.jsxs)(vb,{lg:2,md:2,style:{height:.4*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),oe>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",oe/3600>=1?Math.floor(oe/3600):"00",":",59>=oe/60&&oe/60>=1?Math.floor(oe/60):"00",":",59>=oe%60?oe%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[M.length>0?(0,ib.jsx)("h2",{children:M[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:FE,alt:"black stove"})]})]})]})}),(0,ib.jsx)(kb,{lg:5,md:3,sm:3,style:{border:"solid",height:.8*window.innerHeight,margin:"auto"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):je?je.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",je.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",je.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",je.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})})]})]}):(0,ib.jsxs)(fb,{children:[(0,ib.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,ib.jsx)(iE,{children:(0,ib.jsx)(kE,{control:(0,ib.jsx)(LE,{checked:it,onChange:function(){at(!it)},name:"layout_changer"}),label:"Change to Square Stove Layout"})}),(0,ib.jsx)("audio",{ref:e,src:jE,autoPlay:!0}),(0,ib.jsxs)(vb,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,ib.jsx)(kb,{children:(0,ib.jsxs)("h2",{children:["Stage: ",o]})}),(0,ib.jsx)(kb,{children:je&&je.steps.length>0&&(0,ib.jsxs)("div",{children:[(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),Ye(Qe+1)},children:"Back"}),(0,ib.jsx)(JI,{style:{margin:"10px"},variant:"contained",onClick:function(){if(Qe>=0)Ye(Qe-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),He((function(e){return[{stage:o,instruction:je.steps[0]}].concat(f(e))})),je.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",oe.toString()),console.log("Duration 4: ",ce.toString()),1===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),te(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_1_FBID)),2===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),ie(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_2_FBID)),3===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),se(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_3_FBID)),4===je.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",je.steps[0]["step-info"].duration.toString()),le(60*je.steps[0]["step-info"].duration),ot(je.steps[0]["step-info"]["step-number"],je.steps[0]["step-info"].duration,je.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(je));var e=je.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:or.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(Me))}Ie(!0)}},children:"Next"})]})})]}),(0,ib.jsxs)(vb,{children:[(0,ib.jsx)(vb,{lg:1,md:1,sm:1,style:{border:"solid",height:.35*window.innerHeight,margin:"auto",marginBottom:"10px"},children:Qe>=0?We.length>0&&(0,ib.jsx)("div",{style:{overflowY:"scroll"},children:"STOVE-SECONDARY"===We[Qe].stage?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h4",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h4",{children:["Recipe: ",We[Qe].instruction["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",We[Qe].instruction["step-info"].instruction]})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h3",{children:["Stage: ",We[Qe].stage]}),(0,ib.jsxs)("h3",{children:["Instruction: ",We[Qe].instruction]})]})}):je?je.steps.length>0?(0,ib.jsxs)("div",{children:[(0,ib.jsxs)("h2",{children:["Stove: ",je.steps[0]["recipe-number"]]}),(0,ib.jsxs)("h3",{children:["Meal: ",je.steps[0]["recipe-name"]]}),(0,ib.jsxs)("h4",{children:["Instruction: ",je.steps[0]["step-info"].instruction]}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Stir all pots while awaiting next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]}):(0,ib.jsxs)("div",{children:[(0,ib.jsx)("h3",{children:"Loading next steps..."}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{}),(0,ib.jsx)("br",{})]})}),(0,ib.jsx)(vb,{lg:1,md:1,children:(0,ib.jsx)(fb,{children:(0,ib.jsxs)(vb,{lg:4,md:4,style:{height:.35*window.innerHeight},children:[(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,ib.jsx)("h2",{children:T[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ee>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ee/3600>=1?Math.floor(ee/3600):"00",":",59>=ee/60&&ee/60>=1?Math.floor(ee/60):"00",":",59>=ee%60?ee%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Ne},children:[(0,ib.jsxs)("div",{children:[N.length>0?(0,ib.jsx)("h2",{children:N[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),re>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",re/3600>=1?Math.floor(re/3600):"00",":",59>=re/60&&re/60>=1?Math.floor(re/60):"00",":",59>=re%60?re%60:"00"]}):null]}),(0,ib.jsx)("div",{children:(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Pe},children:[D.length>0?(0,ib.jsx)("h2",{children:D[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),oe>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",oe/3600>=1?Math.floor(oe/3600):"00",":",59>=oe/60&&oe/60>=1?Math.floor(oe/60):"00",":",59>=oe%60?oe%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})]}),(0,ib.jsxs)(kb,{style:{border:"solid",backgroundColor:Re},children:[M.length>0?(0,ib.jsx)("h2",{children:M[0]["recipe-name"]}):(0,ib.jsx)("h2",{children:"Not in Use"}),ce>0?(0,ib.jsxs)("h5",{children:["Waiting for step to finish cooking in ",ce/3600>=1?Math.floor(ce/3600):"00",":",59>=ce/60&&ce/60>=1?Math.floor(ce/60):"00",":",59>=ce%60?ce%60:"00"]}):null,(0,ib.jsx)("img",{style:{width:.2*window.innerWidth*(window.innerHeight/window.innerWidth),height:.2*window.innerHeight},src:FE,alt:"black stove"})]})]})})})]})]}):void 0};var yB=function(){return(0,r.useEffect)((function(){})),(0,ib.jsx)("div",{className:"App",children:(0,ib.jsx)(De,{children:(0,ib.jsxs)(Te,{children:[(0,ib.jsx)(Ie,{path:"/",element:(0,ib.jsx)(bb,{})}),(0,ib.jsx)(Ie,{path:"/demo",element:(0,ib.jsx)(vB,{})}),(0,ib.jsx)(Ie,{path:"/actual",element:(0,ib.jsx)(mB,{})})]})})})},kB=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},bB=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function wB(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.createRoot(document.getElementById("root")).render((0,ib.jsx)(r.StrictMode,{children:(0,ib.jsx)(yB,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");bB?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):wB(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):wB(t,e)}))}}(),kB()}()}();
//# sourceMappingURL=main.8a637076.js.map